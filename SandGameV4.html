<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sand Game JS</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <style>
      /* override xx-large breakpoint */
      @media (min-width: 1400px)  {
          .container {
              max-width: 1140px;
          }
      }
  </style>

  <script defer>/* Sand Game JS; Patrik Harag, https://harag.cz; all rights reserved */ ! function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t((e = "undefined" != typeof globalThis ? globalThis : e || self).SandGameJS = {})
}(this, (function(e) {
            "use strict";
            class t {
                static #e(e) {
                    let t;
                    t = window.innerWidth <= 575 ? window.innerWidth : e.clientWidth;
                    let n = Math.min(1400, t),
                        r = Math.min(800, Math.trunc(.7 * window.innerHeight));
                    return n / r < .75 && (r = Math.trunc(n / .75)), {
                        width: n,
                        height: r
                    }
                }
                static #t() {
                    return navigator.maxTouchPoints || "ontouchstart" in document.documentElement ? 75e3 : window.screen.width >= 2560 && window.screen.height >= 1440 ? 2e5 : window.screen.width >= 2048 && window.screen.height >= 1080 ? 175e3 : window.screen.width >= 1920 && window.screen.height >= 1080 ? 15e4 : 125e3
                }
                static #n(e, t, n) {
                    function r(n) {
                        return Math.trunc(e * n) * Math.trunc(t * n)
                    }
                    return r(.75) > 3 & 1
                }
                static getTypeModifierPowderDirection(e) {
                    return e >> 4 & 1
                }
                static getTypeModifierPowderMomentum(e) {
                    return e >> 5 & 7
                }
                static getTypeModifierSolidSoft(e) {
                    return e >> 3 & 1
                }
                static getTypeModifierSolidBodyId(e) {
                    return e >> 4 & 15
                }
                static getBehaviour(e) {
                    return e >> 8 & 15
                }
                static getSpecial(e) {
                    return e >> 12 & 15
                }
                static getHeatModIndex(e) {
                    return e >> 16 & 255
                }
                static getTemperature(e) {
                    return e >> 24 & 255
                }
                static setType(e, t) {
                    return 4294967040 & e | t
                }
                static setTypeClass(e, t) {
                    return 4294967288 & e | t
                }
                static setTypeModifierPowderSliding(e, t) {
                    return 4294967287 & e | t << 3
                }
                static setTypeModifierPowderDirection(e, t) {
                    return 4294967279 & e | t << 4
                }
                static setTypeModifierPowderMomentum(e, t) {
                    return 4294967071 & e | t << 5
                }
                static setTypeModifierSolidSoft(e, t) {
                    return 4294967287 & e | t << 3
                }
                static setTypeModifierSolidBodyId(e, t) {
                    return 4294967055 & e | t << 4
                }
                static setBehaviour(e, t) {
                    return 4294963455 & e | t << 8
                }
                static setSpecial(e, t) {
                    return 4294905855 & e | t << 12
                }
                static setHeatModIndex(e, t) {
                    return 4278255615 & e | t << 16
                }
                static setTemperature(e, t) {
                    return 16777215 & e | t << 24
                }
                static #r = 16;
                static #s = Array(r.#r);
                static #i({
                    i: e,
                    conductiveIndex: t = .2,
                    heatLossChanceTo10000: n = 2500,
                    flammableChanceTo10000: s = 0,
                    selfIgnitionChanceTo10000: i = 0,
                    flameHeat: a = 0,
                    burnDownChanceTo10000: o = 0,
                    meltingTemperature: l = 256,
                    meltingHMI: h = 0,
                    hardeningTemperature: c = 0,
                    hardeningHMI: d = 0
                }) {
                    const u = Array(10);
                    return u[0] = t, u[1] = n, u[2] = s, u[3] = i, u[4] = a, u[5] = o, u[6] = l, u[7] = h, u[8] = c, u[9] = d, r.#s[e] = u, e
                }
                static HMI_DEFAULT = r.#i({
                    i: 0
                });
                static HMI_CONDUCTIVE_1 = r.#i({
                    i: 1,
                    conductiveIndex: .25,
                    heatLossChanceTo10000: 500
                });
                static HMI_CONDUCTIVE_2 = r.#i({
                    i: 2,
                    conductiveIndex: .3,
                    heatLossChanceTo10000: 20
                });
                static HMI_CONDUCTIVE_3 = r.#i({
                    i: 3,
                    conductiveIndex: .45,
                    heatLossChanceTo10000: 10
                });
                static HMI_GRASS_LIKE = r.#i({
                    i: 4,
                    flammableChanceTo10000: 4500,
                    selfIgnitionChanceTo10000: 3,
                    flameHeat: 165,
                    burnDownChanceTo10000: 1e3
                });
                static HMI_WOOD_LIKE = r.#i({
                    i: 5,
                    flammableChanceTo10000: 100,
                    selfIgnitionChanceTo10000: 2,
                    flameHeat: 165,
                    burnDownChanceTo10000: 2
                });
                static HMI_LEAF_LIKE = r.#i({
                    i: 6,
                    flammableChanceTo10000: 4500,
                    selfIgnitionChanceTo10000: 3,
                    flameHeat: 165,
                    burnDownChanceTo10000: 100
                });
                static HMI_METAL = r.#i({
                    i: 7,
                    conductiveIndex: .45,
                    heatLossChanceTo10000: 10,
                    meltingTemperature: 200,
                    meltingHMI: 8
                });
                static HMI_MOLTEN = r.#i({
                    i: 8,
                    conductiveIndex: .45,
                    heatLossChanceTo10000: 10,
                    hardeningTemperature: 150,
                    hardeningHMI: 7
                });
                static HMI_COAL = r.#i({
                    i: 9,
                    conductiveIndex: .3,
                    heatLossChanceTo10000: 20,
                    flammableChanceTo10000: 500,
                    selfIgnitionChanceTo10000: 3,
                    flameHeat: 190,
                    burnDownChanceTo10000: 50
                });
                static HMI_THERMITE = r.#i({
                    i: 10,
                    conductiveIndex: .45,
                    heatLossChanceTo10000: 10,
                    flammableChanceTo10000: 8e3,
                    selfIgnitionChanceTo10000: 500,
                    flameHeat: 250,
                    burnDownChanceTo10000: 1e3
                });
                static {
                    for (let e = 0; e >> 15, 1 | t), t ^= t + Math.imul(t ^ t >>> 7, 61 | t), ((t ^ t >>> 14) >>> 0) / 4294967296
                }
                #a;
                constructor(e) {
                    this.#a = e
                }
                next() {
                    let e = this.#a += 1831565813;
                    return e = Math.imul(e ^ e >>> 15, 1 | e), e ^= e + Math.imul(e ^ e >>> 7, 61 | e), ((e ^ e >>> 14) >>> 0) / 4294967296
                }
                nextInt(e) {
                    return Math.trunc(this.next() * e)
                }
                getState() {
                    return this.#a
                }
            }
            class i {
                apply(e, t, n = void 0, r = void 0) {
                    throw "Not implemented"
                }
            }
            class a extends i {
                #o;
                constructor(e) {
                    super(), this.#o = e
                }
                apply(e, t, n, r) {
                    if (this.#o.length > 1) {
                        const i = (n || s.DEFAULT).nextInt(this.#o.length);
                        return this.#o[i].apply(e, t, n, r)
                    }
                    if (1 === this.#o.length) {
                        return this.#o[0].apply(e, t, n, r)
                    }
                    return null
                }
            }
            class o extends i {
                #l;
                constructor(e) {
                    super(), this.#l = e
                }
                apply(e, t, n, r) {
                    if (this.#l.length > 1) {
                        const e = (n || s.DEFAULT).nextInt(this.#l.length);
                        return this.#l[e]
                    }
                    return 1 === this.#l.length ? this.#l[0] : null
                }
            }
            class l extends i {
                #h;
                constructor(e) {
                    super(), this.#h = e
                }
                _retrieveElement(e, t, n, r) {
                    return void 0 !== this.#h ? this.#h.apply(e, t, n) : r
                }
            }
            class h {
                static BLUR_TYPE_NONE = 0;
                static BLUR_TYPE_BACKGROUND = 1;
                static BLUR_TYPE_1 = 2;
                static HEAT_EFFECT_NONE = 0;
                static HEAT_EFFECT_1 = 1;
                static HEAT_EFFECT_2 = 2;
                static HEAT_EFFECT_3 = 3;
                static of (e, t, n, r = h.BLUR_TYPE_NONE, s = 0, i = 0) {
                    let a = 0;
                    return a = (a | 3 & s) << 2, a = (a | 3 & i) << 2, a = (a | 3 & r) << 8, a = (a | 255 & e) << 8, a = (a | 255 & t) << 8, a |= 255 & n, a
                }
                static getColorRed(e) {
                    return e >> 16 & 255
                }
                static getColorGreen(e) {
                    return e >> 8 & 255
                }
                static getColorBlue(e) {
                    return 255 & e
                }
                static getBlurType(e) {
                    return e >> 24 & 3
                }
                static getBurntLevel(e) {
                    return e >> 26 & 3
                }
                static getHeatEffect(e) {
                    return e >> 28 & 3
                }
                static setColor(e, t, n, r) {
                    return e = -256 & (e = -65281 & (e = -16711681 & e | t << 16) | n << 8) | r
                }
                static setBlurType(e, t) {
                    return 4244635647 & e | t << 24
                }
                static setBurntLevel(e, t) {
                    return 4093640703 & e | t << 26
                }
            }
            class c extends l {
                #c;
                #d;
                #u;
                constructor(e, t, n, r) {
                    super(r), this.#c = e, this.#d = t, this.#u = n
                }
                apply(e, t, r, s) {
                    const i = this._retrieveElement(e, t, r, s),
                        a = h.setColor(i.elementTail, this.#c, this.#d, this.#u);
                    return new n(i.elementHead, a)
                }
            }
            class d extends l {
                #m;
                constructor(e, t) {
                    super(e), this.#m = "string" == typeof t ? t.split("\n").map((e => e.split(",").map(Number))) : t
                }
                apply(e, t, r, i) {
                    const a = this._retrieveElement(e, t, r, i),
                        o = (r || s.DEFAULT).nextInt(this.#m.length),
                        [l, c, d] = this.#m[o],
                        u = h.setColor(a.elementTail, l, c, d);
                    return new n(a.elementHead, u)
                }
            }
            class u {
                static asImageData(e, t = void 0, n = void 0) {
                    return new Promise(((r, s) => {
                        try {
                            let i = new Image;
                            i.onload = () => {
                                let e = document.createElement("canvas"),
                                    [s, a] = function(e, r) {
                                        let s = e,
                                            i = r;
                                        if (void 0 !== t && s > t) {
                                            const e = s / t;
                                            s = t, i /= e
                                        }
                                        if (void 0 !== n && i > n) {
                                            const e = i / n;
                                            i = n, s /= e
                                        }
                                        return [Math.trunc(s), Math.trunc(i)]
                                    }(i.width, i.height);
                                e.width = s, e.height = a;
                                let o = e.getContext("2d");
                                o.drawImage(i, 0, 0, e.width, e.height);
                                let l = o.getImageData(0, 0, e.width, e.height);
                                r(l)
                            }, i.onerror = () => {
                                s("Cannot load image")
                            }, i.src = e
                        } catch (e) {
                            s(e)
                        }
                    }))
                }
            }
            class m extends l {
                #E = null;
                constructor(e, t) {
                    super(e), u.asImageData(t).then((e => this.#E = e))
                }
                apply(e, t, r, s) {
                    const i = this._retrieveElement(e, t, r, s);
                    if (null != this.#E) {
                        const r = e % this.#E.width,
                            s = 4 * (t % this.#E.height * this.#E.width + r),
                            a = this.#E.data[s],
                            o = this.#E.data[s + 1],
                            l = this.#E.data[s + 2],
                            c = h.setColor(i.elementTail, a, o, l);
                        return new n(i.elementHead, c)
                    }
                    return i
                }
            }
            const E = .5 * (Math.sqrt(3) - 1),
                g = (3 - Math.sqrt(3)) / 6,
                A = e => 0 | Math.floor(e),
                p = new Float64Array([1, 1, -1, 1, 1, -1, -1, -1, 1, 0, -1, 0, 1, 0, -1, 0, 0, 1, 0, -1, 0, 1, 0, -1]);

            function T(e = Math.random) {
                const t = function(e) {
                        const t = 512,
                            n = new Uint8Array(t);
                        for (let e = 0; ep[e % 12 * 2])),
                    r = new Float64Array(t).map((e => p[e % 12 * 2 + 1]));
                return function(e, s) {
                    let i = 0,
                        a = 0,
                        o = 0;
                    const l = (e + s) * E,
                        h = A(e + l),
                        c = A(s + l),
                        d = (h + c) * g,
                        u = e - (h - d),
                        m = s - (c - d);
                    let p, T;
                    u > m ? (p = 1, T = 0) : (p = 0, T = 1);
                    const f = u - p + g,
                        C = m - T + g,
                        R = u - 1 + 2 * g,
                        S = m - 1 + 2 * g,
                        v = 255 & h,
                        w = 255 & c;
                    let I = .5 - u * u - m * m;
                    if (I >= 0) {
                        const e = v + t[w];
                        I *= I, i = I * I * (n[e] * u + r[e] * m)
                    }
                    let O = .5 - f * f - C * C;
                    if (O >= 0) {
                        const e = v + p + t[w + T];
                        O *= O, a = O * O * (n[e] * f + r[e] * C)
                    }
                    let y = .5 - R * R - S * S;
                    if (y >= 0) {
                        const e = v + 1 + t[w + 1];
                        y *= y, o = y * y * (n[e] * R + r[e] * S)
                    }
                    return 70 * (i + a + o)
                }
            }
            class f {
                static isVisualBurnApplicable(e) {
                    const t = r.getTypeClass(e);
                    return t > r.TYPE_FLUID || t === r.TYPE_POWDER_FLOATING
                }
                static visualBurn(e, t = 1, n = 3) {
                    const r = h.getBurntLevel(e);
                    if (r > 2) return e;
                    let s = e,
                        i = r + t;
                    i = Math.min(i, n), i = Math.max(i, 0);
                    const a = i - r;
                    if (a > 0) {
                        s = h.setBurntLevel(s, i);
                        let t = h.getColorRed(e),
                            n = h.getColorGreen(e),
                            r = h.getColorBlue(e),
                            o = 1.8 - .5 * Math.random();
                        a > 1 && (o *= 1.8 - .5 * Math.random()), a > 2 && (o *= 1.8 - .5 * Math.random()), t = Math.trunc(t / o), n = Math.trunc(n / o), r = Math.trunc(r / o), s = h.setColor(s, t, n, r)
                    }
                    return s
                }
                static visualNoiseProvider(e = 0) {
                    if (Array.isArray(e)) {
                        const t = e.map((e => {
                            const t = new s(e);
                            return T((() => t.next()))
                        }));
                        return new C(t)
                    } {
                        const t = new s(e),
                            n = T((() => t.next()));
                        return new C([n])
                    }
                }
            }
            class C {
                #g;
                constructor(e) {
                    this.#g = e
                }
                visualNoise(e, t, n, r = 1, s = .5, i = .1, a = 0, o = 0, l = 0) {
                    let c = ((0, this.#g[0])(t / r, n / r) + 1) / 2;
                    if (ce.seed))): this.#p = f.visualNoiseProvider(t.seed)
        }
        apply(e, t, r, s) {
            const i = this._retrieveElement(e, t, r, s),
                a = this.#A,
                o = this.#c,
                l = this.#d,
                h = this.#u;
            let c;
            if (Array.isArray(a)) c = this.#p.visualNoiseCombined(i.elementTail, e, t, a, o, l, h);
            else {
                const n = a.factor,
                    r = a.threshold,
                    s = a.force;
                c = this.#p.visualNoise(i.elementTail, e, t, n, r, s, o, l, h)
            }
            return new n(i.elementHead, c)
        }
    }
    class S extends l {
        #m;
        #T;
        #f = 0;
        #C = 1;
        #R = 0;
        constructor(e, t, n) {
            super(e), this.#m = t, this.#T = n
        }
        apply(e, t, r, s) {
            const i = this._retrieveElement(e, t, r, s);
            if (0 === this.#m.length) return i;
            const [a, o, l] = this.#m[this.#f];
            this.#m.length > 1 && (this.#R += 1, this.#R >= this.#T && (this.#R = 0, this.#f += this.#C, this.#f < 0 ? (this.#C = 1, this.#f = 1) : this.#f >= this.#m.length && (this.#C = -1, this.#f = this.#m.length - 2)));
            const c = h.setColor(i.elementTail, a, o, l);
            return new n(i.elementHead, c)
        }
    }
    class v extends l {
        #S;
        constructor(e, t) {
            super(e), this.#S = t
        }
        apply(e, t, r, s) {
            const i = this._retrieveElement(e, t, r, s);
            let a = h.getColorRed(i.elementTail),
                o = h.getColorGreen(i.elementTail),
                l = h.getColorBlue(i.elementTail);
            a += r.nextInt(this.#S) * (0 === r.nextInt(2) ? 1 : -1), o += r.nextInt(this.#S) * (0 === r.nextInt(2) ? 1 : -1), l += r.nextInt(this.#S) * (0 === r.nextInt(2) ? 1 : -1), a = Math.max(0, Math.min(255, a)), o = Math.max(0, Math.min(255, o)), l = Math.max(0, Math.min(255, l));
            const c = h.setColor(i.elementTail, a, o, l);
            return new n(i.elementHead, c)
        }
    }
    class w extends i {
        #v;
        constructor(e) {
            super(), this.#v = e
        }
        apply(e, t, n, r) {
            return this.#v(e, t, n, r)
        }
    }
    class I extends i {
        static #w = function(e, t) {
            return !1
        };
        #I;
        #O = 0;
        #y = 0;
        constructor(e = I.#w) {
            super(), this.#I = e
        }
        apply(e, t, n, r) {
            return this.#y++, null !== r && this.#I(r.elementHead, r.elementTail) && this.#O++, null
        }
        getPositives() {
            return this.#O
        }
        getTotal() {
            return this.#y
        }
        reset() {
            this.#y = 0, this.#O = 0
        }
    }
    class O {
        static and(e, t) {
            return function(n, r) {
                return e(n, r) && t(n, r)
            }
        }
        static or(e, t) {
            return function(n, r) {
                return e(n, r) || t(n, r)
            }
        }
        static not(e) {
            return function(t, n) {
                return !e(t, n)
            }
        }
        static TRUE = function(e, t) {
            return !0
        };
        static IS_AIR = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_AIR
        };
        static IS_EFFECT = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_EFFECT
        };
        static IS_GAS = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_GAS
        };
        static IS_FLUID = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_FLUID
        };
        static IS_WATER = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_WATER && r.getTypeClass(e) === r.TYPE_FLUID
        };
        static IS_POWDER = function(e, t) {
            const n = r.getTypeClass(e);
            return n === r.TYPE_POWDER || n === r.TYPE_POWDER_FLOATING || n === r.TYPE_POWDER_WET
        };
        static IS_SAND = function(e, t) {
            return !!O.IS_POWDER(e, t) && (0 === r.getBehaviour(e) && 6 === r.getTypeModifierPowderMomentum(e))
        };
        static IS_SOIL = function(e, t) {
            if (O.IS_POWDER(e, t)) {
                return r.getBehaviour(e) === r.BEHAVIOUR_SOIL
            }
            return !1
        };
        static IS_GRAVEL = function(e, t) {
            return !!O.IS_POWDER(e, t) && (0 === r.getBehaviour(e) && 3 === r.getTypeModifierPowderMomentum(e))
        };
        static IS_STATIC = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_STATIC
        };
        static IS_FISH = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_FISH
        };
        static IS_FISH_PART = function(e, t) {
            const n = r.getBehaviour(e);
            return n === r.BEHAVIOUR_FISH || n === r.BEHAVIOUR_FISH_BODY
        };
        static IS_BIOMASS = function(e, t) {
            const n = r.getBehaviour(e);
            return n === r.BEHAVIOUR_GRASS || n === r.BEHAVIOUR_TREE || n === r.BEHAVIOUR_TREE_LEAF || n === r.BEHAVIOUR_TREE_TRUNK || n === r.BEHAVIOUR_TREE_ROOT || n === r.BEHAVIOUR_FISH || n === r.BEHAVIOUR_FISH_BODY
        };
        static IS_TREE = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_TREE
        }
    }
    class y extends i {
        apply(e, t, s, i) {
            if (null === i) return null;
            const a = r.getHeatModIndex(i.elementHead);
            if (r.hmiToMeltingTemperature(a) < 1 < "" !== e.trim())).map((e => e.split(",").map(Number)))
    }
    static counting(e) {
        return new I(e)
    }
    static custom(e) {
        return new w(e)
    }
    static random(e) {
        let t;
        for (let r of e)
            if (r instanceof n) {
                if (!0 === t) throw "Mixing Element and Brush instances";
                t = !1
            } else {
                if (!(r instanceof i)) throw "Element or Brush instances expected";
                if (!1 === t) throw "Mixing Element and Brush instances";
                t = !0
            } return t ? new a(e) : new o(e)
    }
    static color(e = 0, t = 0, n = 0, r = void 0) {
        return new c(e, t, n, r)
    }
    static colorTexture(e, t = void 0) {
        return new m(t, e)
    }
    static colorPaletteRandom(e, t = void 0) {
        return "string" == typeof e && (e = M.#M(e)), new d(t, e)
    }
    static colorPaletteCyclic(e, t = 1, n = void 0) {
        return "string" == typeof e && (e = M.#M(e)), new S(n, e, t)
    }
    static colorRandomize(e, t = void 0) {
        return new v(t, e)
    }
    static colorNoise(e, t = void 0, n = void 0, r = void 0, s = void 0) {
        return new R(s, e, t, n, r)
    }
    static withIntensity(e, t) {
        return M.custom(((n, r, i, a) => (i || s.DEFAULT).next() null === i ? null : e(i.elementHead, i.elementTail) ? t.apply(n, r, s, i) : null))
    }
    static temperature(e) {
        return M.custom(((t, s, i, a) => {
            if (null === a) return null;
            const o = r.setTemperature(a.elementHead, 255 & e);
            return new n(o, a.elementTail)
        }))
    }
    static temperatureOrBrush(e, t) {
        return M.custom(((s, i, a, o) => {
            if (null === o) return t.apply(s, i, a, null);
            switch (r.getTypeClass(o.elementHead)) {
                case r.TYPE_AIR:
                case r.TYPE_EFFECT:
                    return t.apply(s, i, a, o);
                case r.TYPE_POWDER:
                case r.TYPE_POWDER_WET:
                case r.TYPE_POWDER_FLOATING:
                case r.TYPE_FLUID:
                case r.TYPE_GAS:
                case r.TYPE_STATIC:
                    const l = r.setTemperature(o.elementHead, 255 & e);
                    return new n(l, o.elementTail);
                default:
                    return t.apply(s, i, a, null)
            }
        }))
    }
    static concat(e, t) {
        return M.custom(((n, r, s, i) => {
            const a = e.apply(n, r, s, i),
                o = t.apply(n, r, s, null !== a ? a : i);
            return null !== o ? o : a
        }))
    }
    static join(e) {
        return M.custom(((t, n, r, s) => {
            let i = s;
            for (let s of e) {
                const e = s.apply(t, n, r, i);
                null !== e && (i = e)
            }
            return i
        }))
    }
    static molten() {
        return new y
    }
    static toSolidBody(e, t = void 0) {
        return new b(e, t)
    }
}
class H {
    getWidth() {
        throw "Not implemented"
    }
    getHeight() {
        throw "Not implemented"
    }
}
class N {
    static NOT_DEFINED = new N;
    #H;
    constructor(e = {}) {
        this.#H = e
    }
    derive(e) {
        const t = {};
        return Object.assign(t, this.#H), Object.assign(t, e), new N(t)
    }
    getCategory() {
        return this.#H.category
    }
    getDisplayName() {
        return this.#H.displayName
    }
    getCodeName() {
        return this.#H.codeName
    }
    getBadgeStyle() {
        return this.#H.badgeStyle
    }
}
class D {
    #H;
    constructor(e = N.NOT_DEFINED) {
        this.#H = e
    }
    getInfo() {
        return this.#H
    }
    hasCursor() {
        return !1
    }
    createCursor() {
        return null
    }
    isRepeatingEnabled() {
        return !1
    }
    applyPoint(e, t, n, r) {}
    isLineModeEnabled() {
        return !1
    }
    onDragStart(e, t, n, r) {}
    onDragEnd(e, t, n, r) {}
    applyStroke(e, t, n, r, s, i) {}
    isAreaModeEnabled() {
        return !1
    }
    applyArea(e, t, n, r, s, i) {}
    applySpecial(e, t, n, r) {}
    isSecondaryActionEnabled() {
        return !1
    }
    applySecondaryAction(e, t, n, r) {}
}
class x extends D {
    #N;
    #D;
    constructor(e, t, n) {
        super(e), this.#N = t, this.#D = n
    }
    getBrush() {
        return this.#N
    }
    isLineModeEnabled() {
        return !0
    }
    isAreaModeEnabled() {
        return !0
    }
    isRepeatingEnabled() {
        return !0
    }
    applyPoint(e, t, n, r) {
        this.applyStroke(e, t, e, t, n, r)
    }
    applyStroke(e, t, n, r, s, i) {
        const a = this.#x(i);
        s.drawLine(e, t, n, r, this.#D, a, !0)
    }
    applyArea(e, t, n, r, s, i) {
        const a = this.#x(i);
        s.drawRectangle(e, t, n, r, a)
    }
    applySpecial(e, t, n, r) {
        const s = this.#x(r);
        n.floodFill(e, t, s, 1)
    }
    #x(e) {
        let t = this.#N;
        return e && (t = M.gentle(t)), t
    }
}
class B extends D {
    #N;
    #B = M.conditional(O.IS_STATIC, M.toSolidBody(2));
    #D;
    #U = !1;
    #P = [];
    constructor(e, t, n) {
        super(e), this.#N = t, this.#D = n
    }
    getBrush() {
        return this.#N
    }
    isLineModeEnabled() {
        return !0
    }
    isAreaModeEnabled() {
        return !0
    }
    isRepeatingEnabled() {
        return !1
    }
    applyPoint(e, t, n, r) {}
    applyStroke(e, t, n, r, s, i) {
        const a = this.#x(i);
        s.drawLine(e, t, n, r, this.#D, a, !0)
    }
    applyArea(e, t, n, r, s, i) {
        const a = this.#x(i);
        s.drawRectangle(e, t, n, r, a)
    }
    applySpecial(e, t, n, r) {
        const s = this.#x(r);
        n.floodFill(e, t, s, 1)
    }
    onDragStart(e, t, n, r) {
        this.#U = !0
    }
    onDragEnd(e, t, n, r) {
        this.#U = !1;
        for (const [e, t] of this.#P) n.draw(e, t, this.#B);
        this.#P = []
    }
    #x(e) {
        let t = this.#N;
        return e && (t = M.gentle(t)), this.#U ? M.custom(((e, s, i, a) => {
            const o = t.apply(e, s, i, a);
            if (null !== o) {
                const t = r.setType(o.elementHead, r.TYPE_STATIC);
                return this.#P.push([e, s]), new n(t, o.elementTail)
            }
            return null
        })) : t
    }
}
class U extends D {
    #N;
    constructor(e, t) {
        super(e), this.#N = t
    }
    applyPoint(e, t, n, r) {
        n.draw(e, t, this.#N)
    }
}
class P extends D {
    #L;
    #F;
    constructor(e, t, n) {
        super(e), this.#L = t, this.#F = n
    }
    applyPoint(e, t, n, r) {
        n.draw(e, t, this.#L), n.draw(e + 1, t, this.#F)
    }
}
var L = [{
        entriesCount: 310,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [-1, 17, 1],
            [0, 18, 1],
            [1, 18, 1],
            [2, 18, 1],
            [3, 19, 1],
            [4, 20, 1],
            [5, 21, 2],
            [0, 19, 1],
            [0, 20, 1],
            [0, 21, 1],
            [0, 22, 1],
            [0, 23, 1],
            [-1, 23, 1],
            [-2, 23, 1],
            [-3, 24, 1],
            [-4, 25, 1],
            [-5, 25, 1],
            [-6, 25, 1],
            [-7, 25, 2],
            [0, 24, 1],
            [1, 25, 1],
            [1, 26, 1],
            [1, 27, 1],
            [2, 28, 1],
            [3, 29, 1],
            [4, 30, 1],
            [5, 30, 2],
            [0, 28, 1],
            [0, 29, 1],
            [-1, 30, 1, [
                [-2, 31, 1],
                [-3, 31, 1],
                [-4, 31, 2],
                [-2, 32, 1],
                [-1, 33, 1],
                [-1, 34, 1],
                [0, 35, 1],
                [0, 36, 2]
            ]],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [2, 19, 1],
            [1, 19, 1],
            [1, 20, 1],
            [1, 21, 1],
            [1, 22, 1],
            [1, 23, 1],
            [1, 24, 1],
            [2, 25, 1],
            [2, 26, 1],
            [2, 27, 1],
            [1, 28, 1],
            [1, 29, 1],
            [1, 30, 1],
            [1, 31, 1],
            [2, 32, 1],
            [2, 33, 1],
            [2, 34, 1],
            [3, 34, 1],
            [3, 35, 1],
            [4, 35, 1],
            [5, 35, 1],
            [6, 36, 1, [
                [7, 36, 1],
                [8, 37, 1],
                [8, 38, 2],
                [9, 38, 1],
                [10, 39, 1],
                [11, 39, 1],
                [12, 40, 1],
                [13, 40, 1],
                [14, 40, 1],
                [15, 40, 1],
                [16, 40, 2]
            ]],
            [3, 36, 1],
            [3, 37, 1],
            [4, 38, 1],
            [5, 39, 1, [
                [6, 40, 1],
                [6, 41, 1],
                [6, 42, 1],
                [7, 43, 1],
                [8, 44, 2]
            ]],
            [2, 38, 1, [
                [1, 39, 1],
                [0, 39, 1],
                [-1, 40, 1],
                [-2, 40, 1],
                [-2, 41, 2],
                [-3, 41, 1],
                [-4, 41, 1],
                [-5, 42, 1],
                [-6, 42, 1],
                [-7, 43, 1],
                [-8, 43, 1],
                [-9, 43, 2]
            ]],
            [3, 20, 1],
            [4, 21, 1],
            [5, 21, 2],
            [5, 22, 1],
            [6, 23, 1],
            [7, 24, 1],
            [8, 25, 1],
            [8, 26, 2],
            [9, 26, 1, []],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [-1, 16, 1],
            [-1, 24, 1],
            [-2, 25, 1],
            [-3, 26, 1],
            [-4, 27, 1],
            [-5, 27, 1],
            [-6, 28, 1],
            [-7, 29, 1],
            [-8, 30, 1],
            [-9, 31, 1],
            [-10, 31, 1, [
                [-9, 32, 1],
                [-9, 33, 1],
                [-9, 34, 1],
                [-9, 35, 1],
                [-8, 36, 1],
                [-7, 36, 1],
                [-6, 36, 1],
                [-5, 37, 2],
                [-8, 37, 1],
                [-7, 38, 1],
                [-7, 39, 1],
                [-6, 40, 1],
                [-6, 41, 1],
                [-9, 38, 1],
                [-10, 38, 2]
            ]],
            [9, 27, 1],
            [10, 28, 1],
            [11, 29, 1],
            [12, 30, 1],
            [13, 31, 1],
            [13, 32, 1],
            [14, 33, 2],
            [10, 30, 1],
            [10, 31, 1],
            [9, 32, 1],
            [8, 33, 2],
            [12, 41, 1],
            [12, 42, 1],
            [13, 43, 1],
            [13, 44, 1],
            [13, 45, 1],
            [14, 46, 2],
            [-6, 43, 1],
            [-5, 44, 1],
            [-4, 44, 1],
            [-3, 45, 1],
            [-2, 46, 1],
            [-1, 46, 1],
            [0, 47, 1],
            [1, 48, 1],
            [2, 48, 1],
            [3, 48, 2],
            [-3, 47, 2],
            [-2, -1, 4],
            [-2, 0, 1],
            [-2, 1, 1],
            [-2, 2, 1],
            [-2, 3, 1],
            [-2, 4, 1],
            [-2, 5, 1],
            [-2, 6, 1],
            [-2, 7, 1],
            [-2, 8, 1],
            [-2, 9, 1],
            [-2, 10, 1],
            [-2, 11, 1],
            [-2, 12, 1],
            [-2, 13, 1],
            [-2, 14, 1],
            [-2, 15, 1],
            [-2, 16, 1],
            [-2, 17, 1],
            [-1, 18, 1],
            [-1, 19, 1],
            [-1, 20, 1],
            [-1, 21, 1],
            [-1, 22, 1],
            [-2, 24, 1],
            [-3, 25, 1],
            [-4, 26, 1],
            [-5, 26, 1],
            [-6, 27, 1],
            [-7, 28, 1],
            [-8, 29, 1],
            [-9, 30, 1],
            [-10, 30, 2],
            [-10, 31, 1, [
                [-11, 32, 1],
                [-12, 32, 1],
                [-13, 33, 1],
                [-14, 34, 1],
                [-15, 35, 1],
                [-16, 35, 1],
                [-17, 35, 2],
                [-14, 36, 1],
                [-14, 37, 1],
                [-14, 38, 1],
                [-14, 39, 1],
                [-15, 40, 1],
                [-15, 41, 1],
                [-16, 41, 2],
                [-15, 42, 1],
                [-15, 43, 1, [
                    [-16, 44, 1],
                    [-16, 45, 1],
                    [-15, 45, 1],
                    [-14, 46, 1],
                    [-13, 46, 1],
                    [-12, 47, 1],
                    [-12, 48, 2],
                    [-11, 48, 1],
                    [-10, 49, 1],
                    [-9, 49, 1],
                    [-8, 50, 1],
                    [-7, 51, 1],
                    [-6, 52, 2],
                    [-16, 46, 1],
                    [-16, 47, 1],
                    [-17, 48, 1],
                    [-17, 49, 1],
                    [-18, 50, 2]
                ]]
            ]],
            [4, 39, 1],
            [4, 40, 1],
            [4, 41, 1],
            [4, 42, 1],
            [3, 42, 1],
            [4, 43, 1],
            [5, 44, 1],
            [5, 45, 1],
            [5, 46, 1],
            [6, 47, 1],
            [7, 48, 1],
            [8, 49, 1],
            [8, 50, 2],
            [5, 48, 1, [
                [4, 49, 1],
                [3, 50, 1],
                [2, 51, 1],
                [1, 52, 1],
                [1, 53, 1],
                [0, 53, 2],
                [0, 54, 1],
                [0, 55, 1],
                [0, 56, 1],
                [1, 57, 1],
                [2, 57, 1],
                [3, 57, 1],
                [4, 58, 2],
                [-1, 57, 1],
                [-2, 57, 1],
                [-3, 58, 1],
                [-4, 59, 2]
            ]],
            [2, 43, 2]
        ]
    }, {
        entriesCount: 319,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [0, 18, 1],
            [-1, 18, 1],
            [-2, 18, 1],
            [-3, 19, 1],
            [-4, 20, 1],
            [-5, 21, 2],
            [0, 19, 1],
            [0, 20, 1],
            [0, 21, 1],
            [0, 22, 1],
            [0, 23, 1],
            [1, 23, 1],
            [2, 23, 1],
            [3, 24, 1],
            [4, 25, 1],
            [5, 25, 1],
            [6, 25, 1],
            [7, 25, 2],
            [0, 24, 1],
            [-1, 25, 1],
            [-1, 26, 1],
            [-1, 27, 1],
            [0, 28, 1],
            [0, 29, 1],
            [1, 30, 1, [
                [2, 31, 1],
                [3, 31, 1],
                [4, 31, 2],
                [2, 32, 1],
                [1, 33, 1],
                [1, 34, 1],
                [0, 35, 1],
                [0, 36, 2]
            ]],
            [-2, 28, 1],
            [-3, 29, 1],
            [-4, 30, 1],
            [-5, 30, 2],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [-1, 16, 1],
            [-1, 17, 1],
            [-1, 19, 1],
            [-2, 19, 1],
            [-1, 20, 1],
            [-1, 21, 1],
            [-1, 22, 1],
            [-1, 23, 1],
            [-1, 24, 1],
            [-2, 25, 1],
            [-2, 26, 1],
            [-2, 27, 1],
            [-1, 28, 1],
            [-1, 29, 1],
            [-1, 30, 1],
            [-1, 31, 1],
            [-2, 32, 1],
            [-2, 33, 1],
            [-2, 34, 1],
            [-3, 34, 1],
            [-3, 35, 1],
            [-4, 35, 1],
            [-5, 35, 1],
            [-6, 36, 1, [
                [-7, 36, 1],
                [-8, 37, 1],
                [-9, 38, 1],
                [-9, 39, 2],
                [-10, 39, 1],
                [-11, 39, 1],
                [-12, 40, 1],
                [-13, 40, 1],
                [-14, 40, 1],
                [-15, 40, 1],
                [-16, 40, 2]
            ]],
            [-3, 36, 1],
            [-3, 37, 1],
            [-2, 38, 1, [
                [-1, 39, 1],
                [0, 39, 1],
                [1, 40, 1],
                [2, 40, 1],
                [3, 41, 1],
                [4, 41, 1],
                [5, 42, 1],
                [6, 42, 1],
                [7, 43, 1],
                [8, 43, 1],
                [9, 44, 2],
                [3, 42, 2],
                [-2, 40, 2]
            ]],
            [-4, 38, 1],
            [-5, 39, 1, [
                [-6, 40, 1],
                [-6, 41, 1],
                [-6, 42, 1],
                [-7, 43, 1],
                [-7, 44, 2]
            ]],
            [-3, 20, 1],
            [-4, 21, 1],
            [-5, 21, 2],
            [-5, 22, 1],
            [-6, 23, 1],
            [-7, 24, 1],
            [-8, 25, 1],
            [-8, 26, 2],
            [-9, 26, 1, []],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [1, 18, 1],
            [1, 19, 1],
            [1, 24, 1],
            [2, 25, 1],
            [3, 26, 1],
            [4, 27, 1],
            [5, 27, 1],
            [6, 28, 1],
            [7, 29, 1],
            [8, 30, 1],
            [9, 31, 1],
            [9, 32, 1],
            [9, 33, 1],
            [9, 34, 1],
            [8, 34, 2],
            [9, 35, 1],
            [8, 36, 1],
            [7, 36, 1],
            [6, 36, 1],
            [5, 37, 2],
            [8, 37, 1],
            [9, 38, 1],
            [7, 38, 1],
            [7, 39, 1],
            [6, 40, 1],
            [6, 41, 1],
            [-9, 27, 1],
            [-10, 28, 1],
            [-11, 29, 1],
            [-12, 30, 1],
            [-13, 31, 1],
            [-13, 32, 1],
            [-14, 33, 2],
            [-12, 41, 1],
            [-12, 42, 1],
            [-13, 43, 1],
            [-13, 44, 1],
            [-13, 45, 1],
            [-14, 46, 2],
            [6, 43, 1],
            [5, 44, 1],
            [4, 44, 1],
            [3, 45, 1],
            [2, 45, 1],
            [1, 45, 1],
            [0, 45, 2],
            [1, 46, 1],
            [0, 47, 1],
            [-1, 48, 1],
            [-2, 48, 1],
            [-3, 48, 2],
            [4, 46, 1],
            [5, 47, 2],
            [2, -1, 4],
            [2, 0, 1],
            [2, 1, 1],
            [2, 2, 1],
            [2, 3, 1],
            [2, 4, 1],
            [2, 5, 1],
            [2, 6, 1],
            [2, 7, 1],
            [2, 8, 1],
            [2, 9, 1],
            [2, 10, 1],
            [2, 11, 1],
            [2, 12, 1],
            [2, 13, 1],
            [2, 14, 1],
            [2, 15, 1],
            [2, 16, 1],
            [2, 17, 1],
            [2, 18, 1],
            [2, 19, 1],
            [2, 20, 1],
            [1, 20, 1],
            [1, 21, 1],
            [1, 22, 1],
            [2, 24, 1],
            [3, 25, 1],
            [4, 26, 1],
            [5, 26, 1],
            [6, 27, 1],
            [7, 28, 1],
            [8, 29, 1],
            [9, 30, 1],
            [10, 30, 2],
            [10, 31, 1],
            [11, 32, 1],
            [12, 33, 1],
            [13, 34, 1],
            [14, 35, 1],
            [15, 35, 1],
            [16, 35, 2],
            [14, 36, 1],
            [14, 37, 1],
            [14, 38, 1],
            [14, 39, 1],
            [15, 40, 1],
            [15, 41, 1],
            [16, 41, 2],
            [8, 38, 1],
            [9, 39, 1],
            [10, 40, 1],
            [11, 40, 1],
            [12, 41, 1],
            [12, 42, 1],
            [13, 43, 1],
            [14, 44, 1],
            [15, 45, 1],
            [16, 46, 1],
            [16, 47, 1],
            [17, 48, 1],
            [17, 49, 1],
            [18, 50, 2],
            [14, 46, 1],
            [13, 46, 1],
            [12, 47, 1],
            [12, 48, 2],
            [11, 48, 1],
            [10, 49, 1],
            [9, 49, 1],
            [8, 50, 1],
            [7, 51, 1],
            [6, 52, 2],
            [-4, 39, 1],
            [-5, 39, 1, [
                [-4, 40, 1],
                [-4, 41, 1],
                [-4, 42, 1],
                [-4, 43, 1],
                [-5, 44, 1],
                [-5, 45, 1],
                [-5, 46, 1],
                [-6, 47, 1],
                [-6, 48, 1],
                [-6, 49, 1],
                [-6, 50, 1],
                [-7, 50, 2],
                [-6, 51, 1],
                [-7, 52, 1],
                [-8, 52, 1],
                [-9, 53, 1],
                [-9, 54, 1],
                [-10, 55, 2]
            ]],
            [-2, 49, 1],
            [-2, 50, 1],
            [-2, 51, 1],
            [-2, 52, 1],
            [-1, 53, 1],
            [-1, 54, 1],
            [0, 54, 2],
            [-1, 55, 1],
            [0, 56, 1],
            [1, 56, 1],
            [2, 57, 1],
            [3, 58, 2],
            [-2, 56, 1],
            [-3, 56, 1],
            [-4, 56, 1],
            [-5, 57, 2]
        ]
    }, {
        entriesCount: 269,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [0, 18, 1],
            [0, 19, 1],
            [0, 20, 1, [
                [-1, 20, 1],
                [0, 21, 1],
                [1, 21, 1],
                [2, 22, 1],
                [2, 23, 1],
                [3, 24, 1],
                [3, 25, 1],
                [2, 25, 2],
                [4, 26, 1],
                [5, 27, 1],
                [6, 28, 1],
                [7, 28, 1],
                [8, 29, 1],
                [9, 30, 1],
                [10, 31, 1],
                [11, 32, 2],
                [3, 27, 1],
                [3, 28, 1],
                [3, 29, 1],
                [2, 30, 1],
                [1, 31, 1],
                [0, 31, 2],
                [0, 22, 1],
                [0, 23, 1],
                [-1, 24, 1],
                [-2, 25, 1],
                [-2, 26, 1],
                [-3, 27, 1],
                [-4, 28, 1],
                [-5, 29, 1],
                [-6, 29, 2],
                [-5, 30, 1],
                [-6, 31, 1],
                [-7, 31, 1],
                [-8, 31, 1],
                [-9, 32, 1],
                [-10, 32, 1],
                [-11, 33, 2],
                [-2, 21, 1],
                [-3, 22, 1],
                [-4, 23, 1],
                [-5, 23, 2]
            ]],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [1, 18, 1],
            [1, 19, 1],
            [1, 20, 1],
            [0, 20, 1, [
                [-1, 21, 1],
                [-1, 22, 1],
                [-1, 23, 1]
            ]],
            [-1, 25, 1],
            [-1, 26, 1],
            [-1, 27, 1],
            [-2, 27, 1],
            [-3, 28, 1],
            [-4, 29, 1],
            [0, 28, 1, [
                [1, 29, 1],
                [1, 30, 1],
                [2, 31, 1],
                [3, 32, 1],
                [3, 33, 1],
                [3, 34, 1],
                [4, 35, 1],
                [4, 36, 1],
                [4, 37, 1],
                [3, 37, 2],
                [0, 31, 2]
            ]],
            [-5, 31, 1],
            [-5, 32, 1],
            [-5, 33, 1],
            [-6, 34, 1, [
                [-7, 35, 1],
                [-8, 36, 1],
                [-8, 37, 2],
                [-9, 37, 1],
                [-10, 38, 1],
                [-10, 39, 1],
                [-11, 40, 1],
                [-12, 41, 1],
                [-11, 42, 2]
            ]],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [-1, 16, 1],
            [-1, 17, 1],
            [-1, 18, 1],
            [-1, 19, 1],
            [0, 20, 1, []],
            [2, 21, 1],
            [3, 22, 1],
            [3, 23, 1],
            [4, 24, 1],
            [4, 25, 1],
            [5, 26, 1],
            [6, 27, 1],
            [6, 29, 1],
            [6, 30, 1],
            [7, 31, 1],
            [7, 32, 1],
            [7, 33, 1],
            [8, 34, 1],
            [8, 35, 1],
            [8, 36, 1],
            [8, 37, 1],
            [9, 37, 2],
            [8, 38, 1],
            [8, 39, 1],
            [9, 40, 1],
            [9, 41, 1],
            [9, 42, 1],
            [10, 43, 2],
            [-4, 34, 1],
            [-4, 35, 1],
            [-4, 36, 1],
            [-4, 37, 1],
            [-3, 38, 1],
            [-2, 38, 2],
            [-3, 39, 1],
            [-3, 40, 1],
            [-3, 41, 1],
            [-3, 42, 1],
            [-2, 42, 1],
            [-1, 42, 1],
            [0, 43, 1],
            [1, 43, 1],
            [2, 43, 1],
            [3, 44, 2],
            [-3, 43, 1],
            [-4, 44, 2],
            [2, -1, 4],
            [2, 0, 1],
            [2, 1, 1],
            [2, 2, 1],
            [2, 3, 1],
            [2, 4, 1],
            [-2, 5, 1],
            [-2, 6, 1],
            [-2, 7, 1],
            [-2, 8, 1],
            [-2, 9, 1],
            [-2, 10, 1],
            [-2, 11, 1],
            [-2, 12, 1],
            [2, 13, 1],
            [2, 14, 1],
            [2, 15, 1],
            [2, 16, 1],
            [2, 17, 1],
            [2, 18, 1],
            [2, 19, 1],
            [2, 20, 1],
            [-5, 27, 1],
            [-6, 27, 1],
            [-7, 28, 1],
            [-8, 28, 1],
            [-9, 29, 1],
            [-10, 29, 1],
            [-11, 29, 1],
            [-12, 29, 1],
            [-13, 29, 1],
            [-14, 29, 2],
            [-14, 30, 1],
            [-15, 31, 1],
            [-15, 32, 1],
            [-16, 33, 1],
            [-16, 34, 1],
            [-17, 35, 1],
            [-17, 36, 1],
            [-18, 37, 2],
            [-6, 29, 2],
            [9, 34, 1],
            [10, 35, 1],
            [11, 35, 1],
            [12, 36, 1],
            [13, 37, 1],
            [14, 37, 1],
            [15, 38, 1],
            [16, 38, 1],
            [17, 38, 2],
            [-5, 38, 1],
            [-6, 39, 1],
            [-6, 40, 1],
            [-7, 41, 1],
            [-7, 42, 1],
            [-8, 43, 1],
            [-8, 44, 1],
            [-9, 45, 1],
            [-9, 46, 1],
            [-8, 47, 2],
            [-10, 47, 1],
            [-10, 48, 1],
            [-11, 49, 1],
            [-11, 50, 1],
            [-12, 51, 2],
            [7, 39, 1],
            [7, 40, 1],
            [6, 41, 1],
            [6, 42, 1],
            [6, 43, 1],
            [6, 44, 1],
            [5, 45, 1],
            [5, 46, 1],
            [5, 47, 1],
            [4, 47, 1],
            [5, 48, 1],
            [5, 49, 1],
            [4, 50, 1],
            [3, 51, 2],
            [3, 48, 1],
            [2, 48, 1],
            [1, 48, 1],
            [0, 48, 1],
            [-1, 49, 1],
            [-2, 49, 1],
            [-3, 49, 2]
        ]
    }, {
        entriesCount: 268,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [0, 18, 1],
            [0, 19, 1],
            [0, 20, 1, [
                [1, 20, 1],
                [2, 21, 1],
                [3, 22, 1],
                [4, 23, 1],
                [5, 23, 2],
                [0, 21, 1],
                [-1, 21, 1],
                [0, 22, 1],
                [0, 23, 1],
                [1, 24, 1],
                [2, 25, 1],
                [2, 26, 1],
                [3, 27, 1],
                [4, 28, 1],
                [5, 29, 1],
                [6, 29, 2],
                [5, 30, 1],
                [6, 31, 1],
                [7, 31, 1],
                [8, 31, 1],
                [9, 32, 1],
                [10, 32, 1],
                [11, 33, 2],
                [-2, 22, 1],
                [-2, 23, 1],
                [-3, 24, 1],
                [-3, 25, 1],
                [-2, 25, 2],
                [-4, 26, 1],
                [-3, 27, 1],
                [-3, 28, 1],
                [-3, 29, 1],
                [-2, 30, 1],
                [-1, 31, 1],
                [0, 31, 2],
                [-5, 27, 1],
                [-6, 28, 1],
                [-7, 28, 1],
                [-8, 29, 1],
                [-9, 30, 1],
                [-10, 31, 1],
                [-11, 31, 1],
                [-12, 31, 1],
                [-13, 31, 2]
            ]],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [-1, 16, 1],
            [-1, 17, 1],
            [-1, 18, 1],
            [-1, 19, 1],
            [-1, 20, 1],
            [0, 20, 1, [
                [1, 21, 1],
                [1, 22, 1],
                [1, 23, 1]
            ]],
            [1, 25, 1],
            [1, 26, 1],
            [2, 27, 1],
            [3, 28, 1],
            [4, 29, 1],
            [4, 30, 1],
            [5, 31, 1],
            [5, 32, 1],
            [5, 33, 1],
            [6, 34, 1, [
                [7, 35, 1],
                [8, 36, 1],
                [8, 37, 2],
                [9, 37, 1],
                [10, 38, 1],
                [10, 39, 1],
                [11, 40, 1],
                [12, 41, 2]
            ]],
            [-4, 27, 1],
            [-4, 28, 1],
            [-4, 29, 1],
            [-4, 30, 1],
            [-4, 31, 1],
            [-3, 32, 1],
            [-3, 33, 1],
            [-3, 34, 1],
            [-3, 35, 1],
            [-3, 36, 1],
            [-3, 37, 2],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [1, 18, 1],
            [1, 19, 1],
            [0, 20, 1, []],
            [-2, 21, 1],
            [-3, 22, 1],
            [-3, 23, 1],
            [-4, 24, 1],
            [-4, 25, 1],
            [-5, 26, 1],
            [-6, 27, 1],
            [-6, 29, 1],
            [-6, 30, 1],
            [-7, 31, 1],
            [-7, 32, 1],
            [-7, 33, 1],
            [-8, 34, 1],
            [-8, 35, 1],
            [-8, 36, 1],
            [-8, 37, 1],
            [-9, 37, 2],
            [-8, 38, 1],
            [-8, 39, 1],
            [-9, 40, 1],
            [-9, 41, 1],
            [-9, 42, 1],
            [-10, 43, 2],
            [4, 34, 1],
            [4, 35, 1],
            [4, 36, 1],
            [4, 37, 1],
            [3, 38, 1],
            [2, 38, 2],
            [3, 39, 1],
            [3, 40, 1],
            [3, 41, 1],
            [3, 42, 1],
            [2, 42, 1],
            [1, 42, 1],
            [0, 43, 1],
            [-1, 43, 1],
            [-2, 43, 1],
            [-3, 44, 2],
            [3, 43, 1],
            [4, 44, 2],
            [-2, -1, 4],
            [-2, 0, 1],
            [-2, 1, 1],
            [-2, 2, 1],
            [-2, 3, 1],
            [-2, 4, 1],
            [-2, 5, 1],
            [-2, 6, 1],
            [-2, 7, 1],
            [-2, 8, 1],
            [-2, 9, 1],
            [-2, 10, 1],
            [-2, 11, 1],
            [-2, 12, 1],
            [-2, 13, 1],
            [-2, 14, 1],
            [-2, 15, 1],
            [-2, 16, 1],
            [-2, 17, 1],
            [-2, 18, 1],
            [-2, 19, 1],
            [-2, 20, 1],
            [6, 25, 1],
            [5, 25, 1],
            [4, 25, 1],
            [3, 25, 1],
            [7, 26, 1],
            [8, 26, 1],
            [9, 27, 1],
            [10, 27, 1],
            [11, 27, 2],
            [11, 28, 1],
            [12, 28, 1],
            [13, 29, 1],
            [14, 30, 1],
            [15, 31, 1],
            [16, 31, 2],
            [15, 32, 1],
            [16, 33, 1],
            [16, 34, 1],
            [17, 35, 1],
            [17, 36, 1],
            [17, 37, 2],
            [-9, 34, 1],
            [-10, 35, 1],
            [-11, 35, 1],
            [-12, 36, 1],
            [-13, 37, 1],
            [-14, 37, 1],
            [-15, 38, 1],
            [-16, 39, 2],
            [5, 38, 1],
            [6, 39, 1],
            [6, 40, 1],
            [7, 41, 1],
            [7, 42, 1],
            [8, 43, 1],
            [8, 44, 1],
            [9, 45, 1],
            [9, 46, 1],
            [10, 47, 1],
            [10, 48, 1],
            [11, 49, 1],
            [11, 50, 1],
            [12, 51, 2],
            [8, 47, 2],
            [-7, 39, 1],
            [-7, 40, 1],
            [-6, 41, 1],
            [-6, 42, 1],
            [-6, 43, 1],
            [-6, 44, 1],
            [-5, 45, 1],
            [-5, 46, 1],
            [-5, 47, 1],
            [-5, 48, 1],
            [-4, 49, 1],
            [-3, 49, 1],
            [-2, 49, 1],
            [-1, 49, 1],
            [0, 49, 1],
            [1, 49, 1],
            [2, 49, 2],
            [-4, 50, 1],
            [-5, 51, 2]
        ]
    }, {
        entriesCount: 169,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [0, 18, 1],
            [0, 19, 1],
            [0, 20, 1, [
                [-1, 20, 1],
                [0, 21, 1],
                [1, 21, 1],
                [2, 22, 1],
                [2, 23, 1],
                [3, 24, 1],
                [3, 25, 1],
                [3, 26, 1],
                [4, 27, 1],
                [4, 28, 1],
                [4, 29, 2],
                [0, 22, 1],
                [0, 23, 1],
                [0, 24, 2],
                [-2, 21, 1],
                [-3, 22, 1],
                [-4, 23, 1],
                [-4, 24, 1],
                [-5, 25, 1],
                [-6, 26, 2]
            ]],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [1, 18, 1],
            [1, 19, 1],
            [1, 20, 1],
            [0, 20, 1, [
                [-1, 21, 1],
                [-1, 22, 1],
                [-1, 23, 1],
                [-1, 24, 1],
                [0, 24, 2],
                [-2, 25, 1],
                [-2, 26, 1],
                [-2, 27, 1],
                [-2, 28, 1],
                [-3, 29, 1],
                [-4, 30, 1],
                [-5, 30, 1],
                [-4, 31, 1],
                [-4, 32, 1],
                [-3, 33, 1],
                [-2, 34, 1],
                [-2, 35, 1],
                [-1, 36, 1],
                [0, 36, 1],
                [1, 36, 2],
                [-5, 33, 2],
                [-6, 31, 1],
                [-7, 31, 1],
                [-8, 31, 1],
                [-9, 31, 1],
                [-10, 31, 2]
            ]],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [-1, 16, 1],
            [-1, 17, 1],
            [-1, 18, 1],
            [-1, 19, 1],
            [0, 20, 1, []],
            [-5, 24, 1],
            [-6, 24, 1],
            [-7, 24, 1],
            [-8, 24, 1],
            [-9, 24, 1],
            [-10, 24, 1],
            [-11, 24, 2],
            [6, 25, 1],
            [5, 25, 1],
            [4, 25, 1],
            [7, 26, 1],
            [8, 26, 1],
            [9, 26, 2],
            [-1, 25, 1],
            [-1, 26, 1],
            [-1, 27, 1],
            [-1, 28, 1],
            [0, 28, 1],
            [1, 29, 1],
            [2, 30, 1],
            [3, 31, 1],
            [4, 32, 1],
            [5, 32, 1],
            [6, 33, 1],
            [7, 33, 1],
            [8, 34, 1],
            [9, 34, 2],
            [5, 34, 1],
            [5, 35, 1],
            [5, 36, 1],
            [5, 37, 1],
            [5, 38, 1],
            [6, 39, 2],
            [-1, 29, 1],
            [-1, 30, 1],
            [-1, 31, 1],
            [-1, 32, 1],
            [-1, 33, 1],
            [-1, 34, 1],
            [-1, 35, 1],
            [-3, 35, 1],
            [-4, 36, 1],
            [-5, 37, 1],
            [-6, 38, 1],
            [-7, 39, 2],
            [-1, 37, 1],
            [-1, 38, 1],
            [-1, 39, 1],
            [-1, 40, 1],
            [-2, 40, 1],
            [-1, 41, 1],
            [-1, 42, 2],
            [-3, 41, 1],
            [-4, 42, 1],
            [-5, 42, 1],
            [-6, 43, 1],
            [-7, 43, 2]
        ]
    }, {
        entriesCount: 73,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [-1, 14, 1, [
                [-2, 14, 1],
                [-3, 14, 1],
                [-4, 15, 1],
                [-5, 16, 2],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [0, 18, 1],
                [1, 18, 1, [
                    [2, 18, 1],
                    [3, 19, 1],
                    [4, 20, 1],
                    [5, 20, 2],
                    [0, 19, 1],
                    [-1, 20, 1],
                    [-1, 21, 1],
                    [-1, 22, 1],
                    [0, 23, 1],
                    [0, 24, 1],
                    [1, 25, 1],
                    [2, 26, 1],
                    [3, 26, 1],
                    [4, 26, 2],
                    [-1, 25, 1],
                    [-1, 26, 1],
                    [-1, 27, 1],
                    [-1, 28, 1],
                    [0, 29, 1],
                    [0, 30, 1],
                    [0, 31, 2],
                    [-2, 23, 1],
                    [-3, 24, 1],
                    [-4, 25, 1],
                    [-5, 25, 2]
                ]]
            ]],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [1, 5, 1],
            [1, 6, 1],
            [1, 7, 1],
            [1, 8, 1],
            [1, 9, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [1, 18, 1, []],
            [0, 20, 1],
            [0, 21, 1],
            [0, 22, 1]
        ]
    }, {
        entriesCount: 60,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [0, 8, 1],
            [0, 9, 1],
            [0, 10, 1],
            [0, 11, 1],
            [0, 12, 1],
            [0, 13, 1],
            [0, 14, 1],
            [0, 15, 1],
            [-1, 15, 1],
            [0, 16, 1],
            [0, 17, 1],
            [1, 18, 1],
            [2, 19, 1],
            [3, 20, 1],
            [4, 20, 2],
            [1, 20, 1],
            [0, 21, 1],
            [0, 22, 1],
            [-1, 22, 1],
            [-2, 23, 1],
            [-3, 24, 2],
            [1, 23, 1],
            [2, 24, 1],
            [2, 25, 1],
            [3, 26, 2],
            [-2, 16, 1],
            [-3, 17, 1],
            [-3, 18, 1],
            [-3, 19, 2],
            [1, -1, 4],
            [1, 0, 1],
            [1, 1, 1],
            [1, 2, 1],
            [1, 3, 1],
            [1, 4, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [1, 10, 1],
            [1, 11, 1],
            [1, 12, 1],
            [1, 13, 1],
            [1, 14, 1],
            [1, 15, 1],
            [1, 16, 1],
            [1, 17, 1],
            [0, 18, 1],
            [1, 19, 1]
        ]
    }, {
        entriesCount: 55,
        entries: [
            [0, -1, 4],
            [0, 1, 1],
            [0, 2, 1],
            [0, 3, 1],
            [0, 4, 1],
            [0, 5, 1],
            [0, 6, 1],
            [0, 7, 1],
            [-1, 7, 1],
            [-1, 8, 1],
            [-1, 9, 1],
            [-1, 10, 1],
            [-1, 11, 1],
            [-1, 12, 1],
            [-1, 13, 1],
            [-1, 14, 1],
            [-1, 15, 1],
            [0, 15, 1, [
                [1, 16, 1],
                [2, 17, 1],
                [3, 18, 2],
                [-1, 16, 1],
                [-1, 17, 1],
                [-1, 18, 1],
                [-1, 19, 1],
                [-1, 20, 1],
                [-1, 21, 1],
                [-1, 22, 1],
                [0, 23, 1],
                [1, 24, 1],
                [2, 25, 2],
                [-2, 23, 1],
                [-3, 24, 1],
                [-4, 25, 2]
            ]],
            [-2, 15, 1, [
                [-3, 16, 1],
                [-4, 17, 1],
                [-5, 18, 2]
            ]],
            [-1, -1, 4],
            [-1, 0, 1],
            [-1, 1, 1],
            [-1, 2, 1],
            [-1, 3, 1],
            [-1, 4, 1],
            [-1, 5, 1],
            [-1, 6, 1],
            [-2, 7, 1],
            [-2, 8, 1],
            [-2, 9, 1],
            [-2, 10, 1],
            [-2, 11, 1],
            [-2, 12, 1],
            [-2, 13, 1],
            [-2, 14, 1],
            [-2, 15, 1, []]
        ]
    }],
    F = [{
        entriesCount: 49,
        entries: [
            [1, 0, 3, [
                [2, 0, 3],
                [1, -1, 3],
                [2, -1, 3],
                [3, 0, 3],
                [2, 1, 3],
                [3, -1, 3],
                [3, 1, 3],
                [4, 0, 3],
                [3, -2, 3],
                [3, 2, 3],
                [4, 1, 3],
                [4, -2, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-3, 0, 3],
                [-2, 1, 3],
                [-2, -1, 3],
                [-3, 1, 3],
                [-3, -1, 3],
                [-4, 0, 3],
                [-2, 2, 3],
                [-3, 2, 3],
                [-2, 3, 3]
            ]],
            [0, -1, 3, [
                [-1, -1, 3],
                [0, -2, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [1, -2, 3],
                [-2, -2, 3],
                [-1, -3, 3],
                [1, -3, 3],
                [2, -2, 3],
                [2, -3, 3],
                [3, -3, 3]
            ]],
            [0, 1, 3, [
                [1, 1, 3],
                [-1, 1, 3],
                [0, 2, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [0, 3, 3],
                [2, 2, 3],
                [1, 3, 3],
                [2, 3, 3],
                [1, 4, 3],
                [3, 3, 3],
                [2, 4, 3]
            ]]
        ]
    }, {
        entriesCount: 55,
        entries: [
            [0, -1, 3, [
                [0, -2, 3],
                [-1, -1, 3],
                [0, -3, 3],
                [-1, -2, 3],
                [1, -2, 3],
                [-1, -3, 3],
                [1, -3, 3],
                [-2, -2, 3],
                [2, -2, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-2, -1, 3],
                [-3, 0, 3],
                [-3, -1, 3],
                [-4, 0, 3],
                [-3, 1, 3],
                [-4, -1, 3],
                [-3, -2, 3],
                [-4, 1, 3],
                [-3, 2, 3],
                [-4, -2, 3]
            ]],
            [1, 0, 3, [
                [1, -1, 3],
                [1, 1, 3],
                [2, 0, 3],
                [2, -1, 3],
                [2, 1, 3],
                [3, 0, 3],
                [3, -1, 3],
                [3, 1, 3],
                [4, 0, 3],
                [4, -1, 3],
                [3, -2, 3],
                [4, 1, 3],
                [5, 0, 3],
                [5, -1, 3],
                [4, -2, 3]
            ]],
            [0, 1, 3, [
                [0, 2, 3],
                [-1, 1, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [0, 3, 3],
                [-2, 1, 3],
                [2, 2, 3],
                [1, 3, 3],
                [-2, 2, 3],
                [-1, 3, 3],
                [0, 4, 3],
                [2, 3, 3],
                [3, 2, 3],
                [1, 4, 3],
                [-1, 4, 3],
                [0, 5, 3]
            ]]
        ]
    }, {
        entriesCount: 82,
        entries: [
            [-1, 0, 3, [
                [-2, 0, 3],
                [-2, 1, 3],
                [-3, 0, 3],
                [-3, 1, 3],
                [-4, 0, 3],
                [-3, -1, 3],
                [-4, 1, 3],
                [-4, -1, 3],
                [-5, 0, 3],
                [-5, 1, 3],
                [-4, 2, 3],
                [-5, -1, 3],
                [-4, -2, 3],
                [-6, 0, 3],
                [-5, 2, 3],
                [-6, 1, 3],
                [-4, 3, 3],
                [-5, 3, 3]
            ]],
            [0, 1, 3, [
                [0, 2, 3],
                [-1, 1, 3],
                [1, 1, 3],
                [-1, 2, 3],
                [1, 2, 3],
                [0, 3, 3],
                [-2, 2, 3],
                [-1, 3, 3],
                [1, 3, 3],
                [2, 2, 3],
                [0, 4, 3],
                [-2, 3, 3],
                [-1, 4, 3],
                [1, 4, 3],
                [2, 3, 3],
                [0, 5, 3],
                [3, 3, 3],
                [0, 6, 3],
                [3, 4, 3]
            ]],
            [0, -1, 3, [
                [1, -1, 3],
                [0, -2, 3],
                [-1, -1, 3],
                [1, -2, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [-2, -1, 3],
                [2, -2, 3],
                [1, -3, 3],
                [-1, -3, 3],
                [-2, -2, 3],
                [0, -4, 3],
                [2, -3, 3],
                [-1, -4, 3],
                [-3, -2, 3],
                [3, -3, 3],
                [4, -3, 3]
            ]],
            [1, 0, 3, [
                [2, 0, 3],
                [3, 0, 3],
                [2, 1, 3],
                [2, -1, 3],
                [3, 1, 3],
                [3, -1, 3],
                [4, 0, 3],
                [4, 1, 3],
                [3, 2, 3],
                [4, -1, 3],
                [3, -2, 3],
                [5, 0, 3],
                [4, 2, 3],
                [5, 1, 3],
                [5, -1, 3],
                [4, -2, 3],
                [6, 0, 3],
                [4, 3, 3],
                [6, -1, 3],
                [7, 0, 3],
                [4, 4, 3],
                [7, -1, 3],
                [5, 4, 3],
                [4, 5, 3]
            ]]
        ]
    }, {
        entriesCount: 63,
        entries: [
            [1, 0, 3, [
                [2, 0, 3],
                [2, 1, 3],
                [2, -1, 3],
                [3, 0, 3],
                [3, 1, 3],
                [3, -1, 3],
                [4, 0, 3],
                [4, 1, 3],
                [4, -1, 3],
                [3, -2, 3],
                [5, 0, 3],
                [5, 1, 3],
                [5, -1, 3],
                [6, 0, 3]
            ]],
            [0, -1, 3, [
                [-1, -1, 3],
                [0, -2, 3],
                [1, -1, 3],
                [-2, -1, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [1, -2, 3],
                [-2, -2, 3],
                [-1, -3, 3],
                [1, -3, 3],
                [2, -2, 3],
                [-3, -2, 3],
                [2, -3, 3]
            ]],
            [0, 1, 3, [
                [1, 1, 3],
                [-1, 1, 3],
                [0, 2, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [0, 3, 3],
                [2, 2, 3],
                [1, 3, 3],
                [-1, 3, 3],
                [-2, 2, 3],
                [3, 2, 3],
                [-2, 3, 3],
                [-1, 4, 3],
                [-3, 2, 3],
                [-3, 3, 3],
                [-2, 4, 3],
                [-4, 2, 3],
                [-4, 3, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-2, 1, 3],
                [-3, 0, 3],
                [-3, 1, 3],
                [-3, -1, 3],
                [-4, 0, 3],
                [-4, 1, 3],
                [-4, -1, 3],
                [-5, 0, 3],
                [-5, 1, 3],
                [-5, -1, 3],
                [-6, 0, 3],
                [-6, 1, 3],
                [-5, 2, 3]
            ]]
        ]
    }, {
        entriesCount: 48,
        entries: [
            [-1, 0, 3, [
                [-1, -1, 3],
                [-2, 0, 3],
                [-2, -1, 3],
                [-3, 0, 3],
                [-3, -1, 3],
                [-4, 0, 3],
                [-3, 1, 3],
                [-4, -1, 3],
                [-3, -2, 3],
                [-4, 1, 3],
                [-3, -3, 3]
            ]],
            [0, -1, 3, [
                [1, -1, 3],
                [0, -2, 3],
                [1, -2, 3],
                [0, -3, 3],
                [-1, -2, 3],
                [2, -2, 3],
                [0, -4, 3],
                [-1, -3, 3],
                [-2, -2, 3],
                [2, -3, 3],
                [-1, -4, 3],
                [-2, -3, 3]
            ]],
            [0, 1, 3, [
                [0, 2, 3],
                [-1, 1, 3],
                [1, 2, 3],
                [0, 3, 3],
                [-1, 2, 3],
                [-2, 1, 3],
                [-1, 3, 3],
                [-2, 2, 3],
                [-3, 2, 3]
            ]],
            [1, 0, 3, [
                [1, 1, 3],
                [2, 0, 3],
                [2, 1, 3],
                [3, 0, 3],
                [2, -1, 3],
                [3, 1, 3],
                [2, 2, 3],
                [4, 0, 3],
                [3, -1, 3],
                [4, 1, 3],
                [3, 2, 3],
                [5, 1, 3]
            ]]
        ]
    }, {
        entriesCount: 57,
        entries: [
            [0, 1, 3, [
                [1, 1, 3],
                [0, 2, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [0, 3, 3],
                [1, 3, 3],
                [2, 2, 3],
                [-1, 3, 3],
                [0, 4, 3],
                [2, 3, 3],
                [1, 4, 3],
                [-1, 4, 3],
                [-2, 3, 3],
                [0, 5, 3],
                [3, 3, 3],
                [2, 4, 3],
                [-1, 5, 3],
                [3, 4, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-1, -1, 3],
                [-1, 1, 3],
                [-2, 1, 3],
                [-3, 0, 3],
                [-2, -1, 3],
                [-2, 2, 3],
                [-3, 1, 3],
                [-3, -1, 3],
                [-2, -2, 3]
            ]],
            [0, -1, 3, [
                [0, -2, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [1, -2, 3],
                [-1, -3, 3],
                [1, -3, 3],
                [0, -4, 3],
                [-1, -4, 3],
                [-2, -3, 3],
                [2, -3, 3],
                [1, -4, 3],
                [0, -5, 3],
                [-2, -4, 3],
                [-1, -5, 3],
                [3, -3, 3],
                [2, -4, 3],
                [1, -5, 3],
                [3, -4, 3]
            ]],
            [1, 0, 3, [
                [1, -1, 3],
                [2, 0, 3],
                [2, -1, 3],
                [3, 0, 3],
                [2, 1, 3],
                [2, -2, 3],
                [3, 1, 3]
            ]]
        ]
    }, {
        entriesCount: 86,
        entries: [
            [0, 1, 3, [
                [0, 2, 3],
                [-1, 1, 3],
                [0, 3, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [1, 3, 3],
                [-1, 3, 3],
                [2, 2, 3],
                [-2, 2, 3],
                [2, 3, 3],
                [-2, 3, 3],
                [-3, 2, 3]
            ]],
            [1, 0, 3, [
                [1, 1, 3],
                [2, 0, 3],
                [2, 1, 3],
                [3, 0, 3],
                [3, 1, 3],
                [3, -1, 3],
                [4, 0, 3],
                [4, 1, 3],
                [3, 2, 3],
                [4, -1, 3],
                [5, 0, 3],
                [4, 2, 3],
                [4, -2, 3],
                [5, -1, 3],
                [5, -2, 3],
                [4, -3, 3],
                [6, -1, 3],
                [5, -3, 3],
                [6, -2, 3],
                [4, -4, 3],
                [7, -1, 3],
                [6, -3, 3],
                [5, -4, 3],
                [7, -2, 3],
                [4, -5, 3],
                [5, -5, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-1, -1, 3],
                [-3, 0, 3],
                [-2, 1, 3],
                [-2, -1, 3],
                [-4, 0, 3],
                [-3, -1, 3],
                [-3, 1, 3],
                [-2, -2, 3],
                [-4, 1, 3],
                [-4, -1, 3],
                [-3, -2, 3],
                [-4, -2, 3],
                [-3, -3, 3],
                [-4, -3, 3],
                [-5, -2, 3],
                [-4, -4, 3],
                [-5, -3, 3],
                [-5, -4, 3],
                [-6, -3, 3],
                [-6, -4, 3]
            ]],
            [0, -1, 3, [
                [1, -1, 3],
                [0, -2, 3],
                [1, -2, 3],
                [2, -1, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [1, -3, 3],
                [2, -2, 3],
                [-1, -3, 3],
                [1, -4, 3],
                [2, -3, 3],
                [3, -2, 3],
                [-1, -4, 3],
                [-2, -3, 3],
                [2, -4, 3],
                [3, -3, 3],
                [-2, -4, 3],
                [-1, -5, 3],
                [2, -5, 3],
                [-2, -5, 3],
                [-3, -4, 3],
                [-3, -5, 3],
                [-2, -6, 3]
            ]]
        ]
    }, {
        entriesCount: 41,
        entries: [
            [1, 0, 3, [
                [2, 0, 3],
                [1, 1, 3],
                [3, 0, 3],
                [2, 1, 3],
                [2, -1, 3],
                [3, 1, 3],
                [3, -1, 3],
                [4, 0, 3],
                [2, 2, 3],
                [4, 1, 3],
                [3, -2, 3],
                [4, -2, 3]
            ]],
            [-1, 0, 3, [
                [-2, 0, 3],
                [-3, 0, 3],
                [-2, 1, 3],
                [-3, 1, 3],
                [-4, 1, 3],
                [-4, 2, 3]
            ]],
            [0, 1, 3, [
                [0, 2, 3],
                [-1, 1, 3],
                [-1, 2, 3],
                [-1, 3, 3],
                [-2, 2, 3],
                [-2, 3, 3],
                [-3, 2, 3],
                [-2, 4, 3],
                [-3, 3, 3],
                [-3, 4, 3]
            ]],
            [0, -1, 3, [
                [0, -2, 3],
                [1, -1, 3],
                [-1, -1, 3],
                [-1, -2, 3],
                [1, -2, 3],
                [2, -2, 3],
                [2, -3, 3],
                [3, -3, 3],
                [3, -4, 3]
            ]]
        ]
    }, {
        entriesCount: 47,
        entries: [
            [0, 1, 3, [
                [0, 2, 3],
                [1, 1, 3],
                [1, 2, 3],
                [-1, 2, 3],
                [1, 3, 3],
                [2, 2, 3],
                [-2, 2, 3]
            ]],
            [-1, 0, 3, [
                [-1, -1, 3],
                [-1, 1, 3],
                [-2, 0, 3],
                [-2, -1, 3],
                [-2, 1, 3],
                [-3, 0, 3],
                [-3, -1, 3],
                [-3, 1, 3],
                [-4, 0, 3],
                [-4, -1, 3],
                [-4, 1, 3],
                [-5, 0, 3],
                [-5, 1, 3]
            ]],
            [0, -1, 3, [
                [1, -1, 3],
                [0, -2, 3],
                [1, -2, 3],
                [-1, -2, 3],
                [0, -3, 3],
                [1, -3, 3],
                [2, -2, 3],
                [2, -3, 3],
                [3, -2, 3],
                [2, -4, 3],
                [3, -3, 3],
                [4, -2, 3],
                [3, -4, 3]
            ]],
            [1, 0, 3, [
                [2, 0, 3],
                [2, 1, 3],
                [2, -1, 3],
                [3, 0, 3],
                [3, 1, 3],
                [3, -1, 3],
                [4, 0, 3],
                [4, -1, 3],
                [5, 0, 3],
                [5, -1, 3]
            ]]
        ]
    }];
class _ {
    static TREE_TRUNK_TEMPLATES = L;
    static TREE_CLUSTER_TEMPLATES = F
}
var k = "94,70,42\n109,82,53";
class W {
    static NONE = M.custom((() => null));
    static _TEST_SOLID = M.random([new n(r.of(r.type8(r.TYPE_STATIC)), h.of(255, 0, 125))]);
    static _TEST_AIR = M.random([new n(r.of(r.type8(r.TYPE_AIR)), h.of(255, 0, 125))]);
    static AIR = M.random([new n(r.of(r.type8(r.TYPE_AIR)), h.of(255, 255, 255, h.BLUR_TYPE_BACKGROUND))]);
    static WALL = M.colorPaletteRandom("55,55,55\n57,57,57", M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(0), r.modifiers8(r.HMI_CONDUCTIVE_1)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_2))]));
    static ROCK = M.join([M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 1)), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_1)), h.of(155, 155, 155, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_2))]), M.colorNoise([{
        seed: 40,
        factor: 60,
        threshold: .4,
        force: .9
    }, {
        seed: 41,
        factor: 30,
        threshold: .4,
        force: .9
    }, {
        seed: 42,
        factor: 15,
        threshold: .4,
        force: .5
    }, {
        seed: 43,
        factor: 3,
        threshold: .1,
        force: .1
    }], 79, 69, 63), M.colorNoise([{
        seed: 51,
        factor: 30,
        threshold: .4,
        force: .9
    }, {
        seed: 52,
        factor: 15,
        threshold: .4,
        force: .5
    }, {
        seed: 53,
        factor: 3,
        threshold: .1,
        force: .1
    }], 55, 48, 46), M.colorNoise([{
        seed: 61,
        factor: 30,
        threshold: .4,
        force: .9
    }, {
        seed: 62,
        factor: 15,
        threshold: .4,
        force: .5
    }, {
        seed: 63,
        factor: 3,
        threshold: .1,
        force: .1
    }], 33, 29, 28)]);
    static METAL = M.join([M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 2)), r.behaviour8(), r.modifiers8(r.HMI_METAL)), h.of(155, 155, 155, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_3))]), M.colorNoise([{
        seed: 40,
        factor: 40,
        threshold: .4,
        force: .75
    }, {
        seed: 40,
        factor: 20,
        threshold: .5,
        force: .4
    }, {
        seed: 40,
        factor: 10,
        threshold: .4,
        force: .2
    }, {
        seed: 40,
        factor: 5,
        threshold: .4,
        force: .1
    }], 135, 135, 135), M.colorNoise([{
        seed: 41,
        factor: 10,
        threshold: .4,
        force: .4
    }, {
        seed: 41,
        factor: 6,
        threshold: .3,
        force: .3
    }, {
        seed: 41,
        factor: 4,
        threshold: .5,
        force: .3
    }], 130, 130, 130)]);
    static METAL_MOLTEN = M.join([W.METAL, M.temperature(180), M.molten()]);
    static SAND = M.colorPaletteRandom("214,212,154\n214,212,154\n214,212,154\n214,212,154\n225,217,171\n225,217,171\n225,217,171\n225,217,171\n203,201,142\n203,201,142\n203,201,142\n203,201,142\n195,194,134\n195,194,134\n218,211,165\n218,211,165\n223,232,201\n186,183,128", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 60 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 6), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2);
        return new n(a, o)
    })));
    static SOIL = M.colorPaletteRandom("142,104,72\n142,104,72\n142,104,72\n142,104,72\n142,104,72\n142,104,72\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n82,64,30\n82,64,30\n82,64,30\n177,133,87\n177,133,87\n177,133,87\n102,102,102", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 40 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 5), r.behaviour8(r.BEHAVIOUR_SOIL), r.modifiers8(r.HMI_CONDUCTIVE_1)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_1);
        return new n(a, o)
    })));
    static GRAVEL = M.colorPaletteRandom("97,94,88\n111,110,106\n117,116,112\n117,117,113\n120,118,115\n104,102,97\n113,112,107\n129,128,125\n124,124,121\n81,80,75\n80,76,69\n123,119,111\n105,104,99\n84,82,78\n77,74,69\n91,88,82\n68,65,60\n79,75,69\n85,82,77\n98,94,88\n105,102,96\n104,97,86\n60,55,47\n93,89,81", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 20 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 3), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2);
        return new n(a, o)
    })));
    static COAL = M.colorPaletteRandom("31,31,31\n46,44,41\n13,13,13\n17,17,15", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 40 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 4), r.behaviour8(), r.modifiers8(r.HMI_COAL)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
        return new n(a, o)
    })));
    static THERMITE = M.colorPaletteRandom("137,86,89\n137,86,89\n137,86,89\n137,86,89\n137,86,89\n137,86,89\n125,70,72\n125,70,72\n147,93,96\n147,93,96\n138,84,86\n138,84,86\n118,72,75\n118,72,75\n101,61,65\n151,104,106", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 60 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 5), r.behaviour8(), r.modifiers8(r.HMI_THERMITE)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
        return new n(a, o)
    })));
    static WATER = M.colorPaletteRandom("4,135,186\n5,138,189", M.random([new n(r.of(r.type8Fluid(r.TYPE_FLUID), r.behaviour8(r.BEHAVIOUR_WATER), r.modifiers8(r.HMI_CONDUCTIVE_3)), h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_NONE))]));
    static STEAM = M.colorPaletteRandom("147,182,217\n163,188,212", M.random([new n(r.of(r.type8Fluid(r.TYPE_GAS), r.behaviour8(r.BEHAVIOUR_WATER), r.modifiers8(r.HMI_CONDUCTIVE_3)), h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_NONE))]));
    static GRASS = M.random([new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 5), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(56, 126, 38, h.BLUR_TYPE_1, h.HEAT_EFFECT_1)), new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 3), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(46, 102, 31, h.BLUR_TYPE_1, h.HEAT_EFFECT_1)), new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 4), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(72, 130, 70, h.BLUR_TYPE_1, h.HEAT_EFFECT_1))]);
    static FISH_HEAD = M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_FISH, 0)), h.of(37, 53, 66))]);
    static FISH_BODY = M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_FISH_BODY, 0)), h.of(37, 53, 66))]);
    static FISH_CORPSE = M.random([new n(r.of(r.type8Powder(r.TYPE_POWDER, 2)), h.of(61, 68, 74, h.BLUR_TYPE_1, h.HEAT_EFFECT_1))]);
    static TREE = M.colorPaletteRandom(k, M.custom(((e, t, s) => {
        let i = s.nextInt(_.TREE_TRUNK_TEMPLATES.length);
        return new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE, i), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))
    })));
    static TREE_ROOT = M.colorPaletteRandom("75,54,31\n67,53,38", M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_ROOT, 8), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1)), new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_ROOT, 5), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
    static TREE_WOOD = M.colorPaletteRandom("133,108,80\n124,97,67", M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_TRUNK, 0), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
    static TREE_WOOD_DARK = M.colorPaletteRandom(k, M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_TRUNK, 0), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
    static TREE_LEAF_LIGHTER = M.colorPaletteRandom("128,137,79\n128,137,79\n128,137,79\n128,137,79\n128,137,79\n141,149,91\n141,149,91\n117,128,71\n99,110,65\n111,123,68\n121,132,73\n111,123,74", M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_LEAF, 0), r.modifiers8(r.HMI_LEAF_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
    static TREE_LEAF_DARKER = M.colorPaletteRandom("74,86,47\n74,86,47\n74,86,47\n74,86,47\n68,77,40\n68,77,40\n68,77,40\n70,82,42\n70,82,42\n70,82,42\n72,82,46\n72,82,46\n78,90,48\n78,90,48\n95,106,60\n88,100,57\n66,74,36\n66,67,35\n76,87,52\n86,100,53\n75,89,47", M.random([new n(r.of(r.type8(r.type8Solid(r.TYPE_STATIC, 3)), r.behaviour8(r.BEHAVIOUR_TREE_LEAF, 0), r.modifiers8(r.HMI_LEAF_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
    static #_ = r.of(r.type8(r.TYPE_EFFECT), r.behaviour8(r.BEHAVIOUR_FIRE, 0));
    static FIRE = M.random([new n(r.setTemperature(W.#_, 255), h.of(249, 219, 30)), new n(r.setTemperature(W.#_, 255), h.of(249, 219, 30)), new n(r.setTemperature(W.#_, 120), h.of(249, 219, 30))]);
    static ASH = M.colorPaletteRandom("131,131,131\n131,131,131\n131,131,131\n131,131,131\n131,131,131\n131,131,131\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n114,114,114\n193,193,193", M.custom(((e, t, s) => {
        const i = s.nextInt(100) < 80 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
            a = r.of(r.type8Powder(i, 6), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
            o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
        return new n(a, o)
    })));
    static METEOR = M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 0)), h.of(249, 219, 30))]);
    static METEOR_FROM_LEFT = M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 2)), h.of(249, 219, 30))]);
    static METEOR_FROM_RIGHT = M.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 4)), h.of(249, 219, 30))]);
    static EFFECT_BURNT = M.custom(((e, t, r, s) => {
        if (f.isVisualBurnApplicable(s.elementHead)) {
            if (h.getBurntLevel(s.elementTail) < 3) return new n(s.elementHead, f.visualBurn(s.elementTail, 1))
        }
        return null
    }));
    static EFFECT_NOISE_LG = M.colorNoise({
        seed: 0,
        factor: 40,
        threshold: .5,
        force: .25
    });
    static EFFECT_NOISE_MD = M.colorNoise({
        seed: 0,
        factor: 10,
        threshold: .5,
        force: .25
    });
    static EFFECT_NOISE_SM = M.colorNoise({
        seed: 0,
        factor: 4,
        threshold: .5,
        force: .25
    });
    static EFFECT_TEMP_0 = M.temperature(0);
    static EFFECT_TEMP_127 = M.temperature(127);
    static EFFECT_TEMP_200 = M.temperature(200);
    static EFFECT_TEMP_255 = M.temperature(255);
    static EFFECT_WET = M.custom(((e, t, s, i) => {
        if (null !== i) {
            if (r.getTypeClass(i.elementHead) === r.TYPE_POWDER) {
                const e = r.setTypeClass(i.elementHead, r.TYPE_POWDER_WET);
                return new n(e, i.elementTail)
            }
            return i
        }
        return null
    }));
    static EFFECT_MOLTEN = M.molten();
    static _LIST = {
        none: W.NONE,
        air: W.AIR,
        ash: W.ASH,
        sand: W.SAND,
        soil: W.SOIL,
        gravel: W.GRAVEL,
        wall: W.WALL,
        rock: W.ROCK,
        metal: W.METAL,
        metal_molten: W.METAL,
        wood: W.TREE_WOOD,
        water: W.WATER,
        steam: W.STEAM,
        fire: W.FIRE,
        meteor: W.METEOR,
        meteor_l: W.METEOR_FROM_LEFT,
        meteor_r: W.METEOR_FROM_RIGHT,
        effect_burnt: W.EFFECT_BURNT,
        effect_temp_0: W.EFFECT_TEMP_0,
        effect_temp_127: W.EFFECT_TEMP_127,
        effect_temp_200: W.EFFECT_TEMP_200,
        effect_temp_255: W.EFFECT_TEMP_255,
        effect_wet: W.EFFECT_WET,
        effect_melt: W.EFFECT_MOLTEN
    };
    static byCodeName(e) {
        const t = W._LIST[e];
        return void 0 !== t ? t : null
    }
}
class V extends D {
    constructor(e) {
        super(e)
    }
    applyPoint(e, t, n, r) {
        const i = Math.trunc(t / 4);
        en.getWidth() - i - 10 ? n.draw(e - i, 1, W.METEOR_FROM_LEFT) : e = this.#W || t >= this.#k)
}
setElement(e, t, n) {
    null !== n && this.setElementHeadAndTail(e, t, n.elementHead, n.elementTail)
}
setElementHeadAndTail(e, t, n, r) {
    const s = 4 * (this.#W * t + e);
    this.#V.setUint32(s, n, Y.LITTLE_ENDIAN), this.#Y.setUint32(s, r, Y.LITTLE_ENDIAN)
}
setElementHead(e, t, n) {
    const r = 4 * (this.#W * t + e);
    this.#V.setUint32(r, n, Y.LITTLE_ENDIAN)
}
setElementTail(e, t, n) {
    const r = 4 * (this.#W * t + e);
    this.#Y.setUint32(r, n, Y.LITTLE_ENDIAN)
}
getElement(e, t) {
    const r = 4 * (this.#W * t + e),
        s = this.#V.getUint32(r, Y.LITTLE_ENDIAN),
        i = this.#Y.getUint32(r, Y.LITTLE_ENDIAN);
    return new n(s, i)
}
getElementHead(e, t) {
    const n = 4 * (this.#W * t + e);
    return this.#V.getUint32(n, Y.LITTLE_ENDIAN)
}
getElementHeadOrNull(e, t) {
    return this.isValidPosition(e, t) ? this.getElementHead(e, t) : null
}
getElementTail(e, t) {
    const n = 4 * (this.#W * t + e);
    return this.#Y.getUint32(n, Y.LITTLE_ENDIAN)
}
getElementTailOrNull(e, t) {
    return this.isValidPosition(e, t) ? this.getElementTail(e, t) : null
}
swap(e, t, n, r) {
    const s = this.getElementHead(e, t),
        i = this.getElementHead(n, r);
    this.setElementHead(n, r, s), this.setElementHead(e, t, i);
    const a = this.getElementTail(e, t),
        o = this.getElementTail(n, r);
    this.setElementTail(n, r, a), this.setElementTail(e, t, o)
}
getDataHeads() {
    return this.#V.buffer
}
getDataTails() {
    return this.#Y.buffer
}
getWidth() {
    return this.#W
}
getHeight() {
    return this.#k
}
}
class G extends H {
    #G;
    constructor(e) {
        super(), this.#G = e
    }
    getWidth() {
        return this.#G.getWidth()
    }
    getHeight() {
        return this.#G.getHeight()
    }
    getElementArea() {
        return this.#G
    }
}
class z extends D {
    static asElementArea(e) {
        return e.createElementArea(z.DEFAULT_W, z.DEFAULT_H, Y.TRANSPARENT_ELEMENT)
    }
    static DEFAULT_W = 30;
    static DEFAULT_H = 30;
    #G;
    #z;
    constructor(e, t, n) {
        super(e), this.#G = t, this.#z = n
    }
    applyPoint(e, t, n, r) {
        const s = this.#G,
            i = e - Math.trunc(s.getWidth() / 2),
            a = t - Math.trunc(s.getHeight() / 2);
        let o = M.custom(((e, t) => {
            const n = s.getElement(e - i, t - a);
            return n.elementHead !== Y.TRANSPARENT_ELEMENT.elementHead && n.elementTail !== Y.TRANSPARENT_ELEMENT.elementTail ? n : null
        }));
        r && (o = M.gentle(o));
        for (let e = 0; e {
                if (this.#$(h.elementHead)) {
                    const l = n - e,
                        c = o - t;
                    return r.setElement(l + s, c + s, h), a = !1, i
                }
                return null
            }));
    return n.drawLine(e, t, e, t, this.#D, o, !0), a ? null : r
}
#$(e) {
    const t = r.getTypeClass(e);
    if (t > r.TYPE_AIR && t {
            if (r.getTypeClass(d.elementHead) > r.TYPE_AIR) {
                let r = i - Math.min(e, n),
                    o = a - Math.min(t, s);
                return l.setElement(r, o, d), c = !1, h
            }
            return null
        }));
return i.drawRectangle(e, t, n, s, d, !1), c ? null : l
}
isSecondaryActionEnabled() {
    return null !== this.#j
}
applySecondaryAction(e, t, n, r) {
    this.#j = null
}
hasCursor() {
    return null !== this.#j
}
createCursor() {
    return null !== this.#j ? this.#j.createCursor() : null
}
}
class J extends D {
    #ne;
    constructor(e, t) {
        super(e), this.#ne = t
    }
    getTemplateDefinitions() {
        return this.#ne
    }
}
class j extends D {
    #J;
    constructor(e, t) {
        super(e), this.#J = t
    }
    getHandler() {
        return this.#J
    }
}
class Z {
    static roundBrushTool(e, t, n) {
        return new x(n, e, t)
    }
    static roundBrushToolForSolidBody(e, t, n) {
        return new B(n, e, t)
    }
    static pointBrushTool(e, t) {
        return new U(t, e)
    }
    static point2BrushTool(e, t, n) {
        return new P(n, e, t)
    }
    static meteorTool(e) {
        return new V(e)
    }
    static insertScenesTool(e, t, n) {
        if (1 === e.length) {
            const r = z.asElementArea(e[0]);
            return new z(n, r, t)
        }
        return new K(n, e, t)
    }
    static actionTool(e, t) {
        return new X(t, e)
    }
    static globalActionTool(e, t) {
        return new j(t, e)
    }
    static moveTool(e, t) {
        return new q(t, e)
    }
    static templateSelectionTool(e, t) {
        return new J(t, e)
    }
}
class Q {
    static ROCK_SM = {
        info: {
            displayName: "Small Rock",
            category: "template",
            icon: {
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAwCAYAAAChS3wfAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaUlEQVRoQ+2WO28cRQCAv5l93p69do5zTsQFBkehiJBRhKAxSNBRUCSFqfgBNEgRoqBLmS4lFIiKBv8BuiChoGBCZBxjiBDGTmHs6OLHPbzv2aEgAXtpswvS7tftp5mR5tPM7prUHLMo6kYToCjqRhOgKOpGE6Ao6kYToCjqRhOgKOpGE6Ao6kYToCjKZunKOzrNQhA5bW8Cr91hZeUOa+sboji2CioN8Mbrr+ooHpGpFKUihsMhz81N0eudYwH0fxGh1ADLy8v20tJS8uRZ6pzx8QgpQUqNEHCw36fddnl+bp619Y2T0yuh1AAnN3/t2kcvf3/7O5I0QqmUOEnIlSQYP8Sf7JDnioWXLlZ+CkoNcJJHu/3VVy5d4v79n+n3+xgYJGGCSlP8mWc5ODpiZrpTnFY6lQUYj0b4/gRtb5IDeYRKwRQSAcRhhFYKAby1uKhv3rpV2SmoLECWZQTBMVPTU+zs7JKoFNOw0TJjPBqQCxACkiyt9CpUFsBtuYxGI3q9cxhCkOcKyzCRQhBGEU7LRWuNlJIz/nRxemlUEuC9d69oISTBccDho31c1yUcB6gsQxqSluOgtCZOEjrdswzHo8pOQSUBTNOk232GJAwxDEm322VvZxdpSAwMAIQQQE6mUkzLYn6+ms9iJQEMNG3Xw3Ud0jjCtW0mJlpkSqMSdWpsFEW4XovNzc1TvixKD/Dxhx/o33/7Fa0z8lwRBSFZlnG212NwNGSYjP4eKzTEQUDb8+hMTvPJjRtz71+9uv3Pak+f0gOs3f2BbrfDvdV1ZmdnsaRNFEVYloNpOgRRH8txCIKILMtwWi2ODg4ZByGffv7ZFlDqe6D0APuHAzzPJQgitra3iOMYlWX4/jSDwQDf97FtmzCMkaaJ1jlCmOR5zr31X0rdPFQQYGVtQwAa4Pz5F3BTxfaDBxiWQxBHoCVBnBAEAa7XwnJamIaN7Xp8df363NuXL2+fXvHpUnoA+CvCm4uL+o+HhwB4Ez5KC6RpEccxpjBxvRYzMz329vrc/em2ALj57Ten1imDSgIAfP349/a1hYvamzxDloNpuxiWQxzHvHjhAl98uVz6kS9SWYAnPL4S/+LO6o9FVQmVB/i/0QQoirrRBCiKutEEKIq60QQoirrRBCiKutEEKIq60QQoirrxJ1JCV8S5Z+TMAAAAAElFTkSuQmCC"
            }
        },
        action: {
            type: "random-template",
            actions: [{
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAYAAACdkl3yAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7UlEQVQ4T62UPW9cRRiFn5k793Pt682yzoq4wOAoFBEyihA0Bgk6CoqkMBU/gAYpQhR0KdOlhAJRpcF/gC5IKCiYEBnHGCKEsVMYO9rY3t27vp8zdyjAa6+ddJzyaM6j94zeGcX/JHXaAFi89oGtdAaiphFNEDVaLC/fZ3VtXZw+e6QzoHfeftPmRYI2FcbkDAYDXpqdotO5wDzY58HU0tKSt7i4WB4Z0tYMDxOkBCktQsD+XpdGI+Dl2TlW19ZP5kdSJyE3bnz2+k/3fqSscoypKMqS2kjS4RPiyRZ1bZh/7fIzpxqr9nSnu/LGlSs8evQb3W4XB4cyKzFVRTz9Ivu9HtPN1snISGOgYZIQxxM0okn2ZQ9TgRISARRZjjUGAby3sGDv3L07NtUYSGtNmh4y1Zxie3uH0lQox8NKzTDpUwsQAkpdnak4BgrCgCRJ6HQu4AhBXRtcRyGFIMtz/DDAWouUknNx82T0GPTRh9esEJL0MOXg6R5BEJANU4zWSEcS+j7GWoqypNU+z2CYjE01AimlaLdfoMwyHEfSbrfZ3d5BOhIHBwAhBFCjTYVyXebmjtdhBHKwNIKIIPCpipzA85iYCNHGYkpzdAyAPM8JopCNjY2RpwA+//QT+9eff2Ctpq4NeZqhteZ8p0O/N2BQJqOAsFCkKY0oojXZ5Itbt2Y/vn59SwGsPviZdrvFw5U1ZmZmcKVHnue4ro9SPmnexfV90jRHa40fhvT2DximGV9+/dUmIBTA3kGfKApI05zNrU2KosBoTRw36ff7xHGM53lkWYFUCmtrhFDUdc3Dtd+PL3t5dV0AFuDixVcIKsPW48c4rk9a5GAlaVGSpilBFOL6Icrx8IKIb2/enH3/6tV/qx3B3l1YsH8/OQAgmogxViCVS1EUKKEIopDp6Q67u10e/HpPANz54Xvg1EJ+99/avzV/2UaT59A1KC/AcX2KouDVS5e4/c3SmQcLz/iPYFT1jO6v/HLaGukfK6ZXUFEV3tAAAAAASUVORK5CYII=",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAALCAYAAACQy8Z9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6klEQVQoU7WSzU4TURiGnzNz5qfTMkEMaFkg0XgXbePCcAWscKXeSG+GRAVvgLgw6J4ASwKr0kCBTmf6M2dmzum4aKhQY1z57M57zvfkTb4j+Q/IxWCRVqNZKjVmefkJtVqVMAzR2lAUOZ/3vorF9/AXaavRLAE8zyHPc4SwiOOYm5sbpLSZ3Xm0Gs1yOIw5Oj55JJ9LW41m+XRlhSxP0dpgjKYoCqS08TwPYzSTyexs25KyLBkOY+r15xwdnzx0zqT3zZIkQTqzJq7rYts2taDKZDxmkqYk05hBP8KREum52LYkSRLetJrl98Mf87YSYL1eZ5KmZFnG0lIVAK0LsixDKYXruqyurvJsbY1Op0OeF0yyFKUUWhcEQZWtrbflwcE3MZcCVHwfKW3G4xFhGOJ5NaR02NzYoNPpcHnZpdfrkRc5QgiwBI4jUUohhCBKBrx++ao8uzgXEuDT3hfx8f2HsuL75IUiDEOMmTIYRJyenNLrXSOEhTaaqTEIYSGwwALf99HaUA2qjOIRj5qqPGNj8wXRXZ9u94rrq2uGoyFRPyKoBjjSwbZsUpUDhnc7O3a73Z7ezz9kLt3d3RXb29ulyQtu726pVAKifkR9fZ3Dn7+XcE+73V6M5jz6p/v7+38Mn12cL0b/5Bf4ONku8uljuAAAAABJRU5ErkJggg==",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0,
                randomFlipVertically: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAASCAYAAABfJS4tAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVQ4T7XUz2ucRRzH8fc8z+zMs88++yvG1GRrhUKLWOKhxTZYqeBBinrwUr34X4l4lyLoqQcFxZLakJb+sF7ExkAuSmh2m/3R7JN95vk9HpYkVkJsDn6Ow3xfDDMfRvI/Rf574ahceuuiPTH/Ckop4shQrwdsbm4CMBgMefzHmtjb+0LwtWvXrNaa4XafJEkYDQakacZoOMSVEsdxmJubY2Fh3t5cXhZwCHz50kWrtQZgYhLuP3wgJuMQ/ZICYH7uBOrkqxRZxsbGBtJxMcagqh5PnmztO/vwB1fftzWvSmQMVc9DCMG8Upx7/awd7jxjNwyx1rKzs4MrJVpKTp16jbW1NVrtFiaOcR2HxTfO2d8e/y4kTO9u1B8Sex5SCl6eaSOEi+/7rK+vI5XCWovWinD8jLIsGQwGaK1pNAPKMqe0lloQYK09OHEYhniug680eZLxtNslTQsAlFK4rkteFNRrAXFkyPJ8OuxKhBCEYYiu+vh+jTiOD+A3Fxfpd7fob/XwfR+bQxD4AGitkLoCgC1yZmfaJFlKq9HEdV1MmlD1PIKgxqDfx1XTvRKg2+sx6j2l3WphjKEoCiITAyVe1SOODMJ1sNbSarWZnZ1lYmKstRSjEYXOUUpRlCVSTBsnAX5euS3eu3zFRvEuwquw8ugXcfXKuzbcDTFJhhCCdr3O9vY2Qgji2JDlGdJ1SbOYWuCTJAnNZpOFkx1W7947aMXynZX9cgP8sHJbLF04b+M4RimF79c4fbrOeDwmtwWeVyUIakRJTKfT4c7qXc6cOctX178+vMf/zL1Hv4qlC+dtsyIZ704QQiCES7PeJM9z/vpzk6DZoLvVo9Fu41Tc/dkjYTjApZQsdDoUZUGcJoQ7YxzHwUSGSTSZVq/R2J/7Txim+GeffmK7vS6TKMJxHMqyxHEcsjTFcVzaszN8/sWXx/srAK5/8634+KMPbUVWSNOUNEuxpUVrjTERt26sPvdGLwwD3Pjue/HO20tWCEHQaLAzHHJr9XlwL8eCAbKsRCmXH3+6eSi4l2PD9x8+OBLcy99QElUk8fCpxwAAAABJRU5ErkJggg==",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0
            }]
        }
    };
    static ROCK_MD = {
        info: {
            displayName: "Medium Rock",
            category: "template",
            icon: {
                imageData: "data:image/png;base64,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"
            }
        },
        action: {
            type: "random-template",
            actions: [{
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAUCAYAAAD7s6+GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGYUlEQVRIS9XWW4jc5hnG8f/oOCNpjrvrnfEu6w3BdkJCsONCa0raJD1AoAE7JS49uE0CLTUmNFtyXdyb1BSHuL0p9KKmLKW5CCQ93ZS0DSTg1HbsTWx317U9Hu96jzOagzTSaD6NpF44WbxZt2nSQNvnSu8rIf34eKVPCv8nUd7f+Djy/UPfTgbxzeNiqcgPf/Tj1MYrPnw+NuhPn3/+idrFt08AhD2fpZVlogjmq7DvCw8n2XyO6Zde+cjgD4Se+NkLk08emqq9Vx858kxh8cKV1nt1Lj+MCAXVCzOYZoZCNoeqqWwtb6G+ZnNxbo5s1iLodtn/xc8lAC//8U8fGrwJ+qufv7DrjVf/fA6gMDxMbXYWIAVw+GuPJa3qErquE0URhqaiyQkFI4umaSCl0DWZtdUViqUSI8MF7t91D3NzlxmtlCkWh7lSvcojn92b5AslXvzNH/5tsALw9KHvJuOjWxB9jwsz71Aeq2AaJsQJlmXyg8NPJa1Wk7vu2km9Ued67TrFUhHiBDmV4LkdlHwePZOh3bRxnTZdz8XImsiKQqmUp91u0vVcJBmGhoo0mg32P/JgYuULTL/4wSOhAJTyBXRVYxD0SCXgez6O4+C7HlE0QNd1tm/fTrvdptVsYZoGqqIiJeC6Lpl0hiQFs3OzSEoK07JwvS5hLFir27g9H0WWMXNZ4hgGCaiaggj7XL58ib2fuDc5eebCv8QqAJqmkYoTVpdWWF6ZZ9u2CRaXVnG7LpUto4xWxrBbHebn57Ftm0KhgB8IhoeH0fQMlbFxVupr6KaFoiuEUYiRz7K6sgqaghppJElMIPr4fg9ZU5AlmUazgev2yFp5Hv7M3mRsbIzpX790W/DNFS0W7zjz5qlrTsem0epwY/mvjIyMICkqSUqi1w8BsHIFDCtLFA+4XruOrKpURkdZs236oaAwVCIQPfq9AcsLi3RcB0lSkGUFWZIYBCGyqqGpGhkjjW23UGQN13VpdVwcx+HTn7w/+dY3D+7+zuGpmU3QQ1NTta8feJyhSoV226bbcchoKjt27iAUAkmGVrNFFEdMbpvE7Xbw/S4Ne41BJFBVlaGhEkgp/nZxjn4UYrc6aKpGLmcQDWL8sI8Qgu077sRxHLpOH10zadSdmxBdIxyEdLs+vzjxy3Off/ABXn3t9fXVXX/rt4xtxXc6pA2DiYkJyuURLNOiulbFymaRlRRLC8uUSgVc1yWbtSiXywRBgKqqLCwtocgqW7aWmb04R1o3sHJ57rvnXsIwpNvz8TyPJJYR/RghBEEgyOcLtFpNen4PVVFJkoR2u0MUxTyw91PJ6yffTG2ATkxMPnT+7Om/jIyMsLwwTxjGSJJCpVym3+8DUClvJegJFFnFMnOk02lAwvd8xraO43sB128sYNttMpZBJm1w9eo1VE1D13V0RUdRVDRFR/QEcZjQCwLSaYMoSej1+siyTLFY5OTpsxtmdR06NTX12hPf+CqqIhPHEfV6nSSJKRSKpFIJzWaTsbExJFnCMi2iaIDjdBFCoKgatt1GlhTWVhvk80X6oSCTMdF1HUmSiKOYQRzRaDSw7SZCCDyvi6yq9Pt9NE2jUChwZuZ8iqu1W4g3s+GDv2fPnv1vnXzj5XK5QhiG1Ot1oigmlyuQzeZ55+3z3Ld7F67nE8cxYhDhdD08z2dychtXqjWC3gAja9JxuzSbHYJAMBhEJEkCwOrqCoaRAcA0LYQYICMTiYgv7fuyeWbm/K2k9WyAPj317CtPfeUxMpaJaVpomkaj0SSOoVqtMj4+ju/3cJwuq6sr+J5PFMekZIkbS8sIMUA3TCYn76TXE4RCsNzpkE6nCYVAUWWCXkAcvfvHAhw48Pju544fnwE4cuTIev/92bSFjo6Osrwwj223yefzbJuYwLQsOm2XMIq5Ur1GKiWj6RmGRkYJgoC206Hd6eB5Puko4fTZt9BUFc/zEEKAlCIKQ0QI8436htl77vjxW8t/mk3QHXfvuGNhYeFarjSE3WwShiHtS3/HUHUG/ZDa4iLZrEWxWOL3v/3d+kN3370zMS0DgFQQ8+i+fQ+hKLWjR4/Wlmx7/f4fNZugTx6aqj37zPc4feoUmYxBSpJpNts03z1/aX7htjvHudlLG/pHjx27tfyPswkKcOz4T1IHDx5Mpqenb4v6b+S2UID/JSTAPwB2TvQFACDmHAAAAABJRU5ErkJggg==",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0,
                randomFlipVertically: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0,
                randomFlipVertically: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0,
                randomFlipVertically: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0,
                randomFlipVertically: !0
            }]
        }
    };
    static ROCK_LG = {
        info: {
            displayName: "Large Rock",
            category: "template",
            icon: {
                imageData: "data:image/png;base64,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"
            }
        },
        action: {
            type: "random-template",
            actions: [{
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50
            }, {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "rock",
                threshold: 50,
                randomFlipHorizontally: !0
            }]
        }
    };
    static CABIN = {
        info: {
            displayName: "Cabin",
            category: "template"
        },
        action: {
            type: "image-template",
            imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAkCAYAAAD2IghRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFcUlEQVRYR82Y3W4TRxTHf7vetb2Osd2AY18kogqpKkETSC7sUEEAqep9L7jhEfoYfYA+BqqUN6hUKNyUQgnioxcVigOqIR84ITHGG3u9M73YzHr9tXZIgP5udj1n9sx/Zs7MmbHBR2Jp6YpsNBrEYjHu3r2jdduPitFdcFQKhaKMRCIIITCjJq5wKRYXpXBdHvz14Ng6cGzCFxcvSiklZtRESsne3h5CCPSITjqdRkqDQqEodV3n3r0/Ojrww/ffyWjcwjRNIhqsr67x66NHoZ08kvCrV69JIQQArnABqO5VAZg91fDrPduuIqUkeSKJrutcvrwkTdPk1q3fNAApdVxNx2jYtAwTDc9nGB8k/NKly9JxHFzXE4sWFNwCXBJWEoBkMsY3bAMRnlZqaJpGOp2m6TQpFhclQHlnh7NGlpZpEDUMNEIHGzik8Pn5BRkxImi6hhk1/XDQNK1HcCrlPROWQa3mvc+eqgHw5I1A13VS6RS6piOiJk/WN4jHY3w1cRLDjDOMocILhaJ0HAdN00ilUriuy9udtwghuJCTgDfqSrAiYRnU7RZRa4x8zivb2PSec9kaEOHx1luklEQMgy8yGVzh8uzf9fZMhjBQ+MWL30p73yYej2NZFltbW+zv7wP4goNi1Qgr6nYLgN2dPb9M1UkmY9RqDc5PeDMAksdb28RiMVKpFFJKLlyYl/F4vGchK3qEFwpF2Wg2MAyDdCpNpVJBCMF8Xo1ChIRlkc9lfHGHRddN8jnLnwHgoBOCv3dcHMchm80ipGB2dk5alsX9+392dMAXfuXKVbm/v080GsWMmlSrVYQQnJ9wgHYo5HMZ9QmZ8bT/Dt7oqrLgSHfXU+RzELXGAGja79nY3OXcuFoH2+i6TjrjfVssLsp4PM6dO79rAEahUJQArutimIa/4OayLuAykT1JrdboEKxo2u+7i0YuUwQ7mM9l2Nj0QmmOXcDlaWUPNDiRSuEKl0KhKKUQGG6rhSsFTsvBaTrMZZu+I4CtN9sAlF6oePz41O12W7OnvBB9WqliRk2EK7xBfrjy0I+dG9fOyukvJ/2PwFtkCatnKXwG1rl5+4mvtUfRxubuwZTtAt60qWrK9qlRWoL0CK/btY6wqNs1tt607Z8yZDqJdPzqEa52j7ptk7CsLuunJaihbtsdth7h7TDpzV7BvTszng7dLRT9pnl03I6wDdIjPMigbAid21gY3T5GJWEZlF7UBia5UOFBNjY3uosAyOfy3UUjcVR/ocLVQSkznubnX/pfv3768WvZXaYyaPAJXnip95u3/wn1NywMQ4Urwpw07ff+dKqOQjuU1DNhGSOFl/I3LHeEWw8YFGfQaRu1Xhij1gsVHrXGiFrhCzFhGf5BKXjI6mbQAawfg3wECRUeDINB1O0WdbstJExUmC3I7s7e0UJlmOiPybC2Q4VXq7WRLwxqYQ4aqaBtmL+EZfRNOkH6t3JAKpUc2ohC1QurH2YLUrdb5HOZ0HNRqPDg9vZ/I1S42lUAblzrTTQw2g7Qj2H+wnIHDBEeTAbdFwxFdwIKI1hvFH9hhLd0wCiO4HjrDRuEcCsfHgqHYadSASA5ZnXc+sMYKnyYg+MgOda+sHS3l7AMqt7fkh30CC+9KPd9/1y0NQy4ui0tLcnGeBYpJeVymcnJSXRdR9O802epVOLMmTM4jkO5XGZqaopIxHOmaRpS9t0kBqL8qj9Ng5RKJaanpwFotVq8evWKqakprl8/J5eXlzU4ED4/Py+r1Srv3r1DSommabx8+RLw/ihSjp8/fw6AlJK1tTUOy8zMTMdAqM7qus7k5CSvX7/m9OnTzMzM4Louq6ur/rerq6vous7CwoJcWVnR/gMS6rip19cCIwAAAABJRU5ErkJggg==",
            brush: "wood",
            threshold: 50,
            randomFlipHorizontally: !0
        }
    };
    static SAND_CASTLE = {
        info: {
            displayName: "Sand Castle",
            category: "template"
        },
        action: {
            type: "image-template",
            imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAIAAACtuNvgAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB5UlEQVQoz1XPy04UURAG4Ko6t+6eGRkl0dGFLly5cOv7+AY+itEVCStDfBg1JhICbCQIiAmCc6FP97mXi9EJXZtK/sqXqkJmhv91/PktM7x49QaGdXm4x0pnZ5++fL1OaDM7P9xTciyFPjv4cNecfNsNXNq+db7bjP6x7193gm+ZgtYm39l/9OW9QIyu7RZXRCJEu87luuWcfAqCBI4m2S83rGqmSjYo+8RBCIopDpjSejJ9kktw3UKresNyDq1tkaCutr1bNM10wLgU2/8uIIiZVLVh3t4KIgAjuDeqRlSD33rf3c7n7B0i9N31yf7OOp9OtsfjSVOJ5eImINjuarDtwfaz7Nu2W6ZUtBzZdnV6sAfF5ZRzSYXTw9lzSiUgDdhq+ROZiFDryvteG/3j9Hz2eAqcYvKVHvlu7r1HMoMjjW6kFjFGH3pTVecXNyH4s4s5AxOqEJ2WtRSKsx8w26+8d1LKVLK1rTENQ/ZuRUjj5p5UCjAT4mRrNmBaGYGaGaaTR3XdWLtS0milS4JbO/fe9a6PzDEsTvd3AQCZ+ejTu7oaMRdEijGQaUK3ICRCAYBAzBliDve3Zi4scyopR/nr+CMAh9gJKQVr57sGBQNoo4Gxd50RlaxlA+M/y0sSJiUrSf0F+OQcr89DEA8AAAAASUVORK5CYII=",
            brush: "sand",
            threshold: 1
        }
    }
}
class $ {
    static DEFAULT_SIZE = 6;
    static CATEGORY_BRUSH = "brush";
    static CATEGORY_GLOBAL = "global";
    static CATEGORY_TEMPLATE = "template";
    static CATEGORY_SELECTION = "selection";
    static NONE = Z.actionTool((() => {}), new N({
        codeName: "none",
        displayName: "None",
        category: $.CATEGORY_BRUSH
    }));
    static ERASE = Z.roundBrushTool(W.AIR, $.DEFAULT_SIZE, new N({
        codeName: "erase",
        displayName: "Erase",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#e6e6e6",
            color: "black"
        }
    }));
    static MOVE = Z.moveTool(13, new N({
        codeName: "move",
        displayName: "Move",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#e6e6e6",
            color: "black"
        }
    }));
    static FLIP_VERTICALLY = Z.globalActionTool((e => {
        null !== e && e.graphics().flipVertically()
    }), new N({
        codeName: "flip_vertically",
        displayName: "Flip Vertically",
        category: $.CATEGORY_GLOBAL,
        badgeStyle: {
            backgroundColor: "#e6e6e6",
            color: "black"
        }
    }));
    static SAND = Z.roundBrushTool(W.SAND, $.DEFAULT_SIZE, new N({
        codeName: "sand",
        displayName: "Sand",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#b7a643"
        }
    }));
    static SOIL = Z.roundBrushTool(W.SOIL, $.DEFAULT_SIZE, new N({
        codeName: "soil",
        displayName: "Soil",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#8e6848"
        }
    }));
    static GRAVEL = Z.roundBrushTool(W.GRAVEL, $.DEFAULT_SIZE, new N({
        codeName: "gravel",
        displayName: "Gravel",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#656565"
        }
    }));
    static COAL = Z.roundBrushTool(W.COAL, $.DEFAULT_SIZE, new N({
        codeName: "coal",
        displayName: "Coal",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#343434"
        }
    }));
    static THERMITE = Z.roundBrushTool(W.THERMITE, $.DEFAULT_SIZE, new N({
        codeName: "thermite",
        displayName: "Thermite",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#914e47"
        }
    }));
    static WALL = Z.roundBrushTool(W.WALL, $.DEFAULT_SIZE, new N({
        codeName: "wall",
        displayName: "Wall",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#383838"
        }
    }));
    static ROCK = Z.roundBrushTool(W.ROCK, $.DEFAULT_SIZE, new N({
        codeName: "rock",
        displayName: "Rock",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#383838"
        }
    }));
    static ROCK_TEMPLATES = Z.templateSelectionTool([Q.ROCK_SM, Q.ROCK_MD, Q.ROCK_LG], new N({
        codeName: "rock_templates",
        displayName: "Rock",
        category: $.CATEGORY_SELECTION,
        badgeStyle: {
            backgroundColor: "#383838"
        }
    }));
    static WOOD = Z.roundBrushTool(W.TREE_WOOD, $.DEFAULT_SIZE, new N({
        codeName: "wood",
        displayName: "Wood",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#573005"
        }
    }));
    static METAL = Z.roundBrushToolForSolidBody(W.METAL, $.DEFAULT_SIZE, new N({
        codeName: "metal",
        displayName: "Metal",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#7c7c7c"
        }
    }));
    static METAL_MOLTEN = Z.roundBrushTool(W.METAL_MOLTEN, $.DEFAULT_SIZE, new N({
        codeName: "metal_molten",
        displayName: "M. Metal",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#e67d00"
        }
    }));
    static WATER = Z.roundBrushTool(W.WATER, $.DEFAULT_SIZE, new N({
        codeName: "water",
        displayName: "Water",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#0487ba"
        }
    }));
    static FIRE = Z.roundBrushTool(M.temperatureOrBrush(50, W.FIRE), $.DEFAULT_SIZE, new N({
        codeName: "fire",
        displayName: "Fire",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#ff5900"
        }
    }));
    static METEOR = Z.meteorTool(new N({
        codeName: "meteor",
        displayName: "Meteor",
        category: $.CATEGORY_BRUSH,
        badgeStyle: {
            backgroundColor: "#ff5900"
        }
    }));
    static DEFAULT_TOOLS = [this.ERASE, this.MOVE, this.SAND, this.SOIL, this.GRAVEL, this.COAL, this.THERMITE, this.WATER, this.ROCK_TEMPLATES, this.WALL, this.METAL, this.METAL_MOLTEN, this.FIRE, this.METEOR];
    static TEST_TOOLS = [Z.pointBrushTool(W.GRASS, new N({
        codeName: "grass",
        displayName: "Grass",
        category: $.CATEGORY_BRUSH
    })), Z.pointBrushTool(W.TREE, new N({
        codeName: "tree",
        displayName: "Tree",
        category: $.CATEGORY_BRUSH
    })), Z.point2BrushTool(W.FISH_HEAD, W.FISH_BODY, new N({
        codeName: "fish",
        displayName: "Fish",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_BURNT, $.DEFAULT_SIZE, new N({
        codeName: "effect_burnt",
        displayName: "Burnt",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_NOISE_SM, $.DEFAULT_SIZE, new N({
        codeName: "effect_noise_sm",
        displayName: "Noise SM",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_NOISE_MD, $.DEFAULT_SIZE, new N({
        codeName: "effect_noise_md",
        displayName: "Noise MD",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_NOISE_LG, $.DEFAULT_SIZE, new N({
        codeName: "effect_noise_lg",
        displayName: "Noise LG",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_TEMP_0, $.DEFAULT_SIZE, new N({
        codeName: "effect_temp_0",
        displayName: "Temp 0",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_TEMP_127, $.DEFAULT_SIZE, new N({
        codeName: "effect_temp_127",
        displayName: "Temp 127",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_TEMP_200, $.DEFAULT_SIZE, new N({
        codeName: "effect_temp_200",
        displayName: "Temp 200",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.EFFECT_TEMP_255, $.DEFAULT_SIZE, new N({
        codeName: "effect_temp_255",
        displayName: "Temp 255",
        category: $.CATEGORY_BRUSH
    })), Z.roundBrushTool(W.ASH, $.DEFAULT_SIZE, new N({
        codeName: "ash",
        displayName: "Ash",
        category: $.CATEGORY_BRUSH
    }))];
    static _LIST = {};
    static {
        for (const e of [$.NONE, ...$.DEFAULT_TOOLS, ...$.TEST_TOOLS]) $._LIST[e.getInfo().getCodeName()] = e
    }
    static byCodeName(e) {
        const t = $._LIST[e];
        return void 0 !== t ? t : null
    }
}
class ee {
    static EVENT_NAME = "app_sand_game_js";
    static FEATURE_APP_INITIALIZED = "initialized";
    static FEATURE_SCENARIO_COMPLETED = "s_completed";
    static FEATURE_RENDERER_FALLBACK = "renderer_fallback";
    static FEATURE_PAUSE = "pause";
    static FEATURE_DRAW_PRIMARY = "draw_primary";
    static FEATURE_DRAW_SECONDARY = "draw_secondary";
    static FEATURE_DRAW_TERTIARY = "draw_tertiary";
    static FEATURE_DRAW_LINE = "draw_line";
    static FEATURE_DRAW_RECT = "draw_rect";
    static FEATURE_DRAW_FLOOD = "draw_flood";
    static FEATURE_STATUS_DISPLAYED = "status_displayed";
    static FEATURE_OPTIONS_DISPLAYED = "options_displayed";
    static FEATURE_RENDERER_PIXELATED = "renderer_pixelated";
    static FEATURE_RENDERER_SHOW_CHUNKS = "renderer_show_chunks";
    static FEATURE_RENDERER_SHOW_HEATMAP = "renderer_show_heatmap";
    static FEATURE_CANVAS_SIZE_CHANGE = "canvas_size_change";
    static FEATURE_SWITCH_SCENE = "switch_scene";
    static FEATURE_RESTART_SCENE = "restart_scene";
    static FEATURE_SWITCH_SCALE = "switch_scale";
    static FEATURE_IO_EXPORT = "io_export";
    static FEATURE_IO_IMPORT = "io_import";
    static FEATURE_IO_IMAGE_TEMPLATE = "io_image_template";
    static #re = new Set;
    static triggerToolUsed(e) {
        const t = e.getInfo().getCategory();
        if (t === $.CATEGORY_BRUSH) {
            const t = "brush_" + e.getInfo().getCodeName();
            ee.triggerFeatureUsed(t)
        } else t === $.CATEGORY_TEMPLATE && ee.triggerFeatureUsed("brush_template")
    }
    static triggerFeatureUsed(e) {
        ee.#re.has(e) || (ee.#re.add(e), ee.#se({
            app_sand_game_js_feature: e
        }))
    }
    static #se(e) {
        if ("function" == typeof gtag) try {
            gtag("event", ee.EVENT_NAME, e)
        } catch (e) {
            console.warn(e)
        }
    }
}
class te {
    static addContent(e, t) {
        if (null === t);
        else if ("string" == typeof t) e.textContent = t;
        else if (t instanceof Node) e.appendChild(t);
        else {
            if (!Array.isArray(t)) throw "Content type not supported: " + typeof t;
            for (const n of t)
                if (n instanceof Node) e.appendChild(n);
                else if ("string" == typeof n) e.insertAdjacentText("beforeend", n);
            else if (null !== n) throw "Content type not supported: " + typeof n
        }
    }
    static setContent(e, t) {
        e.innerHTML = "", te.addContent(e, t)
    }
    static putAttributes(e, t) {
        for (const n in t) {
            const r = t[n],
                s = typeof r;
            if ("string" === s || "boolean" === s || "number" === s) e.setAttribute(n, r);
            else if ("style" === n && "object" === s) Object.assign(e.style, r);
            else if (null !== r) throw "Unsupported attribute type: " + typeof r
        }
    }
    static create(e) {
        const t = document.createElement("template");
        return t.innerHTML = e.trim(), t.content.firstElementChild
    }
    static element(e, t = null, n = null) {
        const r = document.createElement(e);
        return te.putAttributes(r, t), te.addContent(r, n), r
    }
    static div(e = null, t = null) {
        return te.element("div", e, t)
    }
    static par(e = null, t = null) {
        return te.element("p", e, t)
    }
    static span(e = null, t = null) {
        return te.element("span", t, e)
    }
    static link(e, t = null, n = null) {
        const r = te.element("a", t, e);
        return null !== n && (r.href = "javascript:void(0)", r.addEventListener("click", n)), r
    }
    static button(e, t = null, n = null) {
        null === t && (t = {}), t.type = "button";
        const r = te.element("button", t, e);
        return null !== n && r.addEventListener("click", n), r
    }
    static bootstrapAlertInfo(e) {
        const t = te.div({
            class: "alert alert-info alert-dismissible fade show",
            role: "alert"
        });
        return te.addContent(t, e), t.append(te.button(null, {
            type: "button",
            class: "btn-close",
            "data-bs-dismiss": "alert",
            "aria-label": "Close"
        })), t
    }
    static bootstrapCard(e, t, n = null) {
        null === n && (n = {}), void 0 === n.class && (n.class = "card");
        const r = te.div(n);
        return e && r.append(te.div({
            class: "card-header"
        }, e)), r.append(te.div({
            class: "card-body"
        }, t)), r
    }
    static bootstrapCardCollapsable(e, t, n) {
        const r = "collapsable_" + Math.floor(999999999 * Math.random());
        return te.div({
            class: "card"
        }, [te.div({
            class: "card-header"
        }, [te.element("a", {
            class: "card-link",
            "data-bs-toggle": "collapse",
            href: "#" + r
        }, e)]), te.div({
            id: r,
            class: t ? "collapse" : "collapse show"
        }, [te.div({
            class: "card-body"
        }, n)])])
    }
    static bootstrapInitTooltip(e, t) {
        if (void 0 === window.bootstrap) return console.error("Bootstrap library not available"), t;
        const n = new window.bootstrap.Tooltip(t);
        return n && n.dispose(), t.setAttribute("data-bs-toggle", "tooltip"), t.setAttribute("data-bs-placement", "top"), "object" == typeof e ? (t.setAttribute("data-bs-html", "true"), t.setAttribute("title", e.innerHTML)) : t.setAttribute("title", e), new window.bootstrap.Tooltip(t), t
    }
    static bootstrapSwitchButton(e, t, n = null) {
        const r = "switch-button_" + Math.floor(999999999 * Math.random()),
            s = te.element("input", {
                type: "checkbox",
                id: r,
                class: "form-check-input",
                role: "switch",
                checked: t
            }),
            i = te.div({
                class: "form-check form-switch"
            }, [s, te.element("label", {
                class: "form-check-label",
                for: r
            }, e)]);
        return null !== n && s.addEventListener("click", (() => {
            n(s.checked)
        })), i
    }
    static bootstrapToggleButton(e, t, n, r = null) {
        const s = "toggle-button_" + Math.floor(999999999 * Math.random()),
            i = te.element("input", {
                type: "checkbox",
                class: "btn-check",
                checked: n,
                id: s
            }),
            a = te.element("label", {
                class: "btn " + t,
                for: s
            }, e);
        return i.addEventListener("change", (e => {
            null !== r && r(i.checked)
        })), [i, a]
    }
    static bootstrapTableBuilder() {
        return new ne
    }
    static bootstrapDialogBuilder() {
        return new re
    }
    static bootstrapToastBuilder() {
        return new se
    }
    static bootstrapSimpleFormBuilder() {
        return new ie
    }
}
class ne {
    #ie = te.element("tbody");
    addRow(e) {
        this.#ie.appendChild(e)
    }
    addRowBefore(e) {
        this.#ie.insertBefore(e, this.#ie.firstChild)
    }
    createNode() {
        const e = te.element("table", {
            class: "table table-striped"
        });
        e.appendChild(this.#ie);
        const t = te.div({
            class: "table-responsive"
        });
        return t.appendChild(e), t
    }
}
class re {
    #ae = !1;
    #oe = "";
    #le = null;
    #he = null;
    #ce = [];
    #de = null;
    #ue = null;
    setPersistent(e) {
        this.#ae = e
    }
    setSizeLarge() {
        this.#oe = "modal-lg"
    }
    setSizeExtraLarge() {
        this.#oe = "modal-xl"
    }
    setHeaderContent(e) {
        this.#le = "string" == typeof e ? te.element("strong", null, e) : e
    }
    setBodyContent(e) {
        this.#he = e
    }
    addCloseButton(e) {
        const t = te.element("button", {
            type: "button",
            class: "btn btn-secondary",
            "data-bs-dismiss": "modal"
        }, e);
        this.#ce.push(t)
    }
    addSubmitButton(e, t) {
        const n = te.element("button", {
            type: "button",
            class: "btn btn-primary",
            "data-bs-dismiss": "modal"
        }, e);
        n.addEventListener("click", t), this.#ce.push(n)
    }
    addButton(e) {
        this.#ce.push(e)
    }
    show(e) {
        void 0 !== window.bootstrap ? (null === this.#de && (this.#de = te.div({
            class: "modal fade",
            tabindex: "-1",
            role: "dialog",
            "aria-hidden": "true"
        }, [te.div({
            class: `modal-dialog modal-dialog-centered ${this.#oe}`
        }, [te.div({
            class: "modal-content"
        }, [te.div({
            class: "modal-header"
        }, this.#le), te.div({
            class: "modal-body"
        }, this.#he), te.div({
            class: "modal-footer"
        }, this.#ce)])])]), e.appendChild(this.#de)), this.#ue = new window.bootstrap.Modal(this.#de), this.#ae || this.#de.addEventListener("hidden.bs.modal", (() => {
            e.removeChild(this.#de)
        })), this.#ue.show()) : console.error("Bootstrap library not available")
    }
    hide() {
        null !== this.#de && this.#ue.hide()
    }
}
class se {
    #le = null;
    #he = null;
    #me = null;
    #Ee = null;
    #ge = 36e5;
    setHeaderContent(e) {
        "string" == typeof e && (e = te.element("strong", e)), this.#le = te.span(e, {
            class: "me-auto"
        })
    }
    setBodyContent(e) {
        this.#he = e
    }
    setDelay(e) {
        this.#ge = e
    }
    show(e) {
        if (void 0 === window.bootstrap) return void console.error("Bootstrap library not available");
        const t = {
                class: "toast hide",
                role: "alert",
                "aria-live": "assertive",
                "aria-atomic": "true",
                "data-bs-delay": this.#ge
            },
            n = te.div({
                class: "position-fixed bottom-0 right-0 p-3",
                style: "z-index: 5; right: 0; bottom: 0;"
            }, [this.#me = te.div(t, [te.div({
                class: "toast-header"
            }, [this.#le, te.button("", {
                type: "button",
                class: "btn-close",
                "data-bs-dismiss": "toast",
                "aria-label": "Close"
            })]), te.div({
                class: "toast-body"
            }, [this.#he])])]);
        e.append(n), this.#Ee = new window.bootstrap.Toast(this.#me), this.#me.addEventListener("hidden.bs.toast", (() => {
            e.removeChild(n)
        })), this.#Ee.show()
    }
    hide() {
        null !== this.#me && this.#Ee.hide()
    }
}
class ie {
    #Ae = [];
    #pe = null;
    addTextArea(e, t, n = "", r = 8) {
        let s = te.element("textarea", {
            class: "form-control",
            rows: r
        }, n);
        return this.#Ae.push({
            key: t,
            label: e,
            input: s
        }), s
    }
    addInput(e, t, n = "") {
        let r = te.element("input", {
            class: "form-control"
        });
        return n && (r.value = n), this.#Ae.push({
            key: t,
            label: e,
            input: r
        }), r
    }
    addSubmitButton(e, t) {
        this.#pe = te.button(e, {
            class: "btn btn-primary"
        }, (e => {
            t(this.getData())
        }))
    }
    createNode() {
        let e = te.element("form", {
            action: "javascript:void(0);"
        });
        for (let t of this.#Ae) e.append(te.div({
            class: "mb-3"
        }, [te.element("label", null, t.label), t.input]));
        return this.#pe && e.append(this.#pe), e
    }
    getData() {
        let e = {};
        for (let t of this.#Ae) e[t.key] = t.input.value;
        return e
    }
}
class ae {
    #Te = 0;
    #fe = 0;
    #Ce = 0;
    tick(e) {
        this.#Te++, e - this.#Ce >= 1e3 && (this.#fe = this.#Te, this.#Te = 0, this.#Ce = e)
    }
    getValue() {
        return this.#fe
    }
    clear() {
        this.#fe = 0
    }
}
class oe {
    static OPT_CYCLES_PER_SECOND = 120;
    static OPT_FRAMES_PER_SECOND = 60;
    getIteration() {
        throw "Not implemented"
    }
    getDefaults() {
        throw "Not implemented"
    }
    isFallThroughEnabled() {
        throw "Not implemented"
    }
    isErasingEnabled() {
        throw "Not implemented"
    }
    trigger(e, t) {
        throw "Not implemented"
    }
}
class le {
    getDefaultElement() {
        throw "Not implemented"
    }
    getBrushWater() {
        throw "Not implemented"
    }
    getBrushSteam() {
        throw "Not implemented"
    }
    getBrushGrass() {
        throw "Not implemented"
    }
    getBrushTree() {
        throw "Not implemented"
    }
    getBrushFishHead() {
        throw "Not implemented"
    }
    getBrushFishBody() {
        throw "Not implemented"
    }
    getBrushFishCorpse() {
        throw "Not implemented"
    }
    getBrushFire() {
        throw "Not implemented"
    }
    getBrushAsh() {
        throw "Not implemented"
    }
    getTreeTrunkTemplates() {
        throw "Not implemented"
    }
    getTreeLeafClusterTemplates() {
        throw "Not implemented"
    }
}
class he {
    static #Re = 255;
    static #Se = 8192;
    static #ve = 32;
    #G;
    #we;
    #Ie;
    #Oe;
    #ye;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n, this.#Oe = new Uint8Array(e.getWidth() * e.getHeight()), this.#ye = new Set
    }
    onNextIteration() {
        this.#Oe.fill(0), this.#ye.clear()
    }
    behaviourSolid(e, t, n) {
        const s = r.getTypeModifierSolidBodyId(e),
            i = t + n * this.#G.getWidth();
        if (s === this.#Oe[i]) return this.#ye.has(s);
        const [a, o, l, h, c] = this.#be(t, n, e, s);
        if (c.tree) {
            if (o === l) return this.#Me(s, h), this.#ye.add(s), !0
        } else {
            if (l / o > .95) return this.#Me(s, h), this.#ye.add(s), !0;
            if (l / o > .75) return this.#He(s, h), !1
        }
        return !1
    }
    #Ne(e, t) {
        const n = this.#G.getWidth();
        let s;
        for (; null !== (s = t.pop());) {
            const t = s % n,
                i = Math.trunc(s / n);
            let a = 0;
            for (;;) {
                let s = this.#G.getElementHead(t, i + a);
                const o = this.#we.nextInt(100) < 20 ? r.TYPE_POWDER : r.TYPE_POWDER_WET;
                s = r.setType(s, r.type8Powder(o, 4));
                let l = this.#G.getElementTail(t, i + a);
                if (this.#G.setElementHead(t, i + a, s), this.#G.setElementTail(t, i + a, l), !(i + a >= 0)) break;
                if (this.#Oe[t + (i + a - 1) * n] !== e) break;
                a--
            }
        }
    }
    #Me(e, t) {
        const n = this.#G.getWidth(),
            s = this.#G.getHeight();
        let i;
        for (; null !== (i = t.pop());) {
            const t = i % n,
                a = Math.trunc(i / n);
            let o = null,
                l = null;
            a + 1 = 0)) break;
    if (this.#Oe[t + (a + h - 1) * n] !== e) break;
    h--
}
let c = !1;
if (null != o) {
    const e = r.getTypeClass(o);
    e === r.TYPE_AIR ? c = !0 : e <= r.TYPE_FLUID && (c = 0 === this.#we.nextInt(4))
}
c ? (this.#G.setElementHead(t, a + h, o), this.#G.setElementTail(t, a + h, l)) : this.#G.setElement(t, a + h, this.#Ie.getDefaults().getDefaultElement()), this.triggerPowderElement(t, a + 2)
}
}
#He(e, t) {
    const n = this.#G.getWidth();
    let r;
    for (; null !== (r = t.pop());) {
        const e = r % n,
            t = Math.trunc(r / n);
        this.triggerPowderElement(e, t + 1)
    }
}
triggerPowderElement(e, t) {
    if (this.#G.isValidPosition(e, t)) {
        const n = this.#G.getElementHead(e, t),
            s = r.getTypeClass(n);
        if (s === r.TYPE_POWDER || s === r.TYPE_POWDER_WET) {
            let s = n;
            s = r.setTypeModifierPowderSliding(s, 1), 0 === this.#we.nextInt(15) && (s = r.setTypeModifierPowderDirection(s, this.#we.nextInt(2))), this.#G.setElementHead(e, t, s)
        }
    }
}
#De = new ce;
#xe = new ce;
#be(e, t, n, s) {
    const i = 247,
        a = this.#G.getElementHead(e, t) & i,
        o = this.#G.getWidth(),
        l = this.#De;
    l.reset();
    const h = this.#xe;
    h.reset();
    const c = {
        tree: r.getBehaviour(n) === r.BEHAVIOUR_TREE
    };
    let d = 0,
        u = 0,
        m = 0,
        E = e + t * o;
    do {
        const e = E % o,
            t = Math.trunc(E / o);
        this.#Oe[E] = s, d++, this.#Be(e, t - 1, i, a, l, s, c), this.#Be(e + 1, t, i, a, l, s, c), this.#Be(e - 1, t, i, a, l, s, c), c.tree && (this.#Be(e + 1, t - 1, i, a, l, s, c), this.#Be(e - 1, t - 1, i, a, l, s, c), this.#Be(e + 1, t + 1, i, a, l, s, c), this.#Be(e - 1, t + 1, i, a, l, s, c));
        const n = this.#Be(e, t + 1, i, a, l, s, c, !0);
        0 === n || (1 === n ? (h.push(E), u++) : 2 === n && (h.push(E), u++, m++))
    } while (null != (E = l.pop()));
    return [d, u, m, h, c]
}
#Be(e, t, n, s, i, a, o, l) {
    if (e < 0 || t < 0) return 0;
    const h = this.#G.getWidth(),
        c = this.#G.getHeight();
    if (e >= h || t >= c) return l ? 1 : 0;
    const d = e + t * h,
        u = this.#Oe[d];
    if (u === he.#Re) return 0;
    if (u === a) return 0;
    const m = this.#G.getElementHead(e, t);
    if (o.tree || r.getBehaviour(m) === r.BEHAVIOUR_TREE && (o.tree = !0), (m & n) !== s) {
        if (l) {
            switch (r.getTypeClass(m)) {
                case r.TYPE_AIR:
                case r.TYPE_EFFECT:
                case r.TYPE_GAS:
                case r.TYPE_FLUID:
                    return 2;
                default:
                    return 1
            }
        }
        return 0
    }
    return this.#Oe[d] = he.#Re, i.push(d), 0
}
}
class ce {
    #Ue;
    #f = -1;
    constructor(e = 1) {
        e = Math.max(1, e), this.#Ue = new Uint32Array(e)
    }
    push(e) {
        if (this.#Ue.length === this.#f + 1) {
            const e = new Uint32Array(2 * this.#Ue.length);
            e.set(this.#Ue), this.#Ue = e
        }
        this.#Ue[++this.#f] = e
    }
    pop() {
        return -1 === this.#f ? null : this.#Ue[this.#f--]
    }
    reset() {
        this.#f = -1
    }
}
class de {
    static #Pe = 34;
    static createFireElementHead(e) {
        let t = r.of(r.TYPE_EFFECT, r.BEHAVIOUR_FIRE);
        return t = r.setTemperature(t, e), t
    }
    static createFireElementTail(e) {
        let t = h.of(0, 0, 0);
        return t = e > 213 ? h.setColor(t, 249, 219, 30) : e > 170 ? h.setColor(t, 248, 201, 7) : e > 128 ? h.setColor(t, 250, 150, 3) : e > 85 ? h.setColor(t, 255, 111, 0) : e > 80 ? h.setColor(t, 255, 37, 0) : e > 75 ? h.setColor(t, 250, 4, 5) : h.setColor(t, 125, 0, 0), t
    }
    #G;
    #we;
    #Ie;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n
    }
    behaviourFire(e, t, n) {
        if (0 !== this.#we.nextInt(4)) return;
        const s = r.getTemperature(e),
            i = this.#Le(t, n, s);
        if (ide.#Pe && (this.#G.setElementHead(e, t, de.createFireElementHead(r)), this.#G.setElementTail(e, t, de.createFireElementTail(r)))
        }
        return
    }
    if (r.getTypeClass(s) === r.TYPE_AIR) {
        const r = Math.trunc(.7 * n);
        return void(r > de.#Pe && (this.#G.setElementHead(e, t, de.createFireElementHead(r)), this.#G.setElementTail(e, t, de.createFireElementTail(r))))
    }
    const i = r.getHeatModIndex(s),
        a = r.hmiToFlammableChanceTo10000(i);
    if (0 !== a) {
        if (r.getBehaviour(s) === r.BEHAVIOUR_FIRE_SOURCE) return;
        if (this.#we.nextInt(1e4) = de.#Pe && (this.#G.setElementHead(e, t, de.createFireElementHead(r)), this.#G.setElementTail(e, t, de.createFireElementTail(r))), 1
        }
        if (f.isVisualBurnApplicable(s) && 0 === this.#we.nextInt(1e3)) {
            const n = this.#G.getElementTail(e, t);
            this.#G.setElementTail(e, t, f.visualBurn(n, 1, 2))
        }
        return 0
    }
    ignite(e, t, n, s) {
        let i = r.setBehaviour(e, r.BEHAVIOUR_FIRE_SOURCE);
        i = r.setTemperature(i, r.hmiToFlameHeat(s)), this.#G.setElementHead(t, n, i);
        const a = this.#G.getElementTail(t, n);
        this.#G.setElementTail(t, n, f.visualBurn(a, 2))
    }
}
class ue {
    static BLUEPRINT_3 = [" 333", " 32223", "3211123", "3210123", "3211123", " 32223", " 333"];
    static BLUEPRINT_4 = [" 444 ", " 43334", " 4322234", "432111234", "432101234", "432111234", " 4322234", " 43334", " 444"];
    static BLUEPRINT_9 = [" 99999 ", " 998888899", " 9988777778899", " 998776666677899", " 987665555566789", " 98766554445566789", " 98765543334556789", "9876554322234556789", "9876543211123456789", "9876543210123456789", "9876543211123456789", "9876554322234556789", " 98765543334556789", " 98766554445566789", " 987665555566789", " 998776666677899", " 9988777778899", " 998888899", " 99999"];
    static iterate(e, t) {
        const n = e[0].length,
            r = e.length,
            s = Math.trunc(n / 2),
            i = Math.trunc(r / 2);
        for (let n = 0; n > 1;
            let l, h; o === me.DIRECTION_FROM_TOP ? (h = n + 1, l = t) : o === me.DIRECTION_FROM_LEFT ? (h = n + 1, l = t + (h % 4 == 0 ? 1 : 0)) : o === me.DIRECTION_FROM_RIGHT ? (h = n + 1, l = t - (h % 4 == 0 ? 1 : 0)) : (h = n + 1, l = t), this.#G.isValidPosition(l, h) ? this.#Ie.isFallThroughEnabled() && h === this.#G.getHeight() - 1 ? this.#Xe(l, 0) && (this.#G.swap(t, n, l, 0), this.#Ie.trigger(l, 0)) : this.#Xe(l, h) ? this.#G.swap(t, n, l, h) : this.#qe(e, t, n) : this.#qe(e, t, n)
        }
        #Xe(e, t) {
            const n = this.#G.getElementHead(e, t),
                s = r.getTypeClass(n);
            if (s <= r.TYPE_GAS || s === r.TYPE_FLUID) return !0;
            const i = r.getBehaviour(n);
            return i === r.BEHAVIOUR_TREE_LEAF || i === r.BEHAVIOUR_GRASS
        }
        #Ke(e, t, n) {
            ue.iterate(ue.BLUEPRINT_4, ((e, s, i) => {
                if (0 === i) return;
                const a = t + e,
                    o = n + s;
                if (this.#G.isValidPosition(a, o)) {
                    let e = this.#G.getElementHead(a, o);
                    if (r.getTypeClass(e) <= r.TYPE_EFFECT) {
                        const e = this.#Ie.getDefaults().getBrushFire();
                        this.#G.setElement(a, o, e.apply(a, o, this.#we))
                    } else {
                        const t = r.setTemperature(e, me.#Ve);
                        this.#G.setElementHead(a, o, t)
                    }
                }
            }))
        }
        #qe(e, t, n) {
            ue.iterate(ue.BLUEPRINT_9, ((e, s, i) => {
                const a = t + e,
                    o = n + s;
                if (this.#G.isValidPosition(a, o)) {
                    let e = this.#G.getElementHead(a, o);
                    if (0 !== i && r.getBehaviour(e) === r.BEHAVIOUR_METEOR) return;
                    if (i <= 7) {
                        const e = this.#Ie.getDefaults().getBrushFire();
                        this.#G.setElement(a, o, e.apply(a, o, this.#we))
                    } else {
                        const t = (8 === i ? me.#Ye : me.#Ge) - this.#we.nextInt(me.#ze);
                        if (e = r.setTemperature(e, t), f.isVisualBurnApplicable(e)) {
                            let e = this.#G.getElementTail(a, o);
                            e = 8 === i ? f.visualBurn(e, 2) : f.visualBurn(e, 1), this.#G.setElementTail(a, o, e)
                        }
                        if (r.getTypeClass(e) === r.TYPE_STATIC && (8 === i || 9 === i && this.#we.nextInt(10) < 3)) {
                            const t = r.type8Powder(r.TYPE_POWDER, 5);
                            e = r.setType(e, t)
                        }
                        this.#G.setElementHead(a, o, e)
                    }
                }
            }))
        }
    }
    class Ee {
        static #Je = 20;
        static canGrowUpHere(e, t, n) {
            if (t < 0 || n - 1 < 0) return !1;
            if (t >= e.getWidth() || n + 1 >= e.getHeight()) return !1;
            let s = e.getElementHead(t, n);
            if (r.getTypeClass(s) !== r.TYPE_AIR) return !1;
            if (r.getTemperature(s) >= this.#Je) return !1;
            let i = e.getElementHead(t, n + 1);
            if (r.getBehaviour(i) !== r.BEHAVIOUR_SOIL) return !1;
            if (r.getTemperature(i) >= this.#Je) return !1;
            let a = e.getElementHead(t, n - 1);
            return r.getTypeClass(a) === r.TYPE_AIR
        }
        static spawnHere(e, t, n, s, i) {
            let a = s.apply(t, n, i),
                o = 0;
            for (let s = r.getSpecial(a.elementHead); s >= 0 && !(n - o < 0); s--) e.setElementHead(t, n - o, r.setSpecial(a.elementHead, s)), e.setElementTail(t, n - o, a.elementTail), o++
        }
        #G;
        #we;
        #Ie;
        constructor(e, t, n) {
            this.#G = e, this.#we = t, this.#Ie = n
        }
        behaviourGrass(e, t, n) {
            if (r.getTemperature(e) > Ee.#Je) {
                this.#G.setElementHead(t, n, r.setBehaviour(e, 0));
                const s = this.#G.getElementTail(t, n),
                    i = this.#we.nextInt(2) + 1;
                this.#G.setElementTail(t, n, f.visualBurn(s, i))
            }
            let s = this.#we.nextInt(100);
            if (s < 3) {
                if (n > 0) {
                    let e = this.#G.getElementHead(t, n - 1);
                    if (r.getBehaviour(e) !== r.BEHAVIOUR_GRASS) {
                        let s = r.getTypeClass(e);
                        if (s > r.TYPE_FLUID || s === r.TYPE_FLUID && 0 === this.#we.nextInt(100)) return void this.#G.setElement(t, n, this.#Ie.getDefaults().getDefaultElement())
                    }
                }
                if (0 === s) {
                    let s = r.getSpecial(e);
                    if (0 === s) return void(0 === this.#we.nextInt(5) && this.#G.setElement(t, n, this.#Ie.getDefaults().getDefaultElement()));
                    if (0 === n) return;
                    let i = this.#G.getElementHead(t, n - 1);
                    if (r.getTypeClass(i) !== r.TYPE_AIR) return;
                    if (n > 1) {
                        let e = this.#G.getElementHead(t, n - 2);
                        if (r.getTypeClass(e) !== r.TYPE_AIR) return
                    }
                    this.#G.setElementHead(t, n - 1, r.setSpecial(e, s - 1)), this.#G.setElementTail(t, n - 1, this.#G.getElementTail(t, n))
                } else if (1 === s) {
                    if (Ee.canGrowUpHere(this.#G, t + 1, n + 1)) {
                        const e = this.#Ie.getDefaults().getBrushGrass();
                        this.#G.setElement(t + 1, n + 1, e.apply(t, n, this.#we))
                    }
                } else if (2 === s && Ee.canGrowUpHere(this.#G, t - 1, n + 1)) {
                    const e = this.#Ie.getDefaults().getBrushGrass();
                    this.#G.setElement(t - 1, n + 1, e.apply(t, n, this.#we))
                }
            }
        }
    }
    class ge {
        static #Je = 20;
        #G;
        #we;
        #Ie;
        constructor(e, t, n) {
            this.#G = e, this.#we = t, this.#Ie = n
        }
        behaviourFish(e, t, n) {
            if (t === this.#G.getWidth() - 1 || r.getBehaviour(this.#G.getElementHead(t + 1, n)) !== r.BEHAVIOUR_FISH_BODY) return void this.#je(t, n);
            if (r.getTemperature(e) > ge.#Je) return this.#je(t, n), void this.#je(t + 1, n);
            if (n = 4 ? i > 0 && this.#G.setElementHead(t, n, r.setSpecial(e, 0)) : (i++, i > 5 ? this.#je(t, n) : this.#G.setElementHead(t, n, r.setSpecial(e, i)))
            }
            else if (sAe.#nt.visualNoise(e, t, n, 10, .5, 1, 68, 77, 40); static #st = (e, t, n) => Ae.#nt.visualNoise(e, t, n, 4, .5, .9, 87, 61, 39); static spawnHere(e, t, n, s, i, a, o, l = -1) {
                    s %= 1 < Ae.#$e) return void this.#G.setElementHead(t, n, r.setBehaviour(e, 0));
                if (0 === this.#we.nextInt(oe.OPT_CYCLES_PER_SECOND)) {
                    const s = r.getSpecial(e),
                        i = this.#ot[s];
                    if (void 0 === i) throw "Tree template not found: " + s;
                    const a = this.#it(e, t, n, i, 1);
                    this.#ht(t, n, a, i)
                }
            }
            #it(e, t, n, i, a = 1) {
                let o = this.#ct(t, n - 2),
                    l = 0,
                    h = 0,
                    c = [{
                        entries: i.entries,
                        index: 0,
                        x: 0,
                        y: 0,
                        brush: null
                    }],
                    d = (e, r, s, i, a) => {
                        let o = s.apply(e, r, this.#we);
                        if (null === i) this.#G.setElement(e, r, o);
                        else {
                            const s = t - e + 10 * t,
                                a = n - r + 10 * n,
                                l = i(o.elementTail, s, a);
                            this.#G.setElementHeadAndTail(e, r, o.elementHead, l)
                        }
                        this.#Ie.trigger(e, r), a && (l++, h++)
                    };
                for (; c.length > 0;) {
                    const e = c.length;
                    let i = !1;
                    for (let a = 0; a = e.entries.length) {
                        i = !0;
                        continue
                    }
                    const h = e.entries[e.index++],
                        [u, m, E] = h,
                        g = t + u + e.x,
                        A = n - m - e.y;
                    if (this.#G.isValidPosition(g, A)) {
                        const t = this.#G.getElementHead(g, A),
                            n = r.getBehaviour(t);
                        switch (E) {
                            case Ae.TYPE_LEAF:
                                n === r.BEHAVIOUR_TREE_LEAF ? r.getSpecial(t) < 15 && this.#G.setElementHead(g, A, r.setSpecial(t, 0)) : (n === r.BEHAVIOUR_TREE_TRUNK || r.getTypeClass(t) === r.TYPE_AIR) && d(g, A, e.brush, Ae.#rt, !1);
                                break;
                            case Ae.TYPE_TRUNK:
                                (n === r.BEHAVIOUR_TREE_TRUNK || n === r.BEHAVIOUR_TREE_LEAF) && l++;
                                let i = !1;
                                if ((r.getTypeClass(t) === r.TYPE_AIR || n === r.BEHAVIOUR_SOIL || n === r.BEHAVIOUR_GRASS || m < 5 && r.getTypeClass(t) !== r.TYPE_STATIC) && (i = !0), i) {
                                    d(g, A, m > 0 ? W.TREE_WOOD : W.TREE_WOOD_DARK, Ae.#st, !0), 2 === m && 0 === u && this.#dt(g, A, o)
                                }
                                break;
                            case Ae.TYPE_BRANCH:
                                let a = !1;
                                if (n === r.BEHAVIOUR_TREE_LEAF) l++, r.getSpecial(t) < 15 && this.#G.setElementHead(g, A, r.setSpecial(t, 0));
                                else if (n === r.BEHAVIOUR_TREE_TRUNK) l++;
                                else {
                                    if (r.getTypeClass(t) !== r.TYPE_AIR) break;
                                    a = !0
                                }
                                let h = s.next(o + u + m),
                                    p = Math.trunc(h * this.#lt.length),
                                    T = this.#lt[p],
                                    f = Math.trunc(1024 * h) % 2 == 0 ? W.TREE_LEAF_LIGHTER : W.TREE_LEAF_DARKER;
                                c.push({
                                    entries: T.entries,
                                    index: 0,
                                    x: u,
                                    y: m,
                                    brush: f
                                }), a && d(g, A, f, Ae.#rt, !0);
                                break;
                            case Ae.TYPE_ROOT:
                                n === r.BEHAVIOUR_TREE_ROOT ? l++ : d(g, A, W.TREE_ROOT, null, !0);
                                break;
                            default:
                                throw "Unknown type: " + E
                        }
                    }
                    let p = h.length > 3 ? h[3] : void 0;
                    void 0 !== p && c.push({
                        entries: p,
                        index: 0,
                        x: e.x,
                        y: e.y,
                        brush: e.brush
                    })
                }
                if (-1 !== a && h >= a) break;
                if (i)
                    for (let e = c.length - 1; e >= 0; e--) {
                        let t = c[e];
                        t.index >= t.entries.length && c.splice(e, 1)
                    }
            }
            return l
        }
        #ct(e, t) {
            if (this.#G.isValidPosition(e, t)) {
                let n = this.#G.getElementHead(e, t);
                if (r.getBehaviour(n) === r.BEHAVIOUR_TREE_TRUNK) return r.getSpecial(n)
            }
            return this.#we.nextInt(1 < 0) {
                let i = this.#G.getElementHead(e, t - 1);
                if (r.getBehaviour(i) === r.BEHAVIOUR_TREE_TRUNK) {
                    const a = 15;
                    let o = r.getSpecial(i),
                        l = Math.trunc(n / s.entriesCount * a);
                    o - l > 5 ? (this.#G.setElementHead(e, t - 1, r.setSpecial(i, 0)), this.#G.setElement(e, t, W.TREE_WOOD.apply(e, t, this.#we))) : this.#G.setElementHead(e, t - 1, r.setSpecial(i, l))
                }
            }
        }
        behaviourTreeRoot(e, t, n) {
            if (r.getTemperature(e) > Ae.#$e) return void this.#G.setElementHead(t, n, r.setBehaviour(e, 0));
            let s = r.getSpecial(e);
            if (0 === s) return void(this.#Ie.getIteration() % 1e3 == 0 && this.#ut(t, n));
            let i = this.#we.nextInt(10 * oe.OPT_CYCLES_PER_SECOND);
            i < 10 && this.#at(t, n, e, s, i)
        }
        #ut(e, t) {
            const n = e + this.#we.nextInt(3) - 1,
                s = t + this.#we.nextInt(3) - 1;
            if (this.#G.isValidPosition(n, s)) {
                let e = this.#G.getElementHead(n, s),
                    t = r.getTypeClass(e);
                if (t === r.TYPE_POWDER || t === r.TYPE_POWDER_WET || t === r.TYPE_POWDER_FLOATING) {
                    let t = r.type8(r.type8Solid(r.TYPE_STATIC, 3)),
                        i = r.setType(e, t);
                    this.#G.setElementHead(n, s, i)
                }
            }
        }
        #at(e, t, n, s, i) {
            let a = (i, a) => {
                this.#G.setElementHead(e, t, r.setSpecial(n, 0));
                let o = W.TREE_ROOT.apply(i, a, this.#we),
                    l = r.setSpecial(o.elementHead, s - 1);
                this.#G.setElementHead(i, a, l), this.#G.setElementTail(i, a, o.elementTail)
            };
            if (tAe.#tt) return void this.#mt(e, t, n);
            if (this.#Ie.getIteration() % 32 == 0 && 0 === this.#we.nextInt(10)) {
                if (s++, s >= 15) return void this.#mt(e, t, n);
                e = r.setSpecial(e, s), this.#G.setElementHead(t, n, e)
            }
        }
        if (this.#Ie.getIteration() % oe.OPT_CYCLES_PER_SECOND == 0) {
            if (0 === this.#we.nextInt(5)) {
                const e = [
                        [0, -1],
                        [-1, -1],
                        [1, -1],
                        [-1, 0],
                        [1, 0]
                    ],
                    s = e[this.#we.nextInt(e.length)],
                    i = t + s[0],
                    a = n + s[1];
                if (this.#G.isValidPosition(i, a)) {
                    const e = this.#G.getElementHead(i, a);
                    r.getTypeClass(e) !== r.TYPE_STATIC && r.getTypeClass(e) >= r.TYPE_FLUID && this.#G.setElement(t, n, this.#Ie.getDefaults().getDefaultElement())
                }
            }
        }
    }
    #mt(e, t, n) {
        const s = this.#G.getElementTail(t, n),
            i = .85,
            a = 255 * (1 - i);
        let o = h.setColor(255 & Math.trunc(1.4 * h.getColorRed(s) * i + a), 255 & Math.trunc(.9 * h.getColorGreen(s) * i + a), 255 & Math.trunc(.8 * h.getColorBlue(s) * i + a));
        const l = r.setSpecial(e, 15);
        this.#G.setElementHeadAndTail(t, n, l, o)
    }
}
class pe {
    #G;
    #we;
    #Ie;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n
    }
    behaviourWater(e, t, n) {
        const s = r.getTypeClass(e),
            i = r.getTemperature(e);
        if (s === r.TYPE_FLUID) {
            if (i > 20) {
                const e = this.#Ie.getDefaults().getBrushSteam().apply(t, n, this.#we),
                    s = r.setTemperature(e.elementHead, i);
                return this.#G.setElementHeadAndTail(t, n, s, e.elementTail), !0
            }
        } else if (s === r.TYPE_GAS && i < 10) {
            const e = this.#Ie.getDefaults().getBrushWater().apply(t, n, this.#we),
                s = r.setTemperature(e.elementHead, i);
            return this.#G.setElementHeadAndTail(t, n, s, e.elementTail), !0
        }
        return !1
    }
}
class Te extends oe {
    #G;
    #W;
    #k;
    #Et;
    #gt;
    #At;
    #pt;
    #Tt;
    #ft;
    #Ct = 0;
    #we;
    #Rt = !1;
    #St = !1;
    #vt;
    static RANDOM_DATA_COUNT = 32;
    #wt = [];
    #It = [];
    #Ot = [];
    #yt;
    #bt;
    #Mt;
    #Ht;
    #Nt;
    #Dt;
    #xt;
    constructor(e, t, n, r, i) {
        if (super(), this.#G = e, this.#W = e.getWidth(), this.#k = e.getHeight(), this.#Et = t, this.#Et > 255) throw "Chunk size limit: 255";
        this.#gt = Math.ceil(this.#W / this.#Et), this.#At = Math.ceil(this.#k / this.#Et), this.#pt = new Array(this.#gt * this.#At).fill(!0), this.#Tt = new Array(this.#gt * this.#At).fill(!0), this.#ft = new Array(this.#gt * this.#At).fill(-1);
        let a = new s(0);
        this.#wt = Te.#Bt(Te.RANDOM_DATA_COUNT, this.#gt, a), this.#It = Te.#Ut(Te.RANDOM_DATA_COUNT, this.#Et, this.#Et, a), this.#Ot = Te.#Bt(Te.RANDOM_DATA_COUNT, this.#Et, a), this.#we = n, this.#vt = r, this.#yt = new he(e, n, this), this.#bt = new pe(e, n, this), this.#Mt = new de(e, n, this), this.#Ht = new me(e, n, this), this.#Nt = new Ee(e, n, this), this.#Dt = new ge(e, n, this), this.#xt = new Ae(e, n, this), i && (this.#Ct = i.iteration, this.#Rt = i.fallThroughEnabled, this.#St = i.erasingEnabled)
    }
    static #Pt(e, t, n) {
        for (let r = 0; r = 0; t--) {
            const s = t * this.#Et,
                i = Math.min((t + 1) * this.#Et - 1, this.#k - 1),
                a = this.#wt[this.#we.nextInt(Te.RANDOM_DATA_COUNT)],
                o = 0 === this.#we.nextInt(2),
                l = new Uint16Array(this.#gt);
            for (let h = i; h >= s; h--)
                for (let s = 0; s = 10) && (this.#Wt(n, t) || (e[r] = !1, this.#Tt[r] = !0, this.#ft[r] = this.#Ct))
        }
    }
}
if (this.#St) {
    const e = this.#vt.getDefaultElement();
    for (let t = 0; t0 && n[t * this.#gt + e - 1]) {
        const n = e * this.#Et,
            r = Math.min((t + 1) * this.#Et, this.#k);
        for (let e = t * this.#Et; e0 && n[(t - 1) * this.#gt + e] || this.#Rt && 0 === t && n[(this.#At - 1) * this.#gt + e]) {
            const n = t * this.#Et,
                r = Math.min((e + 1) * this.#Et, this.#W);
            for (let t = e * this.#Et; t0) return !0;
            if (this.#Yt(n, e, t)) return !0;
            switch (r.getBehaviour(n)) {
                case r.BEHAVIOUR_NONE:
                case r.BEHAVIOUR_SOIL:
                case r.BEHAVIOUR_TREE_TRUNK:
                    return !1;
                default:
                    return !0
            }
        }
        #Yt(e, t, n) {
            const s = r.getTypeClass(e);
            switch (s) {
                case r.TYPE_AIR:
                    return !1;
                case r.TYPE_POWDER:
                case r.TYPE_POWDER_FLOATING:
                case r.TYPE_POWDER_WET:
                    return !!r.getTypeModifierPowderSliding(e) || this.#Gt(e, t, n, t, n + 1);
                case r.TYPE_FLUID:
                    return this.#Gt(e, t, n, t, n + 1) || this.#Gt(e, t, n, t + 1, n) || this.#Gt(e, t, n, t - 1, n);
                case r.TYPE_GAS:
                    return this.#Gt(e, t, n, t, n - 1) || this.#Gt(e, t, n, t + 1, n) || this.#Gt(e, t, n, t - 1, n);
                case r.TYPE_STATIC:
                    return 0 !== r.getTypeModifierSolidBodyId(e);
                default:
                    return !0
            }
            throw "Unknown element type: " + s
        }
        #Gt(e, t, n, r, s) {
            if (!this.#G.isValidPosition(r, s)) {
                if (!this.#Rt || n !== this.#k - 1) return !1;
                if (s = 0, !this.#G.isValidPosition(r, s)) return !1
            }
            let i = this.#G.getElementHead(r, s);
            return this.#Xe(e, i)
        }
        #_t(e, t, n) {
            const s = this.#G.getElementHead(e, t);
            if (this.#zt(s, e, t)) return !0;
            const i = r.getBehaviour(s);
            let a = !1;
            switch (i) {
                case r.BEHAVIOUR_NONE:
                case r.BEHAVIOUR_SOIL:
                    break;
                case r.BEHAVIOUR_WATER:
                    this.#bt.behaviourWater(s, e, t) && (a = r.getTemperature(s) > 0, n = !1);
                    break;
                case r.BEHAVIOUR_FIRE:
                    this.#Mt.behaviourFire(s, e, t), a = !0, n = !1;
                    break;
                case r.BEHAVIOUR_GRASS:
                    this.#Nt.behaviourGrass(s, e, t), a = !0;
                    break;
                case r.BEHAVIOUR_TREE:
                    this.#xt.behaviourTree(s, e, t), a = !0;
                    break;
                case r.BEHAVIOUR_TREE_LEAF:
                    this.#xt.behaviourTreeLeaf(s, e, t), a = !0;
                    break;
                case r.BEHAVIOUR_TREE_TRUNK:
                    break;
                case r.BEHAVIOUR_TREE_ROOT:
                    this.#xt.behaviourTreeRoot(s, e, t), a = !0;
                    break;
                case r.BEHAVIOUR_FIRE_SOURCE:
                    this.#Mt.behaviourFireSource(s, e, t), a = !0, n = !1;
                    break;
                case r.BEHAVIOUR_METEOR:
                    this.#Ht.behaviourMeteor(s, e, t), a = !0, n = !1;
                    break;
                case r.BEHAVIOUR_FISH:
                    this.#Dt.behaviourFish(s, e, t), n = !1, a = !0;
                    break;
                case r.BEHAVIOUR_FISH_BODY:
                    this.#Dt.behaviourFishBody(s, e, t), a = !0;
                    break;
                default:
                    throw "Unknown element behaviour: " + i
            }
            if (n) {
                const n = this.#Kt(s, e, t);
                return a || n
            }
            return a
        }
        #Kt(e, t, n) {
            const s = r.getTemperature(e);
            if (0 === s) {
                const i = r.getHeatModIndex(e);
                return s1) {
                const e = r.hmiToConductiveIndex(o);
                c = Math.trunc(e * d + (1 - e) * s)
            }
            if (s - c != 0) {
                let o;
                l && c--, c = Math.max(c, 0), o = d - c > 10 ? d - 10 : d + (s - c), o = Math.max(o, 0), this.#G.setElementHead(i, a, r.setTemperature(h, o)), this.trigger(i, a), s - c > 10 && (c = s - 10), e = r.setTemperature(e, c), this.#G.setElementHead(t, n, e)
            }
        } else l && (c = Math.max(s - 1, 0), e = r.setTemperature(e, c), this.#G.setElementHead(t, n, e));
        const d = r.hmiToSelfIgnitionChanceTo10000(o);
        if (c > 100 && d > 0)
            if (r.getBehaviour(e) === r.BEHAVIOUR_FIRE_SOURCE);
            else if (this.#we.nextInt(1e4) r.hmiToMeltingTemperature(o)) {
            e = r.setType(e, r.TYPE_FLUID), e = r.setHeatModIndex(e, r.hmiToMeltingHMI(o));
            let s = this.#G.getElementTail(t, n);
            return s = h.setBlurType(s, h.BLUR_TYPE_1), this.#G.setElementHeadAndTail(t, n, e, s), !0
        }
        return cr.TYPE_FLUID
    }
    #zt(e, t, n) {
        const s = r.getTypeClass(e);
        switch (s) {
            case r.TYPE_AIR:
                return !1;
            case r.TYPE_POWDER:
            case r.TYPE_POWDER_WET:
            case r.TYPE_POWDER_FLOATING:
                if (this.#jt(e, t, n, t, n + 1)) return n % 2 == 0 ? this.#Zt(t - 1, n + 1, 0) : this.#Zt(t + 1, n + 1, 1), this.#Zt(t, n + 1, n % 2), n % 2 == 0 ? this.#Zt(t + 1, n, 0) : this.#Zt(t - 1, n, 1), !0;
                if (1 === r.getTypeModifierPowderSliding(e)) {
                    const s = r.getTypeModifierPowderMomentum(e);
                    if (this.#we.nextInt(1e6) > Te.#Qt(s)) return this.#G.setElementHead(t, n, r.setTypeModifierPowderSliding(e, 0)), !1;
                    const i = r.getTypeModifierPowderDirection(e);
                    this.#Zt(t, n + 1, i);
                    const a = 0 === i ? -1 : 1;
                    return this.#jt(e, t, n, t + a, n) ? (this.#Zt(t + a, n + 1, i), this.#Zt(t - a, n, i), !0) : (this.#Zt(t + a, n + 1, i), this.#G.setElementHead(t, n, r.setTypeModifierPowderSliding(e, 0)), !1)
                }
                return !1;
            case r.TYPE_FLUID:
                if (!this.#jt(e, t, n, t, n + 1)) {
                    return 0 === this.#we.nextInt(2) ? !!this.#jt(e, t, n, t + 1, n) && (this.#Zt(t + 1, n + 1, 1), this.#jt(e, t + 1, n, t + 2, n) && (this.#jt(e, t + 2, n, t + 3, n) ? this.trigger(t + 3, n) : this.trigger(t + 2, n)), !0) : !!this.#jt(e, t, n, t - 1, n) && (this.#Zt(t - 1, n + 1, 0), this.#jt(e, t - 1, n, t - 2, n) && (this.#jt(e, t - 2, n, t - 3, n) ? this.trigger(t - 3, n) : this.trigger(t - 2, n)), !0)
                }
                return !0;
            case r.TYPE_GAS:
                let s = this.#we.nextInt(8);
                return 0 !== s && 2 !== s || !this.#jt(e, t, n, t, n - 1) ? 3 === s && this.#jt(e, t, n, t + 1, n) ? (this.trigger(t + 1, n), !0) : !(4 !== s || !this.#jt(e, t, n, t - 1, n)) && (this.trigger(t - 1, n), !0) : (this.trigger(t, n - 1), !0);
            case r.TYPE_STATIC:
                return 0 !== r.getTypeModifierSolidBodyId(e) && this.#yt.behaviourSolid(e, t, n);
            case r.TYPE_EFFECT:
                return !1
        }
        throw "Unknown element type: " + s
    }
    #jt(e, t, n, s, i) {
        if (!this.#G.isValidPosition(s, i)) {
            if (!this.#Rt || n !== this.#k - 1) return !1;
            if (i = 0, !this.#G.isValidPosition(s, i)) return !1
        }
        const a = this.#G.getElementHead(s, i),
            o = r.getTypeClass(a);
        if (o === r.TYPE_POWDER_FLOATING || o === r.TYPE_POWDER) return !1;
        const l = r.getTypeClass(e);
        if (l > o) {
            if (l === r.TYPE_POWDER && o === r.TYPE_FLUID) {
                const o = r.setTypeClass(e, r.TYPE_POWDER_WET),
                    l = this.#G.getElementTail(t, n);
                if (this.#we.nextInt(100) > 9) this.#G.setElement(t, n, this.#vt.getDefaultElement());
                else {
                    const e = this.#G.getElementTail(s, i);
                    this.#G.setElementHead(t, n, a), this.#G.setElementTail(t, n, e)
                }
                this.#G.setElementHead(s, i, o), this.#G.setElementTail(s, i, l)
            } else {
                const r = this.#G.getElementTail(t, n),
                    o = this.#G.getElementTail(s, i);
                this.#G.setElementHead(s, i, e), this.#G.setElementHead(t, n, a), this.#G.setElementTail(s, i, r), this.#G.setElementTail(t, n, o)
            }
            return !0
        }
        return !1
    }
    #Xe(e, t) {
        const n = r.getTypeClass(t);
        if (n === r.TYPE_POWDER_FLOATING || n === r.TYPE_POWDER) return !1;
        return r.getTypeClass(e) > n
    }
    #Zt(e, t, n) {
        if (this.#G.isValidPosition(e, t)) {
            let s = this.#G.getElementHead(e, t);
            const i = r.getTypeClass(s);
            if (i === r.TYPE_POWDER || i === r.TYPE_POWDER_WET || i === r.TYPE_POWDER_FLOATING) {
                const i = r.getTypeModifierPowderMomentum(s);
                if (0 === i) return;
                const a = 0 === n ? -1 : 1;
                if (this.#G.isValidPosition(e + a, t)) {
                    const n = this.#G.getElementHead(e + a, t);
                    if (!this.#Xe(s, n)) return
                }
                if (this.#we.nextInt(1e6) > Te.#$t(i)) return;
                s = r.setTypeModifierPowderSliding(s, 1), s = r.setTypeModifierPowderDirection(s, n), this.#G.setElementHead(e, t, s)
            }
        }
    }
    static #Qt(e) {
        return [0, 4e5, 6e5, 7e5, 7e5, 8e5, 95e4, 95e4][e]
    }
    static #$t(e) {
        return [0, 4e5, 4e5, 4e5, 6e5, 6e5, 85e4, 9e5][e]
    }
}
class fe {
    #G;
    #we;
    #Ie;
    #en = 2;
    #tn = 2;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n
    }
    run() {
        if (0 == this.#tn--) {
            this.#tn = this.#en;
            const e = this.#we.nextInt(this.#G.getWidth() - 2) + 1,
                t = this.#we.nextInt(this.#G.getHeight() - 2) + 1;
            if (this.#nn(this.#G, e, t)) {
                const n = this.#Ie.getDefaults();
                this.#G.setElement(e, t, n.getBrushFishHead().apply(e, t, this.#we)), this.#Ie.trigger(e, t), this.#G.setElement(e + 1, t, n.getBrushFishBody().apply(e + 1, t, this.#we)), this.#Ie.trigger(e + 1, t), this.#en = this.#en << 2
            }
        }
    }
    #nn(e, t, n) {
        if (t < 1 || n < 1) return !1;
        if (t + 1 >= e.getWidth() || n + 1 >= e.getHeight()) return !1;
        const s = e.getElementHead(t, n);
        return !(r.getTemperature(s) > 0) && (!!(this.#Qe(e, t, n) && this.#Qe(e, t - 1, n) && this.#Qe(e, t + 1, n) && this.#Qe(e, t + 2, n) && this.#Qe(e, t + 1, n + 1) && this.#Qe(e, t + 2, n + 1) && this.#Qe(e, t + 1, n - 1) && this.#Qe(e, t + 2, n - 1)) && (this.#rn(e, t, n + 2) || this.#rn(e, t + 1, n + 2)))
    }
    #Qe(e, t, n) {
        if (!e.isValidPosition(t, n)) return !1;
        const s = e.getElementHead(t, n);
        return r.getTypeClass(s) === r.TYPE_FLUID
    }
    #rn(e, t, n) {
        if (!e.isValidPosition(t, n)) return !1;
        const s = e.getElementHead(t, n),
            i = r.getTypeClass(s);
        return i === r.TYPE_POWDER || i === r.TYPE_POWDER_WET
    }
}
class Ce {
    static MAX_COUNTER_VALUE = 2;
    #G;
    #we;
    #Ie;
    #tn = Ce.MAX_COUNTER_VALUE;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n
    }
    run() {
        if (0 == this.#tn--) {
            this.#tn = Ce.MAX_COUNTER_VALUE;
            const e = this.#we.nextInt(this.#G.getWidth()),
                t = this.#we.nextInt(this.#G.getHeight() - 3) + 2;
            if (Ee.canGrowUpHere(this.#G, e, t)) {
                const n = this.#Ie.getDefaults().getBrushGrass();
                this.#G.setElement(e, t, n.apply(e, t, this.#we)), this.#Ie.trigger(e, t)
            }
        }
    }
}
class Re {
    static STARTING_COUNTER_VALUE = 1e3;
    static MAX_COUNTER_VALUE = 4;
    #G;
    #we;
    #Ie;
    #tn = Re.STARTING_COUNTER_VALUE;
    constructor(e, t, n) {
        this.#G = e, this.#we = t, this.#Ie = n
    }
    run() {
        if (0 == this.#tn--) {
            this.#tn = Re.MAX_COUNTER_VALUE;
            const e = this.#we.nextInt(this.#G.getWidth() - 12) + 6,
                t = this.#we.nextInt(this.#G.getHeight() - 16) + 15;
            if (Re.couldGrowUpHere(this.#G, e, t)) {
                const n = this.#Ie.getDefaults().getBrushTree();
                this.#G.setElement(e, t, n.apply(e, t, this.#we)), this.#Ie.trigger(e, t)
            }
        }
    }
    static couldGrowUpHere(e, t, n) {
        if (t < 0 || n < 12) return !1;
        if (t > e.getWidth() - 5 || n > e.getHeight() - 2) return !1;
        let s = e.getElementHead(t, n);
        if (r.getBehaviour(s) !== r.BEHAVIOUR_GRASS) return !1;
        if (r.getTemperature(s) > 0) return !1;
        let i = e.getElementHead(t, n + 1);
        if (r.getBehaviour(i) !== r.BEHAVIOUR_SOIL) return !1;
        if (r.getTemperature(i) > 0) return !1;
        for (let r = 1; r < 18; r++)
            if (!Re.#sn(e, t, n - r)) return !1;
        for (let r = -15; r < 15; r++)
            if (Re.#in(e, t + r, n - 4)) return !1;
        for (let r = 10; r < 15; r++) {
            if (!Re.#sn(e, t - 8, n - r)) return !1;
            if (!Re.#sn(e, t + 8, n - r)) return !1
        }
        return !0
    }
    static #sn(e, t, n) {
        let s = e.getElementHead(t, n);
        return r.getTypeClass(s) === r.TYPE_AIR || r.getBehaviour(s) === r.BEHAVIOUR_GRASS
    }
    static #in(e, t, n) {
        let s = e.getElementHead(t, n),
            i = r.getBehaviour(s);
        return i === r.BEHAVIOUR_TREE_TRUNK || i === r.BEHAVIOUR_TREE
    }
}
class Se {
    trigger(e, t) {
        throw "Not implemented"
    }
    render(e) {
        throw "Not implemented"
    }
}
class ve {
    apply(e, t, n, r) {
        throw "Not implemented"
    }
}
class we extends Se {
    static renderPreview(e, t, n = 255) {
        const r = e.getWidth(),
            s = e.getHeight(),
            i = t.createImageData(r, s),
            a = i.data;
        for (let t = 0; tthis.#gn = e))
}
apply(e, t, n, s) {
        if (null !== this.#gn)
            if (0 === n) e[t] = 0, e[t + 1] = 0, e[t + 2] = 0;
            else {
                const s = r.getTemperature(n),
                    i = 4 * Math.trunc(s / (1 < 0.9) {
                            \
                            n alpha = 0.875 + (rand(v_texcoord.xy) * 0.1 - 0.05);\
                            n
                        } else {
                            \
                            n alpha = 0.775 + (rand(v_texcoord.xy) * 0.04 - 0.02);\
                            n
                        }\
                        n float whiteBackground = 1.0 - alpha;\ n\ n float nr = (r * alpha) + whiteBackground;\ n float ng = (g * alpha) + whiteBackground;\ n float nb = (b * alpha) + whiteBackground;\ n\ n
                        if (int(nr * 255.0) == int(r * 255.0)\ n && int(ng * 255.0) == int(g * 255.0)\ n && int(nb * 255.0) == int(b * 255.0)) {
                            \
                            n\ n // no change - delete blur (otherwise there could be visible remains)\n v_color = vec4(1.0, 1.0, 1.0, 1.0);\n \n } else {\n v_color = vec4(nr, ng, nb, 1.0);\n }\n \n } else { // == BLUR_TYPE_1\n // render element\n float r = elementTail[2]; // 0..1\n float g = elementTail[1];\n float b = elementTail[0];\n \n // apply temperature\n int heatType = (flags >> 4) & 0x3;\n if (heatType > 0) {\n vec4 elementHead = texture(u_element_heads, v_texcoord);\n float temperature = elementHead[3]; // 0..1\n \n if (temperature >= 0.001) {\n applyTemperature(temperature, heatType, r, g, b);\n }\n }\n \n v_color = vec4(r, g, b, 1.0);\n }\n }\n `,l=this.#Tn(r,"#version 300 es\n in vec4 a_position;\n \n out vec2 v_texcoord;\n \n void main() {\n gl_Position = a_position;\n v_texcoord = a_position.xy * vec2(0.5, 0.5) + 0.5;\n }\n ",o),h=r.getUniformLocation(l,"u_element_heads"),c=r.getUniformLocation(l,"u_element_tails"),d=r.getUniformLocation(l,"u_blur"),u=r.getUniformLocation(l,"u_temperature_palette"),m=`#version 300 es\n precision mediump float;\n \n in vec2 v_texcoord;\n out vec4 v_color;\n \n uniform sampler2D u_element_heads;\n uniform sampler2D u_element_tails;\n uniform sampler2D u_blur;\n uniform sampler2D u_temperature_palette;\n \n ${a}\n \n void main() {\n vec4 elementTail = texture(u_element_tails, v_texcoord);\n int flags = int(floor(elementTail[3] * 255.0 + 0.5));\n int blurType = (flags & 0x3);\n \n if (blurType == 0x00) { // == BLUR_TYPE_NONE\n // render element\n float r = elementTail[2]; // 0..1\n float g = elementTail[1];\n float b = elementTail[0];\n \n // apply temperature\n int heatType = (flags >> 4) & 0x3;\n if (heatType > 0) {\n vec4 elementHead = texture(u_element_heads, v_texcoord);\n float temperature = elementHead[3]; // 0..1\n \n if (temperature >= 0.001) {\n applyTemperature(temperature, heatType, r, g, b);\n }\n }\n \n v_color = vec4(r, g, b, 1.0);\n \n } else {\n v_color = texture(u_blur, v_texcoord);\n }\n }\n `,E=this.#Tn(r,"#version 300 es\n in vec4 a_position;\n \n out vec2 v_texcoord;\n \n void main() {\n gl_Position = a_position;\n\n // Flip Y though so we get the top at 0\n v_texcoord = a_position.xy * vec2(0.5, -0.5) + 0.5;\n }\n ",m),g=r.getUniformLocation(E,"u_element_heads"),A=r.getUniformLocation(E,"u_element_tails"),p=r.getUniformLocation(E,"u_blur"),T=r.getUniformLocation(E,"u_temperature_palette"),f=[1,1,-1,1,-1,-1,1,1,-1,-1,1,-1],C=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,C),r.bufferData(r.ARRAY_BUFFER,new Float32Array(f),r.STATIC_DRAW),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0);const R=e=>{const t=new Uint8Array(this.#G.getDataTails().byteLength).fill(255),n=r.createTexture();r.activeTexture(e),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.#W,this.#k,0,r.RGBA,r.UNSIGNED_BYTE,t);const s=r.createFramebuffer();return r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0),s},S=R(r.TEXTURE2),v=R(r.TEXTURE3),w=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,w),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);const I=r.createTexture();r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);const O=r.createTexture();r.activeTexture(r.TEXTURE4),r.bindTexture(r.TEXTURE_2D,O),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);let y=2;this.#pn=()=>{const e=new Uint8Array(this.#G.getDataHeads());r.bindTexture(r.TEXTURE_2D,w),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.#W,this.#k,0,r.RGBA,r.UNSIGNED_BYTE,e);const t=new Uint8Array(this.#G.getDataTails());r.bindTexture(r.TEXTURE_2D,I),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.#W,this.#k,0,r.RGBA,r.UNSIGNED_BYTE,t),r.bindTexture(r.TEXTURE_2D,O),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i,1,0,r.RGBA,r.UNSIGNED_BYTE,s),r.bindFramebuffer(r.FRAMEBUFFER,2===y?S:v),r.useProgram(l),r.uniform1i(h,0),r.uniform1i(c,1),r.uniform1i(d,2===y?3:2),r.uniform1i(u,4),r.drawArrays(r.TRIANGLES,0,f.length/2),r.bindFramebuffer(r.FRAMEBUFFER,null),r.useProgram(E),r.uniform1i(g,0),r.uniform1i(A,1),r.uniform1i(p,y),r.uniform1i(T,4),r.drawArrays(r.TRIANGLES,0,f.length/2),y=2===y?3:2}}trigger(e,t){}render(e){this.#pn()}#Tn(e,t,n){const r=e.createProgram();if(e.attachShader(r,this.#fn(e,t,e.VERTEX_SHADER)),e.bindAttribLocation(r,0,"a_position"),e.attachShader(r,this.#fn(e,n,e.FRAGMENT_SHADER)),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)&&!e.isContextLost()){throw`Error in program linking: ${e.getProgramInfoLog(r)}`}return r}#fn(e,t,n){const r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)&&!e.isContextLost()){throw`Error compiling shader: ${e.getShaderInfoLog(r)}`}return r}#M(e){const t=e.split("\n").map((e=>e.split(",").map(Number))),n=new Uint8Array(4*t.length);for(let e=0;e=a||t>=o)return;if(!this.#wn(e,t,n,r))return;const l=e+t*a;s.has(l)||i.push(l)}#wn(e,t,n,r){let s=this.#G.getElementHead(e,t);return s=this.#Sn(s),(s&n)===r}#Sn(e){return r.getTypeClass(e)===r.TYPE_POWDER_WET&&(e=r.setTypeClass(e,r.TYPE_POWDER)),e}}class Be{#In;#On;#yn;#bn;#Mn;#Hn=!0;#Nn=[];constructor(e,t,n,r,s){this.#In=e,this.#On=t,this.#yn=n,this.#bn=r,this.#Mn=s,this.#Hn=!0===s.visible}getPosition(){return[this.#In,this.#On,this.#yn,this.#bn]}getConfig(){return this.#Mn}isVisible(){return this.#Hn}setVisible(e){if(this.#Hn!==e){this.#Hn=e;for(let t of this.#Nn)t(e)}}addOnVisibleChanged(e){this.#Nn.push(e)}}class Ue{#G;#we;#Dn;#xn;constructor(e,t,n,r){this.#G=e,this.#we=t,this.#Dn=n,this.#xn=r}swap(e,t,n,r){e=Math.trunc(e),t=Math.trunc(t),n=Math.trunc(n),r=Math.trunc(r),this.#G.isValidPosition(e,t)&&this.#G.isValidPosition(n,r)&&(this.#G.swap(e,t,n,r),this.#xn(e,t),this.#xn(n,r))}draw(e,t,r){if(e=Math.trunc(e),t=Math.trunc(t),this.#G.isValidPosition(e,t))if(null===r)this.#G.setElement(e,t,this.#Dn.getDefaultElement()),this.#xn(e,t);else if(r instanceof n)this.#G.setElement(e,t,r),this.#xn(e,t);else{if(!(r instanceof i))throw"Brush or Element expected";{let n=this.#G.getElement(e,t),s=r.apply(e,t,this.#we,n);this.#G.setElement(e,t,s),this.#xn(e,t)}}}drawRectangle(e,t,r,s,a,o=!1){if(!(a instanceof i||a instanceof n))throw"Brush expected";e=Math.trunc(e),t=Math.trunc(t),r=Math.trunc(r),s=Math.trunc(s),o&&(e=e>=0?e:this.getWidth()+e+1,r=r>=0?r:this.getWidth()+r+1,t=t>=0?t:this.getHeight()+t+1,s=s>=0?s:this.getHeight()+s+1),e=Math.max(Math.min(e,this.getWidth()),0),r=Math.max(Math.min(r,this.getWidth()),0),t=Math.max(Math.min(t,this.getHeight()),0),s=Math.max(Math.min(s,this.getHeight()),0);for(let n=t;n{ue.iterate(e,((e,s,i)=>{i<=t&&this.draw(n+e,r+s,o)}))}}else{const e=Math.ceil(a/2);h=(t,n)=>{this.drawRectangle(t-e,n-e,t+e,n+e,o)}}Ue.#Bn(e,t,r,s,h)}static#Bn(e,t,n,r,s){if(s(e,t),e!==n||t!==r){const i=e-l&&(h-=l,e+=i),n=0?e:this.#W+e+1,n=n>=0?n:this.#W+n+1,t=t>=0?t:this.#k+t+1,r=r>=0?r:this.#k+r+1),e=Math.max(Math.min(e,this.#W-1),0),n=Math.max(Math.min(n,this.#W-1),0),t=Math.max(Math.min(t,this.#k-1),0),r=Math.max(Math.min(r,this.#k-1),0);const a=new Be(e,t,n,r,s);this.#Un.push(a);for(let e of this.#Pn)e(a);return a}createRectangleWH(e,t,n,r,s){return this.createRectangle(e,t,e+n,t+r,s)}getMarkers(){return[...this.#Un]}addOnMarkerAdded(e){this.#Pn.push(e)}getWidth(){return this.#W}getHeight(){return this.#k}}class Le{#Mn;#Hn;#Nn=[];constructor(e){this.#Mn=e,this.#Hn=!0===e.visible}getConfig(){return this.#Mn}isVisible(){return this.#Hn}setVisible(e){if(this.#Hn!==e){this.#Hn=e;for(let t of this.#Nn)t(e)}}addOnVisibleChanged(e){this.#Nn.push(e)}}class Fe{#Mn;#Hn;#Nn=[];#Ln;#Fn=[];#_n=!1;#kn=[];constructor(e){this.#Mn=e,this.#Hn=!0===e.visible,this.#Ln=!0===e.active}getConfig(){return this.#Mn}isVisible(){return this.#Hn}setVisible(e){if(this.#Hn!==e){this.#Hn=e;for(let t of this.#Nn)t(e)}}addOnVisibleChanged(e){this.#Nn.push(e)}isActive(){return this.#Ln}setActive(e){if(this.#Ln!==e){this.#Ln=e;for(let t of this.#Fn)t(e)}}addOnActiveChanged(e){this.#Fn.push(e)}isCompleted(){return this.#_n}setCompleted(e){if(this.#_n!==e){this.#_n=e;for(let t of this.#kn)t(e)}}addOnCompleted(e){this.#kn.push(e)}}class _e{#Wn=[];#Vn=[];#Yn=[];#Gn=[];#zn=!1;#Kn=[];constructor(){}createSplash(e){const t=new Le(e);this.#Wn.push(t);for(let e of this.#Vn)e(t);return t}getSplashes(){return[...this.#Wn]}addOnSplashAdded(e){this.#Vn.push(e)}createObjective(e){const t=new Fe(e);this.#Yn.push(t);for(let e of this.#Gn)e(t);return t}getObjectives(){return[...this.#Yn]}addOnObjectiveAdded(e){this.#Gn.push(e)}setCompleted(){if(!this.#zn){this.#zn=!0,ee.triggerFeatureUsed(ee.FEATURE_SCENARIO_COMPLETED);for(let e of this.#Kn)e()}}addOnStatusCompleted(e){this.#Kn.push(e)}}class ke{metadata;dataHeads;dataTails}class We{static CURRENT_FORMAT_VERSION=6;formatVersion;appVersion;created;width;height;scale;random;iteration;fallThroughEnabled;erasingEnabled}class Ve{#Cn;#Xn=null;#qn=null;#Jn=Number.MAX_SAFE_INTEGER;#jn="bottom";constructor(e){this.#Cn=e}withBlueprint(e){return this.#Xn=e,this}withBrushes(e){return this.#qn=e,this}withMaxHeight(e,t="bottom"){return this.#Jn=e,this.#jn=t,this}paint(){if(null===this.#Xn||0===this.#Xn.length)throw"Blueprint not set";if(null===this.#qn)throw"Brushes not set";const e="string"==typeof this.#Xn?this.#Xn.split("\n"):this.#Xn,t=e[0].length,n=e.length,r=Math.ceil(this.#Cn.getWidth()/t),s=Math.ceil(Math.min(this.#Cn.getHeight(),this.#Jn)/n),i="bottom"===this.#jn?this.#Cn.getHeight()-s*n:0;for(let a=0;ai&&(t=a,i=n)}if(0===e[t][s])s++;else{Ge(e,r,t);for(let t=r+1;t=0;r--){var i=0;e[r][r]&&(i=e[r][n]/e[r][r]),t[r]=i;for(let t=r-1;t>=0;t--)e[t][n]-=e[t][r]*i,e[t][r]=0}return t}(n,e)}getIndexBefore(e){let t=0,n=this.xs.length,r=0;for(;t=e&&r!==n?r:t;return t+1}at(e){let t=this.getIndexBefore(e);const n=(e-this.xs[t-1])/(this.xs[t]-this.xs[t-1]),r=this.ks[t-1]*(this.xs[t]-this.xs[t-1])-(this.ys[t]-this.ys[t-1]),s=-this.ks[t]*(this.xs[t]-this.xs[t-1])+(this.ys[t]-this.ys[t-1]);return(1-n)*this.ys[t-1]+n*this.ys[t]+n*(1-n)*(r*(1-n)+s*n)}}(s,i);return this.layerFunction((function(e){return Math.max(Math.trunc(a.at(e)),0)}),t,n,r),this}layerPerlin(e,t,n,r=0){const i=[];for(let t of e){if(void 0===t.seed&&(s.DEFAULT.next(),t.seed=s.DEFAULT.getState()),void 0===t.factor)throw"factor not defined";if(void 0===t.threshold)throw"threshold not defined";if(void 0===t.force)throw"force not defined";const e=new s(t.seed),n=T((()=>e.next()));i.push({instance:n,levelConfig:t})}return this.layerFunction((function(e){let t=0;for(const{instance:n,levelConfig:r}of i){const{factor:s,threshold:i,force:a}=r;let o=(n(e/s,0)+1)/2;o0&&e>0)for(let t=0;t1){const e=this.#we.nextInt(Math.ceil(t))-Math.trunc(t/2),n=this.#G.getHeight()-1-i+e,r=this.#G.getHeight()-1-i+e+1;n=this.#G.getWidth()-5)return this;const s=this.#Zn[e],i=this.#G.getHeight()-1-s,a=this.#Ie.getDefaults().getBrushTree();if(!this.#G.isValidPosition(e,i+1))return this;{const t=this.#G.getElementHead(e,i+1);if(r.getBehaviour(t)!==r.BEHAVIOUR_SOIL)return this}return void 0===t&&(t=this.#we.nextInt(8)),Ae.spawnHere(this.#G,e,i,t,a,this.#we,this.#Ie,n),this}fish(e,t=0){if(e<0||e>=this.#G.getWidth()-1)return this;const n=this.#Zn[e],r=this.#G.getHeight()-t-n;return r<0||r>=this.#G.getHeight()||(this.#G.setElement(e,r,W.FISH_HEAD.apply(0,0,this.#we,null)),this.#G.setElement(e+1,r,W.FISH_BODY.apply(0,0,this.#we,null))),this}tool(e,t,n){if(e<0||e>=this.#G.getWidth())return this;const r=this.#Zn[e],s=this.#G.getHeight()-t-r;return s<0||s>=this.#G.getHeight()||n.applyPoint(e,s,this.#Cn,!1),this}}class Ke{#G;#W;#k;#we;#Qn;#$n;#er;#tr;#nr=null;#rr=null;#sr=[];#ir=[];#ar=[];#or;#lr;constructor(e,t,n,r,i){this.#G=e,this.#we=new s(t?t.random:0),this.#Qn=new ae,this.#$n=new ae,this.#er=new Te(this.#G,16,this.#we,n,t),this.#tr=i.initialize(this.#G,16,r),this.#W=e.getWidth(),this.#k=e.getHeight(),this.#or=new Pe(e.getWidth(),e.getHeight()),this.#lr=new _e,this.#hr(),this.#cr()}#hr(){let e=[];const t=()=>{e=this.#lr.getObjectives().filter((e=>e.isActive()&&"function"==typeof e.getConfig().checkHandler))};this.#lr.addOnObjectiveAdded((e=>{t(),e.addOnActiveChanged((()=>t())),e.addOnCompleted((()=>t()))})),this.#ar.push((()=>{for(let t of e)t.getConfig().checkHandler(this.#er.getIteration()-1)}))}#cr(){let e=new Ce(this.#G,this.#we,this.#er);this.#ar.push((()=>e.run()));let t=new Re(this.#G,this.#we,this.#er);this.#ar.push((()=>t.run()));let n=new fe(this.#G,this.#we,this.#er);this.#ar.push((()=>n.run()))}startProcessing(){if(null===this.#nr){const e=Math.trunc(1e3/Te.OPT_CYCLES_PER_SECOND);this.#nr=setInterval((()=>this.doProcessing()),e)}}startRendering(){if(null===this.#rr){const e=Math.trunc(1e3/Te.OPT_FRAMES_PER_SECOND);this.#rr=setInterval((()=>this.doRendering()),e)}}stopProcessing(){null!==this.#nr&&(clearInterval(this.#nr),this.#nr=null),this.#$n.clear()}stopRendering(){null!==this.#rr&&(clearInterval(this.#rr),this.#rr=null),this.#Qn.clear()}doProcessing(){this.#er.next();const e=Date.now();this.#$n.tick(e);for(let e of this.#ar)e(this.#er.getIteration())}doRendering(){const e=this.#er.getChangedChunks();try{this.#tr.render(e)}catch(e){this.stopRendering();for(let t of this.#ir)t(e);return}const t=Date.now();this.#Qn.tick(t);for(let t of this.#sr)t(e);this.#er.cleanChangedChunks()}graphics(){const e=this.#er.getDefaults();return new Ue(this.#G,this.#we,e,((e,t)=>{this.#er.trigger(e,t),this.#tr.trigger(e,t)}))}overlay(){return this.#or}scenario(){return this.#lr}blockTemplate(){return new Ve(this.graphics())}layeredTemplate(){return new ze(this.#G,this.graphics(),this.#we,this.#er)}setBoxedMode(){this.#er.setFallThroughEnabled(!1),this.#er.setErasingEnabled(!1)}setFallThroughMode(){this.#er.setFallThroughEnabled(!0),this.#er.setErasingEnabled(!1)}setErasingMode(){this.#er.setFallThroughEnabled(!1),this.#er.setErasingEnabled(!0)}addOnProcessed(e){this.#ar.push(e)}addOnRendered(e){this.#sr.push(e)}addOnRenderingFailed(e){this.#ir.push(e)}getFramesPerSecond(){return this.#Qn.getValue()}getIterationsPerSecond(){return this.#$n.getValue()}getWidth(){return this.#W}getHeight(){return this.#k}getChunkSize(){return 16}copyStateTo(e){let t,n;e.#k>=this.#k?(t=0,n=e.#k-this.#k):(t=this.#k-e.#k,n=0);for(let r=0;r{this.setPrimaryTool(e),this.setSecondaryTool(t),this.setTertiaryTool(n)}}}class je extends Xe{#Tr;constructor(e){super(),this.#Tr=e}countSize(e,t){return[this.#Tr.metadata.width,this.#Tr.metadata.height]}async createSandGame(e,t,n,r,s){let i=this.createElementArea(e,t,n.getDefaultElement());return new Ke(i,this.#Tr.metadata,n,r,s)}createElementArea(e,t,n){return Y.from(this.#Tr.metadata.width,this.#Tr.metadata.height,this.#Tr.dataHeads,this.#Tr.dataTails)}}var Ze=Uint8Array,Qe=Uint16Array,$e=Uint32Array,et=new Ze([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tt=new Ze([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nt=new Ze([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rt=function(e,t){for(var n=new Qe(31),r=0;r<31;++r)n[r]=t+=1<>>1|(21845&dt)<<1;ut=(61680&(ut=(52428&ut)>>>2|(13107&ut)<<2))>>>4|(3855&ut)<<4,ct[dt]=((65280&ut)>>>8|(255&ut)<<8)>>>1}var mt=function(e,t,n){for(var r=e.length,s=0,i=new Qe(t);s>>l]=h}else for(a=new Qe(r),s=0;s>>15-e[s]);return a},Et=new Ze(288);for(dt=0;dt<144;++dt)Et[dt]=8;for(dt=144;dt<256;++dt)Et[dt]=9;for(dt=256;dt<280;++dt)Et[dt]=7;for(dt=280;dt<288;++dt)Et[dt]=8;var gt=new Ze(32);for(dt=0;dt<32;++dt)gt[dt]=5;var At=mt(Et,9,0),pt=mt(Et,9,1),Tt=mt(gt,5,0),ft=mt(gt,5,1),Ct=function(e){for(var t=e[0],n=1;nt&&(t=e[n]);return t},Rt=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},St=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},vt=function(e){return(e+7)/8|0},wt=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?Qe:4==e.BYTES_PER_ELEMENT?$e:Ze)(n-t);return r.set(e.subarray(t,n)),r},It=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ot=function(e,t,n){var r=new Error(t||It[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ot),!n)throw r;return r},yt=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new Ze(0);var s=!t||n,i=!n||n.i;n||(n={}),t||(t=new Ze(3*r));var a=function(e){var n=t.length;if(e>n){var r=new Ze(Math.max(2*n,e));r.set(t),t=r}},o=n.f||0,l=n.p||0,h=n.b||0,c=n.l,d=n.d,u=n.m,m=n.n,E=8*r;do{if(!c){o=Rt(e,l,1);var g=Rt(e,l+1,3);if(l+=3,!g){var A=e[(y=vt(l)+4)-4]|e[y-3]<<8,p=y+A;if(p>r){i&&Ot(0);break}s&&a(h+A),t.set(e.subarray(y,p),h),n.b=h+=A,n.p=l=8*p,n.f=o;continue}if(1==g)c=pt,d=ft,u=9,m=5;else if(2==g){var T=Rt(e,l,31)+257,f=Rt(e,l+10,15)+4,C=T+Rt(e,l+5,31)+1;l+=14;for(var R=new Ze(C),S=new Ze(19),v=0;v>>4)<16)R[v++]=y;else{var M=0,H=0;for(16==y?(H=3+Rt(e,l,3),l+=2,M=R[v-1]):17==y?(H=3+Rt(e,l,7),l+=3):18==y&&(H=11+Rt(e,l,127),l+=7);H--;)R[v++]=M}}var N=R.subarray(0,T),D=R.subarray(T);u=Ct(N),m=Ct(D),c=mt(N,u,1),d=mt(D,m,1)}else Ot(1);if(l>E){i&&Ot(0);break}}s&&a(h+131072);for(var x=(1<>>4;if((l+=15&M)>E){i&&Ot(0);break}if(M||Ot(2),P<256)t[h++]=P;else{if(256==P){U=l,c=null;break}var L=P-254;if(P>264){var F=et[v=P-257];L=Rt(e,l,(1<>>4;_||Ot(3),l+=15&_;D=lt[k];if(k>3){F=tt[k];D+=St(e,l)&(1<E){i&&Ot(0);break}s&&a(h+131072);for(var W=h+L;h>>8},Mt=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Ht=function(e,t){for(var n=[],r=0;ru&&(u=i[r].s);var m=new Qe(u+1),E=Nt(n[c-1],m,0);if(E>t){r=0;var g=0,A=E-t,p=1<t))break;g+=p-(1<>>=A;g>0;){var f=i[r].s;m[f]=0&&g;--r){var C=i[r].s;m[C]==t&&(--m[C],++g)}E=t}return[new Ze(m),E]},Nt=function(e,t,n){return-1==e.s?Math.max(Nt(e.l,t,n+1),Nt(e.r,t,n+1)):t[e.s]=n},Dt=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Qe(++t),r=0,s=e[0],i=1,a=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==s&&o!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=e[o]}return[n.subarray(0,r),t]},xt=function(e,t){for(var n=0,r=0;r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var i=0;i4&&!O[nt[b-1]];--b);var M,H,N,D,x=h+5<<3,B=xt(s,Et)+xt(i,gt)+a,U=xt(s,u)+xt(i,g)+a+14+3*b+xt(v,O)+(2*v[16]+3*v[17]+7*v[18]);if(x<=B&&x<=U)return Bt(t,c,e.subarray(l,l+h));if(bt(t,c,1+(U15&&(bt(t,c,_[w]>>>5&127),c+=_[w]>>>12)}}}else M=At,H=Et,N=Tt,D=gt;for(w=0;w255){k=r[w]>>>18&31;Mt(t,c,M[k+257]),c+=H[k+257],k>7&&(bt(t,c,r[w]>>>23&31),c+=et[k]);var W=31&r[w];Mt(t,c,N[W]),c+=D[W],W>3&&(Mt(t,c,r[w]>>>5&8191),c+=tt[W])}else Mt(t,c,M[r[w]]),c+=H[r[w]];return Mt(t,c,M[256]),c+H[256]},Pt=new $e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lt=new Ze(0),Ft=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),_t=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r>>8;e=n},d:function(){return~e}}},kt=function(e,t,n,r,s){return function(e,t,n,r,s,i){var a=e.length,o=new Ze(r+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(r,o.length-s),h=0;if(!t||a<8)for(var c=0;c<=a;c+=65535){var d=c+65535;d>=a&&(l[h>>3]=i),h=Bt(l,h+1,e.subarray(c,d))}else{for(var u=Pt[t-1],m=u>>>13,E=8191&u,g=(1<7e3||O>24576)&&D>423){h=Ut(e,l,0,R,S,v,I,O,b,c-b,h),O=w=I=0,b=c;for(var x=0;x<286;++x)S[x]=0;for(x=0;x<30;++x)v[x]=0}var B=2,U=0,P=E,L=H-N&32767;if(D>2&&M==C(c-L))for(var F=Math.min(m,D)-1,_=Math.min(32767,c),k=Math.min(258,D);L<=_&&--P&&H!=N;){if(e[c+B]==e[c+B-L]){for(var W=0;WB){if(B=W,U=L,W>F)break;var V=Math.min(L,W-2),Y=0;for(x=0;xY&&(Y=z,N=G)}}}L+=(H=N)-(N=A[H])+32768&32767}if(U){R[O++]=268435456|at[B]<<18|ht[U];var K=31&at[B],X=31&ht[U];I+=et[K]+tt[X],++S[257+K],++v[X],y=c+B,++w}else R[O++]=e[c],++S[e[c]]}}h=Ut(e,l,i,R,S,v,I,O,b,c-b,h),!i&&7&h&&(h=Bt(l,h+1,Lt))}return wt(o,0,r+vt(h)+s)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!s)},Wt=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Vt=function(e,t){return e[t]|e[t+1]<<8},Yt=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Gt=function(e,t){return Yt(e,t)+4294967296*Yt(e,t+4)},zt=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Kt(e,t){return kt(e,t||{},0,0)}function Xt(e,t){return yt(e,t)}var qt=function(e,t,n,r){for(var s in e){var i=e[s],a=t+s,o=r;Array.isArray(i)&&(o=Wt(r,i[1]),i=i[0]),i instanceof Ze?n[a]=[i,o]:(n[a+="/"]=[new Ze(0),o],qt(i,a,n,r))}},Jt="undefined"!=typeof TextEncoder&&new TextEncoder,jt="undefined"!=typeof TextDecoder&&new TextDecoder;try{jt.decode(Lt,{stream:!0}),1}catch(e){}function Zt(e,t){if(t){for(var n=new Ze(e.length),r=0;r>1)),a=0,o=function(e){i[a++]=e};for(r=0;ri.length){var l=new Ze(a+8+(s-r<<1));l.set(i),i=l}var h=e.charCodeAt(r);h<128||t?o(h):h<2048?(o(192|h>>6),o(128|63&h)):h>55295&&h<57344?(o(240|(h=65536+(1047552&h)|1023&e.charCodeAt(++r))>>18),o(128|h>>12&63),o(128|h>>6&63),o(128|63&h)):(o(224|h>>12),o(128|h>>6&63),o(128|63&h))}return wt(i,0,a)}function Qt(e,t){if(t){for(var n="",r=0;r127)+(r>223)+(r>239);if(n+s>e.length)return[t,wt(e,n-1)];s?3==s?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&s?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}}(e),i=s[0];return s[1].length&&Ot(8),i}var $t=function(e,t){return t+30+Vt(e,t+26)+Vt(e,t+28)},en=function(e,t,n){var r=Vt(e,t+28),s=Qt(e.subarray(t+46,t+46+r),!(2048&Vt(e,t+8))),i=t+46+r,a=Yt(e,t+20),o=n&&4294967295==a?tn(e,i):[a,Yt(e,t+24),Yt(e,t+42)],l=o[0],h=o[1],c=o[2];return[Vt(e,t+10),l,h,s,i+Vt(e,t+30)+Vt(e,t+32),c]},tn=function(e,t){for(;1!=Vt(e,t);t+=4+Vt(e,t+2));return[Gt(e,t+12),Gt(e,t+4),Gt(e,t+20)]},nn=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&Ot(9),t+=r+4}return t},rn=function(e,t,n,r,s,i,a,o){var l=r.length,h=n.extra,c=o&&o.length,d=nn(h);zt(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(i<0&&8),e[t++]=s&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var u=new Date(null==n.mtime?Date.now():n.mtime),m=u.getFullYear()-1980;if((m<0||m>119)&&Ot(10),zt(e,t,m<<25|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>>1),t+=4,-1!=i&&(zt(e,t,n.crc),zt(e,t+4,i<0?-i-2:i),zt(e,t+8,n.size)),zt(e,t+12,l),zt(e,t+14,d),t+=16,null!=a&&(zt(e,t,c),zt(e,t+6,n.attrs),zt(e,t+10,a),t+=14),e.set(r,t),t+=l,d)for(var E in h){var g=h[E],A=g.length;zt(e,t,+E),zt(e,t+2,A),e.set(g,t+4),t+=4+A}return c&&(e.set(o,t),t+=c),t};function sn(e,t){t||(t={});var n={},r=[];qt(e,"",n,t);var s=0,i=0;for(var a in n){var o=n[a],l=o[0],h=o[1],c=0==h.level?0:8,d=(v=Zt(a)).length,u=h.comment,m=u&&Zt(u),E=m&&m.length,g=nn(h.extra);d>65535&&Ot(11);var A=c?Kt(l,h):l,p=A.length,T=_t();T.p(l),r.push(Wt(h,{size:l.length,crc:T.d(),c:A,f:v,m:m,u:d!=a.length||m&&u.length!=E,o:s,compression:c})),s+=30+d+g+p,i+=76+2*(d+g)+(E||0)+p}for(var f=new Ze(i+22),C=s,R=i-s,S=0;S>4&15)||(0===i?t.setElementHead(s,n,r.setType(e,7)):1===i?t.setElementHead(s,n,r.setType(e,5)):2===i?t.setElementHead(s,n,r.setType(e,133)):3===i?t.setElementHead(s,n,r.setType(e,197)):4!==i&&5!==i||t.setElementHead(s,n,r.setType(e,3)))}e.dataHeads=t.getDataHeads(),e.dataTails=t.getDataTails()}static#Cr(e){const t=Y.from(e.metadata.width,e.metadata.height,e.dataHeads,e.dataTails);for(let n=0;n1&&i<7&&(i++,e=4294967288&e|i),i){case 5:case 6:case 7:e|=4194304,s|=268435456}4===i&&(e=4294963455&e|3072),t.setElementHead(r,n,e),t.setElementTail(r,n,s)}e.dataHeads=t.getDataHeads(),e.dataTails=t.getDataTails()}static#Rr(e){const t=Y.from(e.metadata.width,e.metadata.height,e.dataHeads,e.dataTails);for(let n=0;n>8&15;5!==s&&8!==s||(e&=4294902015),t.setElementHead(r,n,e)}e.dataHeads=t.getDataHeads(),e.dataTails=t.getDataTails()}static#Sr(e){const t=Y.from(e.metadata.width,e.metadata.height,e.dataHeads,e.dataTails);for(let n=0;n>16&3,i=e>>18&3,a=e>>20&3,o=e>>22&3;let l=0;0===s&&0===i&&0===a&&0===o?l=0:0===s&&0===i&&0===a&&1===o?l=1:0===s&&0===i&&0===a&&2===o?l=2:0===s&&0===i&&0===a&&3===o?l=3:2===s&&1===i&&3===a&&0===o?l=4:1===s&&1===i&&1===a&&0===o?l=5:2===s&&1===i&&2===a&&0===o&&(l=6);const h=4278255615&e|l<<16;t.setElementHead(r,n,h)}e.dataHeads=t.getDataHeads(),e.dataTails=t.getDataTails()}}class on extends Xe{#vr;#wr;#Ir;constructor(e,t,n){super(),this.#vr=e,this.#wr=t,this.#Ir=n}countSize(e,t){this.#vr.countSize(e,t)}async createSandGame(e,t,n,r,s){let i=this.createElementArea(e,t,n.getDefaultElement());return new Ke(i,null,n,r,s)}createElementArea(e,t,n){const r=this.#vr.createElementArea(e,t,n),s=r.getWidth(),i=r.getHeight();if(this.#wr)for(let e=0;e255-r&&d>255-r&&u>255-r)continue;const E=t.apply(s,n,l),g=E.elementHead,A=h.setColor(E.elementTail,c,d,u);o.setElementHeadAndTail(s,n,g,A)}return new ln(o)}static getImageTypeOrNull(e){return(e=e.toLowerCase()).endsWith(".png")?"image/png":e.endsWith(".jpg")||e.endsWith(".jpeg")?"image/jpg":e.endsWith(".bmp")?"image/bmp":e.endsWith(".gif")?"image/gif":null}}class cn{static METADATA_JSON_NAME="tool.json";static async parse(e,t){const n=e.info,r=e.action;if(void 0===n)throw"Tool definition: info not set";const s=new N(n);if(void 0===r)throw"Tool definition: action not set";return cn.#Or(s,r,t)}static async#Or(e,t,n){const r=t.type;if("image-template"===r){const r=await this.parseImageTemplate(t,n);return Z.insertScenesTool(r,void 0,e)}if("random-template"===r){const r=await this.parseRandomTemplate(t,n);return Z.insertScenesTool(r,void 0,e)}throw"Tool action not supported: "+r}static async parseRandomTemplate(e,t){const n=e.actions;if(void 0===n||void 0===n.length||0===n.length)throw"Image template: actions not set";let r=[];for(let e=0;e65558)&&Ot(13);var s=Vt(e,r+8);if(!s)return{};var i=Yt(e,r+16),a=4294967295==i||65535==s;if(a){var o=Yt(e,r-12);(a=101075792==Yt(e,o))&&(s=Yt(e,o+32),i=Yt(e,o+48))}for(var l=t&&t.filter,h=0;h{this.#br=e.target.value,t.textContent="Value: "+this.#br})),te.div({class:"mb-3"},[n,te.element("small",null,t)])}#Br(){const e="image-template_max-width",t=te.element("label",{for:e},"Width: "+this.#Mr),n=te.element("input",{id:e,class:"form-range",type:"range",min:25,max:800,value:this.#Mr});return n.addEventListener("input",(e=>{this.#Mr=e.target.value,t.textContent="Width: "+this.#Mr})),te.div({class:"mb-3"},[n,te.element("small",null,t)])}#Ur(){const e="image-template_max-height",t=te.element("label",{for:e},"Height: "+this.#Jn),n=te.element("input",{id:e,class:"form-range",type:"range",min:25,max:800,value:this.#Jn});return n.addEventListener("input",(e=>{this.#Jn=e.target.value,t.textContent="Height: "+this.#Jn})),te.div({class:"mb-3"},[n,te.element("small",null,t)])}#Dr(e,t){const n=t.getCodeName(),r=this.#Hr===n,s="image-template_checkbox-material-"+n,i=te.element("input",{class:"form-check-input",type:"radio",name:"template-material",id:s,value:n,checked:r||null});i.addEventListener("click",(()=>{this.#Nr=e,this.#Hr=n}));const a={class:"form-check-label btn btn-secondary btn-sand-game-tool "+n,for:s,style:t.getBadgeStyle()};return te.div({class:"form-check"},[i,te.element("label",a,t.getDisplayName())])}getThresholdValue(){return this.#br}getMaterialBrush(){return this.#Nr}getMaxWidth(){return this.#Mr}getMaxHeight(){return this.#Jn}}class En{#Pr;#Lr;constructor(e){this.#Pr=e,this.#Lr=new mn}initFileDragAndDrop(e){["dragenter","dragover"].forEach((t=>{e.addEventListener(t,(t=>{t.preventDefault(),t.stopPropagation(),e.classList.add("drag-and-drop-highlight")}))})),e.addEventListener("dragleave",(t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove("drag-and-drop-highlight")})),e.addEventListener("drop",(t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove("drag-and-drop-highlight"),this.loadFromFiles(t.dataTransfer.files)}))}loadFromFiles(e){if(!e)return;let t=e[0],n=new FileReader;n.onload=e=>{let n=e.target.result;this.loadFromArrayBuffer(n,t.name)},n.readAsArrayBuffer(t)}loadFromArrayBuffer(e,t){try{let n=hn.getImageTypeOrNull(t);null!==n?this.#Fr(e,n):t.endsWith(".json")?dn.parseJsonResource(e).then((e=>this.#_r(e))).catch((e=>this.#kr(e))):dn.parseZipResource(e).then((e=>this.#_r(e))).catch((e=>this.#kr(e)))}catch(e){this.#kr(e)}}#Fr(e,t){const n=(n,r,s,i)=>{const a=hn.asObjectUrl(e,t),o=Y.TRANSPARENT_ELEMENT;hn.loadImageData(a,s,i).then((e=>{try{const t=hn.createSceneFromImageTemplate(e,n,o,r);this.#Wr(t)}catch(e){this.#kr(e)}})).catch((e=>this.#kr(e)))};let r=te.bootstrapDialogBuilder();r.setHeaderContent("Image template"),r.setBodyContent(this.#Lr.createNode()),r.addSubmitButton("Place",(()=>{let e=this.#Lr.getMaterialBrush(),t=this.#Lr.getThresholdValue(),r=this.#Lr.getMaxWidth(),s=this.#Lr.getMaxHeight();n(e,t,r,s)})),r.addCloseButton("Close"),r.show(this.#Pr.getDialogAnchor())}#Wr(e){this.#Pr.pasteScene(e),ee.triggerFeatureUsed(ee.FEATURE_IO_IMAGE_TEMPLATE)}#_r(e){if(e instanceof Xe)this.#Vr(e);else if(e instanceof D){const t=e,n=this.#Pr.getToolManager();if(t instanceof z||t instanceof K){const e=n.createRevertAction();n.setPrimaryTool(t),n.setSecondaryTool(Z.actionTool(e))}else n.setPrimaryTool(t)}else this.#kr("Unknown resource type")}#Vr(e){try{let t=te.bootstrapDialogBuilder();t.setHeaderContent("Import scene"),t.setBodyContent([te.par(null,"The imported scene can be opened or placed on the current scene.")]),t.addSubmitButton("Open",(()=>(ee.triggerFeatureUsed(ee.FEATURE_IO_IMPORT),this.#Pr.openScene(e)))),t.addSubmitButton("Place",(()=>(ee.triggerFeatureUsed(ee.FEATURE_IO_IMPORT),this.#Pr.pasteScene(e)))),t.addCloseButton("Close"),t.show(this.#Pr.getDialogAnchor())}catch(e){this.#kr(e)}}#kr(e){let t=te.bootstrapDialogBuilder();t.setHeaderContent("Error"),t.setBodyContent([te.par(null,"Error while loading resource:"),te.element("code",null,""+e)]),t.addCloseButton("Close"),t.show(this.#Pr.getDialogAnchor())}}class gn extends le{static#Yr=W.AIR.apply(0,0,void 0);getDefaultElement(){return gn.#Yr}getBrushWater(){return W.WATER}getBrushSteam(){return W.STEAM}getBrushGrass(){return W.GRASS}getBrushTree(){return W.TREE}getBrushFishHead(){return W.FISH_HEAD}getBrushFishBody(){return W.FISH_BODY}getBrushFishCorpse(){return W.FISH_CORPSE}getBrushFire(){return W.FIRE}getBrushAsh(){return W.ASH}getTreeTrunkTemplates(){return _.TREE_TRUNK_TEMPLATES}getTreeLeafClusterTemplates(){return _.TREE_CLUSTER_TEMPLATES}}class An{#Gr={scale:.5,canvasWidthPx:700,canvasHeightPx:400,scene:"empty"};#zr;#Kr;#Xr;#dr=null;#qr="pixelated";#Jr=[];#jr=!1;#Zr=!1;#Qr=Me.canvasWebGL();#$r=null;#es;#ts=new En(this);#ns;#rs=null;constructor(e,t,n){e&&(this.#Gr=e),this.#ns=t,this.#es=n,this.#zr=Math.trunc(this.#Gr.canvasWidthPx*this.#Gr.scale),this.#Kr=Math.trunc(this.#Gr.canvasHeightPx*this.#Gr.scale),this.#Xr=this.#Gr.scale}registerCanvasProvider(e){this.#rs=e}getInitialScene(){return this.#$r}setInitialScene(e){this.#$r=e}setup(e){this.setInitialScene(e),this.#ss(e)}#ss(e){if(null==this.#rs)throw"Illegal state: canvas provider not registered!";if(null==this.#ns)throw"Illegal state: dialog anchor not registered!";const[t,n]=e.countSize(this.#zr,this.#Kr);t===this.#zr&&n===this.#Kr||(this.#zr=t,this.#Kr=n,this.#Xr=+(t/this.#Gr.canvasWidthPx).toFixed(3));const r=new gn,s=this.#is();let i;this.#dr=null;try{i=e.createSandGame(t,n,r,s,this.#Qr)}catch(e){return void this.#as("Initialization failed: "+e)}i.then((e=>{this.#dr=e,this.#dr.graphics().replace(Y.TRANSPARENT_ELEMENT,r.getDefaultElement()),this.#os.forEach((e=>e(this.#dr))),this.#dr.addOnRenderingFailed((e=>{this.#as("Rendering failure: "+e)})),this.#dr.startRendering(),this.#jr&&(this.#dr.startProcessing(),this.#ls.forEach((e=>e())))})).catch((e=>{this.#as("Initialization failed: "+e)}))}#is(){const e=this.#rs.initialize();let t=this.#Qr.getContextType(),n=this.#hs(e,t);return"webgl2"===t&&null==n&&(this.#cs("Unable to get WebGL context. Using fallback renderer; game performance and visual will be affected"),this.#Qr=Me.canvas2d(),t=this.#Qr.getContextType(),n=this.#hs(e,t),ee.triggerFeatureUsed(ee.FEATURE_RENDERER_FALLBACK)),n}#hs(e,t){if("webgl2"===t){let t=!1;e.addEventListener("webglcontextlost",(e=>{if(t)return;t=!0;e.preventDefault(),setTimeout((()=>{this.restartAfterRenderingFailure("WebGL context loss detected. Using fallback renderer; game performance and visuals will be affected")}),2e3)}),!1)}return e.getContext(t)}#ds(){null!==this.#dr&&(this.#dr.stopProcessing(),this.#dr.stopRendering());for(let e of this.#us)e()}enableGlobalShortcuts(){document.onkeydown=e=>{if(!e.ctrlKey||e.altKey||e.shiftKey||"Enter"!==e.key||(e.preventDefault(),this.switchStartStop()),!e.ctrlKey||e.altKey||e.shiftKey||" "!==e.key||(e.preventDefault(),null!==this.#dr&&this.#dr.doProcessing()),e.ctrlKey&&!e.altKey&&e.shiftKey&&" "===e.key&&(e.preventDefault(),null!==this.#dr)){const e=prompt("Enter the number of iterations to run","10000"),t=Math.abs(parseInt(e)),n=new Date;for(let e=0;ee())))),this.#jr=!0}switchStartStop(){this.#jr=!this.#jr,null!==this.#dr&&(this.#jr?(this.#jr=!0,this.#dr.startProcessing(),this.#ls.forEach((e=>e()))):(this.#dr.stopProcessing(),this.#Es.forEach((e=>e()))))}createSnapshot(){if(null!==this.#dr){let e=this.#dr.createSnapshot();return e.metadata.scale=this.getCurrentScale(),void 0!==this.#Gr.version&&(e.metadata.appVersion=this.#Gr.version),e}return null}openScene(e){for(let t of this.#ms)t(e);this.#ds(),this.#ss(e)}pasteScene(e){const t=this.getToolManager(),n=t.createRevertAction();t.setPrimaryTool(Z.insertScenesTool([e],n)),t.setSecondaryTool(Z.actionTool(n))}getCurrentWidthPoints(){return this.#zr}getCurrentHeightPoints(){return this.#Kr}getCurrentScale(){return this.#Xr}changeCanvasSize(e,t,n){if("number"!=typeof e||!(e>0&&e<2048))throw"Incorrect width";if("number"!=typeof t||!(t>0&&t<2048))throw"Incorrect height";if("number"!=typeof n||!(n>0&&n<=1))throw"Incorrect scale";this.#ds(),this.#zr=e,this.#Kr=t,this.#Xr=n,this.#ss(new qe(this.#dr))}setShowActiveChunks(e){this.#Zr=e}isShowActiveChunks(){return this.#Zr}setRendererInitializer(e){this.#Qr=e,this.#dr&&(this.#ds(),this.#ss(new qe(this.#dr)))}getRendererInitializer(){return this.#Qr}setCanvasImageRenderingStyle(e){this.#qr=e;for(let t of this.#Jr)t(e)}getCanvasImageRenderingStyle(){return this.#qr}addOnImageRenderingStyleChanged(e){this.#Jr.push(e)}getToolManager(){return this.#es}getIOManager(){return this.#ts}getDialogAnchor(){return this.#ns}}class pn extends Xe{name;description;#As;constructor({name:e,description:t,apply:n}){super(),this.#As=n,this.name=e,this.description=t}countSize(e,t){return[e,t]}async createSandGame(e,t,n,r,s){let i=this.createElementArea(e,t,n.getDefaultElement()),a=new Ke(i,null,n,r,s);return await this.#As(a),a}createElementArea(e,t,n){return Y.create(e,t,n)}}class Tn{static SCENE_EMPTY=new pn({name:"Empty",description:"Boxed mode",apply:function(e){e.setBoxedMode()}});static SCENE_LANDSCAPE_1=new pn({name:"Landscape 1",description:"Boxed mode",apply:async function(e){e.setBoxedMode();let t=e.layeredTemplate().layerSpline([[0,35],[60,35],[80,40],[100,50],[120,40],[240,20],[440,20],[1040,20]],!0,M.concat(W.SOIL,W.EFFECT_NOISE_LG)).layerSpline([[0,0],[130,0],[150,10],[190,10],[290,0]],!0,W.SAND,2).tool(30,17,await dn.parseToolDefinition(Q.CABIN)).tool(160,5,await dn.parseToolDefinition(Q.SAND_CASTLE)).tree(100,1,200).tree(70,5).grass(60,80).grass(90,110);e.getWidth()/e.getHeight()>1.5?e.blockTemplate().withMaxHeight(120).withBlueprint([" "," ww"," "," 1 "," 111111"," "," "," "," "]).withBrushes({w:M.withIntensity(.5,W.WATER),1:W.SAND}).paint():t.layer(26,!1,W.WATER).layer(27,!1,M.withIntensity(.33,W.WATER))}});static SCENE_LANDSCAPE_2=new pn({name:"Landscape 2",description:"Boxed mode",apply:function(e){e.setBoxedMode(),e.layeredTemplate().layerSpline([[0,20],[50,15],[100,10],[150,10],[200,10],[250,10],[1250,10]],!0,M.concat(W.GRAVEL,W.EFFECT_NOISE_LG)).layerSpline([[0,30],[25,31],[50,27],[100,15],[150,0],[200,5],[220,15],[300,35],[330,37],[370,50],[400,45],[500,40],[1250,40]],!0,M.concat(W.SOIL,W.EFFECT_NOISE_LG),30).layerSpline([[0,0],[50,0],[100,10],[150,10],[200,9],[275,0],[1250,0]],!0,W.SAND,5).layer(35,!1,W.WATER).layer(36,!1,M.withIntensity(.33,W.WATER)).fish(150,-8).grass().tree(16,6).tree(28,3,70).tree(45,5).tree(309,1).tree(336,4).tree(361,0)}});static SCENE_FALLTHROUGH=new pn({name:"Fall-through",description:"Fall-through mode",apply:function(e){e.setFallThroughMode();const t=e.graphics(),n=Math.trunc((e.getWidth()-150)/2-15),r=Math.trunc((e.getHeight()-150)/2);t.drawRectangle(40+n,20+r,60+n,40+r,W.WATER),t.drawLine(30+n,30+r,30+n,50+r,5,W.WALL,!0),t.drawLine(30+n,50+r,70+n,80+r,5,W.WALL,!0),t.drawLine(65+n,90+r,100+n,100+r,5,W.WALL,!0),t.drawLine(55+n,140+r,125+n,140+r,10,W.WALL,!1),t.drawLine(55+n,130+r,55+n,140+r,10,W.WALL,!1),t.drawLine(70+n,125+r,90+n,125+r,10,W.SAND,!1),t.draw(120+n,130+r,W.SAND),t.drawLine(150+n,10+r,80+n,35+r,5,W.WALL,!0),t.drawLine(80+n,35+r,80+n,15+r,5,W.WALL,!0)}});static SCENE_PLATFORM=new pn({name:"Platform",description:"Erasing mode",apply:function(e){e.setErasingMode(),e.blockTemplate().withBlueprint([" "," "," w "," w "," "," "," ssssssss "," "," "]).withBrushes({w:W.SAND,s:W.WALL}).paint()}});static SCENES={empty:Tn.SCENE_EMPTY,landscape_1:Tn.SCENE_LANDSCAPE_1,landscape_2:Tn.SCENE_LANDSCAPE_2,fallthrough:Tn.SCENE_FALLTHROUGH,platform:Tn.SCENE_PLATFORM}}class fn{performAction(e){throw"Not implemented"}static create(e){return new Cn(e)}static createToggle(e,t){let n=e;return new Cn((function(e){n=!n,t(e,n)}))}}class Cn extends fn{#v;constructor(e){super(),this.#v=e}performAction(e){this.#v(e)}}class Rn extends un{#ne;constructor(e){super(),this.#ne=e}createNode(e){let t=[];for(const n of this.#ne){const r=n.info.displayName;let s=null,i=te.button(r,{class:"btn btn-light template-button","data-bs-dismiss":"modal"},(()=>{if(null!==s){const t=e.getToolManager(),n=t.createRevertAction();t.setPrimaryTool(s),t.setSecondaryTool(Z.actionTool(n))}}));void 0!==n.info.icon&&(i.style.backgroundImage=`url(${n.info.icon.imageData})`),t.push(i),dn.parseToolDefinition(n).then((e=>{s=e})).catch((e=>{console.warn("Template loading failed: "+e)}))}return te.div({class:"sand-game-templates"},t)}}class Sn extends fn{#ne;#ps;constructor(e,t=null){super(),this.#ne=e,this.#ps=t}performAction(e){let t=new Rn(this.#ne),n=te.bootstrapDialogBuilder();n.setHeaderContent("Templates"),n.setBodyContent(te.div({class:"sand-game-component"},[te.par(null,"Select a template"),t.createNode(e),this.#ps])),n.addCloseButton("Close"),n.show(e.getDialogAnchor())}}class vn extends un{#Ts;#fs;constructor(e,t=!1){super(),this.#Ts=e,this.#fs=t}createNode(e){let t=[];for(let n of this.#Ts){let r=n.getInfo().getCodeName(),s=n.getInfo().getDisplayName(),i={class:"btn btn-secondary btn-sand-game-tool "+r,style:n.getInfo().getBadgeStyle()},a=te.button(s,i,(()=>{this.#Cs(n,e)}));e.getToolManager().addOnPrimaryToolChanged((e=>{e===n?a.classList.add("selected"):a.classList.remove("selected")})),n===e.getToolManager().getPrimaryTool()&&a.classList.add("selected"),e.getToolManager().addOnInputDisabledChanged((e=>{a.disabled=e})),t.push(a)}return te.div({class:"sand-game-tools"},t)}#Cs(e,t){if(e instanceof J){let n=null;this.#fs&&(n=te.div(null,[te.par(null,""),te.par(null,"You can also create your own template using an image. See the Import button.")]));new Sn(e.getTemplateDefinitions(),n).performAction(t)}else if(e instanceof j){e.getHandler()(t.getSandGame())}else t.getToolManager().setPrimaryTool(e),t.getToolManager().setSecondaryTool($.ERASE)}}class wn extends un{#Pr;#Rs;#Ss=null;#vs=null;#ws;#Is;#Os;constructor(e,t,n,r){super(),this.#ws=e,this.#Is=t,this.#Os=n;const s=e/n,i=t/n;this.#Rs=te.div({style:{display:"none",position:"absolute",left:"0",top:"0",width:`${s}px`,height:`${i}px`},class:"sand-game-canvas-overlay",width:e+"px",height:t+"px"}),this.#Pr=r}highlightChunks(e){null!==e?(null===this.#vs&&this.#Gr(),this.#Rs.style.display="unset",this.#ys(e)):null!==this.#vs&&(this.#Rs.style.display="none")}#ys(e){const t=this.#Pr.getSandGame(),n=t.getChunkSize(),r=Math.ceil(t.getWidth()/n),s=Math.ceil(t.getHeight()/n);let i=0;for(let t=0;t=r||a+l>=s){const e=-1,t=e,c=i+o>=r?i+o-r:e,d=a+n>=s?a+l-s:e,u=e;h.style.clipPath=`inset(${t}px ${c}px ${d}px ${u}px)`}return h}createNode(e){return this.#Rs}}class In extends un{#Pr;#Rs;#ws;#Is;#Os;constructor(e,t,n,r){super(),this.#ws=e,this.#Is=t,this.#Os=n;const s=e/n,i=t/n;this.#Rs=te.div({style:{display:"none",position:"absolute",left:"0",top:"0",width:`${s}px`,height:`${i}px`},class:"sand-game-canvas-overlay",width:e+"px",height:t+"px"}),this.#Pr=r}register(e){const t=e.getMarkers();if(t.length>0){for(const e of t)this.#Rs.append(this.#Hs(e));this.#Rs.style.display="initial"}e.addOnMarkerAdded((e=>{this.#Rs.append(this.#Hs(e)),this.#Rs.style.display="initial"}))}#Hs(e){const t=e.getConfig(),[n,r,s,i]=e.getPosition(),a=this.#bs(n,r,s,i,t.label);if("object"==typeof t.style)for(const[e,n]of Object.entries(t.style))a.style[e]=n;return e.isVisible()||(a.style.display="none"),e.addOnVisibleChanged((e=>{a.style.display=e?"initial":"none"})),a}#bs(e,t,n,r,s=null){const i={class:"sand-game-marker",style:{left:e/this.#Os+"px",top:t/this.#Os+"px",width:(n-e)/this.#Os+"px",height:(r-t)/this.#Os+"px",position:"absolute"}};return te.div(i,s)}createNode(e){return this.#Rs}}class On extends un{#Pr;#Rs;#Ns=null;constructor(e,t,n,r){super();const s=e/n,i=t/n;this.#Rs=te.div({style:{position:"absolute",left:"0",top:"0",width:`${s}px`,height:`${i}px`},class:"sand-game-canvas-overlay",width:e+"px",height:t+"px"}),this.#Pr=r}createNode(e){return this.#Rs}hideCursors(){this.#Rs.innerHTML="",this.#Ns=null}repaintRectangleSelection(e,t,n,r,s){this.#Rs.innerHTML="";let i=Math.min(e,n)/s,a=Math.min(t,r)/s,o=Math.abs(n-e)/s,l=Math.abs(r-t)/s;const h=te.div({style:{left:i+"px",top:a+"px",width:o+"px",height:l+"px",position:"absolute",outline:"black 1px solid",pointerEvents:"none"}});this.#Rs.append(h)}repaintLineSelection(e,t,n,r,s){this.#Rs.innerHTML="";const i=this.#Pr.getCurrentWidthPoints(),a=this.#Pr.getCurrentHeightPoints(),o=te.create(`\n \n `);o.style.pointerEvents="none",this.#Rs.append(o)}showCursor(e,t,n,r){if(r instanceof G){{const e=Math.trunc(r.getWidth()/n),t=Math.trunc(r.getHeight()/n),s=te.element("canvas",{width:r.getWidth()+"px",height:r.getHeight()+"px",style:{width:`${e}px`,height:`${t}px`,outline:"black 1px solid"}});s.style.imageRendering="pixelated",we.renderPreview(r.getElementArea(),s.getContext("2d"),187),this.#Ns={width:e,height:t,node:s}}this.#Ns.node.style.position="absolute",this.#Ns.node.style.pointerEvents="none",this.moveCursor(e,t,n)}}hasCursor(){return null!==this.#Ns}moveCursor(e,t,n){const r=this.#Ns,s=this.#Pr.getCurrentWidthPoints()/n,i=this.#Pr.getCurrentHeightPoints()/n,a=t/n-Math.trunc(r.height/2),o=e/n-Math.trunc(r.width/2),l=a<0?-a:-1,h=o+r.width>=s?o+r.width-s:-1,c=a+r.height>=i?a+r.height-i:-1,d=o<0?-o:-1;r.node.style.top=a+"px",r.node.style.left=o+"px",r.node.style.clipPath=`inset(${l}px ${h}px ${c}px ${d}px)`,this.#Rs.innerHTML="",this.#Rs.append(r.node)}}class yn extends un{#Pr;#Rs;#ws;#Is;#Os;constructor(e,t,n,r){super(),this.#ws=e,this.#Is=t,this.#Os=n;const s=e/n,i=t/n;this.#Rs=te.div({style:{display:"none",position:"absolute",left:"0",top:"0",width:`${s}px`,height:`${i}px`,pointerEvents:"none"},class:"sand-game-canvas-overlay",width:e+"px",height:t+"px"}),this.#Pr=r}register(e){let t=!1;const n=e=>{this.#Rs.append(e),t||(t=!0,this.#Rs.style.display=null)};for(const t of e.getSplashes())n(this.#Ds(t));e.addOnSplashAdded((e=>{n(this.#Ds(e))}));let r=null,s=0;const i=e=>{const t=this.#xs(e);null===r&&(e.isVisible()&&s++,r=this.#Bs(),r.style.display=s>0?null:"none",n(r)),r.append(t),e.addOnVisibleChanged((e=>{s+=e?1:-1,r.style.display=s>0?null:"none"}))};for(const t of e.getObjectives())i(t);e.addOnObjectiveAdded((e=>{i(e)}))}#Ds(e){let t=e.getConfig(),n={class:"sand-game-splash",style:{display:e.isVisible()?null:"none"}};Object.assign(n.style,t.style);let r=te.div(n,[te.div({class:"sand-game-splash-content"},t.content),te.div({class:"sand-game-splash-footer"},t.buttons.filter((e=>null!==e)).map((t=>{let n;if("string"==typeof t.action)n=te.element("a",{href:t.action,class:t.class},t.title);else{if("function"!=typeof t.action)throw"Button action type not supported: "+typeof t.action;n=te.button(t.title,{class:t.class},(()=>t.action(e)))}return t.focus&&setTimeout((()=>{n.focus({preventScroll:!0})}),0),n})))]);return e.addOnVisibleChanged((e=>{r.style.display=e?null:"none"})),r}#Bs(){return te.div({class:"sand-game-objectives-list"},null)}#xs(e){const t=te.span(null,{class:"sand-game-objective-icon"});e.isVisible()&&te.setContent(t,this.#Us(e));const n={style:{display:e.isVisible()?null:"none"}},r=te.div(n,[t,e.getConfig().name]);return e.addOnVisibleChanged((n=>{r.style.display=n?null:"none",n&&te.setContent(t,this.#Us(e))})),e.addOnActiveChanged((n=>{e.isVisible()&&te.setContent(t,this.#Us(e))})),e.addOnCompleted((()=>{e.isVisible()&&te.setContent(t,this.#Us(e))})),r}#Us(e){return e.isCompleted()?te.create(''):e.isActive()?te.create(''):te.create('')}createNode(e){return this.#Rs}}class bn extends un{#Pr;#Ps;#Ls;#Fs;#_s;#ks;#Ws;#Vs;#Ys;#Gs;constructor(e){super(),this.#Pr=e;const t=this.#Pr.getCurrentWidthPoints(),n=this.#Pr.getCurrentHeightPoints(),r=this.#Pr.getCurrentScale();this.#Ps=this.#zs(t,n,r),this.#Ls=new wn(t,n,r,e),this.#Fs=this.#Ls.createNode(),this.#_s=new In(t,n,r,e),this.#ks=this.#_s.createNode(),this.#Ws=new On(t,n,r,e),this.#Vs=this.#Ws.createNode(),this.#Ys=new yn(t,n,r,e),this.#Gs=this.#Ys.createNode()}#zs(e,t,n){const r=e/n,s=t/n,i=te.element("canvas",{style:`position: relative; width: ${r}px; height: ${s}px;`,class:"sand-game-canvas",width:e+"px",height:t+"px"});return i.style.imageRendering=this.#Pr.getCanvasImageRenderingStyle(),i}createNode(e){return te.div({style:"position: relative;",class:"sand-game-canvas-component"},[this.#Ps,this.#Fs,this.#ks,this.#Vs,this.#Gs])}register(e){this.#_s.register(e.overlay()),this.#Ys.register(e.scenario()),e.addOnRendered((e=>{this.#Pr.isShowActiveChunks()?this.#Ls.highlightChunks(e):this.#Ls.highlightChunks(null)})),this.#Ks(e)}#Ks(e){const t=this.#Vs,n=this.#Pr.getCurrentScale(),r=this.#Pr.getToolManager();let s,i,a=e=>{const r=t.getBoundingClientRect();return[Math.max(0,Math.trunc((e.clientX-r.left)*n)),Math.max(0,Math.trunc((e.clientY-r.top)*n))]},o=null,l=!1,h=!1,c=!1,d=null;const u=(t,n,r)=>{o.isRepeatingEnabled()&&(d=setInterval((()=>{o.applyPoint(t,n,e.graphics(),r)}),80))},m=()=>{null!==d&&(clearInterval(d),d=null)};this.#Vs.addEventListener("contextmenu",(e=>(e.preventDefault(),!1))),t.addEventListener("mousedown",(t=>{if(r.isInputDisabled())return;const[d,E]=a(t);if(s=d,i=E,o=null,l=!1,h=!1,c=!1,1===t.buttons)o=r.getPrimaryTool(),ee.triggerFeatureUsed(ee.FEATURE_DRAW_PRIMARY);else{if(2!==t.buttons){if(4===t.buttons){if(t.preventDefault(),t.altKey||t.ctrlKey||t.shiftKey)t.altKey&&t.ctrlKey&&t.shiftKey&&console.log(d+"x"+E+": "+e.debugElementAt(d,E));else{const t=r.getTertiaryTool();t.applyPoint(d,E,e.graphics(),!1),ee.triggerFeatureUsed(ee.FEATURE_DRAW_TERTIARY),ee.triggerToolUsed(t)}return}return}{let n=r.getPrimaryTool();if(n.isSecondaryActionEnabled())return n.applySecondaryAction(d,E,e.graphics(),t.altKey),this.#Ws.hideCursors(),void m();o=r.getSecondaryTool(),ee.triggerFeatureUsed(ee.FEATURE_DRAW_SECONDARY)}}if(t.ctrlKey||t.shiftKey)t.ctrlKey&&t.shiftKey?(o.applySpecial(d,E,e.graphics(),t.altKey),ee.triggerFeatureUsed(ee.FEATURE_DRAW_FLOOD),ee.triggerToolUsed(o),o=null):(t.ctrlKey&&o.isAreaModeEnabled()&&(h=t.ctrlKey),t.shiftKey&&o.isLineModeEnabled()&&(c=t.shiftKey));else{o.applyPoint(d,E,e.graphics(),t.altKey),ee.triggerToolUsed(o),u(d,E,t.altKey),this.#Ws.hideCursors();const s=r.getPrimaryTool().createCursor();null!==s&&this.#Ws.showCursor(d,E,n,s)}})),t.addEventListener("mousemove",(t=>{if(m(),r.isInputDisabled())return o=null,void this.#Ws.hideCursors();if(!h&&!c){if(this.#Ws.hasCursor()){const[e,r]=a(t);this.#Ws.moveCursor(e,r,n)}else{const e=r.getPrimaryTool().createCursor();if(null!==e){const[r,s]=a(t);this.#Ws.showCursor(r,s,n,e)}}if(null===o)return;const[h,c]=a(t);return l||(o.onDragStart(s,i,e.graphics(),t.altKey),l=!0),o.applyStroke(s,i,h,c,e.graphics(),t.altKey),ee.triggerToolUsed(o),u(h,c,t.altKey),s=h,void(i=c)}if(!(null===o||h&&c))if(h){const[e,r]=a(t);this.#Ws.repaintRectangleSelection(s,i,e,r,n)}else if(c){const[e,r]=a(t);this.#Ws.repaintLineSelection(s,i,e,r,n)}else;})),t.addEventListener("mouseup",(t=>{if(m(),!r.isInputDisabled()&&null!==o){if(l)o.onDragEnd(s,i,e.graphics(),t.altKey),l=!1,o.hasCursor()||this.#Ws.hideCursors();else if(h){const[n,r]=a(t);let l=Math.min(s,n),h=Math.min(i,r),c=Math.max(s,n),d=Math.max(i,r);o.applyArea(l,h,c,d,e.graphics(),t.altKey),this.#Ws.hideCursors(),ee.triggerFeatureUsed(ee.FEATURE_DRAW_RECT),ee.triggerToolUsed(o)}else if(c){const[n,r]=a(t);o.applyStroke(s,i,n,r,e.graphics(),t.altKey),this.#Ws.hideCursors(),ee.triggerFeatureUsed(ee.FEATURE_DRAW_LINE),ee.triggerToolUsed(o)}o=null,h=!1,c=!1}})),t.addEventListener("mouseout",(e=>{m(),this.#Ws.hideCursors()})),t.addEventListener("mouseenter",(e=>{null!==o&&0===e.buttons&&(o=null,this.#Ws.hideCursors(),e.preventDefault())}));let E=e=>{let t=e.touches[0];return a(t)};t.addEventListener("touchstart",(t=>{if(r.isInputDisabled())return;const[n,a]=E(t);s=n,i=a,o=r.getPrimaryTool(),o.applyPoint(n,a,e.graphics(),!1),ee.triggerFeatureUsed(ee.FEATURE_DRAW_PRIMARY),ee.triggerToolUsed(o),t.preventDefault()})),t.addEventListener("touchmove",(t=>{if(r.isInputDisabled())return void(o=null);if(null===o)return;const[n,a]=E(t);o.applyStroke(s,i,n,a,e.graphics(),!1),ee.triggerToolUsed(o),s=n,i=a,t.preventDefault()})),t.addEventListener("touchend",(e=>{o=null,e.preventDefault()}))}getCanvasNode(){return this.#Ps}setImageRenderingStyle(e){this.#Ps.style.imageRendering=e}onInputDisabledChanged(e){this.#Vs.style.cursor=e?"not-allowed":null}}class Mn extends un{#Xs=te.div({class:"sand-game-canvas-holder"});#qs=null;createNode(e){return e.registerCanvasProvider({initialize:()=>(this.#Xs.innerHTML="",this.#qs=new bn(e),this.#Xs.append(this.#qs.createNode(e)),this.#qs.getCanvasNode()),getCanvasNode:()=>null!==this.#qs?this.#qs.getCanvasNode():null}),e.addOnImageRenderingStyleChanged((e=>{null!==this.#qs&&this.#qs.setImageRenderingStyle(e)})),e.addOnInitialized((e=>{if(null===this.#qs)throw"Illegal state: canvas is not initialized";this.#qs.register(e)})),e.addOnBeforeClosed((()=>{this.#qs=null,this.#Xs.innerHTML=""})),e.getToolManager().addOnInputDisabledChanged((e=>{null!==this.#qs&&this.#qs.onInputDisabledChanged(e)})),this.#Xs}}class Hn extends fn{performAction(e){let t=te.bootstrapSimpleFormBuilder();t.addInput("Width","width",""+e.getCurrentWidthPoints()),t.addInput("Height","height",""+e.getCurrentHeightPoints()),t.addInput("Scale","scale",""+e.getCurrentScale());let n=te.bootstrapDialogBuilder();n.setHeaderContent("Change canvas size manually"),n.setBodyContent(t.createNode()),n.addSubmitButton("Submit",(()=>{let n=t.getData(),r=Number.parseInt(n.width),s=Number.parseInt(n.height),i=Number.parseFloat(n.scale);e.changeCanvasSize(r,s,i),ee.triggerFeatureUsed(ee.FEATURE_CANVAS_SIZE_CHANGE)})),n.addCloseButton("Close"),n.show(e.getDialogAnchor())}}class Nn extends un{static CLASS_SELECTED="selected-size";static SIZES=[{scale:.75,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHUlEQVR4Xu3WQW6EMBBEUSJx3jkMF55s4ogQG2zTxeDi/10ijdxTb5HME1k3b39BXgFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsCrlmV5r39+vV5f659HDOCftrjpd6MjAzzlcVOjIz8eeA83NTLyo4FrcFOjIj8WuAU3NSLyI4F7cFOjIT8O+AxuaiTkRwFH4KZGQX4McCRuagTkjwGvB1ePpMBN3R35I8DbwZUjbd9SpLz/bJcDlwZXjFR6S5Hi/oguBT4aPHKko7cURd4f1WXAtYNHjFT7lqKI+yO7BLh18DMjtb6l6Mz90cmBewfvGan3LUU99yuSAp8dvGWks28parlflQw4avCakaLeUlRzvzIJcPTgeyNFv6Vo73514cCqwXMjqd5SlLu/1Pp71X6mVCiwevD1SOq3FNUgb79XzWf2CgPeHqbqqndU7YGVvtveZ44KAS4dRvlyYEcb5j5T02ngo8MoX8+fmx7kU8C1h1G+nv1akbuBe46jmFqQu4DB/Xy1yM3A4N6nGuQmYHDv1xFyNTC4920PuQoY3PtXQj4EBneccsi7wOCO1xa5CAzuuK2Rs8Dgjl9C/gcMrk/Lsrz/AIPr1y8wuJ7N0wSuczO43v37J4u8Atg8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYvG9K/XJS29iPWwAAAABJRU5ErkJggg==",description:"Very small elements"},{scale:.5,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABSElEQVR4Xu3WQQ6EIBAFUUw8L4fxwjN78xedQBDLeksiYbAysc8mtPO+IBYDwxkYzsBwBoYzMJyB4QwMZ2A4A8MZGM7AcAaGMzCcgeEMDGdgOAPDGRjOwK2167p+97Wk937c13ZnYDgDwxkYzsBwnwtcHaiStHf3wetzgb/GwHAGhjMw3JLAaThJZg8s1XNHpDNm32PEksB6joHhDAxnYLjpgdPQUZX2VgeWtPcp6bdU7zHb9MDai4HhDAxnYLihwGmYmG3FGSuke6TBq/pc1VBg7c/AcAaGMzBcOXD6+GtM9Z2m56qDVzmw3snAcAaGMzBcDJw+6tpLapQGrxhYHAaGMzCcgeHO9LHWO6WW/oPhDAxnYDgDwxkYzsBwBoYzMJyB4QwMZ2A4A8MZGM7AcAaGMzCcgeEMDGdgOAPDGRjOwHAGhjMw3B/1T0cI5HMokgAAAABJRU5ErkJggg==",description:"Small elements"},{scale:.375,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGklEQVR4Xu3YMU7EMBQAUZBy3hwmF4Y+BforGcNO3itdOFZGLvyPD9KO+wItAscJHCdwnMBxAscJHCdwnMBxAscJHCdwnMBxAscJHCdwnMBxjw58XdfXfe3uPM/P+9o7eXTgJxA4TuA4geMEjhM4TuA4geO2Bt45WJh8a2Kyz6oz/4atgdlP4DiB4wSOEzhO4DiB4wSOWxZ4MhCYWLXPTpMz/9UwZFlg/ieB4wSOEzhO4DiB4wSOEzhuFHjykOdnq/7hqwOTUWDel8BxAscJHCdwnMBxAscJHHeseoCzx6u93OA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuC4b6YQJX8pLssnAAAAAElFTkSuQmCC",description:"Medium elements"},{scale:.25,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+ElEQVR4Xu3ZsQ3DMAwAwRjwvBpGCye9KgMq7LzvSnbiQxXPD2nnOqBF4DiB4wSOEzhO4DiB4wSOEzhO4DiB4wSOEzhO4LjXBZ5zftfZVWOMY5093esCv43AcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcVuBd05v/2jnvXedGrcC83wCxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECx507JzCuu2vPfnCcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHE/D68RYAgtpF0AAAAASUVORK5CYII=",description:"Big elements"}];#Js=[];#js=null;#Zs=null;createNode(e){for(let t of Nn.SIZES){let n=this.#Qs(t.scale,t.image,t.description);t.scale===e.getCurrentScale()&&this.#$s(n,t.scale),n.addEventListener("click",(r=>{this.#ei(n,t.scale,e)})),this.#Js.push(n)}return te.div(null,[te.par(null,"Increasing the size of the elements will result in the top and right parts of the canvas being clipped."),te.par(null,"Reducing the size of the elements will result in an expansion of the canvas in the upper and right parts."),te.par(null,"Only the scale of the current scene and the initial setting for new scenes will be changed. Scene can be regenerated by clicking on the scene card."),te.div({class:"element-size-options"},this.#Js)])}#ei(e,t,n){if(this.#Zs===t)return;this.#js&&this.#js.classList.remove(Nn.CLASS_SELECTED),this.#$s(e,t);let r=Math.trunc(n.getCurrentWidthPoints()/n.getCurrentScale()*t),s=Math.trunc(n.getCurrentHeightPoints()/n.getCurrentScale()*t);n.changeCanvasSize(r,s,t),ee.triggerFeatureUsed(ee.FEATURE_SWITCH_SCALE)}#$s(e,t){e.classList.add(Nn.CLASS_SELECTED),this.#js=e,this.#Zs=t}#Qs(e,t,n){return te.div({class:"card"},[te.element("img",{src:t,alt:n})])}}class Dn extends fn{performAction(e){let t=new Nn,n=te.bootstrapDialogBuilder();n.setHeaderContent("Adjust Scale"),n.setBodyContent(te.div({class:"sand-game-component"},[t.createNode(e)])),n.addSubmitButton("Set size manually",(()=>{(new Hn).performAction(e)})),n.addCloseButton("Close"),n.show(e.getDialogAnchor())}}class xn extends un{createNode(e){return te.button(te.create('\x3c!-- @author Patrik Harag --\x3e\n'),{class:"btn btn-outline-secondary adjust-scale","aria-label":"Adjust scale"},(()=>{(new Dn).performAction(e)}))}}class Bn extends un{static CLASS_SELECTED="selected-scene";static CLASS_VISITED="visited-scene";#Pr;#ti=!1;#K;#ni;#js=null;#ri=null;#si=new Map;constructor(e,t,n){super(),this.#Pr=e,this.#K=t,this.#ni=n,this.#Pr.addOnBeforeNewSceneLoaded((()=>{this.#ti||(this.#ii(),this.#ai())}))}createNode(e){let t=te.div({class:"scenes"},[]);for(const[e,n]of Object.entries(this.#K)){let r=te.element("span",{class:"scene-title"},n.name),s=te.button(r,{class:"btn btn-outline-secondary scene"},(()=>{this.#oi(e,s,n)}));e===this.#ni&&(this.#js=s,this.#ri=e,s.classList.add(Bn.CLASS_SELECTED),s.classList.add(Bn.CLASS_VISITED)),t.append(s)}return t}#oi(e,t,n){this.#js?this.#ri===e?this.#li((()=>{this.#ei(t,e,n),ee.triggerFeatureUsed(ee.FEATURE_RESTART_SCENE)})):(this.#ii(),this.#ei(t,e,n),ee.triggerFeatureUsed(ee.FEATURE_SWITCH_SCENE)):(this.#ei(t,e,n),ee.triggerFeatureUsed(ee.FEATURE_SWITCH_SCENE))}#li(e){let t=te.bootstrapDialogBuilder();t.setHeaderContent("Restart scene"),t.setBodyContent([te.par(null,"Do you want to restart the scene?")]),t.addSubmitButton("Confirm",e),t.addCloseButton("Close"),t.show(this.#Pr.getDialogAnchor())}#ei(e,t,n){this.#ai(),this.#js=e,this.#ri=t,e.classList.add(Bn.CLASS_SELECTED),e.classList.add(Bn.CLASS_VISITED);let r=this.#si.get(t);r?(this.#si.delete(t),this.#ti=!0,this.#Pr.openScene(new je(r)),this.#ti=!1):(this.#ti=!0,this.#Pr.openScene(n),this.#ti=!1)}#ai(){this.#js&&this.#js.classList.remove(Bn.CLASS_SELECTED),this.#js=null,this.#ri=null}#ii(){this.#js&&this.#si.set(this.#ri,this.#Pr.createSnapshot())}}class Un{static ALL_MATERIALS=function(e){let t=e.getSandGame();if(null===t)return;const n=["ash","sand","soil","gravel","wall","rock","metal","wood","water"];let r=Math.ceil(t.getWidth()/n.length);for(let e=0;e=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Ye&&Ye.global===Ye?Ye:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,a){var o=i.URL||i.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):r(l.href)?n(e,t,a):s(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),i);else if(r(e))n(e,i,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){s(o)}))}}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var o="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||o&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=h?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,u=d.createObjectURL(e);s?s.location=u:location.href=u,s=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});i.saveAs=o.saveAs=o,e.exports=o}()}({get exports(){return Pn},set exports(e){Pn=e}});var Ln=Pn;class Fn extends fn{performAction(e){new _n(e,(t=>{let n=te.bootstrapDialogBuilder();n.setHeaderContent("Benchmark results"),n.setBodyContent([te.par(null,"IPS AVG: "+t.ipsAvg.toFixed(2)),te.par(null,"IPS MIN: "+t.ipsMin)]),n.addCloseButton("Close"),n.addButton(te.button("Download results",{type:"button",class:"btn btn-primary"},(e=>{const n=JSON.stringify(t,null," "),r=new Blob([n],{type:"application/json;charset=utf-8"}),s=this.#hi(new Date);Ln.saveAs(r,`${s}.benchmark.json`)}))),n.show(e.getDialogAnchor())})).start()}#hi(e){let t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${n}-${t}_${String(e.getHours()).padStart(2,"0")}-${String(e.getMinutes()).padStart(2,"0")}`}}class _n{static WAITING_GAP=300;#Pr;#ci;constructor(e,t){this.#Pr=e,this.#ci=t}start(){let e=new pn({apply:e=>this.#di(e)});this.#Pr.openScene(e),this.#Pr.start()}#di(e){const t=[],n=[..._n.BENCHMARKS];let r=0,s=_n.WAITING_GAP,i=0,a=Number.MAX_SAFE_INTEGER;e.addOnProcessed((()=>{if(s>0)return void s--;if(0===n.length)return;const o=n[0];0===r&&console.log("Running benchmark: "+o.name),o.nextIteration(e,r),r++;const l=e.getIterationsPerSecond();if(i+=l,a=Math.min(a,l),o.iterations===r){const l=i/o.iterations;t.push({name:o.name,ipsAvg:l,ipsMin:a}),n.shift(),r=0,i=0,a=Number.MAX_SAFE_INTEGER,s=_n.WAITING_GAP,e.graphics().fill(W.AIR),0===n.length&&this.#ci(this.#ui(e,t))}}))}#ui(e,t){const n=t.map((e=>e.ipsAvg)).reduce(((e,t)=>e+t),0)/t.length,r=t.map((e=>e.ipsMin)).reduce(((e,t)=>Math.min(e,t)),Number.MAX_SAFE_INTEGER);return{version:1,date:(new Date).toString(),ipsAvg:n,ipsMin:r,benchmarks:t,scene:{width:e.getWidth(),height:e.getHeight()}}}static#mi(e,t,n){if(t<=0)throw"Number of iterations must be a positive number";return{name:e,iterations:t,nextIteration:n}}static BENCHMARKS=[_n.#mi("sand-fall-q",500,(function(e,t){e.graphics().drawRectangle(0,0,-1,1,W.SAND,!0)})),_n.#mi("sand-fall-s",2e3,(function(e,t){t%10==0&&e.graphics().drawRectangle(0,0,-1,1,W.SAND,!0)})),_n.#mi("sand-fill",1e3,(function(e,t){0===t&&e.graphics().drawRectangle(0,0,-1,-1,W.SAND,!0)})),_n.#mi("soil-fall-q",500,(function(e,t){e.graphics().drawRectangle(0,0,-1,1,W.SOIL,!0)})),_n.#mi("soil-fall-s",2e3,(function(e,t){t%10==0&&e.graphics().drawRectangle(0,0,-1,1,W.SOIL,!0)})),_n.#mi("soil-fill",1e3,(function(e,t){0===t&&e.graphics().drawRectangle(0,0,-1,-1,W.SOIL,!0)})),_n.#mi("water-fall-q",500,(function(e,t){e.graphics().drawRectangle(0,0,-1,1,W.WATER,!0)})),_n.#mi("water-fall-s",2e3,(function(e,t){t%10==0&&e.graphics().drawRectangle(0,0,-1,1,W.WATER,!0)})),_n.#mi("water-fill",1e3,(function(e,t){0===t&&e.graphics().drawRectangle(0,0,-1,-1,W.WATER,!0)})),_n.#mi("sand-into-water",1e3,(function(e,t){0===t&&(e.graphics().drawRectangle(0,0,-1,31,W.SAND,!0),e.graphics().drawRectangle(0,60,-1,-1,W.WATER,!0))})),_n.#mi("soil-into-water",1e3,(function(e,t){0===t&&(e.graphics().drawRectangle(0,0,-1,31,W.SOIL,!0),e.graphics().drawRectangle(0,60,-1,-1,W.WATER,!0))}))]}class kn extends un{static CLASS_PRIMARY="btn-primary";static CLASS_SECONDARY="btn-secondary";static CLASS_INFO="btn-info";static CLASS_SUCCESS="btn-success";static CLASS_WARNING="btn-warning";static CLASS_LIGHT="btn-light";static CLASS_OUTLINE_PRIMARY="btn-outline-primary";static CLASS_OUTLINE_SECONDARY="btn-outline-secondary";static CLASS_OUTLINE_INFO="btn-outline-info";static CLASS_OUTLINE_SUCCESS="btn-outline-success";static CLASS_OUTLINE_WARNING="btn-outline-warning";static CLASS_OUTLINE_LIGHT="btn-outline-light";#Ei;#gi;#Ai;constructor(e,t,n){super(),this.#Ei=e,this.#gi="function"==typeof n?fn.create(n):n,this.#Ai=null==t?kn.CLASS_PRIMARY:t}createNode(e){return te.button(this.#Ei,{class:"btn "+this.#Ai},(t=>{this.#gi.performAction(e)}))}}class Wn extends fn{performAction(e){const t=e.getCanvas();null!==t&&t.toBlob((e=>{Ln.saveAs(e,this.#hi(new Date)+".png")}))}#hi(e){let t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${n}-${t}_${String(e.getHours()).padStart(2,"0")}-${String(e.getMinutes()).padStart(2,"0")}`}}class Vn extends fn{#pi=!1;#Ti=!1;#fi=null;performAction(e){if(this.#pi||(e.addOnBeforeClosed((()=>{null!==this.#fi&&this.#Ci()})),e.addOnInitialized((e=>{this.#Ti=!1})),this.#pi=!0),null===this.#fi){if(this.#fi={},!this.#Ti){let t=!1,n=0,r=!1;e.getSandGame().addOnProcessed((e=>{t=!0,n=e})),e.getSandGame().addOnRendered((()=>{null!==this.#fi&&t&&!r&&(r=!0,this.#Ri(e,n,(()=>r=!1)),t=!1)})),this.#Ti=!0}}else this.#Ci()}#Ri(e,t,n){const r=e.getCanvas();null!==r&&r.toBlob((e=>{e.arrayBuffer().then((e=>{const n=new Uint8Array(e);null!==this.#fi&&(this.#fi[`iteration_${String(t).padStart(6,"0")}.png`]=n)})).finally((()=>{n()}))}))}#Ci(){this.#Si(this.#fi,"frames.zip"),this.#fi=null}#Si(e,t){const n=sn(e,{level:0});Ln.saveAs(new Blob([n]),t)}}class Yn extends fn{performAction(e){const t=e.getSandGame();if(null===t)return;const n=e.getToolManager().getPrimaryTool();n.isAreaModeEnabled()&&n.applyArea(0,0,t.getWidth(),t.getHeight(),t.graphics(),!1)}}class Gn extends un{static#vi=kn.CLASS_OUTLINE_SECONDARY;static#wi=kn.CLASS_OUTLINE_INFO;static#Ii=kn.CLASS_OUTLINE_PRIMARY;static#Oi=kn.CLASS_OUTLINE_SUCCESS;static COMPONENTS=[new kn("All materials",Gn.#vi,Un.ALL_MATERIALS),new kn("Tree spawn",Gn.#vi,Un.TREE_SPAWN_TEST),new kn("Tree grow",Gn.#vi,Un.treeGrowTest(0)),new kn("Tree grown",Gn.#vi,Un.treeGrowTest(-1)),new kn("Fill",Gn.#vi,new Yn),new kn("Benchmark",Gn.#Ii,new Fn),new kn("Screenshot",Gn.#Ii,new Wn),new kn("Record (start/stop)",Gn.#Ii,new Vn),new kn("Chunks",Gn.#wi,fn.createToggle(!1,((e,t)=>e.setShowActiveChunks(t)))),new kn("M/webgl",Gn.#wi,fn.create((e=>e.setRendererInitializer(Me.canvasWebGL())))),new kn("M/classic",Gn.#wi,fn.create((e=>e.setRendererInitializer(Me.canvas2d())))),new kn("M/heatmap",Gn.#wi,fn.create((e=>e.setRendererInitializer(Me.canvas2dHeatmap())))),new kn("M/type",Gn.#wi,fn.create((e=>e.setRendererInitializer(Me.canvas2dElementType())))),new kn("M/null",Gn.#wi,fn.create((e=>e.setRendererInitializer(Me.nullRenderer())))),new kn("Pixelated",Gn.#wi,fn.createToggle(!0,((e,t)=>e.setCanvasImageRenderingStyle(t?"pixelated":"auto"))))];createNode(e){let t=te.div({class:"test-tools"},[]),n=[...Gn.COMPONENTS];for(let e of $.TEST_TOOLS){let t=fn.create((t=>t.getToolManager().setPrimaryTool(e)));n.push(new kn(e.getInfo().getDisplayName(),Gn.#Oi,t))}for(let r of n)t.append(r.createNode(e));return t}}class zn extends un{#Ai;#yi;constructor(e,t){super(),this.#Ai=e,this.#yi=t}createNode(e){const t=te.div({class:this.#Ai},[]);for(let n of this.#yi)null!==n&&t.append(n.createNode(e));return t}}class Kn extends un{#bi;constructor(e){super(),this.#bi=e}createNode(e){return this.#bi}}var Xn='';class qn extends kn{constructor(e){super("",e,fn.create((e=>{e.switchStartStop(),ee.triggerFeatureUsed(ee.FEATURE_PAUSE)})))}createNode(e){const t=super.createNode(e);return te.setContent(t,[te.create(Xn),"Start"]),e.addOnStarted((()=>{te.setContent(t,[te.create(''),"Pause"])})),e.addOnStopped((()=>{te.setContent(t,[te.create(Xn),"Start"])})),t}}class Jn extends un{#ps;constructor(e=null){super(),this.#ps=e}createNode(e){let t="";const n=te.span(""),r=[te.span("Performance: ",{class:"status-label"}),n],s=te.div({class:"btn-group"},[te.element("button",{type:"button",class:"btn btn-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},r),te.element("form",{class:"dropdown-menu p-2"},this.#Mi(e))]);s.addEventListener("show.bs.dropdown",(function(){ee.triggerFeatureUsed(ee.FEATURE_STATUS_DISPLAYED)}));let i=(e,r)=>{r!==t&&(n.textContent=r.toUpperCase(),n.classList.remove("status-"+t),n.classList.add("status-"+r),t=r)};return e.addOnStopped((()=>i(0,"stopped"))),e.addOnStarted((()=>i(0,"started"))),e.addOnInitialized((t=>{t.addOnRendered((()=>{const t=e.getSandGame().getIterationsPerSecond();i(0,0!==t?t>105?"best":t>80?"good":t>50?"medium":t>40?"low":"poor":"stopped")}))})),s}#Mi(e){const t=te.span(),n=te.span();e.addOnInitialized((r=>{r.addOnRendered((()=>{const r=e.getSandGame().getFramesPerSecond(),s=e.getSandGame().getIterationsPerSecond();n.textContent="= "+r,t.textContent="= "+s}))}));const r=te.span(),s=()=>{const t=e.getCurrentWidthPoints(),n=e.getCurrentHeightPoints();r.textContent=`= ${t.toLocaleString()}${n.toLocaleString()} = ${(t*n).toLocaleString()}`};return e.addOnInitialized((()=>{s()})),s(),[te.span("Simulated elements"),te.element("br"),r,te.element("br"),te.span("Simulation iterations /s"),te.element("br"),t,te.span(" (target: "+Te.OPT_CYCLES_PER_SECOND+")",{style:"color: lightgray;"}),te.element("br"),te.span("Rendered frames /s"),te.element("br"),n,te.span(" (target: "+Te.OPT_FRAMES_PER_SECOND+")",{style:"color: lightgray;"}),te.element("br"),this.#ps]}}class jn extends fn{performAction(e){let t=te.bootstrapDialogBuilder();t.setHeaderContent("Restart"),t.setBodyContent([te.par(null,"Are you sure?")]),t.addSubmitButton("Restart",(()=>{const t=e.getInitialScene();e.openScene(t),ee.triggerFeatureUsed(ee.FEATURE_RESTART_SCENE)})),t.addCloseButton("Close"),t.show(e.getDialogAnchor())}}class Zn extends kn{constructor(e){super("",e,new jn)}createNode(e){const t=super.createNode(e);return te.setContent(t,[te.create(''),"Restart"]),t}}class Qn extends fn{performAction(e){let t=document.createElement("input");t.type="file",t.onchange=t=>{e.getIOManager().loadFromFiles(t.target.files)},t.click()}}class $n extends fn{performAction(e){const t=e.createSnapshot(),n=dn.createResourceFromSnapshot(t);Ln.saveAs(new Blob([n]),this.#Hi()),ee.triggerFeatureUsed(ee.FEATURE_IO_EXPORT)}#Hi(){return`sand-game-js_${(new Date).toISOString().slice(0,10)}.sgjs`}}class er extends fn{#J;constructor(e){super(),this.#J=e}performAction(e){let t=te.bootstrapSimpleFormBuilder();t.addTextArea("Message","message");let n=te.bootstrapDialogBuilder();n.setHeaderContent("Report a problem"),n.setBodyContent(t.createNode()),n.addSubmitButton("Submit",(()=>{let n=t.getData().message;""!==n.trim()&&this.#J("user",n,e)})),n.addCloseButton("Close"),n.show(e.getDialogAnchor())}}const tr=W._LIST,nr=$._LIST;e.BrushDefs=W,e.Brushes=M,e.PredicateDefs=O,e.Resources=dn,e.SceneDefs=Tn,e.ToolDefs=$,e.Tools=Z,e.brushes=tr,e.init=function(e,n){let r;void 0===n&&(n={});const{width:s,height:i,scale:a}=t.determineOptimalSizes(e),o={scale:a,canvasWidthPx:s,canvasHeightPx:i,version:n.version},l=!0===n.debug,h=void 0===n.autoStart||!0===n.autoStart,c=!(!0===n.disableRestart),d=!(!0===n.disableStartStop),u=!(!0===n.disableImport),m=!(!0===n.disableExport),E=!(!0===n.disableSizeChange),g=!(!0===n.disableSceneSelection),A=void 0!==n.errorReporter,p=n.errorReporter;let T,f,C,R,S,v;function w(e,t=null){if("string"==typeof e){let n=$.byCodeName(e);if(null!==n)return n;if(l)throw"Tool not found: "+e;return t}if("object"==typeof e&&e instanceof D)return e;if(l)throw"Unexpected tool type";return t}if("string"==typeof n.scene?(f=n.scene,T=Tn.SCENES[f]):"object"==typeof n.scene?(f="n/a",T=new pn({name:"n/a",description:"n/a",apply:"function"==typeof n.scene.init?e=>n.scene.init(e,r):()=>{}})):(f=l||Math.random()>.1?"landscape_1":"landscape_2",T=Tn.SCENES[f]),Array.isArray(n.tools)){C=[];for(let e of n.tools){let t=w(e,null);null!==t&&C.push(t)}}else C=$.DEFAULT_TOOLS;void 0!==n.primaryTool&&null!==(R=w(n.primaryTool))||(R=$.SAND),void 0!==n.secondaryTool&&null!==(S=w(n.secondaryTool))||(S=$.ERASE),void 0!==n.tertiaryTool&&null!==(v=w(n.tertiaryTool))||(v=$.METEOR);const I=te.div({class:"sand-game-dialog-anchor sand-game-component"});document.body.prepend(I);const O=new Je(R,S,v);r=new An(o,I,O),void 0!==p&&r.addOnFailure(((e,t)=>p(e,t,r)));const y=new zn("sand-game-component",[new vn(C,u),new Mn,new zn("sand-game-options",[new zn("sand-game-options-left",[u?new kn("Import",kn.CLASS_LIGHT,new Qn):null,m?new kn("Export",kn.CLASS_LIGHT,new $n):null,c&&!g?new Zn(kn.CLASS_LIGHT):null,d?new qn(kn.CLASS_LIGHT):null,new Jn(E?te.element("span",null,[te.element("br"),"Tip: adjust scale if needed"]):null)]),new zn("sand-game-options-right",[A?new kn("Report a problem",kn.CLASS_LIGHT,new er(p)):null])]),new zn("sand-game-views",[E||g?new zn(null,[E?new xn:null,g?new Kn(te.span("Scenes",{class:"scenes-label"})):null,g?new Bn(r,Tn.SCENES,f):null]):null,l?new Gn:null])]).createNode(r);return e.innerHTML="",e.append(y),r.setup(T),u&&r.getIOManager().initFileDragAndDrop(y),r.enableGlobalShortcuts(),h&&r.start(),ee.triggerFeatureUsed(ee.FEATURE_APP_INITIALIZED),r},e.tools=nr,Object.defineProperty(e,"__esModule",{value:!0})})); //# sourceMappingURL=sand-game-js.umd.min.js.map</script>
                    <style>/* Sand Game JS; Patrik Harag, https://harag.cz; all rights reserved */.sand-game-component.drag-and-drop-highlight{outline:thick dashed rgba(0,129,255,.76);outline-offset:2px}.sand-game-component .sand-game-canvas-component .sand-game-canvas{outline:1px solid #b7b7b7}@media (max-width:575px){.sand-game-component .sand-game-canvas-component{margin-left:-15px;margin-right:-15px}.sand-game-component .sand-game-canvas-component .sand-game-canvas{outline:none}}.sand-game-component .sand-game-canvas-overlay{cursor:crosshair;user-select:none}.sand-game-component .sand-game-canvas-overlay .sand-game-marker{font-size:small;padding:3pt}.sand-game-component .sand-game-canvas-overlay .sand-game-splash{background-color:hsla(0,0%,63%,.8);cursor:auto;display:flex;flex-direction:column;margin:auto;max-height:75%;max-width:600px;min-height:200px;padding:1em;pointer-events:auto;position:relative;top:20%;width:70%}.sand-game-component .sand-game-canvas-overlay .sand-game-splash .sand-game-splash-content{flex:1 1 auto;overflow-y:auto}.sand-game-component .sand-game-canvas-overlay .sand-game-splash .sand-game-splash-footer a,.sand-game-component .sand-game-canvas-overlay .sand-game-splash .sand-game-splash-footer button{margin-right:.5em;margin-top:.5em}@media (max-width:768px){.sand-game-component .sand-game-canvas-overlay .sand-game-splash{font-size:90%;max-height:85%;top:10%;width:90%}.sand-game-component .sand-game-canvas-overlay .sand-game-splash .sand-game-splash-footer a,.sand-game-component .sand-game-canvas-overlay .sand-game-splash .sand-game-splash-footer button{font-size:90%}}.sand-game-component .sand-game-canvas-overlay .sand-game-objectives-list{background-color:hsla(0,0%,63%,.8);margin-left:10pt;padding:1em;position:absolute;right:10pt;top:10pt}.sand-game-component .sand-game-canvas-overlay .sand-game-objectives-list .sand-game-objective-icon{margin-right:.5em;vertical-align:.1em}@media (max-width:768px){.sand-game-component .sand-game-canvas-overlay .sand-game-objectives-list{font-size:small;padding:.5em 1em}}.sand-game-component .sand-game-tools{display:inline-block;user-select:none}.sand-game-component .btn-sand-game-tool{border:none;font-size:75%;font-weight:700;line-height:2;margin-bottom:4pt;margin-right:3pt;padding:0 .4em}.sand-game-component .sand-game-tools .btn-sand-game-tool.sand{margin-left:.4em}.sand-game-component .btn-sand-game-tool.selected{outline:1px solid red}.sand-game-component .btn-sand-game-tool.fire.selected,.sand-game-component .btn-sand-game-tool.meteor.selected{outline:1px solid #000}.sand-game-component .sand-game-options{display:flex;justify-content:space-between;width:100%}.sand-game-component .sand-game-options .sand-game-options-left{display:inline}.sand-game-component .sand-game-options .sand-game-options-right{display:inline;margin-left:auto}.sand-game-component .sand-game-options .btn{color:gray;font-size:75%;margin-right:.5em;padding:0 .5em;vertical-align:baseline}.sand-game-component .sand-game-options .btn.btn-link{text-decoration:none}.sand-game-component .sand-game-options .btn .bi{height:12px;vertical-align:-1px;width:12px}.sand-game-component .sand-game-options .dropdown-menu .btn{font-size:100%}.sand-game-component .sand-game-options .dropdown-menu{font-size:small;user-select:none}@media (max-width:575px){.sand-game-component .sand-game-options .status-label{display:none}}.sand-game-component .sand-game-options .status-stopped{color:blue}.sand-game-component .sand-game-options .status-best,.sand-game-component .sand-game-options .status-good{color:green}.sand-game-component .sand-game-options .status-medium{color:#fc0}.sand-game-component .sand-game-options .status-low{color:#f40}.sand-game-component .sand-game-options .status-poor{color:red}.sand-game-component .sand-game-views:has(div){margin:1em 0 2em}.sand-game-component .sand-game-views .adjust-scale{height:46px;margin-right:.5em;vertical-align:top}.sand-game-component .sand-game-views .adjust-scale:hover{background-color:#ebebeb}.sand-game-component .sand-game-views .adjust-scale svg{height:30px;width:30px}.sand-game-component .sand-game-views .scenes-label{color:gray;display:inline-block;font-size:small;margin-left:-6px;margin-right:-3px;padding-left:6px;transform:rotate(-70deg);user-select:none}.sand-game-component .sand-game-views .scenes{display:inline}.sand-game-component .sand-game-views .scenes .scene{color:#000;cursor:pointer;display:inline-block;height:46px;margin:0 .5em .5em 0;user-select:none;white-space:nowrap}.sand-game-component .sand-game-views .scenes .scene .card-title{font-size:100%;font-weight:500}.sand-game-component .sand-game-views .scenes .scene.visited-scene,.sand-game-component .sand-game-views .scenes .scene:hover{background-color:#ebebeb}.sand-game-component .sand-game-views .scenes .scene.visited-scene:hover{background-color:#dedede}.sand-game-component .sand-game-views .scenes .scene.selected-scene{background-color:#ffffbd}.sand-game-component .sand-game-views .scenes .scene.selected-scene:hover{background-color:#e8e8a5}.sand-game-component .sand-game-views .card{margin:.5em 0}.sand-game-component .element-size-options{white-space:nowrap}.sand-game-component .element-size-options .card{cursor:pointer;display:inline-block;height:32pt;margin:.5em .5em .5em 0;user-select:none;width:48pt}.sand-game-component .element-size-options .card img{border-radius:.25rem;height:31pt;width:47pt}.sand-game-component .element-size-options .card:hover{background-color:#ebebeb}.sand-game-component .element-size-options .card.selected-size{background-color:#ffffbd}.sand-game-component .element-size-options .card.selected-size:hover{background-color:#e8e8a5}.sand-game-component .test-tools .btn{font-size:75%;line-height:2;margin-bottom:3pt;margin-right:3pt;padding:0 .4em}.sand-game-component .sand-game-templates .template-button{background-position:top;background-position-y:5px;background-repeat:no-repeat;height:100px;margin-right:.5em;margin-top:.5em;padding-top:50px;width:100px} /*# sourceMappingURL=sand-game-js.css.map */</style>
  <script>
      // global variables, accessible from browser console
      var sandGame = null;
      var brushes = null;

      document.addEventListener('DOMContentLoaded', () => {
          if (window.SandGameJS !== undefined) {
              const root = document.getElementById('sand-game-root');

              const config = { version: 'dev', debug: true };
              const controller = window.SandGameJS.init(root, config);
              sandGame = controller.getSandGame();
              controller.addOnInitialized(s => {
                  sandGame = s;
              });
              brushes = window.SandGameJS.brushes;
              console.log('Globals:');
              console.log('  sandGame, brushes');
              console.log('Examples:');
              console.log('  sandGame.graphics().drawLine(10, 10, 300, 150, 2, brushes.sand);');
              console.log('  sandGame.graphics().draw(100, 20, brushes.meteor);');
          } else {
              const placeholder = document.getElementById('sand-game-placeholder-content');
              placeholder.innerHTML = '<span style="color: red; font-weight: bold;">' +
                  'Failed to load the game. Possible reasons:<br>' +
                  '&bull; Your browser may not support modern JavaScript<br>' +
                  '&bull; Internet connection<br>' +
                  '&bull; A server side problem' +
                  '</span>';
          }
      });
  </script>
</head>
<body>
<main role="main" class="container">
  <h1>Sand Game JS</h1>
  <div id="sand-game-root">
    <!-- Sand Game JS placeholder -->
    <div style="user-select: none;">
      <div>
        <button disabled class="btn" type="button" style="min-width: 4em; line-height: 2; padding: 0 0.4em 0 0.4em; font-size: 75%; border: none; background-color: rgb(230, 230, 230); color: black;">&nbsp;</button>
      </div>
      <div style="height: 70vh; display: flex; align-items: center; justify-content: center; margin-top: 4pt; padding: 2em; outline: 1px solid #b7b7b7;">
        <div id="sand-game-placeholder-content">
          Loading...
        </div>
      </div>
      <div style="height: 20vh"></div>
    </div>
  </div>
</main>
<footer class="container" style="font-size: small">
  <p>
    <a href="https://github.com/Hartrik/sand-game-js">https://github.com/Hartrik/sand-game-js</a>
  </p>
</footer>
</body>
</html>