
  <script defer>

  /* Sand Game JS; Patrik Harag, https://harag.cz; all rights reserved */ ! function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t((e = "undefined" != typeof globalThis ? globalThis : e || self).SandGameJS = {})
  }(this, (function(e) {
    "use strict";
    class t {
        static #e(e) {
            let t;
            t = window.innerWidth <= 575 ? window.innerWidth : e.clientWidth;
            let n = Math.min(1400, t),
                r = Math.min(800, Math.trunc(.7 * window.innerHeight));
            return n / r < .75 && (r = Math.trunc(n / .75)), {
                width: n,
                height: r
            }
        }
        static #t() {
            return navigator.maxTouchPoints || "ontouchstart" in document.documentElement ? 75e3 : window.screen.width >= 2560 && window.screen.height >= 1440 ? 2e5 : window.screen.width >= 2048 && window.screen.height >= 1080 ? 175e3 : window.screen.width >= 1920 && window.screen.height >= 1080 ? 15e4 : 125e3
        }
        static #n(e, t, n) {
            function r(n) {
                return Math.trunc(e * n) * Math.trunc(t * n)
            }
            return r(.75) < n ? .75 : r(.5) < n ? .5 : r(.375) < n ? .375 : .25
        }
        static determineOptimalSizes(e) {
            const {
                width: n,
                height: r
            } = t.#e(e);
            return {
                width: n,
                height: r,
                scale: t.#n(n, r, t.#t())
            }
        }
    }
    class n {
        elementHead;
        elementTail;
        constructor(e = 0, t = 0) {
            this.elementHead = e, this.elementTail = t
        }
    }
    class r {
        static FIELD_TYPE_CLASS_SIZE = 3;
        static TYPE_AIR = 0;
        static TYPE_EFFECT = 1;
        static TYPE_GAS = 2;
        static TYPE_POWDER_FLOATING = 3;
        static TYPE_FLUID = 4;
        static TYPE_POWDER = 5;
        static TYPE_POWDER_WET = 6;
        static TYPE_STATIC = 7;
        static FIELD_TYPE_MODIFIERS_SIZE = 5;
        static FIELD_BEHAVIOUR_SIZE = 4;
        static BEHAVIOUR_NONE = 0;
        static BEHAVIOUR_SOIL = 1;
        static BEHAVIOUR_GRASS = 2;
        static BEHAVIOUR_FISH = 3;
        static BEHAVIOUR_FISH_BODY = 4;
        static BEHAVIOUR_TREE = 5;
        static BEHAVIOUR_TREE_ROOT = 6;
        static BEHAVIOUR_TREE_TRUNK = 7;
        static BEHAVIOUR_TREE_LEAF = 8;
        static BEHAVIOUR_FIRE = 9;
        static BEHAVIOUR_FIRE_SOURCE = 10;
        static BEHAVIOUR_METEOR = 11;
        static BEHAVIOUR_WATER = 12;
        static FIELD_SPECIAL_SIZE = 4;
        static FIELD_HMI_SIZE = 8;
        static FIELD_TEMPERATURE_SIZE = 8;
        static of (e, t = 0, n = 0, r = 0) {
            let s = r << 8;
            return s = (s | n) << 8, s = (s | t) << 8, s |= e, s
        }
        static type8(e, t = 0) {
            return e | t << 3
        }
        static type8Powder(e, t = 0, n = 0, r = 0) {
            let s = t << 1;
            return s = (s | r) << 1, s = (s | n) << 3, s |= e, s
        }
        static type8Fluid(e) {
            return e
        }
        static behaviour8(e = 0, t = 0) {
            return e | t << 4
        }
        static modifiers8(e = 0) {
            return e
        }
        static getType(e) {
            return 255 & e
        }
        static getTypeClass(e) {
            return 7 & e
        }
        static getTypeModifierPowderSliding(e) {
            return e >> 3 & 1
        }
        static getTypeModifierPowderDirection(e) {
            return e >> 4 & 1
        }
        static getTypeModifierPowderMomentum(e) {
            return e >> 5 & 7
        }
        static getBehaviour(e) {
            return e >> 8 & 15
        }
        static getSpecial(e) {
            return e >> 12 & 15
        }
        static getHeatModIndex(e) {
            return e >> 16 & 255
        }
        static getTemperature(e) {
            return e >> 24 & 255
        }
        static setType(e, t) {
            return 4294967040 & e | t
        }
        static setTypeClass(e, t) {
            return 4294967288 & e | t
        }
        static setTypeModifierPowderSliding(e, t) {
            return 4294967287 & e | t << 3
        }
        static setTypeModifierPowderDirection(e, t) {
            return 4294967279 & e | t << 4
        }
        static setTypeModifierPowderMomentum(e, t) {
            return 4294967071 & e | t << 5
        }
        static setBehaviour(e, t) {
            return 4294963455 & e | t << 8
        }
        static setSpecial(e, t) {
            return 4294905855 & e | t << 12
        }
        static setHeatModIndex(e, t) {
            return 4278255615 & e | t << 16
        }
        static setTemperature(e, t) {
            return 16777215 & e | t << 24
        }
        static #r = 16;
        static #s = Array(r.#r);
        static #a({
            i: e,
            conductiveIndex: t = .2,
            heatLossChanceTo10000: n = 2500,
            flammableChanceTo10000: s = 0,
            selfIgnitionChanceTo10000: a = 0,
            flameHeat: i = 0,
            burnDownChanceTo10000: o = 0,
            meltingTemperature: l = 256,
            meltingHMI: h = 0,
            hardeningTemperature: c = 0,
            hardeningHMI: d = 0
        }) {
            const u = Array(10);
            return u[0] = t, u[1] = n, u[2] = s, u[3] = a, u[4] = i, u[5] = o, u[6] = l, u[7] = h, u[8] = c, u[9] = d, r.#s[e] = u, e
        }
        static HMI_DEFAULT = r.#a({
            i: 0
        });
        static HMI_CONDUCTIVE_1 = r.#a({
            i: 1,
            conductiveIndex: .25,
            heatLossChanceTo10000: 500
        });
        static HMI_CONDUCTIVE_2 = r.#a({
            i: 2,
            conductiveIndex: .3,
            heatLossChanceTo10000: 20
        });
        static HMI_CONDUCTIVE_3 = r.#a({
            i: 3,
            conductiveIndex: .45,
            heatLossChanceTo10000: 10
        });
        static HMI_GRASS_LIKE = r.#a({
            i: 4,
            flammableChanceTo10000: 4500,
            selfIgnitionChanceTo10000: 3,
            flameHeat: 165,
            burnDownChanceTo10000: 1e3
        });
        static HMI_WOOD_LIKE = r.#a({
            i: 5,
            flammableChanceTo10000: 100,
            selfIgnitionChanceTo10000: 2,
            flameHeat: 165,
            burnDownChanceTo10000: 2
        });
        static HMI_LEAF_LIKE = r.#a({
            i: 6,
            flammableChanceTo10000: 4500,
            selfIgnitionChanceTo10000: 3,
            flameHeat: 165,
            burnDownChanceTo10000: 100
        });
        static HMI_METAL = r.#a({
            i: 7,
            conductiveIndex: .45,
            heatLossChanceTo10000: 10,
            meltingTemperature: 200,
            meltingHMI: 8
        });
        static HMI_MOLTEN = r.#a({
            i: 8,
            conductiveIndex: .45,
            heatLossChanceTo10000: 10,
            hardeningTemperature: 150,
            hardeningHMI: 7
        });
        static HMI_COAL = r.#a({
            i: 9,
            conductiveIndex: .3,
            heatLossChanceTo10000: 20,
            flammableChanceTo10000: 500,
            selfIgnitionChanceTo10000: 3,
            flameHeat: 190,
            burnDownChanceTo10000: 50
        });
        static HMI_THERMITE = r.#a({
            i: 10,
            conductiveIndex: .45,
            heatLossChanceTo10000: 10,
            flammableChanceTo10000: 8e3,
            selfIgnitionChanceTo10000: 500,
            flameHeat: 250,
            burnDownChanceTo10000: 1e3
        });
        static {
            for (let e = 0; e < r.#r; e++) void 0 === r.#s[e] && r.#a(e)
        }
        static hmiToConductiveIndex(e) {
            return r.#s[15 & e][0]
        }
        static hmiToHeatLossChanceTo10000(e) {
            return r.#s[15 & e][1]
        }
        static hmiToFlammableChanceTo10000(e) {
            return r.#s[15 & e][2]
        }
        static hmiToSelfIgnitionChanceTo10000(e) {
            return r.#s[15 & e][3]
        }
        static hmiToFlameHeat(e) {
            return r.#s[15 & e][4]
        }
        static hmiToBurnDownChanceTo10000(e) {
            return r.#s[15 & e][5]
        }
        static hmiToMeltingTemperature(e) {
            return r.#s[15 & e][6]
        }
        static hmiToMeltingHMI(e) {
            return r.#s[15 & e][7]
        }
        static hmiToHardeningTemperature(e) {
            return r.#s[15 & e][8]
        }
        static hmiToHardeningHMI(e) {
            return r.#s[15 & e][9]
        }
    }
    class s {
        static DEFAULT = new s(106244033);
        static next(e) {
            let t = e + 1831565813;
            return t = Math.imul(t ^ t >>> 15, 1 | t), t ^= t + Math.imul(t ^ t >>> 7, 61 | t), ((t ^ t >>> 14) >>> 0) / 4294967296
        }
        #i;
        constructor(e) {
            this.#i = e
        }
        next() {
            let e = this.#i += 1831565813;
            return e = Math.imul(e ^ e >>> 15, 1 | e), e ^= e + Math.imul(e ^ e >>> 7, 61 | e), ((e ^ e >>> 14) >>> 0) / 4294967296
        }
        nextInt(e) {
            return Math.trunc(this.next() * e)
        }
        getState() {
            return this.#i
        }
    }
    class a {
        apply(e, t, n = void 0, r = void 0) {
            throw "Not implemented"
        }
    }
    class i extends a {
        #o;
        constructor(e) {
            super(), this.#o = e
        }
        apply(e, t, n, r) {
            if (this.#o.length > 1) {
                const a = (n || s.DEFAULT).nextInt(this.#o.length);
                return this.#o[a].apply(e, t, n, r)
            }
            if (1 === this.#o.length) {
                return this.#o[0].apply(e, t, n, r)
            }
            return null
        }
    }
    class o extends a {
        #l;
        constructor(e) {
            super(), this.#l = e
        }
        apply(e, t, n, r) {
            if (this.#l.length > 1) {
                const e = (n || s.DEFAULT).nextInt(this.#l.length);
                return this.#l[e]
            }
            return 1 === this.#l.length ? this.#l[0] : null
        }
    }
    class l extends a {
        #h;
        constructor(e) {
            super(), this.#h = e
        }
        _retrieveElement(e, t, n, r) {
            return void 0 !== this.#h ? this.#h.apply(e, t, n) : r
        }
    }
    class h {
        static BLUR_TYPE_NONE = 0;
        static BLUR_TYPE_BACKGROUND = 1;
        static BLUR_TYPE_1 = 2;
        static HEAT_EFFECT_NONE = 0;
        static HEAT_EFFECT_1 = 1;
        static HEAT_EFFECT_2 = 2;
        static HEAT_EFFECT_3 = 3;
        static of (e, t, n, r = h.BLUR_TYPE_NONE, s = 0, a = 0) {
            let i = 0;
            return i = (i | 3 & s) << 2, i = (i | 3 & a) << 2, i = (i | 3 & r) << 8, i = (i | 255 & e) << 8, i = (i | 255 & t) << 8, i |= 255 & n, i
        }
        static getColorRed(e) {
            return e >> 16 & 255
        }
        static getColorGreen(e) {
            return e >> 8 & 255
        }
        static getColorBlue(e) {
            return 255 & e
        }
        static getBlurType(e) {
            return e >> 24 & 3
        }
        static getBurntLevel(e) {
            return e >> 26 & 3
        }
        static getHeatEffect(e) {
            return e >> 28 & 3
        }
        static setColor(e, t, n, r) {
            return e = -256 & (e = -65281 & (e = -16711681 & e | t << 16) | n << 8) | r
        }
        static setBlurType(e, t) {
            return 4244635647 & e | t << 24
        }
        static setBurntLevel(e, t) {
            return 4093640703 & e | t << 26
        }
    }
    class c extends l {
        #c;
        #d;
        #u;
        constructor(e, t, n, r) {
            super(r), this.#c = e, this.#d = t, this.#u = n
        }
        apply(e, t, r, s) {
            const a = this._retrieveElement(e, t, r, s),
                i = h.setColor(a.elementTail, this.#c, this.#d, this.#u);
            return new n(a.elementHead, i)
        }
    }
    class d extends l {
        #m;
        constructor(e, t) {
            super(e), this.#m = "string" == typeof t ? t.split("\n").map((e => e.split(",").map(Number))) : t
        }
        apply(e, t, r, a) {
            const i = this._retrieveElement(e, t, r, a),
                o = (r || s.DEFAULT).nextInt(this.#m.length),
                [l, c, d] = this.#m[o],
                u = h.setColor(i.elementTail, l, c, d);
            return new n(i.elementHead, u)
        }
    }
    class u {
        static asImageData(e, t = void 0, n = void 0) {
            return new Promise(((r, s) => {
                try {
                    let a = new Image;
                    a.onload = () => {
                        let e = document.createElement("canvas"),
                            [s, i] = function(e, r) {
                                let s = e,
                                    a = r;
                                if (void 0 !== t && s > t) {
                                    const e = s / t;
                                    s = t, a /= e
                                }
                                if (void 0 !== n && a > n) {
                                    const e = a / n;
                                    a = n, s /= e
                                }
                                return [Math.trunc(s), Math.trunc(a)]
                            }(a.width, a.height);
                        e.width = s, e.height = i;
                        let o = e.getContext("2d");
                        o.drawImage(a, 0, 0, e.width, e.height);
                        let l = o.getImageData(0, 0, e.width, e.height);
                        r(l)
                    }, a.onerror = () => {
                        s("Cannot load image")
                    }, a.src = e
                } catch (e) {
                    s(e)
                }
            }))
        }
    }
    class m extends l {
        #E = null;
        constructor(e, t) {
            super(e), u.asImageData(t).then((e => this.#E = e))
        }
        apply(e, t, r, s) {
            const a = this._retrieveElement(e, t, r, s);
            if (null != this.#E) {
                const r = e % this.#E.width,
                    s = 4 * (t % this.#E.height * this.#E.width + r),
                    i = this.#E.data[s],
                    o = this.#E.data[s + 1],
                    l = this.#E.data[s + 2],
                    c = h.setColor(a.elementTail, i, o, l);
                return new n(a.elementHead, c)
            }
            return a
        }
    }
    const E = .5 * (Math.sqrt(3) - 1),
        A = (3 - Math.sqrt(3)) / 6,
        g = e => 0 | Math.floor(e),
        p = new Float64Array([1, 1, -1, 1, 1, -1, -1, -1, 1, 0, -1, 0, 1, 0, -1, 0, 0, 1, 0, -1, 0, 1, 0, -1]);

    function T(e = Math.random) {
        const t = function(e) {
                const t = 512,
                    n = new Uint8Array(t);
                for (let e = 0; e < t / 2; e++) n[e] = e;
                for (let r = 0; r < t / 2 - 1; r++) {
                    const t = r + ~~(e() * (256 - r)),
                        s = n[r];
                    n[r] = n[t], n[t] = s
                }
                for (let e = 256; e < t; e++) n[e] = n[e - 256];
                return n
            }(e),
            n = new Float64Array(t).map((e => p[e % 12 * 2])),
            r = new Float64Array(t).map((e => p[e % 12 * 2 + 1]));
        return function(e, s) {
            let a = 0,
                i = 0,
                o = 0;
            const l = (e + s) * E,
                h = g(e + l),
                c = g(s + l),
                d = (h + c) * A,
                u = e - (h - d),
                m = s - (c - d);
            let p, T;
            u > m ? (p = 1, T = 0) : (p = 0, T = 1);
            const f = u - p + A,
                C = m - T + A,
                R = u - 1 + 2 * A,
                S = m - 1 + 2 * A,
                v = 255 & h,
                w = 255 & c;
            let O = .5 - u * u - m * m;
            if (O >= 0) {
                const e = v + t[w];
                O *= O, a = O * O * (n[e] * u + r[e] * m)
            }
            let I = .5 - f * f - C * C;
            if (I >= 0) {
                const e = v + p + t[w + T];
                I *= I, i = I * I * (n[e] * f + r[e] * C)
            }
            let y = .5 - R * R - S * S;
            if (y >= 0) {
                const e = v + 1 + t[w + 1];
                y *= y, o = y * y * (n[e] * R + r[e] * S)
            }
            return 70 * (a + i + o)
        }
    }
    class f {
        static isVisualBurnApplicable(e) {
            const t = r.getTypeClass(e);
            return t > r.TYPE_FLUID || t === r.TYPE_POWDER_FLOATING
        }
        static visualBurn(e, t = 1, n = 3) {
            const r = h.getBurntLevel(e);
            if (r > 2) return e;
            let s = e,
                a = r + t;
            a = Math.min(a, n), a = Math.max(a, 0);
            const i = a - r;
            if (i > 0) {
                s = h.setBurntLevel(s, a);
                let t = h.getColorRed(e),
                    n = h.getColorGreen(e),
                    r = h.getColorBlue(e),
                    o = 1.8 - .5 * Math.random();
                i > 1 && (o *= 1.8 - .5 * Math.random()), i > 2 && (o *= 1.8 - .5 * Math.random()), t = Math.trunc(t / o), n = Math.trunc(n / o), r = Math.trunc(r / o), s = h.setColor(s, t, n, r)
            }
            return s
        }
        static visualNoiseProvider(e = 0) {
            if (Array.isArray(e)) {
                const t = e.map((e => {
                    const t = new s(e);
                    return T((() => t.next()))
                }));
                return new C(t)
            } {
                const t = new s(e),
                    n = T((() => t.next()));
                return new C([n])
            }
        }
    }
    class C {
        #A;
        constructor(e) {
            this.#A = e
        }
        visualNoise(e, t, n, r = 1, s = .5, a = .1, i = 0, o = 0, l = 0) {
            let c = ((0, this.#A[0])(t / r, n / r) + 1) / 2;
            if (c < s) return e;
            c = 1 / (1 - s) * (c - s);
            const d = 1 - c * a;
            let u = h.getColorRed(e),
                m = h.getColorGreen(e),
                E = h.getColorBlue(e);
            return u = Math.trunc(u * d) + i * (1 - d), m = Math.trunc(m * d) + o * (1 - d), E = Math.trunc(E * d) + l * (1 - d), h.setColor(e, u, m, E)
        }
        visualNoiseCombined(e, t, n, r, s = 0, a = 0, i = 0) {
            let o = 0;
            for (let e = 0; e < r.length; e++) {
                const {
                    factor: s,
                    threshold: a,
                    force: i
                } = r[e];
                let l = ((0, this.#A[e % this.#A.length])(t / s, n / s) + 1) / 2;
                l < a ? l = 0 : (l = 1 / (1 - a) * (l - a), l *= i, o += l)
            }
            o = Math.min(o, 1);
            const l = 1 - o;
            let c = h.getColorRed(e),
                d = h.getColorGreen(e),
                u = h.getColorBlue(e);
            return c = Math.trunc(c * l) + s * (1 - l), d = Math.trunc(d * l) + a * (1 - l), u = Math.trunc(u * l) + i * (1 - l), h.setColor(e, c, d, u)
        }
    }
    class R extends l {
        #c;
        #d;
        #u;
        #g;
        #p;
        constructor(e, t, n, r, s) {
            super(e), this.#g = t, this.#c = n, this.#d = r, this.#u = s, Array.isArray(t) ? this.#p = f.visualNoiseProvider(t.map((e => e.seed))) : this.#p = f.visualNoiseProvider(t.seed)
        }
        apply(e, t, r, s) {
            const a = this._retrieveElement(e, t, r, s),
                i = this.#g,
                o = this.#c,
                l = this.#d,
                h = this.#u;
            let c;
            if (Array.isArray(i)) c = this.#p.visualNoiseCombined(a.elementTail, e, t, i, o, l, h);
            else {
                const n = i.factor,
                    r = i.threshold,
                    s = i.force;
                c = this.#p.visualNoise(a.elementTail, e, t, n, r, s, o, l, h)
            }
            return new n(a.elementHead, c)
        }
    }
    class S extends a {
        #T;
        constructor(e) {
            super(), this.#T = e
        }
        apply(e, t, n, r) {
            return this.#T(e, t, n, r)
        }
    }
    class v extends a {
        static #f = function(e, t) {
            return !1
        };
        #C;
        #R = 0;
        #S = 0;
        constructor(e = v.#f) {
            super(), this.#C = e
        }
        apply(e, t, n, r) {
            return this.#S++, null !== r && this.#C(r.elementHead, r.elementTail) && this.#R++, null
        }
        getPositives() {
            return this.#R
        }
        getTotal() {
            return this.#S
        }
        reset() {
            this.#S = 0, this.#R = 0
        }
    }
    class w {
        static and(e, t) {
            return function(n, r) {
                return e(n, r) && t(n, r)
            }
        }
        static or(e, t) {
            return function(n, r) {
                return e(n, r) || t(n, r)
            }
        }
        static not(e) {
            return function(t, n) {
                return !e(t, n)
            }
        }
        static TRUE = function(e, t) {
            return !0
        };
        static IS_AIR = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_AIR
        };
        static IS_EFFECT = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_EFFECT
        };
        static IS_GAS = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_GAS
        };
        static IS_FLUID = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_FLUID
        };
        static IS_WATER = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_WATER && r.getTypeClass(e) === r.TYPE_FLUID
        };
        static IS_POWDER = function(e, t) {
            const n = r.getTypeClass(e);
            return n === r.TYPE_POWDER || n === r.TYPE_POWDER_FLOATING || n === r.TYPE_POWDER_WET
        };
        static IS_SAND = function(e, t) {
            return !!w.IS_POWDER(e, t) && (0 === r.getBehaviour(e) && 6 === r.getTypeModifierPowderMomentum(e))
        };
        static IS_SOIL = function(e, t) {
            if (w.IS_POWDER(e, t)) {
                return r.getBehaviour(e) === r.BEHAVIOUR_SOIL
            }
            return !1
        };
        static IS_GRAVEL = function(e, t) {
            return !!w.IS_POWDER(e, t) && (0 === r.getBehaviour(e) && 3 === r.getTypeModifierPowderMomentum(e))
        };
        static IS_STATIC = function(e, t) {
            return r.getTypeClass(e) === r.TYPE_STATIC
        };
        static IS_FISH = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_FISH
        };
        static IS_FISH_PART = function(e, t) {
            const n = r.getBehaviour(e);
            return n === r.BEHAVIOUR_FISH || n === r.BEHAVIOUR_FISH_BODY
        };
        static IS_BIOMASS = function(e, t) {
            const n = r.getBehaviour(e);
            return n === r.BEHAVIOUR_GRASS || n === r.BEHAVIOUR_TREE || n === r.BEHAVIOUR_TREE_LEAF || n === r.BEHAVIOUR_TREE_TRUNK || n === r.BEHAVIOUR_TREE_ROOT || n === r.BEHAVIOUR_FISH || n === r.BEHAVIOUR_FISH_BODY
        };
        static IS_TREE = function(e, t) {
            return r.getBehaviour(e) === r.BEHAVIOUR_TREE
        }
    }
    class O extends a {
        apply(e, t, s, a) {
            if (null === a) return null;
            const i = r.getHeatModIndex(a.elementHead);
            if (r.hmiToMeltingTemperature(i) < 1 << r.FIELD_TEMPERATURE_SIZE) {
                let e = a.elementHead;
                e = r.setHeatModIndex(e, r.hmiToMeltingHMI(i)), e = r.setType(e, r.TYPE_FLUID);
                let t = h.setBlurType(a.elementTail, h.BLUR_TYPE_1);
                return new n(e, t)
            }
            return a
        }
    }
    class I {
        static counting(e) {
            return new v(e)
        }
        static custom(e) {
            return new S(e)
        }
        static random(e) {
            let t;
            for (let r of e)
                if (r instanceof n) {
                    if (!0 === t) throw "Mixing Element and Brush instances";
                    t = !1
                } else {
                    if (!(r instanceof a)) throw "Element or Brush instances expected";
                    if (!1 === t) throw "Mixing Element and Brush instances";
                    t = !0
                } return t ? new i(e) : new o(e)
        }
        static color(e = 0, t = 0, n = 0, r = void 0) {
            return new c(e, t, n, r)
        }
        static colorTexture(e, t = void 0) {
            return new m(t, e)
        }
        static colorPalette(e, t = void 0) {
            return new d(t, e)
        }
        static colorNoise(e, t = void 0, n = void 0, r = void 0, s = void 0) {
            return new R(s, e, t, n, r)
        }
        static withIntensity(e, t) {
            return I.custom(((n, r, a, i) => (a || s.DEFAULT).next() < e ? t.apply(n, r, a, i) : null))
        }
        static gentle(e) {
            return I.conditional(w.IS_AIR, e)
        }
        static conditional(e, t) {
            return I.custom(((n, r, s, a) => null === a ? null : e(a.elementHead, a.elementTail) ? t.apply(n, r, s, a) : null))
        }
        static temperature(e) {
            return I.custom(((t, s, a, i) => {
                if (null === i) return null;
                const o = r.setTemperature(i.elementHead, 255 & e);
                return new n(o, i.elementTail)
            }))
        }
        static temperatureOrBrush(e, t) {
            return I.custom(((s, a, i, o) => {
                if (null === o) return t.apply(s, a, i, null);
                switch (r.getTypeClass(o.elementHead)) {
                    case r.TYPE_AIR:
                    case r.TYPE_EFFECT:
                        return t.apply(s, a, i, o);
                    case r.TYPE_POWDER:
                    case r.TYPE_POWDER_WET:
                    case r.TYPE_POWDER_FLOATING:
                    case r.TYPE_FLUID:
                    case r.TYPE_GAS:
                    case r.TYPE_STATIC:
                        const l = r.setTemperature(o.elementHead, 255 & e);
                        return new n(l, o.elementTail);
                    default:
                        return t.apply(s, a, i, null)
                }
            }))
        }
        static concat(e, t) {
            return I.custom(((n, r, s, a) => {
                const i = e.apply(n, r, s, a),
                    o = t.apply(n, r, s, null !== i ? i : a);
                return null !== o ? o : i
            }))
        }
        static join(e) {
            return I.custom(((t, n, r, s) => {
                let a = s;
                for (let s of e) {
                    const e = s.apply(t, n, r, a);
                    null !== e && (a = e)
                }
                return a
            }))
        }
        static molten() {
            return new O
        }
    }
    class y {
        getWidth() {
            throw "Not implemented"
        }
        getHeight() {
            throw "Not implemented"
        }
    }
    class b {
        static NOT_DEFINED = new b;
        #v;
        constructor(e = {}) {
            this.#v = e
        }
        derive(e) {
            const t = {};
            return Object.assign(t, this.#v), Object.assign(t, e), new b(t)
        }
        getCategory() {
            return this.#v.category
        }
        getDisplayName() {
            return this.#v.displayName
        }
        getCodeName() {
            return this.#v.codeName
        }
        getBadgeStyle() {
            return this.#v.badgeStyle
        }
    }
    class M {
        #v;
        constructor(e = b.NOT_DEFINED) {
            this.#v = e
        }
        getInfo() {
            return this.#v
        }
        hasCursor() {
            return !1
        }
        createCursor() {
            return null
        }
        isRepeatingEnabled() {
            return !1
        }
        applyPoint(e, t, n, r) {}
        isLineModeEnabled() {
            return !1
        }
        onDragStart(e, t, n, r) {}
        onDragEnd(e, t, n, r) {}
        applyStroke(e, t, n, r, s, a) {}
        isAreaModeEnabled() {
            return !1
        }
        applyArea(e, t, n, r, s, a) {}
        applySpecial(e, t, n, r) {}
        isSecondaryActionEnabled() {
            return !1
        }
        applySecondaryAction(e, t, n, r) {}
    }
    class H extends M {
        #w;
        #O;
        #I;
        constructor(e, t, n) {
            super(e), this.#w = t, this.#O = I.gentle(t), this.#I = n
        }
        getBrush() {
            return this.#w
        }
        isLineModeEnabled() {
            return !0
        }
        isAreaModeEnabled() {
            return !0
        }
        isRepeatingEnabled() {
            return !0
        }
        applyPoint(e, t, n, r) {
            this.applyStroke(e, t, e, t, n, r)
        }
        applyStroke(e, t, n, r, s, a) {
            const i = a ? this.#O : this.#w;
            s.drawLine(e, t, n, r, this.#I, i, !0)
        }
        applyArea(e, t, n, r, s, a) {
            const i = a ? this.#O : this.#w;
            s.drawRectangle(e, t, n, r, i)
        }
        applySpecial(e, t, n, r) {
            const s = r ? this.#O : this.#w;
            n.floodFill(e, t, s, 1)
        }
    }
    class N extends M {
        #w;
        constructor(e, t) {
            super(e), this.#w = t
        }
        applyPoint(e, t, n, r) {
            n.draw(e, t, this.#w)
        }
    }
    class D extends M {
        #y;
        #b;
        constructor(e, t, n) {
            super(e), this.#y = t, this.#b = n
        }
        applyPoint(e, t, n, r) {
            n.draw(e, t, this.#y), n.draw(e + 1, t, this.#b)
        }
    }
    var U = [{
            entriesCount: 310,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [-1, 17, 1],
                [0, 18, 1],
                [1, 18, 1],
                [2, 18, 1],
                [3, 19, 1],
                [4, 20, 1],
                [5, 21, 2],
                [0, 19, 1],
                [0, 20, 1],
                [0, 21, 1],
                [0, 22, 1],
                [0, 23, 1],
                [-1, 23, 1],
                [-2, 23, 1],
                [-3, 24, 1],
                [-4, 25, 1],
                [-5, 25, 1],
                [-6, 25, 1],
                [-7, 25, 2],
                [0, 24, 1],
                [1, 25, 1],
                [1, 26, 1],
                [1, 27, 1],
                [2, 28, 1],
                [3, 29, 1],
                [4, 30, 1],
                [5, 30, 2],
                [0, 28, 1],
                [0, 29, 1],
                [-1, 30, 1, [
                    [-2, 31, 1],
                    [-3, 31, 1],
                    [-4, 31, 2],
                    [-2, 32, 1],
                    [-1, 33, 1],
                    [-1, 34, 1],
                    [0, 35, 1],
                    [0, 36, 2]
                ]],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [2, 19, 1],
                [1, 19, 1],
                [1, 20, 1],
                [1, 21, 1],
                [1, 22, 1],
                [1, 23, 1],
                [1, 24, 1],
                [2, 25, 1],
                [2, 26, 1],
                [2, 27, 1],
                [1, 28, 1],
                [1, 29, 1],
                [1, 30, 1],
                [1, 31, 1],
                [2, 32, 1],
                [2, 33, 1],
                [2, 34, 1],
                [3, 34, 1],
                [3, 35, 1],
                [4, 35, 1],
                [5, 35, 1],
                [6, 36, 1, [
                    [7, 36, 1],
                    [8, 37, 1],
                    [8, 38, 2],
                    [9, 38, 1],
                    [10, 39, 1],
                    [11, 39, 1],
                    [12, 40, 1],
                    [13, 40, 1],
                    [14, 40, 1],
                    [15, 40, 1],
                    [16, 40, 2]
                ]],
                [3, 36, 1],
                [3, 37, 1],
                [4, 38, 1],
                [5, 39, 1, [
                    [6, 40, 1],
                    [6, 41, 1],
                    [6, 42, 1],
                    [7, 43, 1],
                    [8, 44, 2]
                ]],
                [2, 38, 1, [
                    [1, 39, 1],
                    [0, 39, 1],
                    [-1, 40, 1],
                    [-2, 40, 1],
                    [-2, 41, 2],
                    [-3, 41, 1],
                    [-4, 41, 1],
                    [-5, 42, 1],
                    [-6, 42, 1],
                    [-7, 43, 1],
                    [-8, 43, 1],
                    [-9, 43, 2]
                ]],
                [3, 20, 1],
                [4, 21, 1],
                [5, 21, 2],
                [5, 22, 1],
                [6, 23, 1],
                [7, 24, 1],
                [8, 25, 1],
                [8, 26, 2],
                [9, 26, 1, []],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [-1, 16, 1],
                [-1, 24, 1],
                [-2, 25, 1],
                [-3, 26, 1],
                [-4, 27, 1],
                [-5, 27, 1],
                [-6, 28, 1],
                [-7, 29, 1],
                [-8, 30, 1],
                [-9, 31, 1],
                [-10, 31, 1, [
                    [-9, 32, 1],
                    [-9, 33, 1],
                    [-9, 34, 1],
                    [-9, 35, 1],
                    [-8, 36, 1],
                    [-7, 36, 1],
                    [-6, 36, 1],
                    [-5, 37, 2],
                    [-8, 37, 1],
                    [-7, 38, 1],
                    [-7, 39, 1],
                    [-6, 40, 1],
                    [-6, 41, 1],
                    [-9, 38, 1],
                    [-10, 38, 2]
                ]],
                [9, 27, 1],
                [10, 28, 1],
                [11, 29, 1],
                [12, 30, 1],
                [13, 31, 1],
                [13, 32, 1],
                [14, 33, 2],
                [10, 30, 1],
                [10, 31, 1],
                [9, 32, 1],
                [8, 33, 2],
                [12, 41, 1],
                [12, 42, 1],
                [13, 43, 1],
                [13, 44, 1],
                [13, 45, 1],
                [14, 46, 2],
                [-6, 43, 1],
                [-5, 44, 1],
                [-4, 44, 1],
                [-3, 45, 1],
                [-2, 46, 1],
                [-1, 46, 1],
                [0, 47, 1],
                [1, 48, 1],
                [2, 48, 1],
                [3, 48, 2],
                [-3, 47, 2],
                [-2, -1, 4],
                [-2, 0, 1],
                [-2, 1, 1],
                [-2, 2, 1],
                [-2, 3, 1],
                [-2, 4, 1],
                [-2, 5, 1],
                [-2, 6, 1],
                [-2, 7, 1],
                [-2, 8, 1],
                [-2, 9, 1],
                [-2, 10, 1],
                [-2, 11, 1],
                [-2, 12, 1],
                [-2, 13, 1],
                [-2, 14, 1],
                [-2, 15, 1],
                [-2, 16, 1],
                [-2, 17, 1],
                [-1, 18, 1],
                [-1, 19, 1],
                [-1, 20, 1],
                [-1, 21, 1],
                [-1, 22, 1],
                [-2, 24, 1],
                [-3, 25, 1],
                [-4, 26, 1],
                [-5, 26, 1],
                [-6, 27, 1],
                [-7, 28, 1],
                [-8, 29, 1],
                [-9, 30, 1],
                [-10, 30, 2],
                [-10, 31, 1, [
                    [-11, 32, 1],
                    [-12, 32, 1],
                    [-13, 33, 1],
                    [-14, 34, 1],
                    [-15, 35, 1],
                    [-16, 35, 1],
                    [-17, 35, 2],
                    [-14, 36, 1],
                    [-14, 37, 1],
                    [-14, 38, 1],
                    [-14, 39, 1],
                    [-15, 40, 1],
                    [-15, 41, 1],
                    [-16, 41, 2],
                    [-15, 42, 1],
                    [-15, 43, 1, [
                        [-16, 44, 1],
                        [-16, 45, 1],
                        [-15, 45, 1],
                        [-14, 46, 1],
                        [-13, 46, 1],
                        [-12, 47, 1],
                        [-12, 48, 2],
                        [-11, 48, 1],
                        [-10, 49, 1],
                        [-9, 49, 1],
                        [-8, 50, 1],
                        [-7, 51, 1],
                        [-6, 52, 2],
                        [-16, 46, 1],
                        [-16, 47, 1],
                        [-17, 48, 1],
                        [-17, 49, 1],
                        [-18, 50, 2]
                    ]]
                ]],
                [4, 39, 1],
                [4, 40, 1],
                [4, 41, 1],
                [4, 42, 1],
                [3, 42, 1],
                [4, 43, 1],
                [5, 44, 1],
                [5, 45, 1],
                [5, 46, 1],
                [6, 47, 1],
                [7, 48, 1],
                [8, 49, 1],
                [8, 50, 2],
                [5, 48, 1, [
                    [4, 49, 1],
                    [3, 50, 1],
                    [2, 51, 1],
                    [1, 52, 1],
                    [1, 53, 1],
                    [0, 53, 2],
                    [0, 54, 1],
                    [0, 55, 1],
                    [0, 56, 1],
                    [1, 57, 1],
                    [2, 57, 1],
                    [3, 57, 1],
                    [4, 58, 2],
                    [-1, 57, 1],
                    [-2, 57, 1],
                    [-3, 58, 1],
                    [-4, 59, 2]
                ]],
                [2, 43, 2]
            ]
        }, {
            entriesCount: 319,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [0, 18, 1],
                [-1, 18, 1],
                [-2, 18, 1],
                [-3, 19, 1],
                [-4, 20, 1],
                [-5, 21, 2],
                [0, 19, 1],
                [0, 20, 1],
                [0, 21, 1],
                [0, 22, 1],
                [0, 23, 1],
                [1, 23, 1],
                [2, 23, 1],
                [3, 24, 1],
                [4, 25, 1],
                [5, 25, 1],
                [6, 25, 1],
                [7, 25, 2],
                [0, 24, 1],
                [-1, 25, 1],
                [-1, 26, 1],
                [-1, 27, 1],
                [0, 28, 1],
                [0, 29, 1],
                [1, 30, 1, [
                    [2, 31, 1],
                    [3, 31, 1],
                    [4, 31, 2],
                    [2, 32, 1],
                    [1, 33, 1],
                    [1, 34, 1],
                    [0, 35, 1],
                    [0, 36, 2]
                ]],
                [-2, 28, 1],
                [-3, 29, 1],
                [-4, 30, 1],
                [-5, 30, 2],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [-1, 16, 1],
                [-1, 17, 1],
                [-1, 19, 1],
                [-2, 19, 1],
                [-1, 20, 1],
                [-1, 21, 1],
                [-1, 22, 1],
                [-1, 23, 1],
                [-1, 24, 1],
                [-2, 25, 1],
                [-2, 26, 1],
                [-2, 27, 1],
                [-1, 28, 1],
                [-1, 29, 1],
                [-1, 30, 1],
                [-1, 31, 1],
                [-2, 32, 1],
                [-2, 33, 1],
                [-2, 34, 1],
                [-3, 34, 1],
                [-3, 35, 1],
                [-4, 35, 1],
                [-5, 35, 1],
                [-6, 36, 1, [
                    [-7, 36, 1],
                    [-8, 37, 1],
                    [-9, 38, 1],
                    [-9, 39, 2],
                    [-10, 39, 1],
                    [-11, 39, 1],
                    [-12, 40, 1],
                    [-13, 40, 1],
                    [-14, 40, 1],
                    [-15, 40, 1],
                    [-16, 40, 2]
                ]],
                [-3, 36, 1],
                [-3, 37, 1],
                [-2, 38, 1, [
                    [-1, 39, 1],
                    [0, 39, 1],
                    [1, 40, 1],
                    [2, 40, 1],
                    [3, 41, 1],
                    [4, 41, 1],
                    [5, 42, 1],
                    [6, 42, 1],
                    [7, 43, 1],
                    [8, 43, 1],
                    [9, 44, 2],
                    [3, 42, 2],
                    [-2, 40, 2]
                ]],
                [-4, 38, 1],
                [-5, 39, 1, [
                    [-6, 40, 1],
                    [-6, 41, 1],
                    [-6, 42, 1],
                    [-7, 43, 1],
                    [-7, 44, 2]
                ]],
                [-3, 20, 1],
                [-4, 21, 1],
                [-5, 21, 2],
                [-5, 22, 1],
                [-6, 23, 1],
                [-7, 24, 1],
                [-8, 25, 1],
                [-8, 26, 2],
                [-9, 26, 1, []],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [1, 18, 1],
                [1, 19, 1],
                [1, 24, 1],
                [2, 25, 1],
                [3, 26, 1],
                [4, 27, 1],
                [5, 27, 1],
                [6, 28, 1],
                [7, 29, 1],
                [8, 30, 1],
                [9, 31, 1],
                [9, 32, 1],
                [9, 33, 1],
                [9, 34, 1],
                [8, 34, 2],
                [9, 35, 1],
                [8, 36, 1],
                [7, 36, 1],
                [6, 36, 1],
                [5, 37, 2],
                [8, 37, 1],
                [9, 38, 1],
                [7, 38, 1],
                [7, 39, 1],
                [6, 40, 1],
                [6, 41, 1],
                [-9, 27, 1],
                [-10, 28, 1],
                [-11, 29, 1],
                [-12, 30, 1],
                [-13, 31, 1],
                [-13, 32, 1],
                [-14, 33, 2],
                [-12, 41, 1],
                [-12, 42, 1],
                [-13, 43, 1],
                [-13, 44, 1],
                [-13, 45, 1],
                [-14, 46, 2],
                [6, 43, 1],
                [5, 44, 1],
                [4, 44, 1],
                [3, 45, 1],
                [2, 45, 1],
                [1, 45, 1],
                [0, 45, 2],
                [1, 46, 1],
                [0, 47, 1],
                [-1, 48, 1],
                [-2, 48, 1],
                [-3, 48, 2],
                [4, 46, 1],
                [5, 47, 2],
                [2, -1, 4],
                [2, 0, 1],
                [2, 1, 1],
                [2, 2, 1],
                [2, 3, 1],
                [2, 4, 1],
                [2, 5, 1],
                [2, 6, 1],
                [2, 7, 1],
                [2, 8, 1],
                [2, 9, 1],
                [2, 10, 1],
                [2, 11, 1],
                [2, 12, 1],
                [2, 13, 1],
                [2, 14, 1],
                [2, 15, 1],
                [2, 16, 1],
                [2, 17, 1],
                [2, 18, 1],
                [2, 19, 1],
                [2, 20, 1],
                [1, 20, 1],
                [1, 21, 1],
                [1, 22, 1],
                [2, 24, 1],
                [3, 25, 1],
                [4, 26, 1],
                [5, 26, 1],
                [6, 27, 1],
                [7, 28, 1],
                [8, 29, 1],
                [9, 30, 1],
                [10, 30, 2],
                [10, 31, 1],
                [11, 32, 1],
                [12, 33, 1],
                [13, 34, 1],
                [14, 35, 1],
                [15, 35, 1],
                [16, 35, 2],
                [14, 36, 1],
                [14, 37, 1],
                [14, 38, 1],
                [14, 39, 1],
                [15, 40, 1],
                [15, 41, 1],
                [16, 41, 2],
                [8, 38, 1],
                [9, 39, 1],
                [10, 40, 1],
                [11, 40, 1],
                [12, 41, 1],
                [12, 42, 1],
                [13, 43, 1],
                [14, 44, 1],
                [15, 45, 1],
                [16, 46, 1],
                [16, 47, 1],
                [17, 48, 1],
                [17, 49, 1],
                [18, 50, 2],
                [14, 46, 1],
                [13, 46, 1],
                [12, 47, 1],
                [12, 48, 2],
                [11, 48, 1],
                [10, 49, 1],
                [9, 49, 1],
                [8, 50, 1],
                [7, 51, 1],
                [6, 52, 2],
                [-4, 39, 1],
                [-5, 39, 1, [
                    [-4, 40, 1],
                    [-4, 41, 1],
                    [-4, 42, 1],
                    [-4, 43, 1],
                    [-5, 44, 1],
                    [-5, 45, 1],
                    [-5, 46, 1],
                    [-6, 47, 1],
                    [-6, 48, 1],
                    [-6, 49, 1],
                    [-6, 50, 1],
                    [-7, 50, 2],
                    [-6, 51, 1],
                    [-7, 52, 1],
                    [-8, 52, 1],
                    [-9, 53, 1],
                    [-9, 54, 1],
                    [-10, 55, 2]
                ]],
                [-2, 49, 1],
                [-2, 50, 1],
                [-2, 51, 1],
                [-2, 52, 1],
                [-1, 53, 1],
                [-1, 54, 1],
                [0, 54, 2],
                [-1, 55, 1],
                [0, 56, 1],
                [1, 56, 1],
                [2, 57, 1],
                [3, 58, 2],
                [-2, 56, 1],
                [-3, 56, 1],
                [-4, 56, 1],
                [-5, 57, 2]
            ]
        }, {
            entriesCount: 269,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [0, 18, 1],
                [0, 19, 1],
                [0, 20, 1, [
                    [-1, 20, 1],
                    [0, 21, 1],
                    [1, 21, 1],
                    [2, 22, 1],
                    [2, 23, 1],
                    [3, 24, 1],
                    [3, 25, 1],
                    [2, 25, 2],
                    [4, 26, 1],
                    [5, 27, 1],
                    [6, 28, 1],
                    [7, 28, 1],
                    [8, 29, 1],
                    [9, 30, 1],
                    [10, 31, 1],
                    [11, 32, 2],
                    [3, 27, 1],
                    [3, 28, 1],
                    [3, 29, 1],
                    [2, 30, 1],
                    [1, 31, 1],
                    [0, 31, 2],
                    [0, 22, 1],
                    [0, 23, 1],
                    [-1, 24, 1],
                    [-2, 25, 1],
                    [-2, 26, 1],
                    [-3, 27, 1],
                    [-4, 28, 1],
                    [-5, 29, 1],
                    [-6, 29, 2],
                    [-5, 30, 1],
                    [-6, 31, 1],
                    [-7, 31, 1],
                    [-8, 31, 1],
                    [-9, 32, 1],
                    [-10, 32, 1],
                    [-11, 33, 2],
                    [-2, 21, 1],
                    [-3, 22, 1],
                    [-4, 23, 1],
                    [-5, 23, 2]
                ]],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [1, 18, 1],
                [1, 19, 1],
                [1, 20, 1],
                [0, 20, 1, [
                    [-1, 21, 1],
                    [-1, 22, 1],
                    [-1, 23, 1]
                ]],
                [-1, 25, 1],
                [-1, 26, 1],
                [-1, 27, 1],
                [-2, 27, 1],
                [-3, 28, 1],
                [-4, 29, 1],
                [0, 28, 1, [
                    [1, 29, 1],
                    [1, 30, 1],
                    [2, 31, 1],
                    [3, 32, 1],
                    [3, 33, 1],
                    [3, 34, 1],
                    [4, 35, 1],
                    [4, 36, 1],
                    [4, 37, 1],
                    [3, 37, 2],
                    [0, 31, 2]
                ]],
                [-5, 31, 1],
                [-5, 32, 1],
                [-5, 33, 1],
                [-6, 34, 1, [
                    [-7, 35, 1],
                    [-8, 36, 1],
                    [-8, 37, 2],
                    [-9, 37, 1],
                    [-10, 38, 1],
                    [-10, 39, 1],
                    [-11, 40, 1],
                    [-12, 41, 1],
                    [-11, 42, 2]
                ]],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [-1, 16, 1],
                [-1, 17, 1],
                [-1, 18, 1],
                [-1, 19, 1],
                [0, 20, 1, []],
                [2, 21, 1],
                [3, 22, 1],
                [3, 23, 1],
                [4, 24, 1],
                [4, 25, 1],
                [5, 26, 1],
                [6, 27, 1],
                [6, 29, 1],
                [6, 30, 1],
                [7, 31, 1],
                [7, 32, 1],
                [7, 33, 1],
                [8, 34, 1],
                [8, 35, 1],
                [8, 36, 1],
                [8, 37, 1],
                [9, 37, 2],
                [8, 38, 1],
                [8, 39, 1],
                [9, 40, 1],
                [9, 41, 1],
                [9, 42, 1],
                [10, 43, 2],
                [-4, 34, 1],
                [-4, 35, 1],
                [-4, 36, 1],
                [-4, 37, 1],
                [-3, 38, 1],
                [-2, 38, 2],
                [-3, 39, 1],
                [-3, 40, 1],
                [-3, 41, 1],
                [-3, 42, 1],
                [-2, 42, 1],
                [-1, 42, 1],
                [0, 43, 1],
                [1, 43, 1],
                [2, 43, 1],
                [3, 44, 2],
                [-3, 43, 1],
                [-4, 44, 2],
                [2, -1, 4],
                [2, 0, 1],
                [2, 1, 1],
                [2, 2, 1],
                [2, 3, 1],
                [2, 4, 1],
                [-2, 5, 1],
                [-2, 6, 1],
                [-2, 7, 1],
                [-2, 8, 1],
                [-2, 9, 1],
                [-2, 10, 1],
                [-2, 11, 1],
                [-2, 12, 1],
                [2, 13, 1],
                [2, 14, 1],
                [2, 15, 1],
                [2, 16, 1],
                [2, 17, 1],
                [2, 18, 1],
                [2, 19, 1],
                [2, 20, 1],
                [-5, 27, 1],
                [-6, 27, 1],
                [-7, 28, 1],
                [-8, 28, 1],
                [-9, 29, 1],
                [-10, 29, 1],
                [-11, 29, 1],
                [-12, 29, 1],
                [-13, 29, 1],
                [-14, 29, 2],
                [-14, 30, 1],
                [-15, 31, 1],
                [-15, 32, 1],
                [-16, 33, 1],
                [-16, 34, 1],
                [-17, 35, 1],
                [-17, 36, 1],
                [-18, 37, 2],
                [-6, 29, 2],
                [9, 34, 1],
                [10, 35, 1],
                [11, 35, 1],
                [12, 36, 1],
                [13, 37, 1],
                [14, 37, 1],
                [15, 38, 1],
                [16, 38, 1],
                [17, 38, 2],
                [-5, 38, 1],
                [-6, 39, 1],
                [-6, 40, 1],
                [-7, 41, 1],
                [-7, 42, 1],
                [-8, 43, 1],
                [-8, 44, 1],
                [-9, 45, 1],
                [-9, 46, 1],
                [-8, 47, 2],
                [-10, 47, 1],
                [-10, 48, 1],
                [-11, 49, 1],
                [-11, 50, 1],
                [-12, 51, 2],
                [7, 39, 1],
                [7, 40, 1],
                [6, 41, 1],
                [6, 42, 1],
                [6, 43, 1],
                [6, 44, 1],
                [5, 45, 1],
                [5, 46, 1],
                [5, 47, 1],
                [4, 47, 1],
                [5, 48, 1],
                [5, 49, 1],
                [4, 50, 1],
                [3, 51, 2],
                [3, 48, 1],
                [2, 48, 1],
                [1, 48, 1],
                [0, 48, 1],
                [-1, 49, 1],
                [-2, 49, 1],
                [-3, 49, 2]
            ]
        }, {
            entriesCount: 268,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [0, 18, 1],
                [0, 19, 1],
                [0, 20, 1, [
                    [1, 20, 1],
                    [2, 21, 1],
                    [3, 22, 1],
                    [4, 23, 1],
                    [5, 23, 2],
                    [0, 21, 1],
                    [-1, 21, 1],
                    [0, 22, 1],
                    [0, 23, 1],
                    [1, 24, 1],
                    [2, 25, 1],
                    [2, 26, 1],
                    [3, 27, 1],
                    [4, 28, 1],
                    [5, 29, 1],
                    [6, 29, 2],
                    [5, 30, 1],
                    [6, 31, 1],
                    [7, 31, 1],
                    [8, 31, 1],
                    [9, 32, 1],
                    [10, 32, 1],
                    [11, 33, 2],
                    [-2, 22, 1],
                    [-2, 23, 1],
                    [-3, 24, 1],
                    [-3, 25, 1],
                    [-2, 25, 2],
                    [-4, 26, 1],
                    [-3, 27, 1],
                    [-3, 28, 1],
                    [-3, 29, 1],
                    [-2, 30, 1],
                    [-1, 31, 1],
                    [0, 31, 2],
                    [-5, 27, 1],
                    [-6, 28, 1],
                    [-7, 28, 1],
                    [-8, 29, 1],
                    [-9, 30, 1],
                    [-10, 31, 1],
                    [-11, 31, 1],
                    [-12, 31, 1],
                    [-13, 31, 2]
                ]],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [-1, 16, 1],
                [-1, 17, 1],
                [-1, 18, 1],
                [-1, 19, 1],
                [-1, 20, 1],
                [0, 20, 1, [
                    [1, 21, 1],
                    [1, 22, 1],
                    [1, 23, 1]
                ]],
                [1, 25, 1],
                [1, 26, 1],
                [2, 27, 1],
                [3, 28, 1],
                [4, 29, 1],
                [4, 30, 1],
                [5, 31, 1],
                [5, 32, 1],
                [5, 33, 1],
                [6, 34, 1, [
                    [7, 35, 1],
                    [8, 36, 1],
                    [8, 37, 2],
                    [9, 37, 1],
                    [10, 38, 1],
                    [10, 39, 1],
                    [11, 40, 1],
                    [12, 41, 2]
                ]],
                [-4, 27, 1],
                [-4, 28, 1],
                [-4, 29, 1],
                [-4, 30, 1],
                [-4, 31, 1],
                [-3, 32, 1],
                [-3, 33, 1],
                [-3, 34, 1],
                [-3, 35, 1],
                [-3, 36, 1],
                [-3, 37, 2],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [1, 18, 1],
                [1, 19, 1],
                [0, 20, 1, []],
                [-2, 21, 1],
                [-3, 22, 1],
                [-3, 23, 1],
                [-4, 24, 1],
                [-4, 25, 1],
                [-5, 26, 1],
                [-6, 27, 1],
                [-6, 29, 1],
                [-6, 30, 1],
                [-7, 31, 1],
                [-7, 32, 1],
                [-7, 33, 1],
                [-8, 34, 1],
                [-8, 35, 1],
                [-8, 36, 1],
                [-8, 37, 1],
                [-9, 37, 2],
                [-8, 38, 1],
                [-8, 39, 1],
                [-9, 40, 1],
                [-9, 41, 1],
                [-9, 42, 1],
                [-10, 43, 2],
                [4, 34, 1],
                [4, 35, 1],
                [4, 36, 1],
                [4, 37, 1],
                [3, 38, 1],
                [2, 38, 2],
                [3, 39, 1],
                [3, 40, 1],
                [3, 41, 1],
                [3, 42, 1],
                [2, 42, 1],
                [1, 42, 1],
                [0, 43, 1],
                [-1, 43, 1],
                [-2, 43, 1],
                [-3, 44, 2],
                [3, 43, 1],
                [4, 44, 2],
                [-2, -1, 4],
                [-2, 0, 1],
                [-2, 1, 1],
                [-2, 2, 1],
                [-2, 3, 1],
                [-2, 4, 1],
                [-2, 5, 1],
                [-2, 6, 1],
                [-2, 7, 1],
                [-2, 8, 1],
                [-2, 9, 1],
                [-2, 10, 1],
                [-2, 11, 1],
                [-2, 12, 1],
                [-2, 13, 1],
                [-2, 14, 1],
                [-2, 15, 1],
                [-2, 16, 1],
                [-2, 17, 1],
                [-2, 18, 1],
                [-2, 19, 1],
                [-2, 20, 1],
                [6, 25, 1],
                [5, 25, 1],
                [4, 25, 1],
                [3, 25, 1],
                [7, 26, 1],
                [8, 26, 1],
                [9, 27, 1],
                [10, 27, 1],
                [11, 27, 2],
                [11, 28, 1],
                [12, 28, 1],
                [13, 29, 1],
                [14, 30, 1],
                [15, 31, 1],
                [16, 31, 2],
                [15, 32, 1],
                [16, 33, 1],
                [16, 34, 1],
                [17, 35, 1],
                [17, 36, 1],
                [17, 37, 2],
                [-9, 34, 1],
                [-10, 35, 1],
                [-11, 35, 1],
                [-12, 36, 1],
                [-13, 37, 1],
                [-14, 37, 1],
                [-15, 38, 1],
                [-16, 39, 2],
                [5, 38, 1],
                [6, 39, 1],
                [6, 40, 1],
                [7, 41, 1],
                [7, 42, 1],
                [8, 43, 1],
                [8, 44, 1],
                [9, 45, 1],
                [9, 46, 1],
                [10, 47, 1],
                [10, 48, 1],
                [11, 49, 1],
                [11, 50, 1],
                [12, 51, 2],
                [8, 47, 2],
                [-7, 39, 1],
                [-7, 40, 1],
                [-6, 41, 1],
                [-6, 42, 1],
                [-6, 43, 1],
                [-6, 44, 1],
                [-5, 45, 1],
                [-5, 46, 1],
                [-5, 47, 1],
                [-5, 48, 1],
                [-4, 49, 1],
                [-3, 49, 1],
                [-2, 49, 1],
                [-1, 49, 1],
                [0, 49, 1],
                [1, 49, 1],
                [2, 49, 2],
                [-4, 50, 1],
                [-5, 51, 2]
            ]
        }, {
            entriesCount: 169,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [0, 18, 1],
                [0, 19, 1],
                [0, 20, 1, [
                    [-1, 20, 1],
                    [0, 21, 1],
                    [1, 21, 1],
                    [2, 22, 1],
                    [2, 23, 1],
                    [3, 24, 1],
                    [3, 25, 1],
                    [3, 26, 1],
                    [4, 27, 1],
                    [4, 28, 1],
                    [4, 29, 2],
                    [0, 22, 1],
                    [0, 23, 1],
                    [0, 24, 2],
                    [-2, 21, 1],
                    [-3, 22, 1],
                    [-4, 23, 1],
                    [-4, 24, 1],
                    [-5, 25, 1],
                    [-6, 26, 2]
                ]],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [1, 18, 1],
                [1, 19, 1],
                [1, 20, 1],
                [0, 20, 1, [
                    [-1, 21, 1],
                    [-1, 22, 1],
                    [-1, 23, 1],
                    [-1, 24, 1],
                    [0, 24, 2],
                    [-2, 25, 1],
                    [-2, 26, 1],
                    [-2, 27, 1],
                    [-2, 28, 1],
                    [-3, 29, 1],
                    [-4, 30, 1],
                    [-5, 30, 1],
                    [-4, 31, 1],
                    [-4, 32, 1],
                    [-3, 33, 1],
                    [-2, 34, 1],
                    [-2, 35, 1],
                    [-1, 36, 1],
                    [0, 36, 1],
                    [1, 36, 2],
                    [-5, 33, 2],
                    [-6, 31, 1],
                    [-7, 31, 1],
                    [-8, 31, 1],
                    [-9, 31, 1],
                    [-10, 31, 2]
                ]],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [-1, 16, 1],
                [-1, 17, 1],
                [-1, 18, 1],
                [-1, 19, 1],
                [0, 20, 1, []],
                [-5, 24, 1],
                [-6, 24, 1],
                [-7, 24, 1],
                [-8, 24, 1],
                [-9, 24, 1],
                [-10, 24, 1],
                [-11, 24, 2],
                [6, 25, 1],
                [5, 25, 1],
                [4, 25, 1],
                [7, 26, 1],
                [8, 26, 1],
                [9, 26, 2],
                [-1, 25, 1],
                [-1, 26, 1],
                [-1, 27, 1],
                [-1, 28, 1],
                [0, 28, 1],
                [1, 29, 1],
                [2, 30, 1],
                [3, 31, 1],
                [4, 32, 1],
                [5, 32, 1],
                [6, 33, 1],
                [7, 33, 1],
                [8, 34, 1],
                [9, 34, 2],
                [5, 34, 1],
                [5, 35, 1],
                [5, 36, 1],
                [5, 37, 1],
                [5, 38, 1],
                [6, 39, 2],
                [-1, 29, 1],
                [-1, 30, 1],
                [-1, 31, 1],
                [-1, 32, 1],
                [-1, 33, 1],
                [-1, 34, 1],
                [-1, 35, 1],
                [-3, 35, 1],
                [-4, 36, 1],
                [-5, 37, 1],
                [-6, 38, 1],
                [-7, 39, 2],
                [-1, 37, 1],
                [-1, 38, 1],
                [-1, 39, 1],
                [-1, 40, 1],
                [-2, 40, 1],
                [-1, 41, 1],
                [-1, 42, 2],
                [-3, 41, 1],
                [-4, 42, 1],
                [-5, 42, 1],
                [-6, 43, 1],
                [-7, 43, 2]
            ]
        }, {
            entriesCount: 73,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [-1, 14, 1, [
                    [-2, 14, 1],
                    [-3, 14, 1],
                    [-4, 15, 1],
                    [-5, 16, 2],
                    [0, 15, 1],
                    [0, 16, 1],
                    [0, 17, 1],
                    [0, 18, 1],
                    [1, 18, 1, [
                        [2, 18, 1],
                        [3, 19, 1],
                        [4, 20, 1],
                        [5, 20, 2],
                        [0, 19, 1],
                        [-1, 20, 1],
                        [-1, 21, 1],
                        [-1, 22, 1],
                        [0, 23, 1],
                        [0, 24, 1],
                        [1, 25, 1],
                        [2, 26, 1],
                        [3, 26, 1],
                        [4, 26, 2],
                        [-1, 25, 1],
                        [-1, 26, 1],
                        [-1, 27, 1],
                        [-1, 28, 1],
                        [0, 29, 1],
                        [0, 30, 1],
                        [0, 31, 2],
                        [-2, 23, 1],
                        [-3, 24, 1],
                        [-4, 25, 1],
                        [-5, 25, 2]
                    ]]
                ]],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [1, 5, 1],
                [1, 6, 1],
                [1, 7, 1],
                [1, 8, 1],
                [1, 9, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [1, 18, 1, []],
                [0, 20, 1],
                [0, 21, 1],
                [0, 22, 1]
            ]
        }, {
            entriesCount: 60,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [0, 8, 1],
                [0, 9, 1],
                [0, 10, 1],
                [0, 11, 1],
                [0, 12, 1],
                [0, 13, 1],
                [0, 14, 1],
                [0, 15, 1],
                [-1, 15, 1],
                [0, 16, 1],
                [0, 17, 1],
                [1, 18, 1],
                [2, 19, 1],
                [3, 20, 1],
                [4, 20, 2],
                [1, 20, 1],
                [0, 21, 1],
                [0, 22, 1],
                [-1, 22, 1],
                [-2, 23, 1],
                [-3, 24, 2],
                [1, 23, 1],
                [2, 24, 1],
                [2, 25, 1],
                [3, 26, 2],
                [-2, 16, 1],
                [-3, 17, 1],
                [-3, 18, 1],
                [-3, 19, 2],
                [1, -1, 4],
                [1, 0, 1],
                [1, 1, 1],
                [1, 2, 1],
                [1, 3, 1],
                [1, 4, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [1, 10, 1],
                [1, 11, 1],
                [1, 12, 1],
                [1, 13, 1],
                [1, 14, 1],
                [1, 15, 1],
                [1, 16, 1],
                [1, 17, 1],
                [0, 18, 1],
                [1, 19, 1]
            ]
        }, {
            entriesCount: 55,
            entries: [
                [0, -1, 4],
                [0, 1, 1],
                [0, 2, 1],
                [0, 3, 1],
                [0, 4, 1],
                [0, 5, 1],
                [0, 6, 1],
                [0, 7, 1],
                [-1, 7, 1],
                [-1, 8, 1],
                [-1, 9, 1],
                [-1, 10, 1],
                [-1, 11, 1],
                [-1, 12, 1],
                [-1, 13, 1],
                [-1, 14, 1],
                [-1, 15, 1],
                [0, 15, 1, [
                    [1, 16, 1],
                    [2, 17, 1],
                    [3, 18, 2],
                    [-1, 16, 1],
                    [-1, 17, 1],
                    [-1, 18, 1],
                    [-1, 19, 1],
                    [-1, 20, 1],
                    [-1, 21, 1],
                    [-1, 22, 1],
                    [0, 23, 1],
                    [1, 24, 1],
                    [2, 25, 2],
                    [-2, 23, 1],
                    [-3, 24, 1],
                    [-4, 25, 2]
                ]],
                [-2, 15, 1, [
                    [-3, 16, 1],
                    [-4, 17, 1],
                    [-5, 18, 2]
                ]],
                [-1, -1, 4],
                [-1, 0, 1],
                [-1, 1, 1],
                [-1, 2, 1],
                [-1, 3, 1],
                [-1, 4, 1],
                [-1, 5, 1],
                [-1, 6, 1],
                [-2, 7, 1],
                [-2, 8, 1],
                [-2, 9, 1],
                [-2, 10, 1],
                [-2, 11, 1],
                [-2, 12, 1],
                [-2, 13, 1],
                [-2, 14, 1],
                [-2, 15, 1, []]
            ]
        }],
        x = [{
            entriesCount: 49,
            entries: [
                [1, 0, 3, [
                    [2, 0, 3],
                    [1, -1, 3],
                    [2, -1, 3],
                    [3, 0, 3],
                    [2, 1, 3],
                    [3, -1, 3],
                    [3, 1, 3],
                    [4, 0, 3],
                    [3, -2, 3],
                    [3, 2, 3],
                    [4, 1, 3],
                    [4, -2, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-3, 0, 3],
                    [-2, 1, 3],
                    [-2, -1, 3],
                    [-3, 1, 3],
                    [-3, -1, 3],
                    [-4, 0, 3],
                    [-2, 2, 3],
                    [-3, 2, 3],
                    [-2, 3, 3]
                ]],
                [0, -1, 3, [
                    [-1, -1, 3],
                    [0, -2, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [1, -2, 3],
                    [-2, -2, 3],
                    [-1, -3, 3],
                    [1, -3, 3],
                    [2, -2, 3],
                    [2, -3, 3],
                    [3, -3, 3]
                ]],
                [0, 1, 3, [
                    [1, 1, 3],
                    [-1, 1, 3],
                    [0, 2, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [0, 3, 3],
                    [2, 2, 3],
                    [1, 3, 3],
                    [2, 3, 3],
                    [1, 4, 3],
                    [3, 3, 3],
                    [2, 4, 3]
                ]]
            ]
        }, {
            entriesCount: 55,
            entries: [
                [0, -1, 3, [
                    [0, -2, 3],
                    [-1, -1, 3],
                    [0, -3, 3],
                    [-1, -2, 3],
                    [1, -2, 3],
                    [-1, -3, 3],
                    [1, -3, 3],
                    [-2, -2, 3],
                    [2, -2, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-2, -1, 3],
                    [-3, 0, 3],
                    [-3, -1, 3],
                    [-4, 0, 3],
                    [-3, 1, 3],
                    [-4, -1, 3],
                    [-3, -2, 3],
                    [-4, 1, 3],
                    [-3, 2, 3],
                    [-4, -2, 3]
                ]],
                [1, 0, 3, [
                    [1, -1, 3],
                    [1, 1, 3],
                    [2, 0, 3],
                    [2, -1, 3],
                    [2, 1, 3],
                    [3, 0, 3],
                    [3, -1, 3],
                    [3, 1, 3],
                    [4, 0, 3],
                    [4, -1, 3],
                    [3, -2, 3],
                    [4, 1, 3],
                    [5, 0, 3],
                    [5, -1, 3],
                    [4, -2, 3]
                ]],
                [0, 1, 3, [
                    [0, 2, 3],
                    [-1, 1, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [0, 3, 3],
                    [-2, 1, 3],
                    [2, 2, 3],
                    [1, 3, 3],
                    [-2, 2, 3],
                    [-1, 3, 3],
                    [0, 4, 3],
                    [2, 3, 3],
                    [3, 2, 3],
                    [1, 4, 3],
                    [-1, 4, 3],
                    [0, 5, 3]
                ]]
            ]
        }, {
            entriesCount: 82,
            entries: [
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-2, 1, 3],
                    [-3, 0, 3],
                    [-3, 1, 3],
                    [-4, 0, 3],
                    [-3, -1, 3],
                    [-4, 1, 3],
                    [-4, -1, 3],
                    [-5, 0, 3],
                    [-5, 1, 3],
                    [-4, 2, 3],
                    [-5, -1, 3],
                    [-4, -2, 3],
                    [-6, 0, 3],
                    [-5, 2, 3],
                    [-6, 1, 3],
                    [-4, 3, 3],
                    [-5, 3, 3]
                ]],
                [0, 1, 3, [
                    [0, 2, 3],
                    [-1, 1, 3],
                    [1, 1, 3],
                    [-1, 2, 3],
                    [1, 2, 3],
                    [0, 3, 3],
                    [-2, 2, 3],
                    [-1, 3, 3],
                    [1, 3, 3],
                    [2, 2, 3],
                    [0, 4, 3],
                    [-2, 3, 3],
                    [-1, 4, 3],
                    [1, 4, 3],
                    [2, 3, 3],
                    [0, 5, 3],
                    [3, 3, 3],
                    [0, 6, 3],
                    [3, 4, 3]
                ]],
                [0, -1, 3, [
                    [1, -1, 3],
                    [0, -2, 3],
                    [-1, -1, 3],
                    [1, -2, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [-2, -1, 3],
                    [2, -2, 3],
                    [1, -3, 3],
                    [-1, -3, 3],
                    [-2, -2, 3],
                    [0, -4, 3],
                    [2, -3, 3],
                    [-1, -4, 3],
                    [-3, -2, 3],
                    [3, -3, 3],
                    [4, -3, 3]
                ]],
                [1, 0, 3, [
                    [2, 0, 3],
                    [3, 0, 3],
                    [2, 1, 3],
                    [2, -1, 3],
                    [3, 1, 3],
                    [3, -1, 3],
                    [4, 0, 3],
                    [4, 1, 3],
                    [3, 2, 3],
                    [4, -1, 3],
                    [3, -2, 3],
                    [5, 0, 3],
                    [4, 2, 3],
                    [5, 1, 3],
                    [5, -1, 3],
                    [4, -2, 3],
                    [6, 0, 3],
                    [4, 3, 3],
                    [6, -1, 3],
                    [7, 0, 3],
                    [4, 4, 3],
                    [7, -1, 3],
                    [5, 4, 3],
                    [4, 5, 3]
                ]]
            ]
        }, {
            entriesCount: 63,
            entries: [
                [1, 0, 3, [
                    [2, 0, 3],
                    [2, 1, 3],
                    [2, -1, 3],
                    [3, 0, 3],
                    [3, 1, 3],
                    [3, -1, 3],
                    [4, 0, 3],
                    [4, 1, 3],
                    [4, -1, 3],
                    [3, -2, 3],
                    [5, 0, 3],
                    [5, 1, 3],
                    [5, -1, 3],
                    [6, 0, 3]
                ]],
                [0, -1, 3, [
                    [-1, -1, 3],
                    [0, -2, 3],
                    [1, -1, 3],
                    [-2, -1, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [1, -2, 3],
                    [-2, -2, 3],
                    [-1, -3, 3],
                    [1, -3, 3],
                    [2, -2, 3],
                    [-3, -2, 3],
                    [2, -3, 3]
                ]],
                [0, 1, 3, [
                    [1, 1, 3],
                    [-1, 1, 3],
                    [0, 2, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [0, 3, 3],
                    [2, 2, 3],
                    [1, 3, 3],
                    [-1, 3, 3],
                    [-2, 2, 3],
                    [3, 2, 3],
                    [-2, 3, 3],
                    [-1, 4, 3],
                    [-3, 2, 3],
                    [-3, 3, 3],
                    [-2, 4, 3],
                    [-4, 2, 3],
                    [-4, 3, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-2, 1, 3],
                    [-3, 0, 3],
                    [-3, 1, 3],
                    [-3, -1, 3],
                    [-4, 0, 3],
                    [-4, 1, 3],
                    [-4, -1, 3],
                    [-5, 0, 3],
                    [-5, 1, 3],
                    [-5, -1, 3],
                    [-6, 0, 3],
                    [-6, 1, 3],
                    [-5, 2, 3]
                ]]
            ]
        }, {
            entriesCount: 48,
            entries: [
                [-1, 0, 3, [
                    [-1, -1, 3],
                    [-2, 0, 3],
                    [-2, -1, 3],
                    [-3, 0, 3],
                    [-3, -1, 3],
                    [-4, 0, 3],
                    [-3, 1, 3],
                    [-4, -1, 3],
                    [-3, -2, 3],
                    [-4, 1, 3],
                    [-3, -3, 3]
                ]],
                [0, -1, 3, [
                    [1, -1, 3],
                    [0, -2, 3],
                    [1, -2, 3],
                    [0, -3, 3],
                    [-1, -2, 3],
                    [2, -2, 3],
                    [0, -4, 3],
                    [-1, -3, 3],
                    [-2, -2, 3],
                    [2, -3, 3],
                    [-1, -4, 3],
                    [-2, -3, 3]
                ]],
                [0, 1, 3, [
                    [0, 2, 3],
                    [-1, 1, 3],
                    [1, 2, 3],
                    [0, 3, 3],
                    [-1, 2, 3],
                    [-2, 1, 3],
                    [-1, 3, 3],
                    [-2, 2, 3],
                    [-3, 2, 3]
                ]],
                [1, 0, 3, [
                    [1, 1, 3],
                    [2, 0, 3],
                    [2, 1, 3],
                    [3, 0, 3],
                    [2, -1, 3],
                    [3, 1, 3],
                    [2, 2, 3],
                    [4, 0, 3],
                    [3, -1, 3],
                    [4, 1, 3],
                    [3, 2, 3],
                    [5, 1, 3]
                ]]
            ]
        }, {
            entriesCount: 57,
            entries: [
                [0, 1, 3, [
                    [1, 1, 3],
                    [0, 2, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [0, 3, 3],
                    [1, 3, 3],
                    [2, 2, 3],
                    [-1, 3, 3],
                    [0, 4, 3],
                    [2, 3, 3],
                    [1, 4, 3],
                    [-1, 4, 3],
                    [-2, 3, 3],
                    [0, 5, 3],
                    [3, 3, 3],
                    [2, 4, 3],
                    [-1, 5, 3],
                    [3, 4, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-1, -1, 3],
                    [-1, 1, 3],
                    [-2, 1, 3],
                    [-3, 0, 3],
                    [-2, -1, 3],
                    [-2, 2, 3],
                    [-3, 1, 3],
                    [-3, -1, 3],
                    [-2, -2, 3]
                ]],
                [0, -1, 3, [
                    [0, -2, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [1, -2, 3],
                    [-1, -3, 3],
                    [1, -3, 3],
                    [0, -4, 3],
                    [-1, -4, 3],
                    [-2, -3, 3],
                    [2, -3, 3],
                    [1, -4, 3],
                    [0, -5, 3],
                    [-2, -4, 3],
                    [-1, -5, 3],
                    [3, -3, 3],
                    [2, -4, 3],
                    [1, -5, 3],
                    [3, -4, 3]
                ]],
                [1, 0, 3, [
                    [1, -1, 3],
                    [2, 0, 3],
                    [2, -1, 3],
                    [3, 0, 3],
                    [2, 1, 3],
                    [2, -2, 3],
                    [3, 1, 3]
                ]]
            ]
        }, {
            entriesCount: 86,
            entries: [
                [0, 1, 3, [
                    [0, 2, 3],
                    [-1, 1, 3],
                    [0, 3, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [1, 3, 3],
                    [-1, 3, 3],
                    [2, 2, 3],
                    [-2, 2, 3],
                    [2, 3, 3],
                    [-2, 3, 3],
                    [-3, 2, 3]
                ]],
                [1, 0, 3, [
                    [1, 1, 3],
                    [2, 0, 3],
                    [2, 1, 3],
                    [3, 0, 3],
                    [3, 1, 3],
                    [3, -1, 3],
                    [4, 0, 3],
                    [4, 1, 3],
                    [3, 2, 3],
                    [4, -1, 3],
                    [5, 0, 3],
                    [4, 2, 3],
                    [4, -2, 3],
                    [5, -1, 3],
                    [5, -2, 3],
                    [4, -3, 3],
                    [6, -1, 3],
                    [5, -3, 3],
                    [6, -2, 3],
                    [4, -4, 3],
                    [7, -1, 3],
                    [6, -3, 3],
                    [5, -4, 3],
                    [7, -2, 3],
                    [4, -5, 3],
                    [5, -5, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-1, -1, 3],
                    [-3, 0, 3],
                    [-2, 1, 3],
                    [-2, -1, 3],
                    [-4, 0, 3],
                    [-3, -1, 3],
                    [-3, 1, 3],
                    [-2, -2, 3],
                    [-4, 1, 3],
                    [-4, -1, 3],
                    [-3, -2, 3],
                    [-4, -2, 3],
                    [-3, -3, 3],
                    [-4, -3, 3],
                    [-5, -2, 3],
                    [-4, -4, 3],
                    [-5, -3, 3],
                    [-5, -4, 3],
                    [-6, -3, 3],
                    [-6, -4, 3]
                ]],
                [0, -1, 3, [
                    [1, -1, 3],
                    [0, -2, 3],
                    [1, -2, 3],
                    [2, -1, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [1, -3, 3],
                    [2, -2, 3],
                    [-1, -3, 3],
                    [1, -4, 3],
                    [2, -3, 3],
                    [3, -2, 3],
                    [-1, -4, 3],
                    [-2, -3, 3],
                    [2, -4, 3],
                    [3, -3, 3],
                    [-2, -4, 3],
                    [-1, -5, 3],
                    [2, -5, 3],
                    [-2, -5, 3],
                    [-3, -4, 3],
                    [-3, -5, 3],
                    [-2, -6, 3]
                ]]
            ]
        }, {
            entriesCount: 41,
            entries: [
                [1, 0, 3, [
                    [2, 0, 3],
                    [1, 1, 3],
                    [3, 0, 3],
                    [2, 1, 3],
                    [2, -1, 3],
                    [3, 1, 3],
                    [3, -1, 3],
                    [4, 0, 3],
                    [2, 2, 3],
                    [4, 1, 3],
                    [3, -2, 3],
                    [4, -2, 3]
                ]],
                [-1, 0, 3, [
                    [-2, 0, 3],
                    [-3, 0, 3],
                    [-2, 1, 3],
                    [-3, 1, 3],
                    [-4, 1, 3],
                    [-4, 2, 3]
                ]],
                [0, 1, 3, [
                    [0, 2, 3],
                    [-1, 1, 3],
                    [-1, 2, 3],
                    [-1, 3, 3],
                    [-2, 2, 3],
                    [-2, 3, 3],
                    [-3, 2, 3],
                    [-2, 4, 3],
                    [-3, 3, 3],
                    [-3, 4, 3]
                ]],
                [0, -1, 3, [
                    [0, -2, 3],
                    [1, -1, 3],
                    [-1, -1, 3],
                    [-1, -2, 3],
                    [1, -2, 3],
                    [2, -2, 3],
                    [2, -3, 3],
                    [3, -3, 3],
                    [3, -4, 3]
                ]]
            ]
        }, {
            entriesCount: 47,
            entries: [
                [0, 1, 3, [
                    [0, 2, 3],
                    [1, 1, 3],
                    [1, 2, 3],
                    [-1, 2, 3],
                    [1, 3, 3],
                    [2, 2, 3],
                    [-2, 2, 3]
                ]],
                [-1, 0, 3, [
                    [-1, -1, 3],
                    [-1, 1, 3],
                    [-2, 0, 3],
                    [-2, -1, 3],
                    [-2, 1, 3],
                    [-3, 0, 3],
                    [-3, -1, 3],
                    [-3, 1, 3],
                    [-4, 0, 3],
                    [-4, -1, 3],
                    [-4, 1, 3],
                    [-5, 0, 3],
                    [-5, 1, 3]
                ]],
                [0, -1, 3, [
                    [1, -1, 3],
                    [0, -2, 3],
                    [1, -2, 3],
                    [-1, -2, 3],
                    [0, -3, 3],
                    [1, -3, 3],
                    [2, -2, 3],
                    [2, -3, 3],
                    [3, -2, 3],
                    [2, -4, 3],
                    [3, -3, 3],
                    [4, -2, 3],
                    [3, -4, 3]
                ]],
                [1, 0, 3, [
                    [2, 0, 3],
                    [2, 1, 3],
                    [2, -1, 3],
                    [3, 0, 3],
                    [3, 1, 3],
                    [3, -1, 3],
                    [4, 0, 3],
                    [4, -1, 3],
                    [5, 0, 3],
                    [5, -1, 3]
                ]]
            ]
        }];
    class B {
        static TREE_TRUNK_TEMPLATES = U;
        static TREE_CLUSTER_TEMPLATES = x
    }
    var P = "94,70,42\n109,82,53";
    class F {
        static NONE = I.custom((() => null));
        static _TEST_SOLID = I.random([new n(r.of(r.type8(r.TYPE_STATIC)), h.of(255, 0, 125))]);
        static _TEST_AIR = I.random([new n(r.of(r.type8(r.TYPE_AIR)), h.of(255, 0, 125))]);
        static AIR = I.random([new n(r.of(r.type8(r.TYPE_AIR)), h.of(255, 255, 255, h.BLUR_TYPE_BACKGROUND))]);
        static WALL = I.colorPalette("55,55,55\n57,57,57", I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(0), r.modifiers8(r.HMI_CONDUCTIVE_1)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_2))]));
        static ROCK = I.join([I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_1)), h.of(155, 155, 155, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_2))]), I.colorNoise([{
            seed: 40,
            factor: 60,
            threshold: .4,
            force: .9
        }, {
            seed: 41,
            factor: 30,
            threshold: .4,
            force: .9
        }, {
            seed: 42,
            factor: 15,
            threshold: .4,
            force: .5
        }, {
            seed: 43,
            factor: 3,
            threshold: .1,
            force: .1
        }], 79, 69, 63), I.colorNoise([{
            seed: 51,
            factor: 30,
            threshold: .4,
            force: .9
        }, {
            seed: 52,
            factor: 15,
            threshold: .4,
            force: .5
        }, {
            seed: 53,
            factor: 3,
            threshold: .1,
            force: .1
        }], 55, 48, 46), I.colorNoise([{
            seed: 61,
            factor: 30,
            threshold: .4,
            force: .9
        }, {
            seed: 62,
            factor: 15,
            threshold: .4,
            force: .5
        }, {
            seed: 63,
            factor: 3,
            threshold: .1,
            force: .1
        }], 33, 29, 28)]);
        static METAL = I.join([I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(), r.modifiers8(r.HMI_METAL)), h.of(155, 155, 155, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_3))]), I.colorNoise([{
            seed: 40,
            factor: 40,
            threshold: .4,
            force: .75
        }, {
            seed: 40,
            factor: 20,
            threshold: .5,
            force: .4
        }, {
            seed: 40,
            factor: 10,
            threshold: .4,
            force: .2
        }, {
            seed: 40,
            factor: 5,
            threshold: .4,
            force: .1
        }], 135, 135, 135), I.colorNoise([{
            seed: 41,
            factor: 10,
            threshold: .4,
            force: .4
        }, {
            seed: 41,
            factor: 6,
            threshold: .3,
            force: .3
        }, {
            seed: 41,
            factor: 4,
            threshold: .5,
            force: .3
        }], 130, 130, 130)]);
        static METAL_MOLTEN = I.join([F.METAL, I.temperature(180), I.molten()]);
        static SAND = I.colorPalette("214,212,154\n214,212,154\n214,212,154\n214,212,154\n225,217,171\n225,217,171\n225,217,171\n225,217,171\n203,201,142\n203,201,142\n203,201,142\n203,201,142\n195,194,134\n195,194,134\n218,211,165\n218,211,165\n223,232,201\n186,183,128", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 60 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 6), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2);
            return new n(i, o)
        })));
        static SOIL = I.colorPalette("142,104,72\n142,104,72\n142,104,72\n142,104,72\n142,104,72\n142,104,72\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n114,81,58\n82,64,30\n82,64,30\n82,64,30\n177,133,87\n177,133,87\n177,133,87\n102,102,102", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 40 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 5), r.behaviour8(r.BEHAVIOUR_SOIL), r.modifiers8(r.HMI_CONDUCTIVE_1)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_1);
            return new n(i, o)
        })));
        static GRAVEL = I.colorPalette("97,94,88\n111,110,106\n117,116,112\n117,117,113\n120,118,115\n104,102,97\n113,112,107\n129,128,125\n124,124,121\n81,80,75\n80,76,69\n123,119,111\n105,104,99\n84,82,78\n77,74,69\n91,88,82\n68,65,60\n79,75,69\n85,82,77\n98,94,88\n105,102,96\n104,97,86\n60,55,47\n93,89,81", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 20 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 3), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2);
            return new n(i, o)
        })));
        static COAL = I.colorPalette("31,31,31\n46,44,41\n13,13,13\n17,17,15", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 40 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 4), r.behaviour8(), r.modifiers8(r.HMI_COAL)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
            return new n(i, o)
        })));
        static THERMITE = I.colorPalette("137,86,89\n137,86,89\n137,86,89\n137,86,89\n137,86,89\n137,86,89\n125,70,72\n125,70,72\n147,93,96\n147,93,96\n138,84,86\n138,84,86\n118,72,75\n118,72,75\n101,61,65\n151,104,106", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 60 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 5), r.behaviour8(), r.modifiers8(r.HMI_THERMITE)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
            return new n(i, o)
        })));
        static WATER = I.colorPalette("4,135,186\n5,138,189", I.random([new n(r.of(r.type8Fluid(r.TYPE_FLUID), r.behaviour8(r.BEHAVIOUR_WATER), r.modifiers8(r.HMI_CONDUCTIVE_3)), h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_NONE))]));
        static STEAM = I.colorPalette("147,182,217\n163,188,212", I.random([new n(r.of(r.type8Fluid(r.TYPE_GAS), r.behaviour8(r.BEHAVIOUR_WATER), r.modifiers8(r.HMI_CONDUCTIVE_3)), h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_NONE))]));
        static GRASS = I.random([new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 5), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(56, 126, 38, h.BLUR_TYPE_1, h.HEAT_EFFECT_1)), new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 3), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(46, 102, 31, h.BLUR_TYPE_1, h.HEAT_EFFECT_1)), new n(r.of(r.type8Powder(r.TYPE_POWDER, 0), r.behaviour8(r.BEHAVIOUR_GRASS, 4), r.modifiers8(r.HMI_GRASS_LIKE)), h.of(72, 130, 70, h.BLUR_TYPE_1, h.HEAT_EFFECT_1))]);
        static FISH_HEAD = I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_FISH, 0)), h.of(37, 53, 66))]);
        static FISH_BODY = I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_FISH_BODY, 0)), h.of(37, 53, 66))]);
        static FISH_CORPSE = I.random([new n(r.of(r.type8Powder(r.TYPE_POWDER, 2)), h.of(61, 68, 74, h.BLUR_TYPE_1, h.HEAT_EFFECT_1))]);
        static TREE = I.colorPalette(P, I.custom(((e, t, s) => {
            let a = s.nextInt(B.TREE_TRUNK_TEMPLATES.length);
            return new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE, a), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))
        })));
        static TREE_ROOT = I.colorPalette("75,54,31\n67,53,38", I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_ROOT, 8), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1)), new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_ROOT, 5), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
        static TREE_WOOD = I.colorPalette("133,108,80\n124,97,67", I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_TRUNK, 0), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
        static TREE_WOOD_DARK = I.colorPalette(P, I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_TRUNK, 0), r.modifiers8(r.HMI_WOOD_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
        static TREE_LEAF_LIGHTER = I.colorPalette("128,137,79\n128,137,79\n128,137,79\n128,137,79\n128,137,79\n141,149,91\n141,149,91\n117,128,71\n99,110,65\n111,123,68\n121,132,73\n111,123,74", I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_LEAF, 0), r.modifiers8(r.HMI_LEAF_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
        static TREE_LEAF_DARKER = I.colorPalette("74,86,47\n74,86,47\n74,86,47\n74,86,47\n68,77,40\n68,77,40\n68,77,40\n70,82,42\n70,82,42\n70,82,42\n72,82,46\n72,82,46\n78,90,48\n78,90,48\n95,106,60\n88,100,57\n66,74,36\n66,67,35\n76,87,52\n86,100,53\n75,89,47", I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_TREE_LEAF, 0), r.modifiers8(r.HMI_LEAF_LIKE)), h.of(0, 0, 0, h.BLUR_TYPE_NONE, h.HEAT_EFFECT_1))]));
        static #M = r.of(r.type8(r.TYPE_EFFECT), r.behaviour8(r.BEHAVIOUR_FIRE, 0));
        static FIRE = I.random([new n(r.setTemperature(F.#M, 255), h.of(249, 219, 30)), new n(r.setTemperature(F.#M, 255), h.of(249, 219, 30)), new n(r.setTemperature(F.#M, 120), h.of(249, 219, 30))]);
        static ASH = I.colorPalette("131,131,131\n131,131,131\n131,131,131\n131,131,131\n131,131,131\n131,131,131\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n135,135,135\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n145,145,145\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n148,148,148\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n160,160,160\n114,114,114\n193,193,193", I.custom(((e, t, s) => {
            const a = s.nextInt(100) < 80 ? r.TYPE_POWDER : r.TYPE_POWDER_WET,
                i = r.of(r.type8Powder(a, 6), r.behaviour8(), r.modifiers8(r.HMI_CONDUCTIVE_2)),
                o = h.of(0, 0, 0, h.BLUR_TYPE_1, h.HEAT_EFFECT_2, 3);
            return new n(i, o)
        })));
        static METEOR = I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 0)), h.of(249, 219, 30))]);
        static METEOR_FROM_LEFT = I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 2)), h.of(249, 219, 30))]);
        static METEOR_FROM_RIGHT = I.random([new n(r.of(r.type8(r.TYPE_STATIC), r.behaviour8(r.BEHAVIOUR_METEOR, 4)), h.of(249, 219, 30))]);
        static EFFECT_BURNT = I.custom(((e, t, r, s) => {
            if (f.isVisualBurnApplicable(s.elementHead)) {
                if (h.getBurntLevel(s.elementTail) < 3) return new n(s.elementHead, f.visualBurn(s.elementTail, 1))
            }
            return null
        }));
        static EFFECT_NOISE_LG = I.colorNoise({
            seed: 0,
            factor: 40,
            threshold: .5,
            force: .25
        });
        static EFFECT_NOISE_MD = I.colorNoise({
            seed: 0,
            factor: 10,
            threshold: .5,
            force: .25
        });
        static EFFECT_NOISE_SM = I.colorNoise({
            seed: 0,
            factor: 4,
            threshold: .5,
            force: .25
        });
        static EFFECT_TEMP_0 = I.temperature(0);
        static EFFECT_TEMP_127 = I.temperature(127);
        static EFFECT_TEMP_200 = I.temperature(200);
        static EFFECT_TEMP_255 = I.temperature(255);
        static EFFECT_WET = I.custom(((e, t, s, a) => {
            if (null !== a) {
                if (r.getTypeClass(a.elementHead) === r.TYPE_POWDER) {
                    const e = r.setTypeClass(a.elementHead, r.TYPE_POWDER_WET);
                    return new n(e, a.elementTail)
                }
                return a
            }
            return null
        }));
        static EFFECT_MOLTEN = I.molten();
        static _LIST = {
            none: F.NONE,
            air: F.AIR,
            ash: F.ASH,
            sand: F.SAND,
            soil: F.SOIL,
            gravel: F.GRAVEL,
            wall: F.WALL,
            rock: F.ROCK,
            metal: F.METAL,
            metal_molten: F.METAL,
            wood: F.TREE_WOOD,
            water: F.WATER,
            steam: F.STEAM,
            fire: F.FIRE,
            meteor: F.METEOR,
            meteor_l: F.METEOR_FROM_LEFT,
            meteor_r: F.METEOR_FROM_RIGHT,
            effect_burnt: F.EFFECT_BURNT,
            effect_temp_0: F.EFFECT_TEMP_0,
            effect_temp_127: F.EFFECT_TEMP_127,
            effect_temp_200: F.EFFECT_TEMP_200,
            effect_temp_255: F.EFFECT_TEMP_255,
            effect_wet: F.EFFECT_WET,
            effect_melt: F.EFFECT_MOLTEN
        };
        static byCodeName(e) {
            const t = F._LIST[e];
            return void 0 !== t ? t : null
        }
    }
    class L extends M {
        constructor(e) {
            super(e)
        }
        applyPoint(e, t, n, r) {
            const a = Math.trunc(t / 4);
            e < a + 10 ? n.draw(e + a, 0, F.METEOR_FROM_RIGHT) : e > n.getWidth() - a - 10 ? n.draw(e - a, 0, F.METEOR_FROM_LEFT) : e < n.getWidth() / 2 ? s.DEFAULT.next() < .8 ? n.draw(e + a, 0, F.METEOR_FROM_RIGHT) : n.draw(e, 0, F.METEOR) : s.DEFAULT.next() < .8 ? n.draw(e - a, 0, F.METEOR_FROM_LEFT) : n.draw(e, 0, F.METEOR)
        }
    }
    class _ {
        static TRANSPARENT_ELEMENT = new n(4294967295, 4294967295);
        static LITTLE_ENDIAN = !0;
        static create(e, t, n) {
            let r = new DataView(new ArrayBuffer(e * t * 4)),
                s = new DataView(new ArrayBuffer(e * t * 4)),
                a = new _(e, t, r, s);
            for (let e = 0; e < a.#H; e++)
                for (let t = 0; t < a.#N; t++) a.setElement(t, e, n);
            return a
        }
        static from(e, t, n, r) {
            return new _(e, t, new DataView(n), new DataView(r))
        }
        #N;
        #H;
        #D;
        #U;
        constructor(e, t, n, r) {
            this.#N = e, this.#H = t, this.#D = n, this.#U = r
        }
        isValidPosition(e, t) {
            return !(e < 0 || t < 0) && !(e >= this.#N || t >= this.#H)
        }
        setElement(e, t, n) {
            null !== n && this.setElementHeadAndTail(e, t, n.elementHead, n.elementTail)
        }
        setElementHeadAndTail(e, t, n, r) {
            const s = 4 * (this.#N * t + e);
            this.#D.setUint32(s, n, _.LITTLE_ENDIAN), this.#U.setUint32(s, r, _.LITTLE_ENDIAN)
        }
        setElementHead(e, t, n) {
            const r = 4 * (this.#N * t + e);
            this.#D.setUint32(r, n, _.LITTLE_ENDIAN)
        }
        setElementTail(e, t, n) {
            const r = 4 * (this.#N * t + e);
            this.#U.setUint32(r, n, _.LITTLE_ENDIAN)
        }
        getElement(e, t) {
            const r = 4 * (this.#N * t + e),
                s = this.#D.getUint32(r, _.LITTLE_ENDIAN),
                a = this.#U.getUint32(r, _.LITTLE_ENDIAN);
            return new n(s, a)
        }
        getElementHead(e, t) {
            const n = 4 * (this.#N * t + e);
            return this.#D.getUint32(n, _.LITTLE_ENDIAN)
        }
        getElementHeadOrNull(e, t) {
            return this.isValidPosition(e, t) ? this.getElementHead(e, t) : null
        }
        getElementTail(e, t) {
            const n = 4 * (this.#N * t + e);
            return this.#U.getUint32(n, _.LITTLE_ENDIAN)
        }
        getElementTailOrNull(e, t) {
            return this.isValidPosition(e, t) ? this.getElementTail(e, t) : null
        }
        swap(e, t, n, r) {
            const s = this.getElementHead(e, t),
                a = this.getElementHead(n, r);
            this.setElementHead(n, r, s), this.setElementHead(e, t, a);
            const i = this.getElementTail(e, t),
                o = this.getElementTail(n, r);
            this.setElementTail(n, r, i), this.setElementTail(e, t, o)
        }
        getDataHeads() {
            return this.#D.buffer
        }
        getDataTails() {
            return this.#U.buffer
        }
        getWidth() {
            return this.#N
        }
        getHeight() {
            return this.#H
        }
    }
    class k extends y {
        #x;
        constructor(e) {
            super(), this.#x = e
        }
        getWidth() {
            return this.#x.getWidth()
        }
        getHeight() {
            return this.#x.getHeight()
        }
        getElementArea() {
            return this.#x
        }
    }
    class W extends M {
        static asElementArea(e) {
            return e.createElementArea(W.DEFAULT_W, W.DEFAULT_H, _.TRANSPARENT_ELEMENT)
        }
        static DEFAULT_W = 30;
        static DEFAULT_H = 30;
        #x;
        #B;
        constructor(e, t, n) {
            super(e), this.#x = t, this.#B = n
        }
        applyPoint(e, t, n, r) {
            const s = this.#x,
                a = e - Math.trunc(s.getWidth() / 2),
                i = t - Math.trunc(s.getHeight() / 2);
            let o = I.custom(((e, t) => {
                const n = s.getElement(e - a, t - i);
                return n.elementHead !== _.TRANSPARENT_ELEMENT.elementHead && n.elementTail !== _.TRANSPARENT_ELEMENT.elementTail ? n : null
            }));
            r && (o = I.gentle(o));
            for (let e = 0; e < s.getWidth() && a + e < n.getWidth(); e++) {
                const t = a + e;
                if (!(t < 0))
                    for (let e = 0; e < s.getHeight() && i + e < n.getHeight(); e++) {
                        const r = i + e;
                        r < 0 || n.draw(t, r, o)
                    }
            }
            void 0 !== this.#B && this.#B()
        }
        hasCursor() {
            return !0
        }
        createCursor() {
            return new k(this.#x)
        }
    }
    class V extends M {
        #P;
        #F;
        #B;
        constructor(e, t, n) {
            super(e), this.#P = t, this.#B = n, this.#L()
        }
        #L() {
            if (void 0 === this.#P.length || 0 === this.#P.length) throw "Scenes not set";
            const e = s.DEFAULT.nextInt(this.#P.length),
                t = this.#P[e],
                n = W.asElementArea(t);
            this.#F = new W(this.getInfo(), n, this.#B)
        }
        applyPoint(e, t, n, r) {
            this.#F.applyPoint(e, t, n, r), this.#L()
        }
        hasCursor() {
            return !0
        }
        createCursor() {
            return this.#F.createCursor()
        }
    }
    class G extends M {
        #_;
        constructor(e, t) {
            super(e), this.#_ = t
        }
        applyPoint(e, t, n, r) {
            this.#_()
        }
    }
    class Y extends M {
        #I;
        #k = null;
        constructor(e, t) {
            super(e), this.#I = t
        }
        applyPoint(e, t, n, r) {
            null === this.#k ? this.#k = this.#W(e, t, n) : (this.#k.applyPoint(e, t, n, r), this.#k = null)
        }
        onDragStart(e, t, n, r) {}
        onDragEnd(e, t, n, r) {
            null !== this.#k && (this.#k.applyPoint(e, t, n, r), this.#k = null)
        }
        #W(e, t, n) {
            const r = this.#V(e, t, n);
            return null !== r ? new W(new b, r) : null
        }
        #V(e, t, n) {
            const r = _.create(this.#I, this.#I, _.TRANSPARENT_ELEMENT),
                s = Math.trunc(this.#I / 2),
                a = n.getDefaults().getDefaultElement();
            let i = !0;
            const o = I.custom(((n, o, l, h) => {
                if (this.#G(h.elementHead)) {
                    const l = n - e,
                        c = o - t;
                    return r.setElement(l + s, c + s, h), i = !1, a
                }
                return null
            }));
            return n.drawLine(e, t, e, t, this.#I, o, !0), i ? null : r
        }
        #G(e) {
            const t = r.getTypeClass(e);
            if (t > r.TYPE_AIR && t < r.TYPE_STATIC) return !0;
            const n = r.getBehaviour(e);
            return n === r.BEHAVIOUR_FISH || n === r.BEHAVIOUR_FISH_BODY
        }
        isAreaModeEnabled() {
            return !0
        }
        applyArea(e, t, n, r, s, a) {
            this.#k = this.#Y(e, t, n, r, s)
        }
        #Y(e, t, n, r, s) {
            const a = this.#z(e, t, n, r, s);
            return null !== a ? new W(new b, a) : null
        }
        #z(e, t, n, s, a) {
            const i = Math.abs(e - n) + 1,
                o = Math.abs(t - s) + 1,
                l = _.create(i, o, _.TRANSPARENT_ELEMENT),
                h = a.getDefaults().getDefaultElement();
            let c = !0;
            const d = I.custom(((a, i, o, d) => {
                if (r.getTypeClass(d.elementHead) > r.TYPE_AIR) {
                    let r = a - Math.min(e, n),
                        o = i - Math.min(t, s);
                    return l.setElement(r, o, d), c = !1, h
                }
                return null
            }));
            return a.drawRectangle(e, t, n, s, d, !1), c ? null : l
        }
        isSecondaryActionEnabled() {
            return null !== this.#k
        }
        applySecondaryAction(e, t, n, r) {
            this.#k = null
        }
        hasCursor() {
            return null !== this.#k
        }
        createCursor() {
            return null !== this.#k ? this.#k.createCursor() : null
        }
    }
    class z extends M {
        #K;
        constructor(e, t) {
            super(e), this.#K = t
        }
        getTemplateDefinitions() {
            return this.#K
        }
    }
    class K {
        static roundBrushTool(e, t, n) {
            return new H(n, e, t)
        }
        static pointBrushTool(e, t) {
            return new N(t, e)
        }
        static point2BrushTool(e, t, n) {
            return new D(n, e, t)
        }
        static meteorTool(e) {
            return new L(e)
        }
        static insertScenesTool(e, t, n) {
            if (1 === e.length) {
                const r = W.asElementArea(e[0]);
                return new W(n, r, t)
            }
            return new V(n, e, t)
        }
        static actionTool(e, t) {
            return new G(t, e)
        }
        static moveTool(e, t) {
            return new Y(t, e)
        }
        static templateSelectionTool(e, t) {
            return new z(t, e)
        }
    }
    class X {
        static ROCK_SM = {
            info: {
                displayName: "Small Rock",
                category: "template",
                icon: {
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAwCAYAAAChS3wfAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaUlEQVRoQ+2WO28cRQCAv5l93p69do5zTsQFBkehiJBRhKAxSNBRUCSFqfgBNEgRoqBLmS4lFIiKBv8BuiChoGBCZBxjiBDGTmHs6OLHPbzv2aEgAXtpswvS7tftp5mR5tPM7prUHLMo6kYToCjqRhOgKOpGE6Ao6kYToCjqRhOgKOpGE6Ao6kYToCjKZunKOzrNQhA5bW8Cr91hZeUOa+sboji2CioN8Mbrr+ooHpGpFKUihsMhz81N0eudYwH0fxGh1ADLy8v20tJS8uRZ6pzx8QgpQUqNEHCw36fddnl+bp619Y2T0yuh1AAnN3/t2kcvf3/7O5I0QqmUOEnIlSQYP8Sf7JDnioWXLlZ+CkoNcJJHu/3VVy5d4v79n+n3+xgYJGGCSlP8mWc5ODpiZrpTnFY6lQUYj0b4/gRtb5IDeYRKwRQSAcRhhFYKAby1uKhv3rpV2SmoLECWZQTBMVPTU+zs7JKoFNOw0TJjPBqQCxACkiyt9CpUFsBtuYxGI3q9cxhCkOcKyzCRQhBGEU7LRWuNlJIz/nRxemlUEuC9d69oISTBccDho31c1yUcB6gsQxqSluOgtCZOEjrdswzHo8pOQSUBTNOk232GJAwxDEm322VvZxdpSAwMAIQQQE6mUkzLYn6+ms9iJQEMNG3Xw3Ud0jjCtW0mJlpkSqMSdWpsFEW4XovNzc1TvixKD/Dxhx/o33/7Fa0z8lwRBSFZlnG212NwNGSYjP4eKzTEQUDb8+hMTvPJjRtz71+9uv3Pak+f0gOs3f2BbrfDvdV1ZmdnsaRNFEVYloNpOgRRH8txCIKILMtwWi2ODg4ZByGffv7ZFlDqe6D0APuHAzzPJQgitra3iOMYlWX4/jSDwQDf97FtmzCMkaaJ1jlCmOR5zr31X0rdPFQQYGVtQwAa4Pz5F3BTxfaDBxiWQxBHoCVBnBAEAa7XwnJamIaN7Xp8df363NuXL2+fXvHpUnoA+CvCm4uL+o+HhwB4Ez5KC6RpEccxpjBxvRYzMz329vrc/em2ALj57Ten1imDSgIAfP349/a1hYvamzxDloNpuxiWQxzHvHjhAl98uVz6kS9SWYAnPL4S/+LO6o9FVQmVB/i/0QQoirrRBCiKutEEKIq60QQoirrRBCiKutEEKIq60QQoirrxJ1JCV8S5Z+TMAAAAAElFTkSuQmCC"
                }
            },
            action: {
                type: "random-template",
                actions: [{
                    type: "image-template",
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAYAAACdkl3yAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7UlEQVQ4T62UPW9cRRiFn5k793Pt682yzoq4wOAoFBEyihA0Bgk6CoqkMBU/gAYpQhR0KdOlhAJRpcF/gC5IKCiYEBnHGCKEsVMYO9rY3t27vp8zdyjAa6+ddJzyaM6j94zeGcX/JHXaAFi89oGtdAaiphFNEDVaLC/fZ3VtXZw+e6QzoHfeftPmRYI2FcbkDAYDXpqdotO5wDzY58HU0tKSt7i4WB4Z0tYMDxOkBCktQsD+XpdGI+Dl2TlW19ZP5kdSJyE3bnz2+k/3fqSscoypKMqS2kjS4RPiyRZ1bZh/7fIzpxqr9nSnu/LGlSs8evQb3W4XB4cyKzFVRTz9Ivu9HtPN1snISGOgYZIQxxM0okn2ZQ9TgRISARRZjjUGAby3sGDv3L07NtUYSGtNmh4y1Zxie3uH0lQox8NKzTDpUwsQAkpdnak4BgrCgCRJ6HQu4AhBXRtcRyGFIMtz/DDAWouUknNx82T0GPTRh9esEJL0MOXg6R5BEJANU4zWSEcS+j7GWoqypNU+z2CYjE01AimlaLdfoMwyHEfSbrfZ3d5BOhIHBwAhBFCjTYVyXebmjtdhBHKwNIKIIPCpipzA85iYCNHGYkpzdAyAPM8JopCNjY2RpwA+//QT+9eff2Ctpq4NeZqhteZ8p0O/N2BQJqOAsFCkKY0oojXZ5Itbt2Y/vn59SwGsPviZdrvFw5U1ZmZmcKVHnue4ro9SPmnexfV90jRHa40fhvT2DximGV9+/dUmIBTA3kGfKApI05zNrU2KosBoTRw36ff7xHGM53lkWYFUCmtrhFDUdc3Dtd+PL3t5dV0AFuDixVcIKsPW48c4rk9a5GAlaVGSpilBFOL6Icrx8IKIb2/enH3/6tV/qx3B3l1YsH8/OQAgmogxViCVS1EUKKEIopDp6Q67u10e/HpPANz54Xvg1EJ+99/avzV/2UaT59A1KC/AcX2KouDVS5e4/c3SmQcLz/iPYFT1jO6v/HLaGukfK6ZXUFEV3tAAAAAASUVORK5CYII=",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAALCAYAAACQy8Z9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6klEQVQoU7WSzU4TURiGnzNz5qfTMkEMaFkg0XgXbePCcAWscKXeSG+GRAVvgLgw6J4ASwKr0kCBTmf6M2dmzum4aKhQY1z57M57zvfkTb4j+Q/IxWCRVqNZKjVmefkJtVqVMAzR2lAUOZ/3vorF9/AXaavRLAE8zyHPc4SwiOOYm5sbpLSZ3Xm0Gs1yOIw5Oj55JJ9LW41m+XRlhSxP0dpgjKYoCqS08TwPYzSTyexs25KyLBkOY+r15xwdnzx0zqT3zZIkQTqzJq7rYts2taDKZDxmkqYk05hBP8KREum52LYkSRLetJrl98Mf87YSYL1eZ5KmZFnG0lIVAK0LsixDKYXruqyurvJsbY1Op0OeF0yyFKUUWhcEQZWtrbflwcE3MZcCVHwfKW3G4xFhGOJ5NaR02NzYoNPpcHnZpdfrkRc5QgiwBI4jUUohhCBKBrx++ao8uzgXEuDT3hfx8f2HsuL75IUiDEOMmTIYRJyenNLrXSOEhTaaqTEIYSGwwALf99HaUA2qjOIRj5qqPGNj8wXRXZ9u94rrq2uGoyFRPyKoBjjSwbZsUpUDhnc7O3a73Z7ezz9kLt3d3RXb29ulyQtu726pVAKifkR9fZ3Dn7+XcE+73V6M5jz6p/v7+38Mn12cL0b/5Bf4ONku8uljuAAAAABJRU5ErkJggg==",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0,
                    randomFlipVertically: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAASCAYAAABfJS4tAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVQ4T7XUz2ucRRzH8fc8z+zMs88++yvG1GRrhUKLWOKhxTZYqeBBinrwUr34X4l4lyLoqQcFxZLakJb+sF7ExkAuSmh2m/3R7JN95vk9HpYkVkJsDn6Ow3xfDDMfRvI/Rf574ahceuuiPTH/Ckop4shQrwdsbm4CMBgMefzHmtjb+0LwtWvXrNaa4XafJEkYDQakacZoOMSVEsdxmJubY2Fh3t5cXhZwCHz50kWrtQZgYhLuP3wgJuMQ/ZICYH7uBOrkqxRZxsbGBtJxMcagqh5PnmztO/vwB1fftzWvSmQMVc9DCMG8Upx7/awd7jxjNwyx1rKzs4MrJVpKTp16jbW1NVrtFiaOcR2HxTfO2d8e/y4kTO9u1B8Sex5SCl6eaSOEi+/7rK+vI5XCWovWinD8jLIsGQwGaK1pNAPKMqe0lloQYK09OHEYhniug680eZLxtNslTQsAlFK4rkteFNRrAXFkyPJ8OuxKhBCEYYiu+vh+jTiOD+A3Fxfpd7fob/XwfR+bQxD4AGitkLoCgC1yZmfaJFlKq9HEdV1MmlD1PIKgxqDfx1XTvRKg2+sx6j2l3WphjKEoCiITAyVe1SOODMJ1sNbSarWZnZ1lYmKstRSjEYXOUUpRlCVSTBsnAX5euS3eu3zFRvEuwquw8ugXcfXKuzbcDTFJhhCCdr3O9vY2Qgji2JDlGdJ1SbOYWuCTJAnNZpOFkx1W7947aMXynZX9cgP8sHJbLF04b+M4RimF79c4fbrOeDwmtwWeVyUIakRJTKfT4c7qXc6cOctX178+vMf/zL1Hv4qlC+dtsyIZ704QQiCES7PeJM9z/vpzk6DZoLvVo9Fu41Tc/dkjYTjApZQsdDoUZUGcJoQ7YxzHwUSGSTSZVq/R2J/7Txim+GeffmK7vS6TKMJxHMqyxHEcsjTFcVzaszN8/sWXx/srAK5/8634+KMPbUVWSNOUNEuxpUVrjTERt26sPvdGLwwD3Pjue/HO20tWCEHQaLAzHHJr9XlwL8eCAbKsRCmXH3+6eSi4l2PD9x8+OBLcy99QElUk8fCpxwAAAABJRU5ErkJggg==",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0
                }]
            }
        };
        static ROCK_MD = {
            info: {
                displayName: "Medium Rock",
                category: "template",
                icon: {
                    imageData: "data:image/png;base64,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"
                }
            },
            action: {
                type: "random-template",
                actions: [{
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAUCAYAAAD7s6+GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGYUlEQVRIS9XWW4jc5hnG8f/oOCNpjrvrnfEu6w3BdkJCsONCa0raJD1AoAE7JS49uE0CLTUmNFtyXdyb1BSHuL0p9KKmLKW5CCQ93ZS0DSTg1HbsTWx317U9Hu96jzOagzTSaD6NpF44WbxZt2nSQNvnSu8rIf34eKVPCv8nUd7f+Djy/UPfTgbxzeNiqcgPf/Tj1MYrPnw+NuhPn3/+idrFt08AhD2fpZVlogjmq7DvCw8n2XyO6Zde+cjgD4Se+NkLk08emqq9Vx858kxh8cKV1nt1Lj+MCAXVCzOYZoZCNoeqqWwtb6G+ZnNxbo5s1iLodtn/xc8lAC//8U8fGrwJ+qufv7DrjVf/fA6gMDxMbXYWIAVw+GuPJa3qErquE0URhqaiyQkFI4umaSCl0DWZtdUViqUSI8MF7t91D3NzlxmtlCkWh7lSvcojn92b5AslXvzNH/5tsALw9KHvJuOjWxB9jwsz71Aeq2AaJsQJlmXyg8NPJa1Wk7vu2km9Ued67TrFUhHiBDmV4LkdlHwePZOh3bRxnTZdz8XImsiKQqmUp91u0vVcJBmGhoo0mg32P/JgYuULTL/4wSOhAJTyBXRVYxD0SCXgez6O4+C7HlE0QNd1tm/fTrvdptVsYZoGqqIiJeC6Lpl0hiQFs3OzSEoK07JwvS5hLFir27g9H0WWMXNZ4hgGCaiaggj7XL58ib2fuDc5eebCv8QqAJqmkYoTVpdWWF6ZZ9u2CRaXVnG7LpUto4xWxrBbHebn57Ftm0KhgB8IhoeH0fQMlbFxVupr6KaFoiuEUYiRz7K6sgqaghppJElMIPr4fg9ZU5AlmUazgev2yFp5Hv7M3mRsbIzpX790W/DNFS0W7zjz5qlrTsem0epwY/mvjIyMICkqSUqi1w8BsHIFDCtLFA+4XruOrKpURkdZs236oaAwVCIQPfq9AcsLi3RcB0lSkGUFWZIYBCGyqqGpGhkjjW23UGQN13VpdVwcx+HTn7w/+dY3D+7+zuGpmU3QQ1NTta8feJyhSoV226bbcchoKjt27iAUAkmGVrNFFEdMbpvE7Xbw/S4Ne41BJFBVlaGhEkgp/nZxjn4UYrc6aKpGLmcQDWL8sI8Qgu077sRxHLpOH10zadSdmxBdIxyEdLs+vzjxy3Off/ABXn3t9fXVXX/rt4xtxXc6pA2DiYkJyuURLNOiulbFymaRlRRLC8uUSgVc1yWbtSiXywRBgKqqLCwtocgqW7aWmb04R1o3sHJ57rvnXsIwpNvz8TyPJJYR/RghBEEgyOcLtFpNen4PVVFJkoR2u0MUxTyw91PJ6yffTG2ATkxMPnT+7Om/jIyMsLwwTxjGSJJCpVym3+8DUClvJegJFFnFMnOk02lAwvd8xraO43sB128sYNttMpZBJm1w9eo1VE1D13V0RUdRVDRFR/QEcZjQCwLSaYMoSej1+siyTLFY5OTpsxtmdR06NTX12hPf+CqqIhPHEfV6nSSJKRSKpFIJzWaTsbExJFnCMi2iaIDjdBFCoKgatt1GlhTWVhvk80X6oSCTMdF1HUmSiKOYQRzRaDSw7SZCCDyvi6yq9Pt9NE2jUChwZuZ8iqu1W4g3s+GDv2fPnv1vnXzj5XK5QhiG1Ot1oigmlyuQzeZ55+3z3Ld7F67nE8cxYhDhdD08z2dychtXqjWC3gAja9JxuzSbHYJAMBhEJEkCwOrqCoaRAcA0LYQYICMTiYgv7fuyeWbm/K2k9WyAPj317CtPfeUxMpaJaVpomkaj0SSOoVqtMj4+ju/3cJwuq6sr+J5PFMekZIkbS8sIMUA3TCYn76TXE4RCsNzpkE6nCYVAUWWCXkAcvfvHAhw48Pju544fnwE4cuTIev/92bSFjo6Osrwwj223yefzbJuYwLQsOm2XMIq5Ur1GKiWj6RmGRkYJgoC206Hd6eB5Puko4fTZt9BUFc/zEEKAlCIKQ0QI8436htl77vjxW8t/mk3QHXfvuGNhYeFarjSE3WwShiHtS3/HUHUG/ZDa4iLZrEWxWOL3v/3d+kN3370zMS0DgFQQ8+i+fQ+hKLWjR4/Wlmx7/f4fNZugTx6aqj37zPc4feoUmYxBSpJpNts03z1/aX7htjvHudlLG/pHjx27tfyPswkKcOz4T1IHDx5Mpqenb4v6b+S2UID/JSTAPwB2TvQFACDmHAAAAABJRU5ErkJggg==",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0,
                    randomFlipVertically: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0,
                    randomFlipVertically: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0,
                    randomFlipVertically: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0,
                    randomFlipVertically: !0
                }]
            }
        };
        static ROCK_LG = {
            info: {
                displayName: "Large Rock",
                category: "template",
                icon: {
                    imageData: "data:image/png;base64,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"
                }
            },
            action: {
                type: "random-template",
                actions: [{
                    type: "image-template",
                    imageData: "data:image/png;base64,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",
                    brush: "wall",
                    threshold: 50
                }, {
                    type: "image-template",
                    imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAAzCAYAAAByvu3vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4Xu2cWYyd53nff+/ybWedM8MhZ4bDRaUtS0xi2Y4ty4khS1HioHGCxIkTt1nQoECvilwIsC/SK1+1BaxABtIgd0UbJGh7UThBmziLbcmxE6WWK9G2YkUrSWm4zX62b32XXrznHHIoO7ZlNZGLPsCAw8OzfOf9P8v/+T/PR83/t+8r07c/8P+a/c6jj77jXz/88IWf/uCDHmDv4ACAJ568II488fvEvm8B++jP/ri//bG51bVBxylJkvG5z/0pv/yRn2U0GpGmKQBN0/D2H3ir/9rfvvB9B9r3HWD//KMf9Qd72+R5g1aOSEcIJalrc+R5pi6Zjse0Wm2GwwNGoxGHh55YK+rGsr62xh1n7/B/9Md//n0F2psSsEcfeeTnHv7Yx/7w13/xI74oCkzTYJ0jjmPq4R6yaZCxAANLgyUq09BpaZRSAFhr2d/fp52ljEeHdPo98olkOs0x3hJHMcV0wubGOh/9+Q/5dqvDf/z9//Z9AdybDrAfu/9H/R//0ad56L73crB9gziOOba8gnMOKSVVXSCtJW7FJEmC855impOlKU5KAJxzGGNo6pqqqqi2d5jkJU3TMDi2zJnTZ9CRptPuMBqN2D/Y4wPve7f/whNfedOD9o8O2O/8zqPv+MKf/unTB6MxWkfYpiFJE8ZlwcFoymB5mYPxAVopOp0OvV6PTqfDeDrCO89oMsIaQ1VVHA6HACz1+5RFBUCatphOJlRVxebmSU6cWEMrRZZk2KZBCcF4OuXk+gYf/NH7/HQ65a8ufP1NC9w/GmC/9DM/6Wtneewzn0EKQRJpsjiFJCVJIlaXBzjv2L2xjcoylA6Xao2hmQFUlCWT8ZgTJ07QGMPaiRMATPOck5ublGVJPs25evUa58+fp9Vu4a3FAFVV4b0jSRKiKMZUNf1+HyEEP/n+9/k/+9ITb0rQ/lEA+2cf+bB3Vc70YB/rHP1+n247I9EJ02mOMx4iCdaxurpCFEWAZDqd0m63QYaz7HTaLA8GKK2pqgohwuNpmlJOJ+goYn93m3e/6x2srq6io4i6rqlNA86hpSKvDeV0ShqltDttjh8/zpUrV/jg/T/ii6Lgi08+/aYC7h8UsF/88Ic8wFvP3cG1Vy/RTjWj0YjJZIwSgnKa0+v1sM5RFiXdbpc4jmmaBikjjh8/QZ5PUUpjnSNRCVmrFQAqS4o8B6Db7TIejznY3+fcuXPoKAKgrmucs8Q6wjjP9vY21llOnTqNUhHee5qmwZiGfJojpOChH7nXJ0nCnzz2xTcFcG8IYJ/+9KfP/vZv/dbFuqrQWvP4E69NJ3OwVldPUJY5mxvr3Lh2heP/5BxlWQJQ5AVRpMmLght7+1y7fhUlNVkro99fYrO/SVVprl+/Rr/fRSqFaRpya6mqiqzVmr1PjnOWO9/2NooiR0oVyEmRo5UmaSdgPBsnN9BK473HOk8+DYBnWQsVRYzHY06srTGdTPipBz/gs6zFf/+Tz7zmu/1D2hsC2Ic//OFLH3jfvZzc3MB7x6/+0i94D6RZaFTLMqeuawbLyzhvufzKZc6un2BjY4OyqNlY32Bvf49+v09VVawcO0a338MYS1lWFHmB944XX3wBvGQ4HCKEJ45jslZIpQDj8RgArRTnzp1jPJ4wmUw5feoUB4eHNI0J4FmH0holFcYamrpBiPB7O2kzGAy4cv0ax44do6oqVldXaRqLsZb73/ser6OIz3/pr/9RgHtDAPvA++717TSh32nhnGN7b5d+v08xnQAgJaRJRD4eAZBGmrwsSdOUTr/HaDym0+1ycHiIkhodJbRaXQB6vcXHLMx7h5nR/CiKkFKCMyilcM5R5AX5NEdJyeHhAcPhkFMbG/Q7XSwO7z1aAN4iJSRJQlEWKCmomxDtSRLRmIo0zdBRRBTHeO/ptFJGozH33HWn7/V6fPHL/7CtwBsC2GCwTK+dkbVSnLMs2z5N09BphxQ1yXOaOtBsAOnh2a1XuOcH3w6EA9ORZnl5gDGeqrr53DmRkEIgZj/ee7QUKKnQkUZJyXgUKP3+/gFXrlzhYP+Qc+fOkSQJ586doykrnPcI54AAuhChb0M4tNJIIWmahqeeeoq33PlWrBNopVAypEk5a8z39vdwPlzXPXfd6SfTCTpOKYqCM2fO8MUn/ub/GojfM2AP3nevbyXpghILIel2OzjrKGY1YdDrk5fTI69TexEvvnyRfr/PqVOn8HUDBIBmZwGA90EyHE9CtM6t0z8aenEcMRwO0Vrx9rf/EGURmubjJ45TVRWdVpvGNJRVhXMO7zxCzT7PezqdDjs7O+RFzh13nEVHEdJZdBShowhjLVkU8corr2CahsZ6lFbUdU2kI8qqQinF9evXuest5/zJU5t87rEvvOHAfU+AfeC++3yn26bdTvFYqqpZHLD00JpFWNM0lEVINXMbDAbs7u4CMBwOqaqKsizpdjqcWFtjdeUYECLBO0+SJHjvcbP3L8sSpRSRDSmxLmqkVGitEEKgo4g0TfHe00qykDaBpq6prSGNsnAhM8uLHCklr7zyCsdWjtGSMryPDu9pLVy4cAHnPY0xREnG4cEhUkmssaA0nU5n8ZnPPff8kfd/o+x1A/bQ/Q94gMHSEr1ej6YuqWbelrUyrLFYZ7HGopWm3epQNzV5XtDUNVpKOp0ecRTT7rTx3vPCCy8wGk24dPlJlpZ6HDt2jE6nw2AwoNvt0jQN3hiEEKRpiytXrrC6uoqzDu8MIDHGMzwcg/NorYnjCJwnn0eoFLSSDC8EUgicCFE2GU+om5rV1VXOnDnDy5cu0em0SdMUpTStVsbVa9dwzlFVFdYYIiWRkSJJEuIoJcsyZKRpmob1Eyc4tXHSP/GVN7bGvW7A6nJCGidsbm7Q1DVN3TAajZBSorRCq8DCVKywzhKJGAATWwBaacp4PKYocuqmRivFmTNnyPMcpTUrKwNGoxGj0YhLly7Rbrc5efIkS0tLVFWFUhG9Xo/pJKTaNAm9FoBUCikDENY6nG9uRujsOTfTrg86pZK0ozZ3nL2D555/Dq0VrVabOI4pipwnv/wVdnd3aWUZcRTNWKZEag2EaJybFAKtQo/5RtvrAuyjH/5Zv33tGmfPniKJYuqqYKnXJ40Dve52OxR1qBXOOpQMXlgrhQAiFdKW9zOCUVV0ul200hzs7zOZTBHCs7GxQb/fZ2tri4P9fZ599lkirVlbXyeJJ7TaLaIoomlC/ZubEAKpQgo0ziEaj/dzqMAJiPRNgA8ODqhrw8mTJ9nZ2WE0GtFYy513vo3RaERd12xtbaFnpCNJEsTsdyEFeEHjLMpZIisx1uIEFLcQrTfKvmvAfuUjP+/rpuZweEBd11y89BKbm5vURUm/30dKQVVVxHEc0qK0eB96JghKOoS6Vdc1AEpriqLg2tVr7B/sE+mgOlRVxdWrV5FSctfdd5PnObu7u+zs7FDXhm63y/m7z4f38TPGR2gjlNZ47zDW0piGalZD3SwQBktL4e/Osb93SJqmXHz5ZUajUSAr6+tcv36NOIp57rm/Q2lNO44XUwOHXzgdgDEGZx1GGKwxWGvQOoD6Rtp3Bdi/+he/5rvdDtevX+XYsWOkSYI1Dft7+yRRyo0b2ywtDTCNAQ1SSLTSGGsYHo6p65o0TTnYH6KUIokzWlmH7e1tDof7NHVDHMe0W23G4ylLS8ukaQvTGMqyxjtBvz9gOpmQJBZrDH/zv/6GO87egZKK6bRgeXmZi5cvsdTv0coC2ZjmU+IoJs1SpFTBEa5vU9d1SMl1A0jiOKIoak6cOIHWCmMsBwfbDIdDvPd475FaBXIza7SNszhn6PX65HkODbRaLTpZm1hFPM/Ltx/j92TfMWC/+ku/4Dc21tnd3abX6TI5GNLKWkAYLB7uBcbU1DUHh4fISBBHMXEchxQlJdZarLVsnNxgeDhEKomSijRNcQcOIcJrsiyjMQ03btzg9OnTeH9TNpJK0u8vBaIwDUrG1WtXGY0mrBxbCc14px/6KilpjAmKvI7QSuO8xzlLXoT3i+KYKI5J4ozRaESWpUynOdWwJM8LyrLEWkekNVIqhJZY62iaBiEFaZoSRRECRafdBkJ0G2sw9ugU/I2wbwvYQ/c/4Nc3jrGytMx4PJyxpAJja6xraGUtslaGRHDjxnWsbeh2WxR1g3NQVSFqBoMBSZIwGo0QQoQ6MGt+kyRhY32D0WhEWZaMRiOUVqyurtLv97l65eriNWmaLgq6EIL+Up9up8vOzh67u7vs7e6xvLzM3sEBSRpxcHDAYDCg1+vhmtCbjcdj2q1wuHMrinKW7lQQnF2N9x5rDe12C2NC6vMEUuGj4BBRFOGlwHtmBAQaa4itY2NjA556+pZP+d7t7wVsTt2TJOHgcJ8sSxmPhwgPk/GYoiiQEpI0QilJu90mSQLxWOn0aEyDNTZEw2RCv9/HWotSKjC2WT1QSmFtqAlRHBHHMWma0uv1qKpqNu9qcDPP9s6TpinWWZo6HGy328V7z3A4REpJkkZIoWlqQxQlTKcFQgjyac5wOGRpsERd15RlSVVVOEtgndMp6xvrDC+H3hCY1cfAbiFEeavVxhhLYw22thRFTXvWd06nOe20RT6d8uu/+iv+P/3+H7xh1P5bAvYvf+2X/Wg4pNVqc3Jtgxvb12iqegFWbybyZWkb7wSNteRliSOMN+q65uDggMlkwng8JooSjh8/zsryCjrSWOuxNtSFY8eOk6Yped5mNBoxzae0uxGNtUTOsbTcI45jppMJjQkRm48LqqpC6wBGp9NhMpkwHA7Z3d1l5fgqWZYRZ222rl7HWYvSmkhrklabq9e2ieOIxtREkeb4yjHUjL2++MKLFFWJ1BFSRxjv8MhAMDwgBHXdYK2ltgbTNHRabbTURJEO9SuO0VHEVy9c4K63nPNaa+Io5qmvf2/T7G8K2EP3P+BfeO55BssDNtY3ePniyyg8UimW+n329nbZOLFOeyb31E1NkRf0ej2EELN0pRgMBkgpWV9fpyqb0FA7i60su7u7xHGMd569/T2WlnpEUUS328V5x7HjK0ip2NraQh0esjwY0F/qY61jNBrhfKh5YbgJ+/v7rK2vYW2IhKZpWFleJi8KIq3xSmGdoygKjLWkWUrTNJw4cQJjmkWkDYdDDoeHpK0WIQmC8x7vb8pkAHGWIoQAKYi0DkDeYo1pFkqOaQzWWiKtuffd7/Lj8YRnn3v+dQH3TQFT2tHr9ej1euzs7ISxR5lTVRWmqVheXqHf7+O9p8gLxIzKtzttTGOo6xqlI65cvUKWZrz66iuc2jy7SJej0Yh+vx8A8x5jDUkSo5RCziShOI559ZVX6fV6FEXOCy/u0WpleOeZTCesLh8PqS9JiOM47HmMxywtLYXWQUouXrq0WB9I0xQ5A1MIQV3XdNptbty4QafTJh8XjMdjpvkUa2xIvbMj9d7jnVjIYlIIptMJSmnErN+T4uj5j8djkiSZnd8SxhrquiFpteh2O7z3Pe/2cRyxu7v3XYH3GsA+9JM/7quqAgm7u7ukaRZyvKk5c/YsN25cJY5jpJKURRm+jA1aX1EUOOtmIw/N+to6zjlWV1epyoa6vln0N9Y3yIsc74PwqiOJsw5rLcZZtl56FWMsvV6PtbV1lJLs7u4yGo3o9Xp4H2qejoLKLqWk1+uxvb2NMYZJPsU6x6WLFzmxthbSYxzTareDAq81+XSKVH2m0wnDyZgin6KkorvcYzy9KVY7L/A+9JMAxjpsXQXSMXO0WCdIebPvinREPs1J0ww168f6/T6dXg/nLNNpTtMYOp029937Hj8cDr8j4F4DGNahhGBpEAr+4eEhq6ur4DTf+MY3iOOY06ePMS0qQCAkaK1Y7q8wHo/ZG+2RJAnWG1wNWilG0wlaKbI0pTYVx46vELdiVCypmyasAAjBuByHdJWmvOXcnUiliLRGaY01ho31TQaDsHjjvKcsS3qdkIadhdoYWp0ud5x7K1orLl9+he3tbXZ39jk8GLK6ukqrnYVZXVGQZhm7W3tsb2/jZw29cZbD8YgkCeLwnNl6J3DOY/EIIVEy1DTXOJQIMlXIFhasZTwZ42yQvKyxLA2WaJqGyXAUJuidLsYaGmtxztJut7j7bXd64O8F7ghgD93/gJ+rDzdu3KDf75MkCdPplEiFgr25uUlRFGRZNvPUmwpDHMecPXuW6zeu42EhG3U6HSKtaYxheWWFoiiIdISSEqU1WZbhvEcnMcYYhJDcesXzFGlnrDJLU1566SWiOKbb7QYikWSUZclkttLW7XYZDJbZ2tri2WefDUuk5jrvf//7qOuaLMt4+ulAua0xMEttc6uqKjT9MvRxbkYSa9PQmNBfCSGwzsHszKQQi5lZ0zQoGVJ8mobJ+602Z73WGax17OzskKYpcRzznh9+p3/yf3/z5Z8jgBXFlDSJsNbQ6bQYjcI++srKCrvbO2xubtI0De1WiygOUpMUIU2Mx2MGywMO9g8YLA2oTcPVq1d52113YWdRc+3qVQA67TZ1UyOECAKqVCAFWSubrQUUmNl8DEINEVKilUIrhbGWu8+fB4KTXLt6laWlQD7mJGRvbx/vg4evrKzw6quv0DSCr37ta3gX9jsAiiLQ/aNwhchy1jGZTJBKIoQmSRISJRe1DG6CJhqDkAI5i9RwzaF3nNfuW20+zTCzCFMqbH4ZYzHG8vYf+EH/tb995jWgLQB76P4HfFnlNHU9OzhDr9djc3OTg4PD8AVcUDWU1rcU2ZsXf/nSZVrtFqkMHqW0xjQNvV6Pi5cucezYMfLplN3d3UCxo2ihfCMFqU6RQmCtxTu3EFhvt7kI672nKAquXLnCZz/7GFqroFzoiDyfLojRlStXQtQKwc72Hnkedj+yVmvhNLeRvEUP1piGXqvHdFLQyjKSOEWqMLici85CCLx34CRehNqqZpGVfZPoArDO4pzDzf5UM7IVvr/BWc8P3n3eP/PsN46AtgAsz3MaU6EllLsFp06fJIliismUpV6PNAoNbVmWtFstvPeMx2P2Dw7Y3d3FOcf58+dx3lObBuf9ggQorRksLVHkOZ1uN1ygCopCWZZ02h2qJjSxTROGoDLSaB0RxRHzVYA0zULDXpYsdZf4vd/7zyilOX3mNL1eD2sNTRNWtI2D7b0DrDEIFaKusR4EZO1uWCp1nropqRpDr7dEKwtpdWdnh3Yv7JQkWUbVNOg4Zntvl16vh1aaSIfB6WQ8RipFkgSaP/8hihagp2mKMRVKaZz0FIUjijS9Xo/9/X1GoyECEM5jXEi3raxDU9W85x3v8k9eeGoBmoZZ7WpqhPAo4WmnLSKtEULgXFAXVldXGY1GLC0tUZYl4/GYZ555ht3dXZYGA86eOUOWhULtnKMsS5y1tNptlJSMypJ8Ol00lBD2BL33jCdjmC2HChGUDyHCtNdaS57nJEkyaysMX/nKk4wOA/EQ8+LybWzenyFCyirygvncLooigrJvcN4v0v2tpiPN8mAZpYNK470nUrPsQFDrAYSUSCEQM2Y4B00ID4ThK0CStLl27RrGGLz3NE14/bwOGhN6t/l049F/98kHHv7Njz++iLA4ijHC461BxTpQdymxzuGqitFohFSKsiz5u+ee46WXXqLf73P6zBkirVnf2FhQe6Qk0praBwlpPB5TVRUn1taAMGq3xnDu3DnSLGNleZnhZDwDK6jmQkiMaRBC0O/3mUwmPP7447NWIyWflgyWBxweHLJ19UoQdkUYn8xHKLfaArDZCNNZR+QjRKzRs2Wcum7w3oUbK8TNRlmIQHrSNMWaUHOMDZJbGAU5PLMG2wZQFBatNeCpqmLmFIFheu85PAzSl5SSsizRKiIMXsO1OGdQWtKYirefv9s//JsfF5/4N594hwb43F8+Lu67970+jTQqSsinOXp9De89zob+o6oqdnZ2eOmll0mShH6/z8b6Ov2lQFeVDEq9mxEMnWUMZzcn7O7tEc2ouVTBQ421PPXUU5w/f56trS02T59Ca42UYVJdlOUspd7gS1/6K1588UWSJKEsi/CFvKcswqpc0xi0Cr7nvkXEeT/fBwmAzYmAMQ3WGtJU4WwgDlEc09T1Leph6Kucc9RNTbvVQtQN1tmZgB1hjQUfXjGPCmAG2k2HMcagtcbaIDCMx2OWlwcs/IkZYZk5ya32iX/7iQuLCOt2u5iqZnv3BiuDPpcuXqTd6SBEUDG89/T7fdbW10L/o7tsbGywtbUV5B1rEXVgfs5a9oZDtFIURcHyYEC312N3ZwcpJadOnSKOY3Z3dynLkjC6COOXeerrdNrs7+/xxBNPcHh4SG9pgPceFcUYa5FCLHTFLEqpqop8ttmbtTLyssR7hxMO4xuE8HhnUFKRZRlCzutNSGFNWYVVtpnHI1hM0Ju6Jp+MSJIErcMtT4PBMmVZ4kVI/0ortNCz7xNhXdAarQ2RlqaB4AghwId71Zz19HpLRFGK1kEMn6dIuJlOb7UFYH/xuc+KH73vfb7VauGQTKZBKVgeDFhZCU2xkhLngoa3NBiEHqvb5cTaGvt7ewBEOtDTeQ2cqwrW2hn1X+bMyZML1vj000/zrne9i1arTVkWge4ay9bOFp///OeRUmKMpagm1HVNr9fj9OnT7G3vIGTYnRBCLOZb87pkrcUYM4sgF+qKkOgopPskScIBzoArZ9vFxswUDXE0r84dKRLJQgabR5KOImwdnGhuYSLhcM5jjFmIA0JIrJytlmcZ0Yyc3B5N8yi73Y70YVmakqWBuZ08uUFRTBlOxjTOgg/ibzQL8bUTJ5jmORsbGzz77LMsDwaL/mQOklYq7PUpxWg04vjx43S7Xa5dv87Ozg7j8Zh3//AP0+502NvbpdVqIaTgcDjksccew9qw4mZMQ7e3xGg0omnqoDzIoO01dRUOQ2u0VgipGOfTI2BBOAAl5aIWJUmYxy2izIfVublwIMXNo5lnmaIoKOoKpYITeR+UDwChACVAerzySC8AiVIER5iRivlnfntzcEQ+CHYEsM8+/ph48P3v93Ec46xDqQh86A+UCo1r2JXwsyGj5uLFi3S7gQJbYxZeliTJAjSpFCvLyygdUsbLL7/MdDJheWVl4bnAYkTy13/9V0yngRkCZFmbpmnIsgylFHmeL9LNvB9aXV1Fa810OuXg4IAo0guwIAAmZVhZuN2bITTgeVFgjEXdpnrMLcsynAipSim9IB/GmMWNGEKEXurWoxYi7PM77+cllCRJQs13jizLFmnw29kRwAA2Tm2yc/06OknZu34DIQRpllJUFXFj2N0/IMta3NjdI45irIPlY8eZjMfoaNatFxUq0mRa0zhLVeSsrW1weHDIX37xL8myFoPlY9x9/gfCOoEQCKHAS/Jpyc7O3kxyipgLp/bWdWCgaQqc9WRZm+PHuxzsHyz+rdvpU9UFeiabzVNTHMcMlgfUdY01Fqlk6KeUJ4oSojilbix5UdBSCuksUiqkCsI0BJlgrkYAIAKxsMagtKbdboco9eK2rBpq0/xnQUJsmAzcqoZIKTFNYJ5VVfHq9euLd3oNYH/wX/6reOjBD/h8OmVpsASAihIyKcmneThEKdnZ2eHOO99Gu9ViODzEGsvyyjKmCbsMWRbSjnOB/j7/3PO8/PLLtFptzp45Q3+pT14UZGmK0sEDL7/yCl+9cGExvvfeY2epx7jA8uaeaGderZRiPB4TxzfX1gAac2vBlnjj0FFE04TtptttXh+tc7Tbbcbj4UJ9uD2Fza/Be3+khZDeY2fXeDTGZv2lBOvCzRjOWoSQIMP7VFV1pAbaWX1cWVsbvHr9+uLx1wAG8LnHviA++OADvtvpUhR58B4psS6MO3Z2dsiyFjs7OySbm/T7SxRFvhh9WGeRUuBcKK7T6ZRpPiVJkqBHmjDmj9OwGLO3v8d4PKauG6b5FCEEzjqsCF7ovcfNJ74zi+Z9og1rAnPR1bvwnLmmON9H9DZogfODuR2EpmmCqJ2m7O/vA+HQpJ9pnbeQfCEEc1nq1sCfz9usc8jX+sQCNAifJ4RHofAzPfbWl2ilefHyZcHWlVse/RaAAfz5Y4+Le++5xw9WVvizz39eANx7zw/5NE3JWmFGVlcVcRxIhVaaNE158stP8s53vpOqbBCyZjqdMhwOsbO7Uq5eu0q/3+fS5cshfTZhY3hnZ2eReuZapZ2lHaUVcRS2r+YWRRGTyYSmrlFaMx4HfXBunU6HcAThhJSURJE+onDc/nwhxGLwaG2DsQZrBCJ6bfGfO4+YMWdnLWZ2fc7aRXwJERwdQEm1AE2IsNM4/7f54uvcXrx8+bUfyt8DGMCXv/rVIy/6sQcfuuPC179+cTKdYBycWDvBha89w+bmJp2sxc7OHlnWnv2ZsHVli4P9A5QOu4BZ1uLKlavs7u7NDjoAobRmsLLKNJ+SpSnTPA+y0ywSPIEsCCGCfOQc+bTAO4FSgSBFs5v65qDOI0DJcBA6SSmqhijNZg14CUickEgRJgBzEqB1UE2EF1gP3nqYqSEQwFJSE7cSyqK4qU5Yi/QS4cOiqZrVPx1pQC6iP1hNHEXMl02LugolxDoub736TcGCbwPY7fbvP/WpS4C49557vNaK8WTMHWfPsru7x972DtY5rAkC7PbONeY3RqRptpg2Q1AjWu25Uh50Q2MDw6yq0KTXsyZ8/hwdRQgRtE1rDMaERvPWFexvZvNWQ808GoIstfBwM6tpzlE3zWKQqaSCKCgUzrrX0PG4FRwknemnAGVRBBCnN+/Umb/G2VC75jZniWFDOCJNM16+dPFbAjW37wqwuc0j78M/89N+OrsRXClFXhR458jzIPJC0OesCV/auTAMnIPqfdi9997T2HCD3Vx6ut3qul4UZWPtgrI77/Hu6Nr0N7MAfEi5DUGjDI4R9ENccAAhgiRkXLgnAMCJo4cNYGYRvPh7bQFxBKxb7faUV9c1SZIQZ66i2EEAAAHrSURBVEloupPojiNP+Bb2ugCb26f/x/8UAP/0J37cm6rm7rvuIo5jnnnmGVZXVznYP6BpGuJWhnKapqjIVIRpLO1WJ/QwTYMxhryaEkcpVdUQxYEgwM2DrqrqCLG4dYj4ndiChLgQVVEc9uRDnbpZc5IkQUqJFCEqFqDNIm9u3twkNN/OpAi3R91qcRTTuAD68xdf+raRNbfvCbC5feYvPisA7r3nHt/qdMjaLYSM6PTCKCakOegPVsiyjLzcZjwNdcq7MJntdvqApNU+qp/VdTjQNA03yhlr8M5z6cq3zvO32r3veqff3t6mLEqEvMnuKEIkB3ISHCNLUw4ODwGObAYrqVBSUTdBBQFCiiSACYHazEcsc7u91RiNDun1lmY1Db729b/9jr7DrfaGADa3L3/1q+K3H/3kA7/x8Mcfv/eee3yn31tcnPfhUA4PD+n3+2zv3OwtADrtpSN/zk2I8H9neO/5+t8dnb5+J/blp27uRpzdPHkkLC9tXRGPfvKTDzz88Y8/fuvjjz7yyM+lSl34D7/7uxdvfTyObiokjTmaEuFmFM8t3GQR7Kc+9BMPPvKpRx6Hyzef8DrsDQUM4DceDl/+dob5ZrBLW1dec023gwXw8Mc+9oezX1/z/Ndrj3zqkdsfel32fwDDK8fOAdETBgAAAABJRU5ErkJggg==",
                    brush: "wall",
                    threshold: 50,
                    randomFlipHorizontally: !0
                }]
            }
        };
        static CABIN = {
            info: {
                displayName: "Cabin",
                category: "template"
            },
            action: {
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAkCAYAAAD2IghRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFcUlEQVRYR82Y3W4TRxTHf7vetb2Osd2AY18kogqpKkETSC7sUEEAqep9L7jhEfoYfYA+BqqUN6hUKNyUQgnioxcVigOqIR84ITHGG3u9M73YzHr9tXZIgP5udj1n9sx/Zs7MmbHBR2Jp6YpsNBrEYjHu3r2jdduPitFdcFQKhaKMRCIIITCjJq5wKRYXpXBdHvz14Ng6cGzCFxcvSiklZtRESsne3h5CCPSITjqdRkqDQqEodV3n3r0/Ojrww/ffyWjcwjRNIhqsr67x66NHoZ08kvCrV69JIQQArnABqO5VAZg91fDrPduuIqUkeSKJrutcvrwkTdPk1q3fNAApdVxNx2jYtAwTDc9nGB8k/NKly9JxHFzXE4sWFNwCXBJWEoBkMsY3bAMRnlZqaJpGOp2m6TQpFhclQHlnh7NGlpZpEDUMNEIHGzik8Pn5BRkxImi6hhk1/XDQNK1HcCrlPROWQa3mvc+eqgHw5I1A13VS6RS6piOiJk/WN4jHY3w1cRLDjDOMocILhaJ0HAdN00ilUriuy9udtwghuJCTgDfqSrAiYRnU7RZRa4x8zivb2PSec9kaEOHx1luklEQMgy8yGVzh8uzf9fZMhjBQ+MWL30p73yYej2NZFltbW+zv7wP4goNi1Qgr6nYLgN2dPb9M1UkmY9RqDc5PeDMAksdb28RiMVKpFFJKLlyYl/F4vGchK3qEFwpF2Wg2MAyDdCpNpVJBCMF8Xo1ChIRlkc9lfHGHRddN8jnLnwHgoBOCv3dcHMchm80ipGB2dk5alsX9+392dMAXfuXKVbm/v080GsWMmlSrVYQQnJ9wgHYo5HMZ9QmZ8bT/Dt7oqrLgSHfXU+RzELXGAGja79nY3OXcuFoH2+i6TjrjfVssLsp4PM6dO79rAEahUJQArutimIa/4OayLuAykT1JrdboEKxo2u+7i0YuUwQ7mM9l2Nj0QmmOXcDlaWUPNDiRSuEKl0KhKKUQGG6rhSsFTsvBaTrMZZu+I4CtN9sAlF6oePz41O12W7OnvBB9WqliRk2EK7xBfrjy0I+dG9fOyukvJ/2PwFtkCatnKXwG1rl5+4mvtUfRxubuwZTtAt60qWrK9qlRWoL0CK/btY6wqNs1tt607Z8yZDqJdPzqEa52j7ptk7CsLuunJaihbtsdth7h7TDpzV7BvTszng7dLRT9pnl03I6wDdIjPMigbAid21gY3T5GJWEZlF7UBia5UOFBNjY3uosAyOfy3UUjcVR/ocLVQSkznubnX/pfv3768WvZXaYyaPAJXnip95u3/wn1NywMQ4Urwpw07ff+dKqOQjuU1DNhGSOFl/I3LHeEWw8YFGfQaRu1Xhij1gsVHrXGiFrhCzFhGf5BKXjI6mbQAawfg3wECRUeDINB1O0WdbstJExUmC3I7s7e0UJlmOiPybC2Q4VXq7WRLwxqYQ4aqaBtmL+EZfRNOkH6t3JAKpUc2ohC1QurH2YLUrdb5HOZ0HNRqPDg9vZ/I1S42lUAblzrTTQw2g7Qj2H+wnIHDBEeTAbdFwxFdwIKI1hvFH9hhLd0wCiO4HjrDRuEcCsfHgqHYadSASA5ZnXc+sMYKnyYg+MgOda+sHS3l7AMqt7fkh30CC+9KPd9/1y0NQy4ui0tLcnGeBYpJeVymcnJSXRdR9O802epVOLMmTM4jkO5XGZqaopIxHOmaRpS9t0kBqL8qj9Ng5RKJaanpwFotVq8evWKqakprl8/J5eXlzU4ED4/Py+r1Srv3r1DSommabx8+RLw/ihSjp8/fw6AlJK1tTUOy8zMTMdAqM7qus7k5CSvX7/m9OnTzMzM4Louq6ur/rerq6vous7CwoJcWVnR/gMS6rip19cCIwAAAABJRU5ErkJggg==",
                brush: "wood",
                threshold: 50,
                randomFlipHorizontally: !0
            }
        };
        static SUSSYBIG = {
            info: {
                displayName: "Peary",
                category: "template"
            },
            action: {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "wood",
                threshold: 50,
                randomFlipHorizontally: !0
            }
        };
        static SUSSYBG = {
            info: {
                displayName: "Peary BUT DED",
                category: "template"
            },
            action: {
                type: "image-template",
                imageData: "data:image/png;base64,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",
                brush: "wood",
                threshold: 50,
                randomFlipHorizontally: !0
            }
        };
        static SAND_CASTLE = {
            info: {
                displayName: "Sand Castle",
                category: "template"
            },
            action: {
                type: "image-template",
                imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAIAAACtuNvgAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB5UlEQVQoz1XPy04UURAG4Ko6t+6eGRkl0dGFLly5cOv7+AY+itEVCStDfBg1JhICbCQIiAmCc6FP97mXi9EJXZtK/sqXqkJmhv91/PktM7x49QaGdXm4x0pnZ5++fL1OaDM7P9xTciyFPjv4cNecfNsNXNq+db7bjP6x7193gm+ZgtYm39l/9OW9QIyu7RZXRCJEu87luuWcfAqCBI4m2S83rGqmSjYo+8RBCIopDpjSejJ9kktw3UKresNyDq1tkaCutr1bNM10wLgU2/8uIIiZVLVh3t4KIgAjuDeqRlSD33rf3c7n7B0i9N31yf7OOp9OtsfjSVOJ5eImINjuarDtwfaz7Nu2W6ZUtBzZdnV6sAfF5ZRzSYXTw9lzSiUgDdhq+ROZiFDryvteG/3j9Hz2eAqcYvKVHvlu7r1HMoMjjW6kFjFGH3pTVecXNyH4s4s5AxOqEJ2WtRSKsx8w26+8d1LKVLK1rTENQ/ZuRUjj5p5UCjAT4mRrNmBaGYGaGaaTR3XdWLtS0milS4JbO/fe9a6PzDEsTvd3AQCZ+ejTu7oaMRdEijGQaUK3ICRCAYBAzBliDve3Zi4scyopR/nr+CMAh9gJKQVr57sGBQNoo4Gxd50RlaxlA+M/y0sSJiUrSf0F+OQcr89DEA8AAAAASUVORK5CYII=",
                brush: "sand",
                threshold: 1
            }
        }
    }//brushes.stuff
    
    class q {
        static DEFAULT_SIZE = 6; // the all importena brushes.size   AAHHHHH YEEEEEEEEEE
        static NARROW_SIZE = 1; // the all importena brushes.size   AAHHHHH YEEEEEEEEEE
        static CATEGORY_BRUSH = "brush";
        static CATEGORY_TEMPLATE = "template";
        static CATEGORY_SELECTION = "selection";

        static NONE = K.actionTool((() => {}), new b({
            codeName: "none",
            displayName: "None",
            category: q.CATEGORY_BRUSH
        }));
        static ERASE = K.roundBrushTool(F.AIR, q.DEFAULT_SIZE, new b({
            codeName: "erase",
            displayName: "Erase",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#e6e6e6",
                color: "black"
            }
        }));
        static PRECISE_ERASE = K.roundBrushTool(F.AIR, q.NARROW_SIZE, new b({
            codeName: "erase",
            displayName: "Thin Erase",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#e6e6e6",
                color: "black"
            }
        }));
        static MOVE = K.moveTool(13, new b({
            codeName: "move",
            displayName: "Move",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#e6e6e6",
                color: "black"
            }
        }));
        static SAND = K.roundBrushTool(F.SAND, q.DEFAULT_SIZE, new b({
            codeName: "sand",
            displayName: "Sand",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#b7a643"
            }
        }));
        static SOIL = K.roundBrushTool(F.SOIL, q.DEFAULT_SIZE, new b({
            codeName: "soil",
            displayName: "Soil",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#8e6848"
            }
        }));
        static GRAVEL = K.roundBrushTool(F.GRAVEL, q.DEFAULT_SIZE, new b({
            codeName: "gravel",
            displayName: "Gravel",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#656565"
            }
        }));
        static COAL = K.roundBrushTool(F.COAL, q.DEFAULT_SIZE, new b({
            codeName: "coal",
            displayName: "Coal",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#343434"
            }
        }));
        static THERMITE = K.roundBrushTool(F.THERMITE, q.DEFAULT_SIZE, new b({
            codeName: "thermite",
            displayName: "Thermite",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#914e47"
            }
        }));
        static WALL = K.roundBrushTool(F.WALL, q.DEFAULT_SIZE, new b({
            codeName: "wall",
            displayName: "Wall",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#383838"
            }
        }));
        static PRECISE_WALL = K.roundBrushTool(F.WALL, q.NARROW_SIZE, new b({
            codeName: "wall",
            displayName: "Precise Wall",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#383838"
            }
        }));
        static ROCK = K.roundBrushTool(F.ROCK, q.DEFAULT_SIZE, new b({
            codeName: "rock",
            displayName: "Rock",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#383838"
            }
        }));
        static PRECISE_ROCK = K.roundBrushTool(F.ROCK, q.NARROW_SIZE, new b({
            codeName: "rock",
            displayName: "Precise Rock",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#383838"
            }
        }));
        static ROCK_TEMPLATES = K.templateSelectionTool([X.ROCK_SM, X.ROCK_MD, X.ROCK_LG, X.CABIN, X.SUSSYBIG, X.SUSSYBG, X.SAND_CASTLE], new b({
            codeName: "rock_templates",
            displayName: "Templates",
            category: q.CATEGORY_SELECTION,
            badgeStyle: {
                backgroundColor: "#800080"
            }
        }));
        static WOOD = K.roundBrushTool(F.TREE_WOOD, q.DEFAULT_SIZE, new b({
            codeName: "wood",
            displayName: "Wood",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#573005"
            }
        }));
        static PRECISE_WOOD = K.roundBrushTool(F.TREE_WOOD, q.NARROW_SIZE, new b({
            codeName: "wood",
            displayName: "Precise Wood",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#573005"
            }
        }));
        static METAL = K.roundBrushTool(F.METAL, q.DEFAULT_SIZE, new b({
            codeName: "metal",
            displayName: "Metal",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#7c7c7c"
            }
        }));
        static PRECISE_METAL = K.roundBrushTool(F.METAL, q.NARROW_SIZE, new b({
            codeName: "metal",
            displayName: "Precise Metal",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#7c7c7c"
            }
        }));
        static METAL_MOLTEN = K.roundBrushTool(F.METAL_MOLTEN, q.DEFAULT_SIZE, new b({
            codeName: "metal_molten",
            displayName: "M. Metal",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#e67d00"
            }
        }));
        static WATER = K.roundBrushTool(F.WATER, q.DEFAULT_SIZE, new b({
            codeName: "water",
            displayName: "Water",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#0487ba"
            }
        }));
        static PRECISE_WATER = K.roundBrushTool(F.WATER, q.NARROW_SIZE, new b({
            codeName: "water",
            displayName: "Precise Water",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#0487ba"
            }
        }));
        static FIRE = K.roundBrushTool(I.temperatureOrBrush(50, F.FIRE), q.DEFAULT_SIZE, new b({
            codeName: "fire",
            displayName: "Fire",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#ff5900"
            }
        }));
        static METEOR = K.meteorTool(new b({
            codeName: "meteor",
            displayName: "Meteor",
            category: q.CATEGORY_BRUSH,
            badgeStyle: {
                backgroundColor: "#ff5900"
            }
        }));
        static DEFAULT_TOOLS = [this.ERASE, this.MOVE, this.SAND, this.SOIL, this.GRAVEL, this.WOOD, this.ROCK,this.COAL, this.THERMITE, this.WATER, this.ROCK_TEMPLATES, this.WALL, this.METAL, this.METAL_MOLTEN, this.FIRE, this.METEOR, this.PRECISE_ERASE, this.PRECISE_METAL, this.PRECISE_ROCK, this.PRECISE_WALL, this.PRECISE_WOOD, this.PRECISE_WATER];
        static TEST_TOOLS = [K.pointBrushTool(F.GRASS, new b({
            codeName: "grass",
            displayName: "Grass",
            category: q.CATEGORY_BRUSH
        })), K.pointBrushTool(F.TREE, new b({
            codeName: "tree",
            displayName: "Tree",
            category: q.CATEGORY_BRUSH
        })), K.point2BrushTool(F.FISH_HEAD, F.FISH_BODY, new b({
            codeName: "fish",
            displayName: "Fish",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_BURNT, q.DEFAULT_SIZE, new b({
            codeName: "effect_burnt",
            displayName: "Burnt",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_NOISE_SM, q.DEFAULT_SIZE, new b({
            codeName: "effect_noise_sm",
            displayName: "Noise SM",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_NOISE_MD, q.DEFAULT_SIZE, new b({
            codeName: "effect_noise_md",
            displayName: "Noise MD",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_NOISE_LG, q.DEFAULT_SIZE, new b({
            codeName: "effect_noise_lg",
            displayName: "Noise LG",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_TEMP_0, q.DEFAULT_SIZE, new b({
            codeName: "effect_temp_0",
            displayName: "Temp 0",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_TEMP_127, q.DEFAULT_SIZE, new b({
            codeName: "effect_temp_127",
            displayName: "Temp 127",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_TEMP_200, q.DEFAULT_SIZE, new b({
            codeName: "effect_temp_200",
            displayName: "Temp 200",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.EFFECT_TEMP_255, q.DEFAULT_SIZE, new b({
            codeName: "effect_temp_255",
            displayName: "Temp 255",
            category: q.CATEGORY_BRUSH
        })), K.roundBrushTool(F.ASH, q.DEFAULT_SIZE, new b({
            codeName: "ash",
            displayName: "Ash",
            category: q.CATEGORY_BRUSH
        }))];
        static _LIST = {};
        static {
            for (const e of [q.NONE, ...q.DEFAULT_TOOLS, ...q.TEST_TOOLS]) q._LIST[e.getInfo().getCodeName()] = e
        }
        static byCodeName(e) {
            const t = q._LIST[e];
            return void 0 !== t ? t : null
        }
    }
    class J {
        static EVENT_NAME = "app_sand_game_js";
        static FEATURE_APP_INITIALIZED = "initialized";
        static FEATURE_SCENARIO_COMPLETED = "s_completed";
        static FEATURE_RENDERER_FALLBACK = "renderer_fallback";
        static FEATURE_PAUSE = "pause";
        static FEATURE_DRAW_PRIMARY = "draw_primary";
        static FEATURE_DRAW_SECONDARY = "draw_secondary";
        static FEATURE_DRAW_TERTIARY = "draw_tertiary";
        static FEATURE_DRAW_LINE = "draw_line";
        static FEATURE_DRAW_RECT = "draw_rect";
        static FEATURE_DRAW_FLOOD = "draw_flood";
        static FEATURE_STATUS_DISPLAYED = "status_displayed";
        static FEATURE_OPTIONS_DISPLAYED = "options_displayed";
        static FEATURE_RENDERER_PIXELATED = "renderer_pixelated";
        static FEATURE_RENDERER_SHOW_CHUNKS = "renderer_show_chunks";
        static FEATURE_RENDERER_SHOW_HEATMAP = "renderer_show_heatmap";
        static FEATURE_CANVAS_SIZE_CHANGE = "canvas_size_change";
        static FEATURE_SWITCH_SCENE = "switch_scene";
        static FEATURE_RESTART_SCENE = "restart_scene";
        static FEATURE_SWITCH_SCALE = "switch_scale";
        static FEATURE_IO_EXPORT = "io_export";
        static FEATURE_IO_IMPORT = "io_import";
        static FEATURE_IO_IMAGE_TEMPLATE = "io_image_template";
        static #X = new Set;
        static triggerToolUsed(e) {
            const t = e.getInfo().getCategory();
            if (t === q.CATEGORY_BRUSH) {
                const t = "brush_" + e.getInfo().getCodeName();
                J.triggerFeatureUsed(t)
            } else t === q.CATEGORY_TEMPLATE && J.triggerFeatureUsed("brush_template")
        }
        static triggerFeatureUsed(e) {
            J.#X.has(e) || (J.#X.add(e), J.#q({
                app_sand_game_js_feature: e
            }))
        }
        static #q(e) {
            if ("function" == typeof gtag) try {
                gtag("event", J.EVENT_NAME, e)
            } catch (e) {
                console.warn(e)
            }
        }
    }
    class Z {
        static addContent(e, t) {
            if (null === t);
            else if ("string" == typeof t) e.textContent = t;
            else if (t instanceof Node) e.appendChild(t);
            else {
                if (!Array.isArray(t)) throw "Content type not supported: " + typeof t;
                for (const n of t)
                    if (n instanceof Node) e.appendChild(n);
                    else if ("string" == typeof n) e.insertAdjacentText("beforeend", n);
                else if (null !== n) throw "Content type not supported: " + typeof n
            }
        }
        static setContent(e, t) {
            e.innerHTML = "", Z.addContent(e, t)
        }
        static putAttributes(e, t) {
            for (const n in t) {
                const r = t[n],
                    s = typeof r;
                if ("string" === s || "boolean" === s || "number" === s) e.setAttribute(n, r);
                else if ("style" === n && "object" === s) Object.assign(e.style, r);
                else if (null !== r) throw "Unsupported attribute type: " + typeof r
            }
        }
        static create(e) {
            const t = document.createElement("template");
            return t.innerHTML = e.trim(), t.content.firstElementChild
        }
        static element(e, t = null, n = null) {
            const r = document.createElement(e);
            return Z.putAttributes(r, t), Z.addContent(r, n), r
        }
        static div(e = null, t = null) {
            return Z.element("div", e, t)
        }
        static par(e = null, t = null) {
            return Z.element("p", e, t)
        }
        static span(e = null, t = null) {
            return Z.element("span", t, e)
        }
        static link(e, t = null, n = null) {
            const r = Z.element("a", t, e);
            return null !== n && (r.href = "javascript:void(0)", r.addEventListener("click", n)), r
        }
        static button(e, t = null, n = null) {
            null === t && (t = {}), t.type = "button";
            const r = Z.element("button", t, e);
            return null !== n && r.addEventListener("click", n), r
        }
        static bootstrapAlertInfo(e) {
            const t = Z.div({
                class: "alert alert-info alert-dismissible fade show",
                role: "alert"
            });
            return Z.addContent(t, e), t.append(Z.button(null, {
                type: "button",
                class: "btn-close",
                "data-bs-dismiss": "alert",
                "aria-label": "Close"
            })), t
        }
        static bootstrapCard(e, t, n = null) {
            null === n && (n = {}), void 0 === n.class && (n.class = "card");
            const r = Z.div(n);
            return e && r.append(Z.div({
                class: "card-header"
            }, e)), r.append(Z.div({
                class: "card-body"
            }, t)), r
        }
        static bootstrapCardCollapsable(e, t, n) {
            const r = "collapsable_" + Math.floor(999999999 * Math.random());
            return Z.div({
                class: "card"
            }, [Z.div({
                class: "card-header"
            }, [Z.element("a", {
                class: "card-link",
                "data-bs-toggle": "collapse",
                href: "#" + r
            }, e)]), Z.div({
                id: r,
                class: t ? "collapse" : "collapse show"
            }, [Z.div({
                class: "card-body"
            }, n)])])
        }
        static bootstrapInitTooltip(e, t) {
            if (void 0 === window.bootstrap) return console.error("Bootstrap library not available"), t;
            const n = new window.bootstrap.Tooltip(t);
            return n && n.dispose(), t.setAttribute("data-bs-toggle", "tooltip"), t.setAttribute("data-bs-placement", "top"), "object" == typeof e ? (t.setAttribute("data-bs-html", "true"), t.setAttribute("title", e.innerHTML)) : t.setAttribute("title", e), new window.bootstrap.Tooltip(t), t
        }
        static bootstrapSwitchButton(e, t, n = null) {
            const r = "switch-button_" + Math.floor(999999999 * Math.random()),
                s = Z.element("input", {
                    type: "checkbox",
                    id: r,
                    class: "form-check-input",
                    role: "switch",
                    checked: t
                }),
                a = Z.div({
                    class: "form-check form-switch"
                }, [s, Z.element("label", {
                    class: "form-check-label",
                    for: r
                }, e)]);
            return null !== n && s.addEventListener("click", (() => {
                n(s.checked)
            })), a
        }
        static bootstrapToggleButton(e, t, n, r = null) {
            const s = "toggle-button_" + Math.floor(999999999 * Math.random()),
                a = Z.element("input", {
                    type: "checkbox",
                    class: "btn-check",
                    checked: n,
                    id: s
                }),
                i = Z.element("label", {
                    class: "btn " + t,
                    for: s
                }, e);
            return a.addEventListener("change", (e => {
                null !== r && r(a.checked)
            })), [a, i]
        }
        static bootstrapTableBuilder() {
            return new j
        }
        static bootstrapDialogBuilder() {
            return new Q
        }
        static bootstrapToastBuilder() {
            return new $
        }
        static bootstrapSimpleFormBuilder() {
            return new ee
        }
    }
    class j {
        #J = Z.element("tbody");
        addRow(e) {
            this.#J.appendChild(e)
        }
        addRowBefore(e) {
            this.#J.insertBefore(e, this.#J.firstChild)
        }
        createNode() {
            const e = Z.element("table", {
                class: "table table-striped"
            });
            e.appendChild(this.#J);
            const t = Z.div({
                class: "table-responsive"
            });
            return t.appendChild(e), t
        }
    }
    class Q {
        #Z = !1;
        #j = "";
        #Q = null;
        #$ = null;
        #ee = [];
        #te = null;
        #ne = null;
        setPersistent(e) {
            this.#Z = e
        }
        setSizeLarge() {
            this.#j = "modal-lg"
        }
        setSizeExtraLarge() {
            this.#j = "modal-xl"
        }
        setHeaderContent(e) {
            this.#Q = "string" == typeof e ? Z.element("strong", null, e) : e
        }
        setBodyContent(e) {
            this.#$ = e
        }
        addCloseButton(e) {
            const t = Z.element("button", {
                type: "button",
                class: "btn btn-secondary",
                "data-bs-dismiss": "modal"
            }, e);
            this.#ee.push(t)
        }
        addSubmitButton(e, t) {
            const n = Z.element("button", {
                type: "button",
                class: "btn btn-primary",
                "data-bs-dismiss": "modal"
            }, e);
            n.addEventListener("click", t), this.#ee.push(n)
        }
        addButton(e) {
            this.#ee.push(e)
        }
        show(e) {
            void 0 !== window.bootstrap ? (null === this.#te && (this.#te = Z.div({
                class: "modal fade",
                tabindex: "-1",
                role: "dialog",
                "aria-hidden": "true"
            }, [Z.div({
                class: `modal-dialog modal-dialog-centered ${this.#j}`
            }, [Z.div({
                class: "modal-content"
            }, [Z.div({
                class: "modal-header"
            }, this.#Q), Z.div({
                class: "modal-body"
            }, this.#$), Z.div({
                class: "modal-footer"
            }, this.#ee)])])]), e.appendChild(this.#te)), this.#ne = new window.bootstrap.Modal(this.#te), this.#Z || this.#te.addEventListener("hidden.bs.modal", (() => {
                e.removeChild(this.#te)
            })), this.#ne.show()) : console.error("Bootstrap library not available")
        }
        hide() {
            null !== this.#te && this.#ne.hide()
        }
    }
    class $ {
        #Q = null;
        #$ = null;
        #re = null;
        #se = null;
        #ae = 36e5;
        setHeaderContent(e) {
            "string" == typeof e && (e = Z.element("strong", e)), this.#Q = Z.span(e, {
                class: "me-auto"
            })
        }
        setBodyContent(e) {
            this.#$ = e
        }
        setDelay(e) {
            this.#ae = e
        }
        show(e) {
            if (void 0 === window.bootstrap) return void console.error("Bootstrap library not available");
            const t = {
                    class: "toast hide",
                    role: "alert",
                    "aria-live": "assertive",
                    "aria-atomic": "true",
                    "data-bs-delay": this.#ae
                },
                n = Z.div({
                    class: "position-fixed bottom-0 right-0 p-3",
                    style: "z-index: 5; right: 0; bottom: 0;"
                }, [this.#re = Z.div(t, [Z.div({
                    class: "toast-header"
                }, [this.#Q, Z.button("", {
                    type: "button",
                    class: "btn-close",
                    "data-bs-dismiss": "toast",
                    "aria-label": "Close"
                })]), Z.div({
                    class: "toast-body"
                }, [this.#$])])]);
            e.append(n), this.#se = new window.bootstrap.Toast(this.#re), this.#re.addEventListener("hidden.bs.toast", (() => {
                e.removeChild(n)
            })), this.#se.show()
        }
        hide() {
            null !== this.#re && this.#se.hide()
        }
    }
    class ee {
        #ie = [];
        #oe = null;
        addTextArea(e, t, n = "", r = 8) {
            let s = Z.element("textarea", {
                class: "form-control",
                rows: r
            }, n);
            return this.#ie.push({
                key: t,
                label: e,
                input: s
            }), s
        }
        addInput(e, t, n = "") {
            let r = Z.element("input", {
                class: "form-control"
            });
            return n && (r.value = n), this.#ie.push({
                key: t,
                label: e,
                input: r
            }), r
        }
        addSubmitButton(e, t) {
            this.#oe = Z.button(e, {
                class: "btn btn-primary"
            }, (e => {
                t(this.getData())
            }))
        }
        createNode() {
            let e = Z.element("form", {
                action: "javascript:void(0);"
            });
            for (let t of this.#ie) e.append(Z.div({
                class: "mb-3"
            }, [Z.element("label", null, t.label), t.input]));
            return this.#oe && e.append(this.#oe), e
        }
        getData() {
            let e = {};
            for (let t of this.#ie) e[t.key] = t.input.value;
            return e
        }
    }
    class te {
        #le = 0;
        #he = 0;
        #ce = 0;
        tick(e) {
            this.#le++, e - this.#ce >= 1e3 && (this.#he = this.#le, this.#le = 0, this.#ce = e)
        }
        getValue() {
            return this.#he
        }
        clear() {
            this.#he = 0
        }
    }
    class ne {
        static OPT_CYCLES_PER_SECOND = 120;
        static OPT_FRAMES_PER_SECOND = 60;
        getIteration() {
            throw "Not implemented"
        }
        getDefaults() {
            throw "Not implemented"
        }
        trigger(e, t) {
            throw "Not implemented"
        }
    }
    class re {
        getDefaultElement() {
            throw "Not implemented"
        }
        getBrushWater() {
            throw "Not implemented"
        }
        getBrushSteam() {
            throw "Not implemented"
        }
        getBrushGrass() {
            throw "Not implemented"
        }
        getBrushTree() {
            throw "Not implemented"
        }
        getBrushFishHead() {
            throw "Not implemented"
        }
        getBrushFishBody() {
            throw "Not implemented"
        }
        getBrushFishCorpse() {
            throw "Not implemented"
        }
        getBrushFire() {
            throw "Not implemented"
        }
        getBrushAsh() {
            throw "Not implemented"
        }
        getTreeTrunkTemplates() {
            throw "Not implemented"
        }
        getTreeLeafClusterTemplates() {
            throw "Not implemented"
        }
    }
    class se {
        static #de = 34;
        static createFireElementHead(e) {
            let t = r.of(r.TYPE_EFFECT, r.BEHAVIOUR_FIRE);
            return t = r.setTemperature(t, e), t
        }
        static createFireElementTail(e) {
            let t = h.of(0, 0, 0);
            return t = e > 213 ? h.setColor(t, 249, 219, 30) : e > 170 ? h.setColor(t, 248, 201, 7) : e > 128 ? h.setColor(t, 250, 150, 3) : e > 85 ? h.setColor(t, 255, 111, 0) : e > 80 ? h.setColor(t, 255, 37, 0) : e > 75 ? h.setColor(t, 250, 4, 5) : h.setColor(t, 125, 0, 0), t
        }
        #x;
        #ue;
        #me;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        behaviourFire(e, t, n) {
            if (0 !== this.#ue.nextInt(4)) return;
            const s = r.getTemperature(e),
                a = this.#Ee(t, n, s);
            if (a < se.#de) return void this.#x.setElement(t, n, this.#me.getDefaults().getDefaultElement());
            const i = this.#x.getElementHeadOrNull(t, n - 1);
            r.getBehaviour(i) !== r.BEHAVIOUR_WATER ? (null !== i && this.#Ae(i) ? (this.#x.setElementHead(t, n - 1, se.createFireElementHead(a)), this.#x.setElementTail(t, n - 1, se.createFireElementTail(a))) : (this.#x.setElementHead(t, n, r.setTemperature(e, a)), this.#x.setElementTail(t, n, se.createFireElementTail(a))), this.#ge(t + 1, n - 1, a), this.#ge(t - 1, n - 1, a), this.#ge(t + 1, n, a), this.#ge(t - 1, n, a), this.#ge(t, n + 1, a)) : this.#x.setElement(t, n, this.#me.getDefaults().getDefaultElement())
        }
        #Ee(e, t, n) {
            let r = n + this.#pe(e, t + 1) + this.#pe(e + 1, t + 1) + this.#pe(e - 1, t + 1);
            return r /= 4, r < 76 ? 0 === this.#ue.nextInt(2) && (r -= this.#ue.nextInt(10)) : 0 === this.#ue.nextInt(2) && (r -= this.#ue.nextInt(50)), r < 0 && (r = 0), r
        }
        #pe(e, t) {
            const n = this.#x.getElementHeadOrNull(e, t);
            return null !== n ? r.getTemperature(n) : null
        }
        #Ae(e) {
            return r.getTypeClass(e) === r.TYPE_AIR
        }
        #ge(e, t, n) {
            const s = this.#x.getElementHeadOrNull(e, t);
            if (null == s) return;
            if (r.getBehaviour(s) === r.BEHAVIOUR_FIRE) {
                const a = r.getTemperature(s);
                if (a < n) {
                    const r = Math.trunc((n - a) / 2);
                    r > se.#de && (this.#x.setElementHead(e, t, se.createFireElementHead(r)), this.#x.setElementTail(e, t, se.createFireElementTail(r)))
                }
                return
            }
            if (r.getTypeClass(s) === r.TYPE_AIR) {
                const r = Math.trunc(.7 * n);
                return void(r > se.#de && (this.#x.setElementHead(e, t, se.createFireElementHead(r)), this.#x.setElementTail(e, t, se.createFireElementTail(r))))
            }
            const a = r.getHeatModIndex(s),
                i = r.hmiToFlammableChanceTo10000(a);
            if (0 !== i) {
                if (r.getBehaviour(s) === r.BEHAVIOUR_FIRE_SOURCE) return;
                if (this.#ue.nextInt(1e4) < i) return void this.ignite(s, e, t)
            }
            if (0 === this.#ue.nextInt(5)) {
                if (r.getTemperature(s) < n) {
                    const a = r.setTemperature(s, n);
                    this.#x.setElementHead(e, t, a)
                }
            }
            if (f.isVisualBurnApplicable(s) && 0 === this.#ue.nextInt(10)) {
                const n = this.#x.getElementTail(e, t);
                this.#x.setElementTail(e, t, f.visualBurn(n, 1, 2))
            }
        }
        behaviourFireSource(e, t, n) {
            const s = r.getHeatModIndex(e),
                a = r.hmiToFlameHeat(s),
                i = r.hmiToBurnDownChanceTo10000(s);
            if (this.#ue.nextInt(1e4) < i) {
                if (this.#ue.nextInt(100) < 8) {
                    const s = r.getTemperature(e),
                        a = this.#me.getDefaults().getBrushAsh().apply(t, n, this.#ue),
                        i = r.setTemperature(a.elementHead, s),
                        o = a.elementTail;
                    this.#x.setElementHeadAndTail(t, n, i, o)
                } else this.#x.setElementHead(t, n, se.createFireElementHead(a)), this.#x.setElementTail(t, n, se.createFireElementTail(a));
                return
            }
            const o = this.#Te(t, n - 1, a) | this.#Te(t, n + 1, a) | this.#Te(t - 1, n, a) | this.#Te(t + 1, n, a);
            if (0 !== o && 0 == (2 & o))
                if (r.getTypeClass(e) === r.TYPE_STATIC && this.#ue.nextInt(1e4) < 2) {
                    const s = r.type8Powder(r.TYPE_POWDER, 5, 1, this.#ue.nextInt(2));
                    this.#x.setElementHead(t, n, r.setType(e, s))
                } else this.#x.setElementHead(t, n, r.setTemperature(e, a));
            else this.#x.setElementHead(t, n, r.setBehaviour(e, r.BEHAVIOUR_NONE))
        }
        #Te(e, t, n) {
            const s = this.#x.getElementHeadOrNull(e, t);
            if (null === s) return 0;
            if (r.getBehaviour(s) === r.BEHAVIOUR_WATER) return 2;
            if (r.getTypeClass(s) <= r.TYPE_EFFECT) {
                const r = this.#ue.nextInt(n);
                return r >= se.#de && (this.#x.setElementHead(e, t, se.createFireElementHead(r)), this.#x.setElementTail(e, t, se.createFireElementTail(r))), 1
            }
            if (f.isVisualBurnApplicable(s) && 0 === this.#ue.nextInt(1e3)) {
                const n = this.#x.getElementTail(e, t);
                this.#x.setElementTail(e, t, f.visualBurn(n, 1, 2))
            }
            return 0
        }
        ignite(e, t, n, s) {
            let a = r.setBehaviour(e, r.BEHAVIOUR_FIRE_SOURCE);
            a = r.setTemperature(a, r.hmiToFlameHeat(s)), this.#x.setElementHead(t, n, a);
            const i = this.#x.getElementTail(t, n);
            this.#x.setElementTail(t, n, f.visualBurn(i, 2))
        }
    }
    class ae {
        static BLUEPRINT_3 = ["  333", " 32223", "3211123", "3210123", "3211123", " 32223", "  333"];
        static BLUEPRINT_4 = ["   444   ", "  43334", " 4322234", "432111234", "432101234", "432111234", " 4322234", "  43334", "   444"];
        static BLUEPRINT_9 = ["       99999       ", "     998888899", "   9988777778899", "  998776666677899", "  987665555566789", " 98766554445566789", " 98765543334556789", "9876554322234556789", "9876543211123456789", "9876543210123456789", "9876543211123456789", "9876554322234556789", " 98765543334556789", " 98766554445566789", "  987665555566789", "  998776666677899", "   9988777778899", "     998888899", "       99999"];
        static iterate(e, t) {
            const n = e[0].length,
                r = e.length,
                s = Math.trunc(n / 2),
                a = Math.trunc(r / 2);
            for (let n = 0; n < e.length; n++) {
                const r = e[n];
                for (let e = 0; e < r.length; e++) {
                    const i = r.charAt(e);
                    " " !== i && t(e - s, n - a, +i)
                }
            }
        }
    }
    class ie {
        static DIRECTION_FROM_TOP = 0;
        static DIRECTION_FROM_LEFT = 1;
        static DIRECTION_FROM_RIGHT = 2;
        static #fe = 100;
        static #Ce = 255;
        static #Re = 220;
        static #Se = 60;
        #x;
        #ue;
        #me;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        behaviourMeteor(e, t, n) {
            this.#ve(e, t, n);
            const s = r.getSpecial(e),
                a = 1 & s;
            let i = s ^ !a;
            if (e = r.setSpecial(e, i), this.#x.setElementHead(t, n, e), !a) return;
            const o = (-2 & s) >> 1;
            let l, h;
            o === ie.DIRECTION_FROM_TOP ? (h = n + 1, l = t) : o === ie.DIRECTION_FROM_LEFT ? (h = n + 1, l = t + (h % 4 == 0 ? 1 : 0)) : o === ie.DIRECTION_FROM_RIGHT ? (h = n + 1, l = t - (h % 4 == 0 ? 1 : 0)) : (h = n + 1, l = t), this.#x.isValidPosition(l, h) && this.#we(l, h) ? this.#x.swap(t, n, l, h) : this.#Oe(e, t, n)
        }
        #we(e, t) {
            const n = this.#x.getElementHead(e, t),
                s = r.getTypeClass(n);
            if (s <= r.TYPE_GAS || s === r.TYPE_FLUID) return !0;
            const a = r.getBehaviour(n);
            return a === r.BEHAVIOUR_TREE_LEAF || a === r.BEHAVIOUR_GRASS
        }
        #ve(e, t, n) {
            ae.iterate(ae.BLUEPRINT_4, ((e, s, a) => {
                if (0 === a) return;
                const i = t + e,
                    o = n + s;
                if (this.#x.isValidPosition(i, o)) {
                    let e = this.#x.getElementHead(i, o);
                    if (r.getTypeClass(e) <= r.TYPE_EFFECT) {
                        const e = this.#me.getDefaults().getBrushFire();
                        this.#x.setElement(i, o, e.apply(i, o, this.#ue))
                    } else {
                        const t = r.setTemperature(e, ie.#fe);
                        this.#x.setElementHead(i, o, t)
                    }
                }
            }))
        }
        #Oe(e, t, n) {
            ae.iterate(ae.BLUEPRINT_9, ((e, s, a) => {
                const i = t + e,
                    o = n + s;
                if (this.#x.isValidPosition(i, o)) {
                    let e = this.#x.getElementHead(i, o);
                    if (0 !== a && r.getBehaviour(e) === r.BEHAVIOUR_METEOR) return;
                    if (a <= 7) {
                        const e = this.#me.getDefaults().getBrushFire();
                        this.#x.setElement(i, o, e.apply(i, o, this.#ue))
                    } else {
                        const t = (8 === a ? ie.#Ce : ie.#Re) - this.#ue.nextInt(ie.#Se);
                        if (e = r.setTemperature(e, t), f.isVisualBurnApplicable(e)) {
                            let e = this.#x.getElementTail(i, o);
                            e = 8 === a ? f.visualBurn(e, 2) : f.visualBurn(e, 1), this.#x.setElementTail(i, o, e)
                        }
                        if (r.getTypeClass(e) === r.TYPE_STATIC && (8 === a || 9 === a && this.#ue.nextInt(10) < 3)) {
                            const t = r.type8Powder(r.TYPE_POWDER, 5);
                            e = r.setType(e, t)
                        }
                        this.#x.setElementHead(i, o, e)
                    }
                }
            }))
        }
    }
    class oe {
        static #Ie = 20;
        static canGrowUpHere(e, t, n) {
            if (t < 0 || n - 1 < 0) return !1;
            if (t >= e.getWidth() || n + 1 >= e.getHeight()) return !1;
            let s = e.getElementHead(t, n);
            if (r.getTypeClass(s) !== r.TYPE_AIR) return !1;
            if (r.getTemperature(s) >= this.#Ie) return !1;
            let a = e.getElementHead(t, n + 1);
            if (r.getBehaviour(a) !== r.BEHAVIOUR_SOIL) return !1;
            if (r.getTemperature(a) >= this.#Ie) return !1;
            let i = e.getElementHead(t, n - 1);
            return r.getTypeClass(i) === r.TYPE_AIR
        }
        static spawnHere(e, t, n, s, a) {
            let i = s.apply(t, n, a),
                o = 0;
            for (let s = r.getSpecial(i.elementHead); s >= 0 && !(n - o < 0); s--) e.setElementHead(t, n - o, r.setSpecial(i.elementHead, s)), e.setElementTail(t, n - o, i.elementTail), o++
        }
        #x;
        #ue;
        #me;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        behaviourGrass(e, t, n) {
            if (r.getTemperature(e) > oe.#Ie) {
                this.#x.setElementHead(t, n, r.setBehaviour(e, 0));
                const s = this.#x.getElementTail(t, n),
                    a = this.#ue.nextInt(2) + 1;
                this.#x.setElementTail(t, n, f.visualBurn(s, a))
            }
            let s = this.#ue.nextInt(100);
            if (s < 3) {
                if (n > 0) {
                    let e = this.#x.getElementHead(t, n - 1);
                    if (r.getBehaviour(e) !== r.BEHAVIOUR_GRASS) {
                        let s = r.getTypeClass(e);
                        if (s > r.TYPE_FLUID || s === r.TYPE_FLUID && 0 === this.#ue.nextInt(100)) return void this.#x.setElement(t, n, this.#me.getDefaults().getDefaultElement())
                    }
                }
                if (0 === s) {
                    let s = r.getSpecial(e);
                    if (0 === s) return void(0 === this.#ue.nextInt(5) && this.#x.setElement(t, n, this.#me.getDefaults().getDefaultElement()));
                    if (0 === n) return;
                    let a = this.#x.getElementHead(t, n - 1);
                    if (r.getTypeClass(a) !== r.TYPE_AIR) return;
                    if (n > 1) {
                        let e = this.#x.getElementHead(t, n - 2);
                        if (r.getTypeClass(e) !== r.TYPE_AIR) return
                    }
                    this.#x.setElementHead(t, n - 1, r.setSpecial(e, s - 1)), this.#x.setElementTail(t, n - 1, this.#x.getElementTail(t, n))
                } else if (1 === s) {
                    if (oe.canGrowUpHere(this.#x, t + 1, n + 1)) {
                        const e = this.#me.getDefaults().getBrushGrass();
                        this.#x.setElement(t + 1, n + 1, e.apply(t, n, this.#ue))
                    }
                } else if (2 === s && oe.canGrowUpHere(this.#x, t - 1, n + 1)) {
                    const e = this.#me.getDefaults().getBrushGrass();
                    this.#x.setElement(t - 1, n + 1, e.apply(t, n, this.#ue))
                }
            }
        }
    }
    class le {
        static #Ie = 20;
        #x;
        #ue;
        #me;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        behaviourFish(e, t, n) {
            if (t === this.#x.getWidth() - 1 || r.getBehaviour(this.#x.getElementHead(t + 1, n)) !== r.BEHAVIOUR_FISH_BODY) return void this.#ye(t, n);
            if (r.getTemperature(e) > le.#Ie) return this.#ye(t, n), void this.#ye(t + 1, n);
            if (n < this.#x.getHeight() - 1 && r.getTypeClass(this.#x.getElementHead(t, n + 1)) < r.TYPE_POWDER_FLOATING && r.getTypeClass(this.#x.getElementHead(t + 1, n + 1)) < r.TYPE_POWDER_FLOATING) return this.#x.swap(t, n, t, n + 1), void this.#x.swap(t + 1, n, t + 1, n + 1);
            const s = this.#ue.nextInt(ne.OPT_CYCLES_PER_SECOND);
            if (0 === s) {
                let s = 0;
                s += this.#be(t - 1, n) ? 1 : 0, s += this.#be(t + 2, n) ? 1 : 0, s += this.#be(t, n + 1) ? 1 : 0, s += this.#be(t, n - 1) ? 1 : 0, s < 4 && (s += this.#be(t + 1, n + 1) ? 1 : 0, s += this.#be(t + 1, n - 1) ? 1 : 0);
                let a = r.getSpecial(e);
                s >= 4 ? a > 0 && this.#x.setElementHead(t, n, r.setSpecial(e, 0)) : (a++, a > 5 ? this.#ye(t, n) : this.#x.setElementHead(t, n, r.setSpecial(e, a)))
            } else if (s < ne.OPT_CYCLES_PER_SECOND / 10) {
                const e = this.#ue.nextInt(3) - 1,
                    r = this.#ue.nextInt(3) - 1;
                if (0 === e && 0 === r) return;
                this.#Me(e + t, r + n) && this.#Me(e + t + 1, r + n) && (this.#x.swap(t, n, e + t, r + n), this.#x.swap(t + 1, n, e + t + 1, r + n))
            }
        }
        behaviourFishBody(e, t, n) {
            0 !== t && r.getBehaviour(this.#x.getElementHead(t - 1, n)) === r.BEHAVIOUR_FISH || this.#ye(t, n)
        }
        #ye(e, t) {
            const n = this.#me.getDefaults().getBrushFishCorpse();
            this.#x.setElement(e, t, n.apply(e, t, this.#ue))
        }
        #Me(e, t) {
            if (!this.#x.isValidPosition(e, t)) return !1;
            let n = this.#x.getElementHead(e, t);
            return r.getTypeClass(n) === r.TYPE_FLUID
        }
        #be(e, t) {
            if (!this.#x.isValidPosition(e, t)) return !1;
            let n = this.#x.getElementHead(e, t);
            if (r.getTypeClass(n) === r.TYPE_FLUID) return !0;
            let s = r.getBehaviour(n);
            return s === r.BEHAVIOUR_FISH || s === r.BEHAVIOUR_FISH_BODY
        }
    }
    class he {
        static TYPE_TRUNK = 1;
        static TYPE_BRANCH = 2;
        static TYPE_LEAF = 3;
        static TYPE_ROOT = 4;
        static #He = 100;
        static #Ne = 50;
        static #De = 40;
        static #Ue = f.visualNoiseProvider(7616891641);
        static #xe = (e, t, n) => he.#Ue.visualNoise(e, t, n, 10, .5, 1, 68, 77, 40);
        static #Be = (e, t, n) => he.#Ue.visualNoise(e, t, n, 4, .5, .9, 87, 61, 39);
        static spawnHere(e, t, n, s, a, i, o, l = -1) {
            s %= 1 << r.FIELD_SPECIAL_SIZE;
            const h = a.apply(t, n, i);
            h.elementHead = r.setSpecial(h.elementHead, s), e.setElement(t, n, h);
            const c = o.getDefaults().getTreeTrunkTemplates()[s];
            if (void 0 === c) throw "Tree template not found: " + s;
            const d = new he(e, i, o);
            d.#Pe(h.elementHead, t, n, c, l);
            for (let s = 1; s < 10; s++)
                for (let a = 0; a < 9; a++) {
                    const o = t + a - 4,
                        l = n + s;
                    if (!e.isValidPosition(o, l)) continue;
                    const h = e.getElementHead(o, l);
                    if (r.getBehaviour(h) !== r.BEHAVIOUR_TREE_ROOT) continue;
                    const c = r.getSpecial(h);
                    if (0 === c) continue;
                    const u = i.nextInt(10);
                    d.#Fe(o, l, h, c, u)
                }
        }
        #x;
        #ue;
        #me;
        #Le;
        #_e;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n, this.#Le = this.#me.getDefaults().getTreeTrunkTemplates(), this.#_e = this.#me.getDefaults().getTreeLeafClusterTemplates()
        }
        behaviourTree(e, t, n) {
            if (r.getTemperature(e) > he.#He) return void this.#x.setElementHead(t, n, r.setBehaviour(e, 0));
            if (0 === this.#ue.nextInt(ne.OPT_CYCLES_PER_SECOND)) {
                const s = r.getSpecial(e),
                    a = this.#Le[s];
                if (void 0 === a) throw "Tree template not found: " + s;
                const i = this.#Pe(e, t, n, a, 1);
                this.#ke(t, n, i, a)
            }
        }
        #Pe(e, t, n, a, i = 1) {
            let o = this.#We(t, n - 2),
                l = 0,
                h = 0,
                c = [{
                    entries: a.entries,
                    index: 0,
                    x: 0,
                    y: 0,
                    brush: null
                }],
                d = (e, r, s, a, i) => {
                    let o = s.apply(e, r, this.#ue);
                    if (null === a) this.#x.setElement(e, r, o);
                    else {
                        const s = t - e + 10 * t,
                            i = n - r + 10 * n,
                            l = a(o.elementTail, s, i);
                        this.#x.setElementHeadAndTail(e, r, o.elementHead, l)
                    }
                    this.#me.trigger(e, r), i && (l++, h++)
                };
            for (; c.length > 0;) {
                const e = c.length;
                let a = !1;
                for (let i = 0; i < e; i++) {
                    const e = c[i];
                    if (e.index >= e.entries.length) {
                        a = !0;
                        continue
                    }
                    const h = e.entries[e.index++],
                        [u, m, E] = h,
                        A = t + u + e.x,
                        g = n - m - e.y;
                    if (this.#x.isValidPosition(A, g)) {
                        const t = this.#x.getElementHead(A, g),
                            n = r.getBehaviour(t);
                        switch (E) {
                            case he.TYPE_LEAF:
                                n === r.BEHAVIOUR_TREE_LEAF ? r.getSpecial(t) < 15 && this.#x.setElementHead(A, g, r.setSpecial(t, 0)) : (n === r.BEHAVIOUR_TREE_TRUNK || r.getTypeClass(t) === r.TYPE_AIR) && d(A, g, e.brush, he.#xe, !1);
                                break;
                            case he.TYPE_TRUNK:
                                (n === r.BEHAVIOUR_TREE_TRUNK || n === r.BEHAVIOUR_TREE_LEAF) && l++;
                                let a = !1;
                                if ((r.getTypeClass(t) === r.TYPE_AIR || n === r.BEHAVIOUR_SOIL || n === r.BEHAVIOUR_GRASS || m < 5 && r.getTypeClass(t) !== r.TYPE_STATIC) && (a = !0), a) {
                                    d(A, g, m > 0 ? F.TREE_WOOD : F.TREE_WOOD_DARK, he.#Be, !0), 2 === m && 0 === u && this.#Ve(A, g, o)
                                }
                                break;
                            case he.TYPE_BRANCH:
                                let i = !1;
                                if (n === r.BEHAVIOUR_TREE_LEAF) l++, r.getSpecial(t) < 15 && this.#x.setElementHead(A, g, r.setSpecial(t, 0));
                                else if (n === r.BEHAVIOUR_TREE_TRUNK) l++;
                                else {
                                    if (r.getTypeClass(t) !== r.TYPE_AIR) break;
                                    i = !0
                                }
                                let h = s.next(o + u + m),
                                    p = Math.trunc(h * this.#_e.length),
                                    T = this.#_e[p],
                                    f = Math.trunc(1024 * h) % 2 == 0 ? F.TREE_LEAF_LIGHTER : F.TREE_LEAF_DARKER;
                                c.push({
                                    entries: T.entries,
                                    index: 0,
                                    x: u,
                                    y: m,
                                    brush: f
                                }), i && d(A, g, f, he.#xe, !0);
                                break;
                            case he.TYPE_ROOT:
                                n === r.BEHAVIOUR_TREE_ROOT ? l++ : d(A, g, F.TREE_ROOT, null, !0);
                                break;
                            default:
                                throw "Unknown type: " + E
                        }
                    }
                    let p = h.length > 3 ? h[3] : void 0;
                    void 0 !== p && c.push({
                        entries: p,
                        index: 0,
                        x: e.x,
                        y: e.y,
                        brush: e.brush
                    })
                }
                if (-1 !== i && h >= i) break;
                if (a)
                    for (let e = c.length - 1; e >= 0; e--) {
                        let t = c[e];
                        t.index >= t.entries.length && c.splice(e, 1)
                    }
            }
            return l
        }
        #We(e, t) {
            if (this.#x.isValidPosition(e, t)) {
                let n = this.#x.getElementHead(e, t);
                if (r.getBehaviour(n) === r.BEHAVIOUR_TREE_TRUNK) return r.getSpecial(n)
            }
            return this.#ue.nextInt(1 << r.FIELD_SPECIAL_SIZE)
        }
        #Ve(e, t, n) {
            let s = this.#x.getElementHead(e, t);
            s = r.setSpecial(s, n), this.#x.setElementHead(e, t, s)
        }
        #ke(e, t, n, s) {
            if (t > 0) {
                let a = this.#x.getElementHead(e, t - 1);
                if (r.getBehaviour(a) === r.BEHAVIOUR_TREE_TRUNK) {
                    const i = 15;
                    let o = r.getSpecial(a),
                        l = Math.trunc(n / s.entriesCount * i);
                    o - l > 5 ? (this.#x.setElementHead(e, t - 1, r.setSpecial(a, 0)), this.#x.setElement(e, t, F.TREE_WOOD.apply(e, t, this.#ue))) : this.#x.setElementHead(e, t - 1, r.setSpecial(a, l))
                }
            }
        }
        behaviourTreeRoot(e, t, n) {
            if (r.getTemperature(e) > he.#He) return void this.#x.setElementHead(t, n, r.setBehaviour(e, 0));
            let s = r.getSpecial(e);
            if (0 === s) return void(this.#me.getIteration() % 1e3 == 0 && this.#Ge(t, n));
            let a = this.#ue.nextInt(10 * ne.OPT_CYCLES_PER_SECOND);
            a < 10 && this.#Fe(t, n, e, s, a)
        }
        #Ge(e, t) {
            const n = e + this.#ue.nextInt(3) - 1,
                s = t + this.#ue.nextInt(3) - 1;
            if (this.#x.isValidPosition(n, s)) {
                let e = this.#x.getElementHead(n, s),
                    t = r.getTypeClass(e);
                if (t === r.TYPE_POWDER || t === r.TYPE_POWDER_WET || t === r.TYPE_POWDER_FLOATING) {
                    let t = r.setType(e, r.TYPE_STATIC);
                    this.#x.setElementHead(n, s, t)
                }
            }
        }
        #Fe(e, t, n, s, a) {
            let i = (a, i) => {
                this.#x.setElementHead(e, t, r.setSpecial(n, 0));
                let o = F.TREE_ROOT.apply(a, i, this.#ue),
                    l = r.setSpecial(o.elementHead, s - 1);
                this.#x.setElementHead(a, i, l), this.#x.setElementTail(a, i, o.elementTail)
            };
            if (t < this.#x.getHeight() - 1) {
                let n = this.#x.getElementHead(e, t + 1);
                if (r.getTypeClass(n) === r.TYPE_AIR) return void i(e, t + 1)
            }
            let o = e,
                l = t;
            if (9 === a || 8 === a || 7 === a ? (o += 1, l += 1) : 6 === a || 5 === a || 4 === a ? (o += -1, l += 1) : l += 1, this.#x.isValidPosition(o, l)) {
                let e = this.#x.getElementHead(o, l);
                r.getTypeClass(e) !== r.TYPE_STATIC && i(o, l)
            }
        }
        behaviourTreeLeaf(e, t, n) {
            let s = r.getSpecial(e);
            if (s < 15) {
                if (r.getTemperature(e) > he.#De) return void this.#Ye(e, t, n);
                if (this.#me.getIteration() % 32 == 0 && 0 === this.#ue.nextInt(10)) {
                    if (s++, s >= 15) return void this.#Ye(e, t, n);
                    e = r.setSpecial(e, s), this.#x.setElementHead(t, n, e)
                }
            }
            if (this.#me.getIteration() % ne.OPT_CYCLES_PER_SECOND == 0) {
                if (0 === this.#ue.nextInt(5)) {
                    const e = [
                            [0, -1],
                            [-1, -1],
                            [1, -1],
                            [-1, 0],
                            [1, 0]
                        ],
                        s = e[this.#ue.nextInt(e.length)],
                        a = t + s[0],
                        i = n + s[1];
                    if (this.#x.isValidPosition(a, i)) {
                        const e = this.#x.getElementHead(a, i);
                        r.getTypeClass(e) !== r.TYPE_STATIC && r.getTypeClass(e) >= r.TYPE_FLUID && this.#x.setElement(t, n, this.#me.getDefaults().getDefaultElement())
                    }
                }
            }
        }
        #Ye(e, t, n) {
            const s = this.#x.getElementTail(t, n),
                a = .85,
                i = 255 * (1 - a);
            let o = h.setColor(255 & Math.trunc(1.4 * h.getColorRed(s) * a + i), 255 & Math.trunc(.9 * h.getColorGreen(s) * a + i), 255 & Math.trunc(.8 * h.getColorBlue(s) * a + i));
            const l = r.setSpecial(e, 15);
            this.#x.setElementHeadAndTail(t, n, l, o)
        }
    }
    class ce {
        #x;
        #ue;
        #me;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        behaviourWater(e, t, n) {
            const s = r.getTypeClass(e),
                a = r.getTemperature(e);
            if (s === r.TYPE_FLUID) {
                if (a > 20) {
                    const e = this.#me.getDefaults().getBrushSteam().apply(t, n, this.#ue),
                        s = r.setTemperature(e.elementHead, a);
                    return this.#x.setElementHeadAndTail(t, n, s, e.elementTail), !0
                }
            } else if (s === r.TYPE_GAS && a < 10) {
                const e = this.#me.getDefaults().getBrushWater().apply(t, n, this.#ue),
                    s = r.setTemperature(e.elementHead, a);
                return this.#x.setElementHeadAndTail(t, n, s, e.elementTail), !0
            }
            return !1
        }
    }
    class de extends ne {
        #x;
        #N;
        #H;
        #ze;
        #Ke;
        #Xe;
        #qe;
        #Je;
        #Ze;
        #je = 0;
        #ue;
        #Qe = !1;
        #$e = !1;
        #et;
        static RANDOM_DATA_COUNT = 32;
        #tt = [];
        #nt = [];
        #rt = [];
        #st;
        #at;
        #it;
        #ot;
        #lt;
        #ht;
        constructor(e, t, n, r, a) {
            if (super(), this.#x = e, this.#N = e.getWidth(), this.#H = e.getHeight(), this.#ze = t, this.#ze > 255) throw "Chunk size limit: 255";
            this.#Ke = Math.ceil(this.#N / this.#ze), this.#Xe = Math.ceil(this.#H / this.#ze), this.#qe = new Array(this.#Ke * this.#Xe).fill(!0), this.#Je = new Array(this.#Ke * this.#Xe).fill(!0), this.#Ze = new Array(this.#Ke * this.#Xe).fill(-1);
            let i = new s(0);
            this.#tt = de.#ct(de.RANDOM_DATA_COUNT, this.#Ke, i), this.#nt = de.#dt(de.RANDOM_DATA_COUNT, this.#ze, this.#ze, i), this.#rt = de.#ct(de.RANDOM_DATA_COUNT, this.#ze, i), this.#ue = n, this.#et = r, this.#st = new ce(e, n, this), this.#at = new se(e, n, this), this.#it = new ie(e, n, this), this.#ot = new oe(e, n, this), this.#lt = new le(e, n, this), this.#ht = new he(e, n, this), a && (this.#je = a.iteration, this.#Qe = a.fallThroughEnabled, this.#$e = a.erasingEnabled)
        }
        static #ut(e, t, n) {
            for (let r = 0; r < t; r++) {
                let t = n.nextInt(e.length),
                    r = n.nextInt(e.length);
                [e[t], e[r]] = [e[r], e[t]]
            }
        }
        static #ct(e, t, n) {
            let r = de.#mt(t);
            de.#ut(r, e, n);
            let s = Array(e);
            for (let t = 0; t < e; t++) de.#ut(r, Math.ceil(e / 4), n), s[t] = new Uint8Array(r);
            return s
        }
        static #mt(e) {
            let t = new Uint8Array(e);
            for (let n = 0; n < e; n++) t[n] = n;
            return t
        }
        static #dt(e, t, n, r) {
            let s = Array(e);
            for (let a = 0; a < e; a++) s[a] = de.#Et(t, n, r);
            return s
        }
        static #Et(e, t, n) {
            let r = new Uint8Array(e);
            for (let s = 0; s < e; s++) r[s] = n.nextInt(t);
            return r
        }
        getIteration() {
            return this.#je
        }
        getDefaults() {
            return this.#et
        }
        setFallThroughEnabled(e) {
            this.#Qe = e
        }
        setErasingEnabled(e) {
            this.#$e = e
        }
        isFallThroughEnabled() {
            return this.#Qe
        }
        isErasingEnabled() {
            return this.#$e
        }
        trigger(e, t) {
            const n = Math.floor(e / this.#ze),
                r = Math.floor(t / this.#ze) * this.#Ke + n;
            this.#qe[r] = !0
        }
        getActiveChunks() {
            return this.#qe
        }
        getChangedChunks() {
            return this.#Je
        }
        cleanChangedChunks() {
            this.#Je.fill(!1)
        }
        next() {
            const e = Array.from(this.#qe);
            this.#qe.fill(!1);
            const t = this.#je % 9,
                n = Math.trunc(t / 3),
                r = t % 3;
            for (let t = this.#Xe - 1; t >= 0; t--) {
                const s = t * this.#ze,
                    a = Math.min((t + 1) * this.#ze - 1, this.#H - 1),
                    i = this.#tt[this.#ue.nextInt(de.RANDOM_DATA_COUNT)],
                    o = 0 === this.#ue.nextInt(2),
                    l = new Uint16Array(this.#Ke);
                for (let h = a; h >= s; h--)
                    for (let s = 0; s < this.#Ke; s++) {
                        const a = i[s],
                            c = t * this.#Ke + a,
                            d = this.#ue.nextInt(de.RANDOM_DATA_COUNT),
                            u = o ? this.#rt[d] : this.#nt[d];
                        if (e[c]) {
                            let e = l[a];
                            for (let t = 0; t < this.#ze; t++) {
                                let s = a * this.#ze + u[t];
                                if (s < this.#N) {
                                    const t = s % 3 === r && h % 3 === n;
                                    this.#At(s, h, t) && e++
                                }
                            }
                            l[a] = e
                        }
                    }
                for (let n = 0; n < this.#Ke; n++) {
                    const r = t * this.#Ke + n;
                    e[r] || this.#gt(n, t, e) && (e[r] = !0, l[n] = 1)
                }
                if (o)
                    for (let n = 0; n < this.#Ke; n++) {
                        const r = t * this.#Ke + n;
                        if (e[r] && 0 === l[n]) {
                            const s = this.#Ze[r];
                            (-1 === s || this.#je - s >= 10) && (this.#pt(n, t) || (e[r] = !1, this.#Je[r] = !0, this.#Ze[r] = this.#je))
                        }
                    }
            }
            if (this.#$e) {
                const e = this.#et.getDefaultElement();
                for (let t = 0; t < this.#N; t++) this.#x.setElement(t, 0, e), this.#x.setElement(t, this.#H - 1, e);
                for (let t = 1; t < this.#H - 1; t++) this.#x.setElement(0, t, e), this.#x.setElement(this.#N - 1, t, e)
            }
            for (let t = 0; t < this.#Ke * this.#Xe; t++) {
                e[t] && (this.#qe[t] = !0, this.#Je[t] = !0)
            }
            this.#je++
        }
        #gt(e, t, n) {
            if (e > 0 && n[t * this.#Ke + e - 1]) {
                const n = e * this.#ze,
                    r = Math.min((t + 1) * this.#ze, this.#H);
                for (let e = t * this.#ze; e < r; e++)
                    if (this.#Tt(n, e)) return !0
            }
            if (e < this.#Ke - 1 && n[t * this.#Ke + e + 1]) {
                const n = Math.min((e + 1) * this.#ze - 1, this.#N - 1),
                    r = Math.min((t + 1) * this.#ze, this.#H);
                for (let e = t * this.#ze; e < r; e++)
                    if (this.#Tt(n, e)) return !0
            }
            if (t > 0 && n[(t - 1) * this.#Ke + e] || this.#Qe && 0 === t && n[(this.#Xe - 1) * this.#Ke + e]) {
                const n = t * this.#ze,
                    r = Math.min((e + 1) * this.#ze, this.#N);
                for (let t = e * this.#ze; t < r; t++)
                    if (this.#Tt(t, n)) return !0
            }
            if (t < this.#Xe - 1 && n[(t + 1) * this.#Ke + e]) {
                const n = (t + 1) * this.#ze - 1,
                    r = Math.min((e + 1) * this.#ze, this.#N);
                for (let t = e * this.#ze; t < r; t++)
                    if (this.#Tt(t, n)) return !0
            }
        }
        #pt(e, t) {
            const n = Math.min((e + 1) * this.#ze, this.#N),
                r = Math.min((t + 1) * this.#ze, this.#H);
            for (let s = t * this.#ze; s < r; s++)
                for (let t = e * this.#ze; t < n; t++)
                    if (this.#Tt(t, s)) return !0;
            return !1
        }
        #Tt(e, t) {
            const n = this.#x.getElementHead(e, t);
            if (r.getTemperature(n) > 0) return !0;
            if (this.#ft(n, e, t)) return !0;
            switch (r.getBehaviour(n)) {
                case r.BEHAVIOUR_NONE:
                case r.BEHAVIOUR_SOIL:
                case r.BEHAVIOUR_TREE_TRUNK:
                    return !1;
                default:
                    return !0
            }
        }
        #ft(e, t, n) {
            const s = r.getTypeClass(e);
            switch (s) {
                case r.TYPE_AIR:
                case r.TYPE_STATIC:
                    return !1;
                case r.TYPE_POWDER:
                case r.TYPE_POWDER_FLOATING:
                case r.TYPE_POWDER_WET:
                    return !!r.getTypeModifierPowderSliding(e) || this.#Ct(e, t, n, t, n + 1);
                case r.TYPE_FLUID:
                    return this.#Ct(e, t, n, t, n + 1) || this.#Ct(e, t, n, t + 1, n) || this.#Ct(e, t, n, t - 1, n);
                case r.TYPE_GAS:
                    return this.#Ct(e, t, n, t, n - 1) || this.#Ct(e, t, n, t + 1, n) || this.#Ct(e, t, n, t - 1, n);
                default:
                    return !0
            }
            throw "Unknown element type: " + s
        }
        #Ct(e, t, n, r, s) {
            if (!this.#x.isValidPosition(r, s)) {
                if (!this.#Qe || n !== this.#H - 1) return !1;
                if (s = 0, !this.#x.isValidPosition(r, s)) return !1
            }
            let a = this.#x.getElementHead(r, s);
            return this.#we(e, a)
        }
        #At(e, t, n) {
            const s = this.#x.getElementHead(e, t);
            if (this.#Rt(s, e, t)) return !0;
            const a = r.getBehaviour(s);
            let i = !1;
            switch (a) {
                case r.BEHAVIOUR_NONE:
                case r.BEHAVIOUR_SOIL:
                    break;
                case r.BEHAVIOUR_WATER:
                    this.#st.behaviourWater(s, e, t) && (i = r.getTemperature(s) > 0, n = !1);
                    break;
                case r.BEHAVIOUR_FIRE:
                    this.#at.behaviourFire(s, e, t), i = !0, n = !1;
                    break;
                case r.BEHAVIOUR_GRASS:
                    this.#ot.behaviourGrass(s, e, t), i = !0;
                    break;
                case r.BEHAVIOUR_TREE:
                    this.#ht.behaviourTree(s, e, t), i = !0;
                    break;
                case r.BEHAVIOUR_TREE_LEAF:
                    this.#ht.behaviourTreeLeaf(s, e, t), i = !0;
                    break;
                case r.BEHAVIOUR_TREE_TRUNK:
                    break;
                case r.BEHAVIOUR_TREE_ROOT:
                    this.#ht.behaviourTreeRoot(s, e, t), i = !0;
                    break;
                case r.BEHAVIOUR_FIRE_SOURCE:
                    this.#at.behaviourFireSource(s, e, t), i = !0, n = !1;
                    break;
                case r.BEHAVIOUR_METEOR:
                    this.#it.behaviourMeteor(s, e, t), i = !0, n = !1;
                    break;
                case r.BEHAVIOUR_FISH:
                    this.#lt.behaviourFish(s, e, t), n = !1, i = !0;
                    break;
                case r.BEHAVIOUR_FISH_BODY:
                    this.#lt.behaviourFishBody(s, e, t), i = !0;
                    break;
                default:
                    throw "Unknown element behaviour: " + a
            }
            if (n) {
                const n = this.#St(s, e, t);
                return i || n
            }
            return i
        }
        #St(e, t, n) {
            const s = r.getTemperature(e);
            if (0 === s) {
                const a = r.getHeatModIndex(e);
                return s < r.hmiToHardeningTemperature(a) && (this.#vt(e, t, n, a), !0)
            }
            let a = t,
                i = n;
            switch (this.#ue.nextInt(4)) {
                case 0:
                    i--;
                    break;
                case 1:
                    a++;
                    break;
                case 2:
                    i++;
                    break;
                case 3:
                    a--
            }
            const o = r.getHeatModIndex(e),
                l = this.#ue.nextInt(1e4) < r.hmiToHeatLossChanceTo10000(o);
            let c;
            if (this.#x.isValidPosition(a, i)) {
                const h = this.#x.getElementHead(a, i),
                    d = r.getTemperature(h);
                if (s + d > 1) {
                    const e = r.hmiToConductiveIndex(o);
                    c = Math.trunc(e * d + (1 - e) * s)
                }
                if (s - c != 0) {
                    let o;
                    l && c--, c = Math.max(c, 0), o = d - c > 10 ? d - 10 : d + (s - c), o = Math.max(o, 0), this.#x.setElementHead(a, i, r.setTemperature(h, o)), this.trigger(a, i), s - c > 10 && (c = s - 10), e = r.setTemperature(e, c), this.#x.setElementHead(t, n, e)
                }
            } else l && (c = Math.max(s - 1, 0), e = r.setTemperature(e, c), this.#x.setElementHead(t, n, e));
            const d = r.hmiToSelfIgnitionChanceTo10000(o);
            if (c > 100 && d > 0)
                if (r.getBehaviour(e) === r.BEHAVIOUR_FIRE_SOURCE);
                else if (this.#ue.nextInt(1e4) < d) return this.#at.ignite(e, t, n, o), !0;
            if (c > r.hmiToMeltingTemperature(o)) {
                e = r.setType(e, r.TYPE_FLUID), e = r.setHeatModIndex(e, r.hmiToMeltingHMI(o));
                let s = this.#x.getElementTail(t, n);
                return s = h.setBlurType(s, h.BLUR_TYPE_1), this.#x.setElementHeadAndTail(t, n, e, s), !0
            }
            return c < r.hmiToHardeningTemperature(o) && this.#vt(e, t, n, o), !0
        }
        #vt(e, t, n, s) {
            if (this.#wt(t, n)) {
                e = r.setType(e, r.TYPE_STATIC), e = r.setHeatModIndex(e, r.hmiToHardeningHMI(s));
                let a = this.#x.getElementTail(t, n);
                a = h.setBlurType(a, h.BLUR_TYPE_NONE), this.#x.setElementHeadAndTail(t, n, e, a)
            }
        }
        #wt(e, t) {
            if (t !== this.#H - 1) {
                if (this.#Ot(this.#x.getElementHead(e, t + 1))) return !0
            } else if (!this.#Qe && !this.#$e) return !0;
            return !(!this.#x.isValidPosition(e - 1, t) || !this.#Ot(this.#x.getElementHead(e - 1, t))) || !(!this.#x.isValidPosition(e + 1, t) || !this.#Ot(this.#x.getElementHead(e + 1, t)))
        }
        #Ot(e) {
            return r.getTypeClass(e) > r.TYPE_FLUID
        }
        #Rt(e, t, n) {
            const s = r.getTypeClass(e);
            switch (s) {
                case r.TYPE_AIR:
                    return !1;
                case r.TYPE_POWDER:
                case r.TYPE_POWDER_WET:
                case r.TYPE_POWDER_FLOATING:
                    if (this.#It(e, t, n, t, n + 1)) return n % 2 == 0 ? this.#yt(t - 1, n + 1, 0) : this.#yt(t + 1, n + 1, 1), this.#yt(t, n + 1, n % 2), n % 2 == 0 ? this.#yt(t + 1, n, 0) : this.#yt(t - 1, n, 1), !0;
                    if (1 === r.getTypeModifierPowderSliding(e)) {
                        const s = r.getTypeModifierPowderMomentum(e);
                        if (this.#ue.nextInt(1e6) > de.#bt(s)) return this.#x.setElementHead(t, n, r.setTypeModifierPowderSliding(e, 0)), !1;
                        const a = r.getTypeModifierPowderDirection(e);
                        this.#yt(t, n + 1, a);
                        const i = 0 === a ? -1 : 1;
                        return this.#It(e, t, n, t + i, n) ? (this.#yt(t + i, n + 1, a), this.#yt(t - i, n, a), !0) : (this.#yt(t + i, n + 1, a), this.#x.setElementHead(t, n, r.setTypeModifierPowderSliding(e, 0)), !1)
                    }
                    return !1;
                case r.TYPE_FLUID:
                    if (!this.#It(e, t, n, t, n + 1)) {
                        return 0 === this.#ue.nextInt(2) ? !!this.#It(e, t, n, t + 1, n) && (this.#yt(t + 1, n + 1, 1), this.#It(e, t + 1, n, t + 2, n) && (this.#It(e, t + 2, n, t + 3, n) ? this.trigger(t + 3, n) : this.trigger(t + 2, n)), !0) : !!this.#It(e, t, n, t - 1, n) && (this.#yt(t - 1, n + 1, 0), this.#It(e, t - 1, n, t - 2, n) && (this.#It(e, t - 2, n, t - 3, n) ? this.trigger(t - 3, n) : this.trigger(t - 2, n)), !0)
                    }
                    return !0;
                case r.TYPE_GAS:
                    let s = this.#ue.nextInt(8);
                    return 0 !== s && 2 !== s || !this.#It(e, t, n, t, n - 1) ? 3 === s && this.#It(e, t, n, t + 1, n) ? (this.trigger(t + 1, n), !0) : !(4 !== s || !this.#It(e, t, n, t - 1, n)) && (this.trigger(t - 1, n), !0) : (this.trigger(t, n - 1), !0);
                case r.TYPE_STATIC:
                case r.TYPE_EFFECT:
                    return !1
            }
            throw "Unknown element type: " + s
        }
        #It(e, t, n, s, a) {
            if (!this.#x.isValidPosition(s, a)) {
                if (!this.#Qe || n !== this.#H - 1) return !1;
                if (a = 0, !this.#x.isValidPosition(s, a)) return !1
            }
            const i = this.#x.getElementHead(s, a),
                o = r.getTypeClass(i);
            if (o === r.TYPE_POWDER_FLOATING || o === r.TYPE_POWDER) return !1;
            const l = r.getTypeClass(e);
            if (l > o) {
                if (l === r.TYPE_POWDER && o === r.TYPE_FLUID) {
                    const o = r.setTypeClass(e, r.TYPE_POWDER_WET),
                        l = this.#x.getElementTail(t, n);
                    if (this.#ue.nextInt(100) > 9) this.#x.setElement(t, n, this.#et.getDefaultElement());
                    else {
                        const e = this.#x.getElementTail(s, a);
                        this.#x.setElementHead(t, n, i), this.#x.setElementTail(t, n, e)
                    }
                    this.#x.setElementHead(s, a, o), this.#x.setElementTail(s, a, l)
                } else {
                    const r = this.#x.getElementTail(t, n),
                        o = this.#x.getElementTail(s, a);
                    this.#x.setElementHead(s, a, e), this.#x.setElementHead(t, n, i), this.#x.setElementTail(s, a, r), this.#x.setElementTail(t, n, o)
                }
                return !0
            }
            return !1
        }
        #we(e, t) {
            const n = r.getTypeClass(t);
            if (n === r.TYPE_POWDER_FLOATING || n === r.TYPE_POWDER) return !1;
            return r.getTypeClass(e) > n
        }
        #yt(e, t, n) {
            if (this.#x.isValidPosition(e, t)) {
                let s = this.#x.getElementHead(e, t);
                const a = r.getTypeClass(s);
                if (a === r.TYPE_POWDER || a === r.TYPE_POWDER_WET || a === r.TYPE_POWDER_FLOATING) {
                    const a = r.getTypeModifierPowderMomentum(s);
                    if (0 === a) return;
                    const i = 0 === n ? -1 : 1;
                    if (this.#x.isValidPosition(e + i, t)) {
                        const n = this.#x.getElementHead(e + i, t);
                        if (!this.#we(s, n)) return
                    }
                    if (this.#ue.nextInt(1e6) > de.#Mt(a)) return;
                    s = r.setTypeModifierPowderSliding(s, 1), s = r.setTypeModifierPowderDirection(s, n), this.#x.setElementHead(e, t, s)
                }
            }
        }
        static #bt(e) {
            return [0, 4e5, 6e5, 7e5, 7e5, 8e5, 95e4, 95e4][e]
        }
        static #Mt(e) {
            return [0, 4e5, 4e5, 4e5, 6e5, 6e5, 85e4, 9e5][e]
        }
    }
    class ue {
        #x;
        #ue;
        #me;
        #Ht = 2;
        #Nt = 2;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        run() {
            if (0 == this.#Nt--) {
                this.#Nt = this.#Ht;
                const e = this.#ue.nextInt(this.#x.getWidth() - 2) + 1,
                    t = this.#ue.nextInt(this.#x.getHeight() - 2) + 1;
                if (this.#Dt(this.#x, e, t)) {
                    const n = this.#me.getDefaults();
                    this.#x.setElement(e, t, n.getBrushFishHead().apply(e, t, this.#ue)), this.#me.trigger(e, t), this.#x.setElement(e + 1, t, n.getBrushFishBody().apply(e + 1, t, this.#ue)), this.#me.trigger(e + 1, t), this.#Ht = this.#Ht << 2
                }
            }
        }
        #Dt(e, t, n) {
            if (t < 1 || n < 1) return !1;
            if (t + 1 >= e.getWidth() || n + 1 >= e.getHeight()) return !1;
            const s = e.getElementHead(t, n);
            return !(r.getTemperature(s) > 0) && (!!(this.#Me(e, t, n) && this.#Me(e, t - 1, n) && this.#Me(e, t + 1, n) && this.#Me(e, t + 2, n) && this.#Me(e, t + 1, n + 1) && this.#Me(e, t + 2, n + 1) && this.#Me(e, t + 1, n - 1) && this.#Me(e, t + 2, n - 1)) && (this.#Ut(e, t, n + 2) || this.#Ut(e, t + 1, n + 2)))
        }
        #Me(e, t, n) {
            if (!e.isValidPosition(t, n)) return !1;
            const s = e.getElementHead(t, n);
            return r.getTypeClass(s) === r.TYPE_FLUID
        }
        #Ut(e, t, n) {
            if (!e.isValidPosition(t, n)) return !1;
            const s = e.getElementHead(t, n),
                a = r.getTypeClass(s);
            return a === r.TYPE_POWDER || a === r.TYPE_POWDER_WET
        }
    }
    class me {
        static MAX_COUNTER_VALUE = 2;
        #x;
        #ue;
        #me;
        #Nt = me.MAX_COUNTER_VALUE;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        run() {
            if (0 == this.#Nt--) {
                this.#Nt = me.MAX_COUNTER_VALUE;
                const e = this.#ue.nextInt(this.#x.getWidth()),
                    t = this.#ue.nextInt(this.#x.getHeight() - 3) + 2;
                if (oe.canGrowUpHere(this.#x, e, t)) {
                    const n = this.#me.getDefaults().getBrushGrass();
                    this.#x.setElement(e, t, n.apply(e, t, this.#ue)), this.#me.trigger(e, t)
                }
            }
        }
    }
    class Ee {
        static STARTING_COUNTER_VALUE = 1e3;
        static MAX_COUNTER_VALUE = 4;
        #x;
        #ue;
        #me;
        #Nt = Ee.STARTING_COUNTER_VALUE;
        constructor(e, t, n) {
            this.#x = e, this.#ue = t, this.#me = n
        }
        run() {
            if (0 == this.#Nt--) {
                this.#Nt = Ee.MAX_COUNTER_VALUE;
                const e = this.#ue.nextInt(this.#x.getWidth() - 12) + 6,
                    t = this.#ue.nextInt(this.#x.getHeight() - 16) + 15;
                if (Ee.couldGrowUpHere(this.#x, e, t)) {
                    const n = this.#me.getDefaults().getBrushTree();
                    this.#x.setElement(e, t, n.apply(e, t, this.#ue)), this.#me.trigger(e, t)
                }
            }
        }
        static couldGrowUpHere(e, t, n) {
            if (t < 0 || n < 12) return !1;
            if (t > e.getWidth() - 5 || n > e.getHeight() - 2) return !1;
            let s = e.getElementHead(t, n);
            if (r.getBehaviour(s) !== r.BEHAVIOUR_GRASS) return !1;
            if (r.getTemperature(s) > 0) return !1;
            let a = e.getElementHead(t, n + 1);
            if (r.getBehaviour(a) !== r.BEHAVIOUR_SOIL) return !1;
            if (r.getTemperature(a) > 0) return !1;
            for (let r = 1; r < 18; r++)
                if (!Ee.#xt(e, t, n - r)) return !1;
            for (let r = -15; r < 15; r++)
                if (Ee.#Bt(e, t + r, n - 4)) return !1;
            for (let r = 10; r < 15; r++) {
                if (!Ee.#xt(e, t - 8, n - r)) return !1;
                if (!Ee.#xt(e, t + 8, n - r)) return !1
            }
            return !0
        }
        static #xt(e, t, n) {
            let s = e.getElementHead(t, n);
            return r.getTypeClass(s) === r.TYPE_AIR || r.getBehaviour(s) === r.BEHAVIOUR_GRASS
        }
        static #Bt(e, t, n) {
            let s = e.getElementHead(t, n),
                a = r.getBehaviour(s);
            return a === r.BEHAVIOUR_TREE_TRUNK || a === r.BEHAVIOUR_TREE
        }
    }
    class Ae {
        trigger(e, t) {
            throw "Not implemented"
        }
        render(e) {
            throw "Not implemented"
        }
    }
    class ge {
        apply(e, t, n, r) {
            throw "Not implemented"
        }
    }
    class pe extends Ae {
        static renderPreview(e, t, n = 255) {
            const r = e.getWidth(),
                s = e.getHeight(),
                a = t.createImageData(r, s),
                i = a.data;
            for (let t = 0; t < r; t++)
                for (let a = 0; a < s; a++) {
                    const s = 4 * (r * a + t),
                        o = e.getElementTail(t, a);
                    o === _.TRANSPARENT_ELEMENT.elementTail && e.getElementHead(t, a) === _.TRANSPARENT_ELEMENT.elementHead ? i[s + 3] = 0 : (i[s] = h.getColorRed(o), i[s + 1] = h.getColorGreen(o), i[s + 2] = h.getColorBlue(o), i[s + 3] = n)
                }
            t.putImageData(a, 0, 0, 0, 0, r, s)
        }
        #Pt;
        #Ft = null;
        #x;
        #N;
        #H;
        #ze;
        #Ke;
        #Xe;
        #Lt;
        #_t;
        #kt;
        #Wt;
        constructor(e, t, n) {
            super(), this.#Pt = n, this.#x = e, this.#N = e.getWidth(), this.#H = e.getHeight(), this.#ze = t, this.#Ke = Math.ceil(this.#N / this.#ze), this.#Xe = Math.ceil(this.#H / this.#ze), this.#Lt = new Array(this.#Ke * this.#Xe).fill(!0), this.#_t = this.#Pt.createImageData(this.#N, this.#H);
            const r = this.#_t.data;
            for (let e = 0; e < this.#H; e++)
                for (let t = 0; t < this.#N; t++) {
                    r[4 * (this.#N * e + t) + 3] = 255
                }
            this.#kt = new Array(this.#N * this.#H).fill(!1), this.#Wt = new Array(this.#N * this.#H).fill(!1)
        }
        trigger(e, t) {
            const n = Math.trunc(e / this.#ze),
                r = Math.trunc(t / this.#ze) * this.#Ke + n;
            this.#Lt[r] = !0
        }
        triggerChunk(e, t) {
            const n = t * this.#Ke + e;
            this.#Lt[n] = !0
        }
        triggerChunks(e) {
            if (e.length !== this.#Lt.length) throw "Array must be of the same size";
            for (let t = 0; t < e.length; t++) {
                const n = e[t];
                n && (this.#Lt[t] = n)
            }
        }
        setMode(e) {
            this.#Ft = e, this.#Lt.fill(!0), this.#kt.fill(!1), this.#Wt.fill(!1)
        }
        render(e) {
            for (let t = 0; t < this.#Xe; t++)
                for (let n = 0; n < this.#Ke; n++) {
                    const r = t * this.#Ke + n,
                        s = this.#Lt[r];
                    s && (this.#Lt[r] = !1);
                    const a = e[r];
                    if (a && (this.#Lt[r] = !0), s || a) {
                        let r = !1;
                        if (t + 1 < this.#Ke) {
                            const s = (t + 1) * this.#Ke + n;
                            this.#Lt[s] || e[s] || (r = !0)
                        }
                        this.#Vt(n, t, r)
                    }
                }
            this.#Pt.putImageData(this.#_t, 0, 0, 0, 0, this.#N, this.#H)
        }
        #Vt(e, t, n) {
            const r = Math.min((e + 1) * this.#ze, this.#N),
                s = Math.min((t + 1) * this.#ze + (n ? 1 : 0), this.#H);
            for (let n = t * this.#ze; n < s; n++)
                for (let t = e * this.#ze; t < r; t++) this.#Gt(t, n, this.#_t.data)
        }
        #Gt(e, t, n) {
            const r = this.#x.getElementTail(e, t),
                s = this.#N * t + e,
                a = 4 * s,
                i = h.getBlurType(r);
            if (i === h.BLUR_TYPE_BACKGROUND && (this.#Wt[s] && pe.#Yt(r) && (this.#kt[s] = !0, this.#Wt[s] = !1), this.#kt[s])) {
                const r = n[a],
                    i = n[a + 1],
                    o = n[a + 2],
                    l = .1 * Math.random() - .05 + .875,
                    h = 255 * (1 - l),
                    c = Math.trunc(r * l + h),
                    d = Math.trunc(i * l + h),
                    u = Math.trunc(o * l + h);
                r === c && i === d && o === u ? (this.#kt[s] = !1, n[a] = 255, n[a + 1] = 255, n[a + 2] = 255) : (n[a] = c, n[a + 1] = d, n[a + 2] = u, this.trigger(e, t))
            } else if (null === this.#Ft) n[a] = h.getColorRed(r), n[a + 1] = h.getColorGreen(r), n[a + 2] = h.getColorBlue(r), this.#Wt[s] = i === h.BLUR_TYPE_1, this.#kt[s] = !1;
            else {
                let s = this.#x.getElementHead(e, t);
                this.#Ft.apply(n, a, s, r)
            }
        }
        static #Yt(e) {
            return 255 === h.getColorRed(e) && 255 === h.getColorGreen(e) && 255 === h.getColorBlue(e)
        }
    }
    class Te extends ge {
        #zt = null;
        constructor() {
            super(), u.asImageData("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAABCAIAAACnnMvDAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVQ4T22QUZIjMQhDHzhH32PHYj/UZoiTLlcXloQQfsE/AF6QsM6/i4CABa9T5Kj5RPqfkL9s29y2l6e75lBff33Nx2h6AcfGxxP6ykjU+Exkw5m3YxqfbnPRucfPSFev1+p64rbqrm9NAif2xfYiPc5UCz5sixRLZLF2poDMylSmcilcLxkBMhShpBIlCirZiwoEGDz4U/tqxPqg1oMrqcEqkak2sW2g9WlrK2DiBsfQJ1JQi90ZAuLIEnmdwbrwXg+42ImggvpK8mQ+UTvMh//Fdh6D/Xrt1uITqc77/C2SUlRFKaVUpSpFbFKECAEgEGwo2CCog3Bwawy6qNNrZOJumV3XiIu98I4xRztMt7Smz1zkW3YtcmnMXtTPqK35yZ4RJd4bQELiLarYG4m9nwltsMe61/COY6rgfWa+x8xmO1FbWd91P5Lr/2afRpQBYZvbAAAAAElFTkSuQmCC").then((e => this.#zt = e))
        }
        apply(e, t, n, s) {
            if (null !== this.#zt)
                if (0 === n) e[t] = 0, e[t + 1] = 0, e[t + 2] = 0;
                else {
                    const s = r.getTemperature(n),
                        a = 4 * Math.trunc(s / (1 << r.FIELD_TEMPERATURE_SIZE) * this.#zt.width);
                    e[t] = this.#zt.data[a], e[t + 1] = this.#zt.data[a + 1], e[t + 2] = this.#zt.data[a + 2]
                }
        }
    }
    class fe extends ge {
        constructor() {
            super()
        }
        #Kt(e) {
            switch (r.getTypeClass(e)) {
                case r.TYPE_AIR:
                    return [255, 255, 255];
                case r.TYPE_STATIC:
                    return [0, 0, 0];
                case r.TYPE_FLUID:
                    return [0, 0, 255];
                case r.TYPE_POWDER:
                case r.TYPE_POWDER_WET:
                case r.TYPE_POWDER_FLOATING:
                    if (1 === r.getTypeModifierPowderSliding(e)) return 1 === r.getTypeModifierPowderDirection(e) ? [232, 137, 70] : [255, 0, 0];
                    switch (r.getTypeClass(e)) {
                        case r.TYPE_POWDER:
                            return [36, 163, 57];
                        case r.TYPE_POWDER_WET:
                            return [44, 122, 57];
                        case r.TYPE_POWDER_FLOATING:
                            return [16, 194, 45]
                    }
                default:
                    return [255, 0, 125]
            }
        }
        apply(e, t, n, r) {
            const [s, a, i] = this.#Kt(n);
            return e[t] = s, e[t + 1] = a, e[t + 2] = i, !1
        }
    }
    class Ce extends Ae {
        #Pt;
        #x;
        #N;
        #H;
        #Xt;
        constructor(e, t, n) {
            super(), this.#Pt = n, this.#x = e, this.#N = e.getWidth(), this.#H = e.getHeight();
            const r = this.#Pt,
                s = this.#qt("255,51,0\n255,69,0\n255,82,0\n255,93,0\n255,102,0\n255,111,0\n255,118,0\n255,124,0\n255,130,0\n255,135,0\n255,141,11\n255,146,29\n255,152,41\n255,157,51\n255,162,60\n255,166,69\n255,170,77\n255,174,84\n255,178,91\n255,182,98\n255,185,105\n255,189,111\n255,192,118\n255,195,124\n255,198,130\n255,201,135\n255,203,141\n255,206,146\n255,208,151\n255,211,156\n255,213,161\n255,215,166\n255,217,171\n255,219,175\n255,221,180\n255,223,184\n255,225,188\n255,226,192\n255,228,196\n255,229,200\n255,231,204\n255,232,208\n255,234,211\n255,235,215\n255,237,218\n255,238,222\n255,239,225\n255,240,228\n255,241,231\n255,243,234\n255,244,237\n255,245,240\n255,246,243\n255,247,245\n255,248,248\n255,249,251\n255,249,253\n254,250,255\n252,248,255\n250,247,255\n247,245,255\n245,244,255\n243,243,255\n241,241,255\n239,240,255\n238,239,255\n236,238,255\n234,237,255\n233,236,255\n231,234,255\n229,233,255\n228,233,255\n227,232,255\n225,231,255\n224,230,255\n223,229,255\n221,228,255\n220,227,255\n219,226,255\n218,226,255\n217,225,255\n216,224,255\n215,223,255\n214,223,255\n213,222,255\n212,221,255\n211,221,255\n210,220,255\n209,220,255\n208,219,255\n207,218,255"),
                a = s.byteLength / 4,
                i = `\n            float countTemperaturePaletteIndex(float c) {\n                float k = c + 273.0;  // 0 C = 273 K\n                if (k < 1000.0) {\n                    return 0.0;\n                } else {\n                    return floor(k / 100.0 - 10.0);\n                }\n            }\n            \n            void applyTemperature(float temperature, int heatType, inout float r, inout float g, inout float b) {\n                float tFactor;\n                float aFactor = 0.001;\n                if (heatType == 0x01) {\n                    tFactor = 0.5;\n                } else if (heatType == 0x02) {\n                    tFactor = 1.0;\n                } else {  // heatType == 0x03\n                    tFactor = 1.45;\n                }\n                \n                float sTemp = (temperature * 255.0 * 10.0) * tFactor;\n                float i = countTemperaturePaletteIndex(sTemp);\n                vec4 color = texture(u_temperature_palette, vec2((i + 0.5) / ${a}.0, 0.5));\n                float cr = color[0];\n                float cg = color[1];\n                float cb = color[2];\n                \n                float alpha = 1.0 - sTemp * aFactor;\n                \n                // alpha blending\n                r = (r * alpha) + (cr * (1.0 - alpha));\n                g = (g * alpha) + (cg * (1.0 - alpha));\n                b = (b * alpha) + (cb * (1.0 - alpha));\n            }\n        `,
                o = `#version 300 es\n            precision mediump float;\n            \n            in vec2 v_texcoord;\n            out vec4 v_color;\n            \n            uniform sampler2D u_element_heads;\n            uniform sampler2D u_element_tails;\n            uniform sampler2D u_blur;\n            uniform sampler2D u_temperature_palette;\n            \n            ${i}\n\n            float rand(vec2 co) {\n                return fract(sin(dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);\n            }\n\n            void main() {\n                vec4 elementTail = texture(u_element_tails, v_texcoord);\n                int flags = int(floor(elementTail[3] * 255.0 + 0.5));\n                int blurType = (flags & 0x3);\n            \n                if (blurType == 0x0) {  // == BLUR_TYPE_NONE\n                    // do not render non-blurrable elements\n                    v_color = vec4(1.0, 1.0, 1.0, 1.0);\n                    \n                } else if (blurType == 0x1) {  // == BLUR_TYPE_BACKGROUND\n                    // fade out... using alpha blending with white background\n                    \n                    vec4 oldPixel = texture(u_blur, v_texcoord);\n                    float r = oldPixel[0];  // 0..1\n                    float g = oldPixel[1];\n                    float b = oldPixel[2];\n                    \n                    float alpha;  // dynamic alpha\n                    float m = max(r, max(g, b));\n                    if (m > 0.9) {\n                        alpha = 0.875 + (rand(v_texcoord.xy) * 0.1 - 0.05);\n                    } else {\n                        alpha = 0.775 + (rand(v_texcoord.xy) * 0.04 - 0.02);\n                    }\n                    float whiteBackground = 1.0 - alpha;\n                    \n                    float nr = (r * alpha) + whiteBackground;\n                    float ng = (g * alpha) + whiteBackground;\n                    float nb = (b * alpha) + whiteBackground;\n                    \n                    if (int(nr * 255.0) == int(r * 255.0)\n                            && int(ng * 255.0) == int(g * 255.0)\n                            && int(nb * 255.0) == int(b * 255.0)) {\n                            \n                        // no change - delete blur (otherwise there could be visible remains)\n                        v_color = vec4(1.0, 1.0, 1.0, 1.0);\n                        \n                    } else {\n                        v_color = vec4(nr, ng, nb, 1.0);\n                    }\n                    \n                } else {  // == BLUR_TYPE_1\n                    // render element\n                    float r = elementTail[2];  // 0..1\n                    float g = elementTail[1];\n                    float b = elementTail[0];\n                    \n                    // apply temperature\n                    int heatType = (flags >> 4) & 0x3;\n                    if (heatType > 0) {\n                        vec4 elementHead = texture(u_element_heads, v_texcoord);\n                        float temperature = elementHead[3];  // 0..1\n                        \n                        if (temperature >= 0.001) {\n                            applyTemperature(temperature, heatType, r, g, b);\n                        }\n                    }\n                    \n                    v_color = vec4(r, g, b, 1.0);\n                }\n            }\n        `,
                l = this.#Jt(r, "#version 300 es\n            in vec4 a_position;\n            \n            out vec2 v_texcoord;\n            \n            void main() {\n              gl_Position = a_position;\n              v_texcoord = a_position.xy * vec2(0.5, 0.5) + 0.5;\n            }\n        ", o),
                h = r.getUniformLocation(l, "u_element_heads"),
                c = r.getUniformLocation(l, "u_element_tails"),
                d = r.getUniformLocation(l, "u_blur"),
                u = r.getUniformLocation(l, "u_temperature_palette"),
                m = `#version 300 es\n            precision mediump float;\n            \n            in vec2 v_texcoord;\n            out vec4 v_color;\n            \n            uniform sampler2D u_element_heads;\n            uniform sampler2D u_element_tails;\n            uniform sampler2D u_blur;\n            uniform sampler2D u_temperature_palette;\n            \n            ${i}\n            \n            void main() {\n                vec4 elementTail = texture(u_element_tails, v_texcoord);\n                int flags = int(floor(elementTail[3] * 255.0 + 0.5));\n                int blurType = (flags & 0x3);\n                \n                if (blurType == 0x00) {  // == BLUR_TYPE_NONE\n                    // render element\n                    float r = elementTail[2];  // 0..1\n                    float g = elementTail[1];\n                    float b = elementTail[0];\n                    \n                    // apply temperature\n                    int heatType = (flags >> 4) & 0x3;\n                    if (heatType > 0) {\n                        vec4 elementHead = texture(u_element_heads, v_texcoord);\n                        float temperature = elementHead[3];  // 0..1\n                        \n                        if (temperature >= 0.001) {\n                            applyTemperature(temperature, heatType, r, g, b);\n                        }\n                    }\n                    \n                    v_color = vec4(r, g, b, 1.0);\n                \n                } else {\n                    v_color = texture(u_blur, v_texcoord);\n                }\n            }\n        `,
                E = this.#Jt(r, "#version 300 es\n            in vec4 a_position;\n            \n            out vec2 v_texcoord;\n            \n            void main() {\n              gl_Position = a_position;\n\n              // Flip Y though so we get the top at 0\n              v_texcoord = a_position.xy * vec2(0.5, -0.5) + 0.5;\n            }\n        ", m),
                A = r.getUniformLocation(E, "u_element_heads"),
                g = r.getUniformLocation(E, "u_element_tails"),
                p = r.getUniformLocation(E, "u_blur"),
                T = r.getUniformLocation(E, "u_temperature_palette"),
                f = [1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1],
                C = r.createBuffer();
            r.bindBuffer(r.ARRAY_BUFFER, C), r.bufferData(r.ARRAY_BUFFER, new Float32Array(f), r.STATIC_DRAW), r.enableVertexAttribArray(0), r.vertexAttribPointer(0, 2, r.FLOAT, !1, 0, 0);
            const R = e => {
                    const t = new Uint8Array(this.#x.getDataTails().byteLength).fill(255),
                        n = r.createTexture();
                    r.activeTexture(e), r.bindTexture(r.TEXTURE_2D, n), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.NEAREST), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.NEAREST), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, this.#N, this.#H, 0, r.RGBA, r.UNSIGNED_BYTE, t);
                    const s = r.createFramebuffer();
                    return r.bindFramebuffer(r.FRAMEBUFFER, s), r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.TEXTURE_2D, n, 0), s
                },
                S = R(r.TEXTURE2),
                v = R(r.TEXTURE3),
                w = r.createTexture();
            r.activeTexture(r.TEXTURE0), r.bindTexture(r.TEXTURE_2D, w), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.NEAREST), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.NEAREST);
            const O = r.createTexture();
            r.activeTexture(r.TEXTURE1), r.bindTexture(r.TEXTURE_2D, O), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.NEAREST), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.NEAREST);
            const I = r.createTexture();
            r.activeTexture(r.TEXTURE4), r.bindTexture(r.TEXTURE_2D, I), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.NEAREST), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.NEAREST);
            let y = 2;
            this.#Xt = () => {
                const e = new Uint8Array(this.#x.getDataHeads());
                r.bindTexture(r.TEXTURE_2D, w), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, this.#N, this.#H, 0, r.RGBA, r.UNSIGNED_BYTE, e);
                const t = new Uint8Array(this.#x.getDataTails());
                r.bindTexture(r.TEXTURE_2D, O), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, this.#N, this.#H, 0, r.RGBA, r.UNSIGNED_BYTE, t), r.bindTexture(r.TEXTURE_2D, I), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, a, 1, 0, r.RGBA, r.UNSIGNED_BYTE, s), r.bindFramebuffer(r.FRAMEBUFFER, 2 === y ? S : v), r.useProgram(l), r.uniform1i(h, 0), r.uniform1i(c, 1), r.uniform1i(d, 2 === y ? 3 : 2), r.uniform1i(u, 4), r.drawArrays(r.TRIANGLES, 0, f.length / 2), r.bindFramebuffer(r.FRAMEBUFFER, null), r.useProgram(E), r.uniform1i(A, 0), r.uniform1i(g, 1), r.uniform1i(p, y), r.uniform1i(T, 4), r.drawArrays(r.TRIANGLES, 0, f.length / 2), y = 2 === y ? 3 : 2
            }
        }
        trigger(e, t) {}
        render(e) {
            this.#Xt()
        }
        #Jt(e, t, n) {
            const r = e.createProgram();
            return e.attachShader(r, this.#Zt(e, t, e.VERTEX_SHADER)), e.bindAttribLocation(r, 0, "a_position"), e.attachShader(r, this.#Zt(e, n, e.FRAGMENT_SHADER)), e.linkProgram(r), this.#jt(e, r), r
        }
        #Zt(e, t, n) {
            const r = e.createShader(n);
            e.shaderSource(r, t), e.compileShader(r);
            if (!e.getShaderParameter(r, e.COMPILE_STATUS)) {
                throw `Error compiling shader: ${e.getShaderInfoLog(r)}`
            }
            return r
        }
        #jt(e, t) {
            if (!e.getProgramParameter(t, e.LINK_STATUS)) {
                throw `Error in program linking: ${e.getProgramInfoLog(t)}`
            }
        }
        #qt(e) {
            const t = e.split("\n").map((e => e.split(",").map(Number))),
                n = new Uint8Array(4 * t.length);
            for (let e = 0; e < t.length; e++) {
                const r = t[e];
                n[4 * e] = r[0], n[4 * e + 1] = r[1], n[4 * e + 2] = r[2]
            }
            return n
        }
    }
    class Re extends Ae {
        constructor() {
            super()
        }
        trigger(e, t) {}
        render(e) {}
    }
    class Se {
        getContextType() {
            throw "Not implemented"
        }
        initialize(e, t, n) {
            throw "Not implemented"
        }
        static canvas2d() {
            return new ve(null)
        }
        static canvas2dHeatmap() {
            return new ve(new Te)
        }
        static canvas2dElementType() {
            return new ve(new fe)
        }
        static canvasWebGL() {
            return new we
        }
        static nullRenderer() {
            return new Oe
        }
    }
    class ve extends Se {
        #Ft;
        constructor(e) {
            super(), this.#Ft = e
        }
        getContextType() {
            return "2d"
        }
        initialize(e, t, n) {
            let r = new pe(e, t, n);
            return null !== this.#Ft && r.setMode(this.#Ft), r
        }
    }
    class we extends Se {
        getContextType() {
            return "webgl2"
        }
        initialize(e, t, n) {
            return new Ce(e, t, n)
        }
    }
    class Oe extends Se {
        constructor() {
            super()
        }
        getContextType() {
            return "2d"
        }
        initialize(e, t, n) {
            return new Re
        }
    }
    class Ie {
        static NEIGHBOURHOOD_VON_NEUMANN = 0;
        static NEIGHBOURHOOD_MOORE = 1;
        #x;
        #Qt;
        #$t;
        constructor(e, t = Ie.NEIGHBOURHOOD_VON_NEUMANN, n) {
            this.#x = e, this.#$t = t, this.#Qt = n
        }
        paint(e, t, n) {
            const r = 4071,
                s = this.#en(this.#x.getElementHead(e, t)) & r,
                a = this.#x.getWidth(),
                i = new Set,
                o = [];
            let l = e + t * a;
            do {
                let e = l % a,
                    t = Math.trunc(l / a);
                i.has(l) || (this.#Qt.draw(e, t, n), i.add(l), this.#tn(e, t - 1, r, s, i, o), this.#tn(e + 1, t, r, s, i, o), this.#tn(e, t + 1, r, s, i, o), this.#tn(e - 1, t, r, s, i, o), this.#$t === Ie.NEIGHBOURHOOD_MOORE && (this.#tn(e + 1, t + 1, r, s, i, o), this.#tn(e + 1, t - 1, r, s, i, o), this.#tn(e - 1, t + 1, r, s, i, o), this.#tn(e - 1, t - 1, r, s, i, o)))
            } while (null != (l = o.pop()))
        }
        #tn(e, t, n, r, s, a) {
            const i = this.#x.getWidth(),
                o = this.#x.getHeight();
            if (e < 0 || t < 0) return;
            if (e >= i || t >= o) return;
            if (!this.#nn(e, t, n, r)) return;
            const l = e + t * i;
            s.has(l) || a.push(l)
        }
        #nn(e, t, n, r) {
            let s = this.#x.getElementHead(e, t);
            return s = this.#en(s), (s & n) === r
        }
        #en(e) {
            return r.getTypeClass(e) === r.TYPE_POWDER_WET && (e = r.setTypeClass(e, r.TYPE_POWDER)), e
        }
    }
    class ye {
        #rn;
        #sn;
        #an;
        #in;
        #on;
        #ln = !0;
        #hn = [];
        constructor(e, t, n, r, s) {
            this.#rn = e, this.#sn = t, this.#an = n, this.#in = r, this.#on = s, this.#ln = !0 === s.visible
        }
        getPosition() {
            return [this.#rn, this.#sn, this.#an, this.#in]
        }
        getConfig() {
            return this.#on
        }
        isVisible() {
            return this.#ln
        }
        setVisible(e) {
            if (this.#ln !== e) {
                this.#ln = e;
                for (let t of this.#hn) t(e)
            }
        }
        addOnVisibleChanged(e) {
            this.#hn.push(e)
        }
    }
    class be {
        #x;
        #ue;
        #cn;
        #dn;
        constructor(e, t, n, r) {
            this.#x = e, this.#ue = t, this.#cn = n, this.#dn = r
        }
        swap(e, t, n, r) {
            e = Math.trunc(e), t = Math.trunc(t), n = Math.trunc(n), r = Math.trunc(r), this.#x.isValidPosition(e, t) && this.#x.isValidPosition(n, r) && this.#x.swap(e, t, n, r)
        }
        draw(e, t, r) {
            if (e = Math.trunc(e), t = Math.trunc(t), this.#x.isValidPosition(e, t))
                if (null === r) this.#x.setElement(e, t, this.#cn.getDefaultElement()), this.#dn(e, t);
                else if (r instanceof n) this.#x.setElement(e, t, r), this.#dn(e, t);
            else {
                if (!(r instanceof a)) throw "Brush or Element expected";
                {
                    let n = this.#x.getElement(e, t),
                        s = r.apply(e, t, this.#ue, n);
                    this.#x.setElement(e, t, s), this.#dn(e, t)
                }
            }
        }
        drawRectangle(e, t, r, s, i, o = !1) {
            if (!(i instanceof a || i instanceof n)) throw "Brush expected";
            e = Math.trunc(e), t = Math.trunc(t), r = Math.trunc(r), s = Math.trunc(s), o && (e = e >= 0 ? e : this.getWidth() + e + 1, r = r >= 0 ? r : this.getWidth() + r + 1, t = t >= 0 ? t : this.getHeight() + t + 1, s = s >= 0 ? s : this.getHeight() + s + 1), e = Math.max(Math.min(e, this.getWidth()), 0), r = Math.max(Math.min(r, this.getWidth()), 0), t = Math.max(Math.min(t, this.getHeight()), 0), s = Math.max(Math.min(s, this.getHeight()), 0);
            for (let n = t; n < s; n++)
                for (let t = e; t < r; t++) this.draw(t, n, i)
        }
        drawRectangleWH(e, t, n, r, s) {
            this.drawRectangle(e, t, e + n, t + r, s, !1)
        }
        drawLine(e, t, r, s, i, o, l = !1) {
            if (!(o instanceof a || o instanceof n)) throw "Brush expected";
            let h;
            if (e = Math.trunc(e), t = Math.trunc(t), r = Math.trunc(r), s = Math.trunc(s), l) {
                let e, t = Math.trunc(i / 2);
                e = t <= 3 ? ae.BLUEPRINT_3 : 4 === t ? ae.BLUEPRINT_4 : ae.BLUEPRINT_9, h = (n, r) => {
                    ae.iterate(e, ((e, s, a) => {
                        a <= t && this.draw(n + e, r + s, o)
                    }))
                }
            } else {
                const e = Math.ceil(i / 2);
                h = (t, n) => {
                    this.drawRectangle(t - e, n - e, t + e, n + e, o)
                }
            }
            be.#un(e, t, r, s, h)
        }
        static #un(e, t, n, r, s) {
            if (s(e, t), e !== n || t !== r) {
                const a = e < n ? 1 : -1,
                    i = t < r ? 1 : -1,
                    o = Math.abs(n - e),
                    l = Math.abs(r - t);
                let h = o - l;
                for (; e !== n || t !== r;) {
                    const n = 2 * h;
                    n > -l && (h -= l, e += a), n < o && (h += o, t += i), s(e, t)
                }
            }
        }
        drawShape(e, t) {
            if (!(e instanceof ye)) throw "Shape not supported";
            {
                const [n, r, s, a] = e.getPosition();
                this.drawRectangle(n, r, s, a, t, !1)
            }
        }
        fill(e) {
            this.drawRectangle(0, 0, this.#x.getWidth(), this.#x.getHeight(), e)
        }
        floodFill(e, t, n, r) {
            e = Math.trunc(e), t = Math.trunc(t), new Ie(this.#x, r, this).paint(e, t, n)
        }
        replace(e, t) {
            const n = this.getWidth(),
                r = this.getHeight();
            for (let s = 0; s < r; s++)
                for (let r = 0; r < n; r++) {
                    const n = this.#x.getElement(r, s);
                    n.elementHead === e.elementHead && n.elementTail === e.elementTail && this.#x.setElement(r, s, t)
                }
        }
        getWidth() {
            return this.#x.getWidth()
        }
        getHeight() {
            return this.#x.getHeight()
        }
        getDefaults() {
            return this.#cn
        }
    }
    class Me {
        #N;
        #H;
        #mn = [];
        #En = [];
        constructor(e, t) {
            this.#N = e, this.#H = t
        }
        createRectangle(e, t, n, r, s, a = !1) {
            e = Math.trunc(e), t = Math.trunc(t), n = Math.trunc(n), r = Math.trunc(r), a && (e = e >= 0 ? e : this.#N + e + 1, n = n >= 0 ? n : this.#N + n + 1, t = t >= 0 ? t : this.#H + t + 1, r = r >= 0 ? r : this.#H + r + 1), e = Math.max(Math.min(e, this.#N - 1), 0), n = Math.max(Math.min(n, this.#N - 1), 0), t = Math.max(Math.min(t, this.#H - 1), 0), r = Math.max(Math.min(r, this.#H - 1), 0);
            const i = new ye(e, t, n, r, s);
            this.#mn.push(i);
            for (let e of this.#En) e(i);
            return i
        }
        createRectangleWH(e, t, n, r, s) {
            return this.createRectangle(e, t, e + n, t + r, s)
        }
        getMarkers() {
            return [...this.#mn]
        }
        addOnMarkerAdded(e) {
            this.#En.push(e)
        }
        getWidth() {
            return this.#N
        }
        getHeight() {
            return this.#H
        }
    }
    class He {
        #on;
        #ln;
        #hn = [];
        constructor(e) {
            this.#on = e, this.#ln = !0 === e.visible
        }
        getConfig() {
            return this.#on
        }
        isVisible() {
            return this.#ln
        }
        setVisible(e) {
            if (this.#ln !== e) {
                this.#ln = e;
                for (let t of this.#hn) t(e)
            }
        }
        addOnVisibleChanged(e) {
            this.#hn.push(e)
        }
    }
    class Ne {
        #on;
        #ln;
        #hn = [];
        #An;
        #gn = [];
        #pn = !1;
        #Tn = [];
        constructor(e) {
            this.#on = e, this.#ln = !0 === e.visible, this.#An = !0 === e.active
        }
        getConfig() {
            return this.#on
        }
        isVisible() {
            return this.#ln
        }
        setVisible(e) {
            if (this.#ln !== e) {
                this.#ln = e;
                for (let t of this.#hn) t(e)
            }
        }
        addOnVisibleChanged(e) {
            this.#hn.push(e)
        }
        isActive() {
            return this.#An
        }
        setActive(e) {
            if (this.#An !== e) {
                this.#An = e;
                for (let t of this.#gn) t(e)
            }
        }
        addOnActiveChanged(e) {
            this.#gn.push(e)
        }
        isCompleted() {
            return this.#pn
        }
        setCompleted(e) {
            if (this.#pn !== e) {
                this.#pn = e;
                for (let t of this.#Tn) t(e)
            }
        }
        addOnCompleted(e) {
            this.#Tn.push(e)
        }
    }
    class De {
        #fn = [];
        #Cn = [];
        #Rn = [];
        #Sn = [];
        #vn = !1;
        #wn = [];
        constructor() {}
        createSplash(e) {
            const t = new He(e);
            this.#fn.push(t);
            for (let e of this.#Cn) e(t);
            return t
        }
        getSplashes() {
            return [...this.#fn]
        }
        addOnSplashAdded(e) {
            this.#Cn.push(e)
        }
        createObjective(e) {
            const t = new Ne(e);
            this.#Rn.push(t);
            for (let e of this.#Sn) e(t);
            return t
        }
        getObjectives() {
            return [...this.#Rn]
        }
        addOnObjectiveAdded(e) {
            this.#Sn.push(e)
        }
        setCompleted() {
            if (!this.#vn) {
                this.#vn = !0, J.triggerFeatureUsed(J.FEATURE_SCENARIO_COMPLETED);
                for (let e of this.#wn) e()
            }
        }
        addOnStatusCompleted(e) {
            this.#wn.push(e)
        }
    }
    class Ue {
        metadata;
        dataHeads;
        dataTails
    }
    class xe {
        static CURRENT_FORMAT_VERSION = 6;
        formatVersion;
        appVersion;
        created;
        width;
        height;
        scale;
        random;
        iteration;
        fallThroughEnabled;
        erasingEnabled
    }
    class Be {
        #Qt;
        #On = null;
        #In = null;
        #yn = Number.MAX_SAFE_INTEGER;
        #bn = "bottom";
        constructor(e) {
            this.#Qt = e
        }
        withBlueprint(e) {
            return this.#On = e, this
        }
        withBrushes(e) {
            return this.#In = e, this
        }
        withMaxHeight(e, t = "bottom") {
            return this.#yn = e, this.#bn = t, this
        }
        paint() {
            if (null === this.#On || 0 === this.#On.length) throw "Blueprint not set";
            if (null === this.#In) throw "Brushes not set";
            const e = "string" == typeof this.#On ? this.#On.split("\n") : this.#On,
                t = e[0].length,
                n = e.length,
                r = Math.ceil(this.#Qt.getWidth() / t),
                s = Math.ceil(Math.min(this.#Qt.getHeight(), this.#yn) / n),
                a = "bottom" === this.#bn ? this.#Qt.getHeight() - s * n : 0;
            for (let i = 0; i < n; i++) {
                const n = e[i];
                for (let e = 0; e < Math.min(t, n.length); e++) {
                    const t = n.charAt(e);
                    let o = this.#In[t];
                    if (void 0 === o) {
                        if (" " === t) continue;
                        throw "Brush not found: " + t
                    }
                    this.#Qt.drawRectangle(e * r, a + i * s, e * r + r + 1, a + i * s + s + 1, o)
                }
            }
        }
    }
    var Pe = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};

    function Fe(e, t, n) {
        let r = e[t];
        e[t] = e[n], e[n] = r
    }
    class Le {
        #x;
        #Qt;
        #ue;
        #me;
        #Mn;
        constructor(e, t, n, r) {
            this.#x = e, this.#Qt = t, this.#ue = n, this.#me = r, this.#Mn = new Array(e.getWidth()).fill(0)
        }
        layer(e, t, n, r = 0) {
            return this.layerFunction((function(t) {
                return Math.trunc(e)
            }), t, n, r), this
        }
        layerSpline(e, t, n, r = 0) {
            const s = new Array(e.length),
                a = new Array(e.length);
            for (let t = 0; t < e.length; t++) s[t] = e[t][0], a[t] = e[t][1];
            const i = new class {
                constructor(e, t) {
                    this.xs = e, this.ys = t, this.ks = this.getNaturalKs(new Float64Array(this.xs.length))
                }
                getNaturalKs(e) {
                    const t = this.xs.length - 1,
                        n = function(e, t) {
                            const n = [];
                            for (let r = 0; r < e; r++) n.push(new Float64Array(t));
                            return n
                        }(t + 1, t + 2);
                    for (let e = 1; e < t; e++) n[e][e - 1] = 1 / (this.xs[e] - this.xs[e - 1]), n[e][e] = 2 * (1 / (this.xs[e] - this.xs[e - 1]) + 1 / (this.xs[e + 1] - this.xs[e])), n[e][e + 1] = 1 / (this.xs[e + 1] - this.xs[e]), n[e][t + 1] = 3 * ((this.ys[e] - this.ys[e - 1]) / ((this.xs[e] - this.xs[e - 1]) * (this.xs[e] - this.xs[e - 1])) + (this.ys[e + 1] - this.ys[e]) / ((this.xs[e + 1] - this.xs[e]) * (this.xs[e + 1] - this.xs[e])));
                    return n[0][0] = 2 / (this.xs[1] - this.xs[0]), n[0][1] = 1 / (this.xs[1] - this.xs[0]), n[0][t + 1] = 3 * (this.ys[1] - this.ys[0]) / ((this.xs[1] - this.xs[0]) * (this.xs[1] - this.xs[0])), n[t][t - 1] = 1 / (this.xs[t] - this.xs[t - 1]), n[t][t] = 2 / (this.xs[t] - this.xs[t - 1]), n[t][t + 1] = 3 * (this.ys[t] - this.ys[t - 1]) / ((this.xs[t] - this.xs[t - 1]) * (this.xs[t] - this.xs[t - 1])),
                        function(e, t) {
                            const n = e.length;
                            let r = 0,
                                s = 0;
                            for (; r < n && s <= n;) {
                                let t = 0,
                                    a = -1 / 0;
                                for (let i = r; i < n; i++) {
                                    const n = Math.abs(e[i][s]);
                                    n > a && (t = i, a = n)
                                }
                                if (0 === e[t][s]) s++;
                                else {
                                    Fe(e, r, t);
                                    for (let t = r + 1; t < n; t++) {
                                        const a = e[t][s] / e[r][s];
                                        e[t][s] = 0;
                                        for (let i = s + 1; i <= n; i++) e[t][i] -= e[r][i] * a
                                    }
                                    r++, s++
                                }
                            }
                            for (let r = n - 1; r >= 0; r--) {
                                var a = 0;
                                e[r][r] && (a = e[r][n] / e[r][r]), t[r] = a;
                                for (let t = r - 1; t >= 0; t--) e[t][n] -= e[t][r] * a, e[t][r] = 0
                            }
                            return t
                        }(n, e)
                }
                getIndexBefore(e) {
                    let t = 0,
                        n = this.xs.length,
                        r = 0;
                    for (; t < n;) r = Math.floor((t + n) / 2), this.xs[r] < e && r !== t ? t = r : n = this.xs[r] >= e && r !== n ? r : t;
                    return t + 1
                }
                at(e) {
                    let t = this.getIndexBefore(e);
                    const n = (e - this.xs[t - 1]) / (this.xs[t] - this.xs[t - 1]),
                        r = this.ks[t - 1] * (this.xs[t] - this.xs[t - 1]) - (this.ys[t] - this.ys[t - 1]),
                        s = -this.ks[t] * (this.xs[t] - this.xs[t - 1]) + (this.ys[t] - this.ys[t - 1]);
                    return (1 - n) * this.ys[t - 1] + n * this.ys[t] + n * (1 - n) * (r * (1 - n) + s * n)
                }
            }(s, a);
            return this.layerFunction((function(e) {
                return Math.max(Math.trunc(i.at(e)), 0)
            }), t, n, r), this
        }
        layerPerlin(e, t, n, r = 0) {
            const a = [];
            for (let t of e) {
                if (void 0 === t.seed && (s.DEFAULT.next(), t.seed = s.DEFAULT.getState()), void 0 === t.factor) throw "factor not defined";
                if (void 0 === t.threshold) throw "threshold not defined";
                if (void 0 === t.force) throw "force not defined";
                const e = new s(t.seed),
                    n = T((() => e.next()));
                a.push({
                    instance: n,
                    levelConfig: t
                })
            }
            return this.layerFunction((function(e) {
                let t = 0;
                for (const {
                        instance: n,
                        levelConfig: r
                    }
                    of a) {
                    const {
                        factor: s,
                        threshold: a,
                        force: i
                    } = r;
                    let o = (n(e / s, 0) + 1) / 2;
                    o < a && (o = 0), o = 1 / (1 - a) * (o - a), o *= i, t += o
                }
                return Math.trunc(t)
            }), t, n, r), this
        }
        layerFunction(e, t, n, r = 0) {
            for (let s = 0; s < this.#x.getWidth(); s++) {
                const a = this.#Mn[s],
                    i = t ? a + e(s) : e(s);
                if (a < i) {
                    let e = 0;
                    for (let t = a; t < i && t < this.#x.getHeight(); t++) {
                        let r = this.#x.getHeight() - 1 - t;
                        this.#Qt.draw(s, r, n), e++
                    }
                    if (r > 0 && e > 0)
                        for (let t = 0; t < r; t++) {
                            const t = Math.min(Math.trunc(e / 2), 10);
                            if (t > 1) {
                                const e = this.#ue.nextInt(Math.ceil(t)) - Math.trunc(t / 2),
                                    n = this.#x.getHeight() - 1 - a + e,
                                    r = this.#x.getHeight() - 1 - a + e + 1;
                                n < this.#x.getHeight() && r < this.#x.getHeight() && this.#x.swap(s, n, s, r)
                            }
                        }
                    this.#Mn[s] = i
                }
            }
            return this
        }
        grass(e = 0, t = -1) {
            -1 === t && (t = this.#x.getWidth());
            for (let n = e; n < t; n++) {
                const e = this.#Mn[n],
                    t = this.#x.getHeight() - 1 - e;
                if (oe.canGrowUpHere(this.#x, n, t)) {
                    const e = this.#me.getDefaults().getBrushGrass();
                    oe.spawnHere(this.#x, n, t, e, this.#ue)
                }
            }
            return this
        }
        tree(e, t = void 0, n = void 0) {
            if (e <= 5 || e >= this.#x.getWidth() - 5) return this;
            const s = this.#Mn[e],
                a = this.#x.getHeight() - 1 - s,
                i = this.#me.getDefaults().getBrushTree();
            if (!this.#x.isValidPosition(e, a + 1)) return this;
            {
                const t = this.#x.getElementHead(e, a + 1);
                if (r.getBehaviour(t) !== r.BEHAVIOUR_SOIL) return this
            }
            return void 0 === t && (t = this.#ue.nextInt(8)), he.spawnHere(this.#x, e, a, t, i, this.#ue, this.#me, n), this
        }
        fish(e, t = 0) {
            if (e < 0 || e >= this.#x.getWidth() - 1) return this;
            const n = this.#Mn[e],
                r = this.#x.getHeight() - t - n;
            return r < 0 || r >= this.#x.getHeight() || (this.#x.setElement(e, r, F.FISH_HEAD.apply(0, 0, this.#ue, null)), this.#x.setElement(e + 1, r, F.FISH_BODY.apply(0, 0, this.#ue, null))), this
        }
        tool(e, t, n) {
            if (e < 0 || e >= this.#x.getWidth()) return this;
            const r = this.#Mn[e],
                s = this.#x.getHeight() - t - r;
            return s < 0 || s >= this.#x.getHeight() || n.applyPoint(e, s, this.#Qt, !1), this
        }
    }
    class _e {
        #x;
        #N;
        #H;
        #ue;
        #Hn;
        #Nn;
        #Dn;
        #Un;
        #xn = null;
        #Bn = null;
        #Pn = [];
        #Fn = [];
        #Ln = [];
        #_n;
        #kn;
        constructor(e, t, n, r, a) {
            this.#x = e, this.#ue = new s(t ? t.random : 0), this.#Hn = new te, this.#Nn = new te, this.#Dn = new de(this.#x, 16, this.#ue, n, t), this.#Un = a.initialize(this.#x, 16, r), this.#N = e.getWidth(), this.#H = e.getHeight(), this.#_n = new Me(e.getWidth(), e.getHeight()), this.#kn = new De, this.#Wn(), this.#Vn()
        }
        #Wn() {
            let e = [];
            const t = () => {
                e = this.#kn.getObjectives().filter((e => e.isActive() && "function" == typeof e.getConfig().checkHandler))
            };
            this.#kn.addOnObjectiveAdded((e => {
                t(), e.addOnActiveChanged((() => t())), e.addOnCompleted((() => t()))
            })), this.#Ln.push((() => {
                for (let t of e) t.getConfig().checkHandler(this.#Dn.getIteration() - 1)
            }))
        }
        #Vn() {
            let e = new me(this.#x, this.#ue, this.#Dn);
            this.#Ln.push((() => e.run()));
            let t = new Ee(this.#x, this.#ue, this.#Dn);
            this.#Ln.push((() => t.run()));
            let n = new ue(this.#x, this.#ue, this.#Dn);
            this.#Ln.push((() => n.run()))
        }
        startProcessing() {
            if (null === this.#xn) {
                const e = Math.trunc(1e3 / de.OPT_CYCLES_PER_SECOND);
                this.#xn = setInterval((() => this.doProcessing()), e)
            }
        }
        startRendering() {
            if (null === this.#Bn) {
                const e = Math.trunc(1e3 / de.OPT_FRAMES_PER_SECOND);
                this.#Bn = setInterval((() => this.doRendering()), e)
            }
        }
        stopProcessing() {
            null !== this.#xn && (clearInterval(this.#xn), this.#xn = null), this.#Nn.clear()
        }
        stopRendering() {
            null !== this.#Bn && (clearInterval(this.#Bn), this.#Bn = null), this.#Hn.clear()
        }
        doProcessing() {
            this.#Dn.next();
            const e = Date.now();
            this.#Nn.tick(e);
            for (let e of this.#Ln) e(this.#Dn.getIteration())
        }
        doRendering() {
            const e = this.#Dn.getChangedChunks();
            try {
                this.#Un.render(e)
            } catch (e) {
                this.stopRendering();
                for (let t of this.#Fn) t(e);
                return
            }
            const t = Date.now();
            this.#Hn.tick(t);
            for (let t of this.#Pn) t(e);
            this.#Dn.cleanChangedChunks()
        }
        graphics() {
            const e = this.#Dn.getDefaults();
            return new be(this.#x, this.#ue, e, ((e, t) => {
                this.#Dn.trigger(e, t), this.#Un.trigger(e, t)
            }))
        }
        overlay() {
            return this.#_n
        }
        scenario() {
            return this.#kn
        }
        blockTemplate() {
            return new Be(this.graphics())
        }
        layeredTemplate() {
            return new Le(this.#x, this.graphics(), this.#ue, this.#Dn)
        }
        setBoxedMode() {
            this.#Dn.setFallThroughEnabled(!1), this.#Dn.setErasingEnabled(!1)
        }
        setFallThroughMode() {
            this.#Dn.setFallThroughEnabled(!0), this.#Dn.setErasingEnabled(!1)
        }
        setErasingMode() {
            this.#Dn.setFallThroughEnabled(!1), this.#Dn.setErasingEnabled(!0)
        }
        addOnProcessed(e) {
            this.#Ln.push(e)
        }
        addOnRendered(e) {
            this.#Pn.push(e)
        }
        addOnRenderingFailed(e) {
            this.#Fn.push(e)
        }
        getFramesPerSecond() {
            return this.#Hn.getValue()
        }
        getIterationsPerSecond() {
            return this.#Nn.getValue()
        }
        getWidth() {
            return this.#N
        }
        getHeight() {
            return this.#H
        }
        getChunkSize() {
            return 16
        }
        copyStateTo(e) {
            let t, n;
            e.#H >= this.#H ? (t = 0, n = e.#H - this.#H) : (t = this.#H - e.#H, n = 0);
            for (let r = 0; r < Math.min(this.#H, e.#H); r++)
                for (let s = 0; s < Math.min(this.#N, e.#N); s++) {
                    let a = this.#x.getElementHead(s, r + t),
                        i = this.#x.getElementTail(s, r + t);
                    e.#x.setElementHead(s, n + r, a), e.#x.setElementTail(s, n + r, i)
                }
            e.#Dn.setFallThroughEnabled(this.#Dn.isFallThroughEnabled()), e.#Dn.setErasingEnabled(this.#Dn.isErasingEnabled())
        }
        createSnapshot() {
            let e = new xe;
            e.formatVersion = xe.CURRENT_FORMAT_VERSION, e.created = (new Date).getTime(), e.width = this.#N, e.height = this.#H, e.random = this.#ue.getState(), e.iteration = this.#Dn.getIteration(), e.fallThroughEnabled = this.#Dn.isFallThroughEnabled(), e.erasingEnabled = this.#Dn.isErasingEnabled();
            let t = new Ue;
            return t.metadata = e, t.dataHeads = this.#x.getDataHeads(), t.dataTails = this.#x.getDataTails(), t
        }
        debugElementAt(e, t) {
            if (!this.#x.isValidPosition(e, t)) return "Out of bounds";
            const n = this.#x.getElementHead(e, t),
                s = this.#x.getElementTail(e, t);

            function a(e) {
                return "0x" + e.toString(16).padStart(8, "0")
            }
            let i = a(n) + " " + a(s);
            const o = {
                type: {
                    class: r.getTypeClass(n)
                },
                behaviour: {
                    type: r.getBehaviour(n),
                    special: r.getSpecial(n)
                },
                heatModIndex: r.getHeatModIndex(n),
                temperature: r.getTemperature(n),
                color: [h.getColorRed(s), h.getColorGreen(s), h.getColorBlue(s)],
                blurType: h.getBlurType(s),
                burntLevel: h.getBurntLevel(s),
                heatEffect: h.getHeatEffect(s)
            };
            let l = JSON.stringify(o).replaceAll('"', "").replaceAll(",", ", ").replaceAll(":", "=");
            return l = l.substring(1, l.length - 1), i + "\n" + l
        }
    }
    class ke {
        countSize(e, t) {
            throw "Not implemented"
        }
        createSandGame(e, t, n, r, s) {
            throw "Not implemented"
        }
        createElementArea(e, t, n) {
            throw "Not implemented"
        }
    }
    class We extends ke {
        #Gn;
        constructor(e) {
            super(), this.#Gn = e
        }
        countSize(e, t) {
            return [e, t]
        }
        async createSandGame(e, t, n, r, s) {
            let a = this.createElementArea(e, t, n.getDefaultElement()),
                i = new _e(a, null, n, r, s);
            return this.#Gn.copyStateTo(i), i
        }
        createElementArea(e, t, n) {
            return _.create(e, t, n)
        }
    }
    class Ve {
        #Yn;
        #zn;
        #Kn;
        #Xn = [];
        #qn;
        #Jn = [];
        constructor(e, t, n) {
            this.#Yn = e, this.#zn = t, this.#Kn = n
        }
        setPrimaryTool(e) {
            this.#Yn = e;
            for (let t of this.#Xn) t(e)
        }
        setSecondaryTool(e) {
            this.#zn = e
        }
        setTertiaryTool(e) {
            this.#Kn = e
        }
        getPrimaryTool() {
            return this.#Yn
        }
        getSecondaryTool() {
            return this.#zn
        }
        getTertiaryTool() {
            return this.#Kn
        }
        addOnPrimaryToolChanged(e) {
            this.#Xn.push(e)
        }
        isInputDisabled() {
            return this.#qn
        }
        addOnInputDisabledChanged(e) {
            this.#Jn.push(e)
        }
        setInputDisabled(e) {
            if (this.#qn !== e) {
                this.#qn = e;
                for (let t of this.#Jn) t(e)
            }
        }
        createRevertAction() {
            const e = this.getPrimaryTool(),
                t = this.getSecondaryTool(),
                n = this.getTertiaryTool();
            return () => {
                this.setPrimaryTool(e), this.setSecondaryTool(t), this.setTertiaryTool(n)
            }
        }
    }
    class Ge extends ke {
        #Zn;
        constructor(e) {
            super(), this.#Zn = e
        }
        countSize(e, t) {
            return [this.#Zn.metadata.width, this.#Zn.metadata.height]
        }
        async createSandGame(e, t, n, r, s) {
            let a = this.createElementArea(e, t, n.getDefaultElement());
            return new _e(a, this.#Zn.metadata, n, r, s)
        }
        createElementArea(e, t, n) {
            return _.from(this.#Zn.metadata.width, this.#Zn.metadata.height, this.#Zn.dataHeads, this.#Zn.dataTails)
        }
    }
    var Ye = Uint8Array,
        ze = Uint16Array,
        Ke = Uint32Array,
        Xe = new Ye([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]),
        qe = new Ye([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]),
        Je = new Ye([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),
        Ze = function(e, t) {
            for (var n = new ze(31), r = 0; r < 31; ++r) n[r] = t += 1 << e[r - 1];
            var s = new Ke(n[30]);
            for (r = 1; r < 30; ++r)
                for (var a = n[r]; a < n[r + 1]; ++a) s[a] = a - n[r] << 5 | r;
            return [n, s]
        },
        je = Ze(Xe, 2),
        Qe = je[0],
        $e = je[1];
    Qe[28] = 258, $e[258] = 28;
    for (var et = Ze(qe, 0), tt = et[0], nt = et[1], rt = new ze(32768), st = 0; st < 32768; ++st) {
        var at = (43690 & st) >>> 1 | (21845 & st) << 1;
        at = (61680 & (at = (52428 & at) >>> 2 | (13107 & at) << 2)) >>> 4 | (3855 & at) << 4, rt[st] = ((65280 & at) >>> 8 | (255 & at) << 8) >>> 1
    }
    var it = function(e, t, n) {
            for (var r = e.length, s = 0, a = new ze(t); s < r; ++s) e[s] && ++a[e[s] - 1];
            var i, o = new ze(t);
            for (s = 0; s < t; ++s) o[s] = o[s - 1] + a[s - 1] << 1;
            if (n) {
                i = new ze(1 << t);
                var l = 15 - t;
                for (s = 0; s < r; ++s)
                    if (e[s])
                        for (var h = s << 4 | e[s], c = t - e[s], d = o[e[s] - 1]++ << c, u = d | (1 << c) - 1; d <= u; ++d) i[rt[d] >>> l] = h
            } else
                for (i = new ze(r), s = 0; s < r; ++s) e[s] && (i[s] = rt[o[e[s] - 1]++] >>> 15 - e[s]);
            return i
        },
        ot = new Ye(288);
    for (st = 0; st < 144; ++st) ot[st] = 8;
    for (st = 144; st < 256; ++st) ot[st] = 9;
    for (st = 256; st < 280; ++st) ot[st] = 7;
    for (st = 280; st < 288; ++st) ot[st] = 8;
    var lt = new Ye(32);
    for (st = 0; st < 32; ++st) lt[st] = 5;
    var ht = it(ot, 9, 0),
        ct = it(ot, 9, 1),
        dt = it(lt, 5, 0),
        ut = it(lt, 5, 1),
        mt = function(e) {
            for (var t = e[0], n = 1; n < e.length; ++n) e[n] > t && (t = e[n]);
            return t
        },
        Et = function(e, t, n) {
            var r = t / 8 | 0;
            return (e[r] | e[r + 1] << 8) >> (7 & t) & n
        },
        At = function(e, t) {
            var n = t / 8 | 0;
            return (e[n] | e[n + 1] << 8 | e[n + 2] << 16) >> (7 & t)
        },
        gt = function(e) {
            return (e + 7) / 8 | 0
        },
        pt = function(e, t, n) {
            (null == t || t < 0) && (t = 0), (null == n || n > e.length) && (n = e.length);
            var r = new(2 == e.BYTES_PER_ELEMENT ? ze : 4 == e.BYTES_PER_ELEMENT ? Ke : Ye)(n - t);
            return r.set(e.subarray(t, n)), r
        },
        Tt = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"],
        ft = function(e, t, n) {
            var r = new Error(t || Tt[e]);
            if (r.code = e, Error.captureStackTrace && Error.captureStackTrace(r, ft), !n) throw r;
            return r
        },
        Ct = function(e, t, n) {
            var r = e.length;
            if (!r || n && n.f && !n.l) return t || new Ye(0);
            var s = !t || n,
                a = !n || n.i;
            n || (n = {}), t || (t = new Ye(3 * r));
            var i = function(e) {
                    var n = t.length;
                    if (e > n) {
                        var r = new Ye(Math.max(2 * n, e));
                        r.set(t), t = r
                    }
                },
                o = n.f || 0,
                l = n.p || 0,
                h = n.b || 0,
                c = n.l,
                d = n.d,
                u = n.m,
                m = n.n,
                E = 8 * r;
            do {
                if (!c) {
                    o = Et(e, l, 1);
                    var A = Et(e, l + 1, 3);
                    if (l += 3, !A) {
                        var g = e[(y = gt(l) + 4) - 4] | e[y - 3] << 8,
                            p = y + g;
                        if (p > r) {
                            a && ft(0);
                            break
                        }
                        s && i(h + g), t.set(e.subarray(y, p), h), n.b = h += g, n.p = l = 8 * p, n.f = o;
                        continue
                    }
                    if (1 == A) c = ct, d = ut, u = 9, m = 5;
                    else if (2 == A) {
                        var T = Et(e, l, 31) + 257,
                            f = Et(e, l + 10, 15) + 4,
                            C = T + Et(e, l + 5, 31) + 1;
                        l += 14;
                        for (var R = new Ye(C), S = new Ye(19), v = 0; v < f; ++v) S[Je[v]] = Et(e, l + 3 * v, 7);
                        l += 3 * f;
                        var w = mt(S),
                            O = (1 << w) - 1,
                            I = it(S, w, 1);
                        for (v = 0; v < C;) {
                            var y, b = I[Et(e, l, O)];
                            if (l += 15 & b, (y = b >>> 4) < 16) R[v++] = y;
                            else {
                                var M = 0,
                                    H = 0;
                                for (16 == y ? (H = 3 + Et(e, l, 3), l += 2, M = R[v - 1]) : 17 == y ? (H = 3 + Et(e, l, 7), l += 3) : 18 == y && (H = 11 + Et(e, l, 127), l += 7); H--;) R[v++] = M
                            }
                        }
                        var N = R.subarray(0, T),
                            D = R.subarray(T);
                        u = mt(N), m = mt(D), c = it(N, u, 1), d = it(D, m, 1)
                    } else ft(1);
                    if (l > E) {
                        a && ft(0);
                        break
                    }
                }
                s && i(h + 131072);
                for (var U = (1 << u) - 1, x = (1 << m) - 1, B = l;; B = l) {
                    var P = (M = c[At(e, l) & U]) >>> 4;
                    if ((l += 15 & M) > E) {
                        a && ft(0);
                        break
                    }
                    if (M || ft(2), P < 256) t[h++] = P;
                    else {
                        if (256 == P) {
                            B = l, c = null;
                            break
                        }
                        var F = P - 254;
                        if (P > 264) {
                            var L = Xe[v = P - 257];
                            F = Et(e, l, (1 << L) - 1) + Qe[v], l += L
                        }
                        var _ = d[At(e, l) & x],
                            k = _ >>> 4;
                        _ || ft(3), l += 15 & _;
                        D = tt[k];
                        if (k > 3) {
                            L = qe[k];
                            D += At(e, l) & (1 << L) - 1, l += L
                        }
                        if (l > E) {
                            a && ft(0);
                            break
                        }
                        s && i(h + 131072);
                        for (var W = h + F; h < W; h += 4) t[h] = t[h - D], t[h + 1] = t[h + 1 - D], t[h + 2] = t[h + 2 - D], t[h + 3] = t[h + 3 - D];
                        h = W
                    }
                }
                n.l = c, n.p = B, n.b = h, n.f = o, c && (o = 1, n.m = u, n.d = d, n.n = m)
            } while (!o);
            return h == t.length ? t : pt(t, 0, h)
        },
        Rt = function(e, t, n) {
            n <<= 7 & t;
            var r = t / 8 | 0;
            e[r] |= n, e[r + 1] |= n >>> 8
        },
        St = function(e, t, n) {
            n <<= 7 & t;
            var r = t / 8 | 0;
            e[r] |= n, e[r + 1] |= n >>> 8, e[r + 2] |= n >>> 16
        },
        vt = function(e, t) {
            for (var n = [], r = 0; r < e.length; ++r) e[r] && n.push({
                s: r,
                f: e[r]
            });
            var s = n.length,
                a = n.slice();
            if (!s) return [Ht, 0];
            if (1 == s) {
                var i = new Ye(n[0].s + 1);
                return i[n[0].s] = 1, [i, 1]
            }
            n.sort((function(e, t) {
                return e.f - t.f
            })), n.push({
                s: -1,
                f: 25001
            });
            var o = n[0],
                l = n[1],
                h = 0,
                c = 1,
                d = 2;
            for (n[0] = {
                    s: -1,
                    f: o.f + l.f,
                    l: o,
                    r: l
                }; c != s - 1;) o = n[n[h].f < n[d].f ? h++ : d++], l = n[h != c && n[h].f < n[d].f ? h++ : d++], n[c++] = {
                s: -1,
                f: o.f + l.f,
                l: o,
                r: l
            };
            var u = a[0].s;
            for (r = 1; r < s; ++r) a[r].s > u && (u = a[r].s);
            var m = new ze(u + 1),
                E = wt(n[c - 1], m, 0);
            if (E > t) {
                r = 0;
                var A = 0,
                    g = E - t,
                    p = 1 << g;
                for (a.sort((function(e, t) {
                        return m[t.s] - m[e.s] || e.f - t.f
                    })); r < s; ++r) {
                    var T = a[r].s;
                    if (!(m[T] > t)) break;
                    A += p - (1 << E - m[T]), m[T] = t
                }
                for (A >>>= g; A > 0;) {
                    var f = a[r].s;
                    m[f] < t ? A -= 1 << t - m[f]++ - 1 : ++r
                }
                for (; r >= 0 && A; --r) {
                    var C = a[r].s;
                    m[C] == t && (--m[C], ++A)
                }
                E = t
            }
            return [new Ye(m), E]
        },
        wt = function(e, t, n) {
            return -1 == e.s ? Math.max(wt(e.l, t, n + 1), wt(e.r, t, n + 1)) : t[e.s] = n
        },
        Ot = function(e) {
            for (var t = e.length; t && !e[--t];);
            for (var n = new ze(++t), r = 0, s = e[0], a = 1, i = function(e) {
                    n[r++] = e
                }, o = 1; o <= t; ++o)
                if (e[o] == s && o != t) ++a;
                else {
                    if (!s && a > 2) {
                        for (; a > 138; a -= 138) i(32754);
                        a > 2 && (i(a > 10 ? a - 11 << 5 | 28690 : a - 3 << 5 | 12305), a = 0)
                    } else if (a > 3) {
                        for (i(s), --a; a > 6; a -= 6) i(8304);
                        a > 2 && (i(a - 3 << 5 | 8208), a = 0)
                    }
                    for (; a--;) i(s);
                    a = 1, s = e[o]
                } return [n.subarray(0, r), t]
        },
        It = function(e, t) {
            for (var n = 0, r = 0; r < t.length; ++r) n += e[r] * t[r];
            return n
        },
        yt = function(e, t, n) {
            var r = n.length,
                s = gt(t + 2);
            e[s] = 255 & r, e[s + 1] = r >>> 8, e[s + 2] = 255 ^ e[s], e[s + 3] = 255 ^ e[s + 1];
            for (var a = 0; a < r; ++a) e[s + a + 4] = n[a];
            return 8 * (s + 4 + r)
        },
        bt = function(e, t, n, r, s, a, i, o, l, h, c) {
            Rt(t, c++, n), ++s[256];
            for (var d = vt(s, 15), u = d[0], m = d[1], E = vt(a, 15), A = E[0], g = E[1], p = Ot(u), T = p[0], f = p[1], C = Ot(A), R = C[0], S = C[1], v = new ze(19), w = 0; w < T.length; ++w) v[31 & T[w]]++;
            for (w = 0; w < R.length; ++w) v[31 & R[w]]++;
            for (var O = vt(v, 7), I = O[0], y = O[1], b = 19; b > 4 && !I[Je[b - 1]]; --b);
            var M, H, N, D, U = h + 5 << 3,
                x = It(s, ot) + It(a, lt) + i,
                B = It(s, u) + It(a, A) + i + 14 + 3 * b + It(v, I) + (2 * v[16] + 3 * v[17] + 7 * v[18]);
            if (U <= x && U <= B) return yt(t, c, e.subarray(l, l + h));
            if (Rt(t, c, 1 + (B < x)), c += 2, B < x) {
                M = it(u, m, 0), H = u, N = it(A, g, 0), D = A;
                var P = it(I, y, 0);
                Rt(t, c, f - 257), Rt(t, c + 5, S - 1), Rt(t, c + 10, b - 4), c += 14;
                for (w = 0; w < b; ++w) Rt(t, c + 3 * w, I[Je[w]]);
                c += 3 * b;
                for (var F = [T, R], L = 0; L < 2; ++L) {
                    var _ = F[L];
                    for (w = 0; w < _.length; ++w) {
                        var k = 31 & _[w];
                        Rt(t, c, P[k]), c += I[k], k > 15 && (Rt(t, c, _[w] >>> 5 & 127), c += _[w] >>> 12)
                    }
                }
            } else M = ht, H = ot, N = dt, D = lt;
            for (w = 0; w < o; ++w)
                if (r[w] > 255) {
                    k = r[w] >>> 18 & 31;
                    St(t, c, M[k + 257]), c += H[k + 257], k > 7 && (Rt(t, c, r[w] >>> 23 & 31), c += Xe[k]);
                    var W = 31 & r[w];
                    St(t, c, N[W]), c += D[W], W > 3 && (St(t, c, r[w] >>> 5 & 8191), c += qe[W])
                } else St(t, c, M[r[w]]), c += H[r[w]];
            return St(t, c, M[256]), c + H[256]
        },
        Mt = new Ke([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]),
        Ht = new Ye(0),
        Nt = function() {
            for (var e = new Int32Array(256), t = 0; t < 256; ++t) {
                for (var n = t, r = 9; --r;) n = (1 & n && -306674912) ^ n >>> 1;
                e[t] = n
            }
            return e
        }(),
        Dt = function() {
            var e = -1;
            return {
                p: function(t) {
                    for (var n = e, r = 0; r < t.length; ++r) n = Nt[255 & n ^ t[r]] ^ n >>> 8;
                    e = n
                },
                d: function() {
                    return ~e
                }
            }
        },
        Ut = function(e, t, n, r, s) {
            return function(e, t, n, r, s, a) {
                var i = e.length,
                    o = new Ye(r + i + 5 * (1 + Math.ceil(i / 7e3)) + s),
                    l = o.subarray(r, o.length - s),
                    h = 0;
                if (!t || i < 8)
                    for (var c = 0; c <= i; c += 65535) {
                        var d = c + 65535;
                        d >= i && (l[h >> 3] = a), h = yt(l, h + 1, e.subarray(c, d))
                    } else {
                        for (var u = Mt[t - 1], m = u >>> 13, E = 8191 & u, A = (1 << n) - 1, g = new ze(32768), p = new ze(A + 1), T = Math.ceil(n / 3), f = 2 * T, C = function(t) {
                                return (e[t] ^ e[t + 1] << T ^ e[t + 2] << f) & A
                            }, R = new Ke(25e3), S = new ze(288), v = new ze(32), w = 0, O = 0, I = (c = 0, 0), y = 0, b = 0; c < i; ++c) {
                            var M = C(c),
                                H = 32767 & c,
                                N = p[M];
                            if (g[H] = N, p[M] = H, y <= c) {
                                var D = i - c;
                                if ((w > 7e3 || I > 24576) && D > 423) {
                                    h = bt(e, l, 0, R, S, v, O, I, b, c - b, h), I = w = O = 0, b = c;
                                    for (var U = 0; U < 286; ++U) S[U] = 0;
                                    for (U = 0; U < 30; ++U) v[U] = 0
                                }
                                var x = 2,
                                    B = 0,
                                    P = E,
                                    F = H - N & 32767;
                                if (D > 2 && M == C(c - F))
                                    for (var L = Math.min(m, D) - 1, _ = Math.min(32767, c), k = Math.min(258, D); F <= _ && --P && H != N;) {
                                        if (e[c + x] == e[c + x - F]) {
                                            for (var W = 0; W < k && e[c + W] == e[c + W - F]; ++W);
                                            if (W > x) {
                                                if (x = W, B = F, W > L) break;
                                                var V = Math.min(F, W - 2),
                                                    G = 0;
                                                for (U = 0; U < V; ++U) {
                                                    var Y = c - F + U + 32768 & 32767,
                                                        z = Y - g[Y] + 32768 & 32767;
                                                    z > G && (G = z, N = Y)
                                                }
                                            }
                                        }
                                        F += (H = N) - (N = g[H]) + 32768 & 32767
                                    }
                                if (B) {
                                    R[I++] = 268435456 | $e[x] << 18 | nt[B];
                                    var K = 31 & $e[x],
                                        X = 31 & nt[B];
                                    O += Xe[K] + qe[X], ++S[257 + K], ++v[X], y = c + x, ++w
                                } else R[I++] = e[c], ++S[e[c]]
                            }
                        }
                        h = bt(e, l, a, R, S, v, O, I, b, c - b, h), !a && 7 & h && (h = yt(l, h + 1, Ht))
                    }
                return pt(o, 0, r + gt(h) + s)
            }(e, null == t.level ? 6 : t.level, null == t.mem ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e.length)))) : 12 + t.mem, n, r, !s)
        },
        xt = function(e, t) {
            var n = {};
            for (var r in e) n[r] = e[r];
            for (var r in t) n[r] = t[r];
            return n
        },
        Bt = function(e, t) {
            return e[t] | e[t + 1] << 8
        },
        Pt = function(e, t) {
            return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0
        },
        Ft = function(e, t) {
            return Pt(e, t) + 4294967296 * Pt(e, t + 4)
        },
        Lt = function(e, t, n) {
            for (; n; ++t) e[t] = n, n >>>= 8
        };

    function _t(e, t) {
        return Ut(e, t || {}, 0, 0)
    }

    function kt(e, t) {
        return Ct(e, t)
    }
    var Wt = function(e, t, n, r) {
            for (var s in e) {
                var a = e[s],
                    i = t + s,
                    o = r;
                Array.isArray(a) && (o = xt(r, a[1]), a = a[0]), a instanceof Ye ? n[i] = [a, o] : (n[i += "/"] = [new Ye(0), o], Wt(a, i, n, r))
            }
        },
        Vt = "undefined" != typeof TextEncoder && new TextEncoder,
        Gt = "undefined" != typeof TextDecoder && new TextDecoder;
    try {
        Gt.decode(Ht, {
            stream: !0
        }), 1
    } catch (e) {}

    function Yt(e, t) {
        if (t) {
            for (var n = new Ye(e.length), r = 0; r < e.length; ++r) n[r] = e.charCodeAt(r);
            return n
        }
        if (Vt) return Vt.encode(e);
        var s = e.length,
            a = new Ye(e.length + (e.length >> 1)),
            i = 0,
            o = function(e) {
                a[i++] = e
            };
        for (r = 0; r < s; ++r) {
            if (i + 5 > a.length) {
                var l = new Ye(i + 8 + (s - r << 1));
                l.set(a), a = l
            }
            var h = e.charCodeAt(r);
            h < 128 || t ? o(h) : h < 2048 ? (o(192 | h >> 6), o(128 | 63 & h)) : h > 55295 && h < 57344 ? (o(240 | (h = 65536 + (1047552 & h) | 1023 & e.charCodeAt(++r)) >> 18), o(128 | h >> 12 & 63), o(128 | h >> 6 & 63), o(128 | 63 & h)) : (o(224 | h >> 12), o(128 | h >> 6 & 63), o(128 | 63 & h))
        }
        return pt(a, 0, i)
    }

    function zt(e, t) {
        if (t) {
            for (var n = "", r = 0; r < e.length; r += 16384) n += String.fromCharCode.apply(null, e.subarray(r, r + 16384));
            return n
        }
        if (Gt) return Gt.decode(e);
        var s = function(e) {
                for (var t = "", n = 0;;) {
                    var r = e[n++],
                        s = (r > 127) + (r > 223) + (r > 239);
                    if (n + s > e.length) return [t, pt(e, n - 1)];
                    s ? 3 == s ? (r = ((15 & r) << 18 | (63 & e[n++]) << 12 | (63 & e[n++]) << 6 | 63 & e[n++]) - 65536, t += String.fromCharCode(55296 | r >> 10, 56320 | 1023 & r)) : t += 1 & s ? String.fromCharCode((31 & r) << 6 | 63 & e[n++]) : String.fromCharCode((15 & r) << 12 | (63 & e[n++]) << 6 | 63 & e[n++]) : t += String.fromCharCode(r)
                }
            }(e),
            a = s[0];
        return s[1].length && ft(8), a
    }
    var Kt = function(e, t) {
            return t + 30 + Bt(e, t + 26) + Bt(e, t + 28)
        },
        Xt = function(e, t, n) {
            var r = Bt(e, t + 28),
                s = zt(e.subarray(t + 46, t + 46 + r), !(2048 & Bt(e, t + 8))),
                a = t + 46 + r,
                i = Pt(e, t + 20),
                o = n && 4294967295 == i ? qt(e, a) : [i, Pt(e, t + 24), Pt(e, t + 42)],
                l = o[0],
                h = o[1],
                c = o[2];
            return [Bt(e, t + 10), l, h, s, a + Bt(e, t + 30) + Bt(e, t + 32), c]
        },
        qt = function(e, t) {
            for (; 1 != Bt(e, t); t += 4 + Bt(e, t + 2));
            return [Ft(e, t + 12), Ft(e, t + 4), Ft(e, t + 20)]
        },
        Jt = function(e) {
            var t = 0;
            if (e)
                for (var n in e) {
                    var r = e[n].length;
                    r > 65535 && ft(9), t += r + 4
                }
            return t
        },
        Zt = function(e, t, n, r, s, a, i, o) {
            var l = r.length,
                h = n.extra,
                c = o && o.length,
                d = Jt(h);
            Lt(e, t, null != i ? 33639248 : 67324752), t += 4, null != i && (e[t++] = 20, e[t++] = n.os), e[t] = 20, t += 2, e[t++] = n.flag << 1 | (a < 0 && 8), e[t++] = s && 8, e[t++] = 255 & n.compression, e[t++] = n.compression >> 8;
            var u = new Date(null == n.mtime ? Date.now() : n.mtime),
                m = u.getFullYear() - 1980;
            if ((m < 0 || m > 119) && ft(10), Lt(e, t, m << 25 | u.getMonth() + 1 << 21 | u.getDate() << 16 | u.getHours() << 11 | u.getMinutes() << 5 | u.getSeconds() >>> 1), t += 4, -1 != a && (Lt(e, t, n.crc), Lt(e, t + 4, a < 0 ? -a - 2 : a), Lt(e, t + 8, n.size)), Lt(e, t + 12, l), Lt(e, t + 14, d), t += 16, null != i && (Lt(e, t, c), Lt(e, t + 6, n.attrs), Lt(e, t + 10, i), t += 14), e.set(r, t), t += l, d)
                for (var E in h) {
                    var A = h[E],
                        g = A.length;
                    Lt(e, t, +E), Lt(e, t + 2, g), e.set(A, t + 4), t += 4 + g
                }
            return c && (e.set(o, t), t += c), t
        };

    function jt(e, t) {
        t || (t = {});
        var n = {},
            r = [];
        Wt(e, "", n, t);
        var s = 0,
            a = 0;
        for (var i in n) {
            var o = n[i],
                l = o[0],
                h = o[1],
                c = 0 == h.level ? 0 : 8,
                d = (v = Yt(i)).length,
                u = h.comment,
                m = u && Yt(u),
                E = m && m.length,
                A = Jt(h.extra);
            d > 65535 && ft(11);
            var g = c ? _t(l, h) : l,
                p = g.length,
                T = Dt();
            T.p(l), r.push(xt(h, {
                size: l.length,
                crc: T.d(),
                c: g,
                f: v,
                m: m,
                u: d != i.length || m && u.length != E,
                o: s,
                compression: c
            })), s += 30 + d + A + p, a += 76 + 2 * (d + A) + (E || 0) + p
        }
        for (var f = new Ye(a + 22), C = s, R = a - s, S = 0; S < r.length; ++S) {
            var v = r[S];
            Zt(f, v.o, v, v.f, v.u, v.c.length);
            var w = 30 + v.f.length + Jt(v.extra);
            f.set(v.c, v.o + w), Zt(f, s, v, v.f, v.u, v.c.length, v.o, v.m), s += 16 + w + (v.m ? v.m.length : 0)
        }
        return function(e, t, n, r, s) {
            Lt(e, t, 101010256), Lt(e, t + 8, n), Lt(e, t + 10, n), Lt(e, t + 12, r), Lt(e, t + 16, s)
        }(f, s, r.length, R, C), f
    }
    class Qt {
        static METADATA_JSON_NAME = "snapshot.json";
        static LEGACY_METADATA_JSON_NAME = "metadata.json";
        static createZip(e) {
            return jt({
                "snapshot.json": Yt(JSON.stringify(e.metadata, null, 2)),
                "data-heads.bin": new Uint8Array(e.dataHeads),
                "data-tails.bin": new Uint8Array(e.dataTails)
            }, {
                level: 9
            })
        }
        static parse(e, t) {
            let n = new Ue;
            if (n.metadata = Object.assign(new xe, e), "number" != typeof n.metadata.width) throw "Metadata property wrong format: width";
            if ("number" != typeof n.metadata.height) throw "Metadata property wrong format: height";
            if (n.metadata.formatVersion < 3) {
                const e = t["data.bin"];
                if (!e) throw "data.bin not found";
                {
                    if (e.byteLength % 8 != 0) throw "Buffer length is not divisible by 8";
                    const t = e.byteLength / 8,
                        r = new Uint8Array(new ArrayBuffer(4 * t)),
                        s = new Uint8Array(new ArrayBuffer(4 * t));
                    for (let n = 0; n < t; n++)
                        for (let t = 0; t < 4; t++) r[4 * n + t] = e[8 * n + t], s[4 * n + t] = e[8 * n + t + 4];
                    n.dataHeads = r.buffer, n.dataTails = s.buffer
                }
            } else {
                const e = t["data-heads.bin"];
                if (!e) throw "data-heads.bin not found";
                n.dataHeads = e.buffer;
                const r = t["data-tails.bin"];
                if (!r) throw "data-tails.bin not found";
                n.dataTails = r.buffer
            }
            return 1 === n.metadata.formatVersion && (Qt.#jn(n), n.metadata.formatVersion = 2), 2 === n.metadata.formatVersion && (n.metadata.formatVersion = 3), 3 === n.metadata.formatVersion && (Qt.#Qn(n), n.metadata.formatVersion = 4), 4 === n.metadata.formatVersion && (Qt.#$n(n), n.metadata.formatVersion = 5), 5 === n.metadata.formatVersion && (Qt.#er(n), n.metadata.formatVersion = 6), n
        }
        static #jn(e) {
            const t = _.from(e.metadata.width, e.metadata.height, e.dataHeads, e.dataTails);
            for (let n = 0; n < e.metadata.height; n++)
                for (let s = 0; s < e.metadata.width; s++) {
                    let e = t.getElementHead(s, n),
                        a = 7 & e;
                    0 === a && 0 === (e >> 4 & 15) || (0 === a ? t.setElementHead(s, n, r.setType(e, 7)) : 1 === a ? t.setElementHead(s, n, r.setType(e, 5)) : 2 === a ? t.setElementHead(s, n, r.setType(e, 133)) : 3 === a ? t.setElementHead(s, n, r.setType(e, 197)) : 4 !== a && 5 !== a || t.setElementHead(s, n, r.setType(e, 3)))
                }
            e.dataHeads = t.getDataHeads(), e.dataTails = t.getDataTails()
        }
        static #Qn(e) {
            const t = _.from(e.metadata.width, e.metadata.height, e.dataHeads, e.dataTails);
            for (let n = 0; n < e.metadata.height; n++)
                for (let r = 0; r < e.metadata.width; r++) {
                    let e = t.getElementHead(r, n),
                        s = t.getElementTail(r, n),
                        a = 7 & e;
                    switch (a > 1 && a < 7 && (a++, e = 4294967288 & e | a), a) {
                        case 5:
                        case 6:
                        case 7:
                            e |= 4194304, s |= 268435456
                    }
                    4 === a && (e = 4294963455 & e | 3072), t.setElementHead(r, n, e), t.setElementTail(r, n, s)
                }
            e.dataHeads = t.getDataHeads(), e.dataTails = t.getDataTails()
        }
        static #$n(e) {
            const t = _.from(e.metadata.width, e.metadata.height, e.dataHeads, e.dataTails);
            for (let n = 0; n < e.metadata.height; n++)
                for (let r = 0; r < e.metadata.width; r++) {
                    let e = t.getElementHead(r, n),
                        s = e >> 8 & 15;
                    5 !== s && 8 !== s || (e &= 4294902015), t.setElementHead(r, n, e)
                }
            e.dataHeads = t.getDataHeads(), e.dataTails = t.getDataTails()
        }
        static #er(e) {
            const t = _.from(e.metadata.width, e.metadata.height, e.dataHeads, e.dataTails);
            for (let n = 0; n < e.metadata.height; n++)
                for (let r = 0; r < e.metadata.width; r++) {
                    const e = t.getElementHead(r, n),
                        s = e >> 16 & 3,
                        a = e >> 18 & 3,
                        i = e >> 20 & 3,
                        o = e >> 22 & 3;
                    let l = 0;
                    0 === s && 0 === a && 0 === i && 0 === o ? l = 0 : 0 === s && 0 === a && 0 === i && 1 === o ? l = 1 : 0 === s && 0 === a && 0 === i && 2 === o ? l = 2 : 0 === s && 0 === a && 0 === i && 3 === o ? l = 3 : 2 === s && 1 === a && 3 === i && 0 === o ? l = 4 : 1 === s && 1 === a && 1 === i && 0 === o ? l = 5 : 2 === s && 1 === a && 2 === i && 0 === o && (l = 6);
                    const h = 4278255615 & e | l << 16;
                    t.setElementHead(r, n, h)
                }
            e.dataHeads = t.getDataHeads(), e.dataTails = t.getDataTails()
        }
    }
    class $t extends ke {
        #tr;
        #nr;
        #rr;
        constructor(e, t, n) {
            super(), this.#tr = e, this.#nr = t, this.#rr = n
        }
        countSize(e, t) {
            this.#tr.countSize(e, t)
        }
        async createSandGame(e, t, n, r, s) {
            let a = this.createElementArea(e, t, n.getDefaultElement());
            return new _e(a, null, n, r, s)
        }
        createElementArea(e, t, n) {
            const r = this.#tr.createElementArea(e, t, n),
                s = r.getWidth(),
                a = r.getHeight();
            if (this.#nr)
                for (let e = 0; e < a; e++)
                    for (let t = 0; t < Math.trunc(s / 2); t++) r.swap(t, e, s - 1 - t, e);
            if (this.#rr)
                for (let e = 0; e < Math.trunc(a / 2); e++)
                    for (let t = 0; t < s; t++) r.swap(t, e, t, a - 1 - e);
            return r
        }
    }
    class en extends ke {
        #x;
        constructor(e) {
            super(), this.#x = e
        }
        countSize(e, t) {
            return [this.#x.getWidth(), this.#x.getHeight()]
        }
        async createSandGame(e, t, n, r, s) {
            let a = this.createElementArea(e, t, n.getDefaultElement());
            return new _e(a, null, n, r, s)
        }
        createElementArea(e, t, n) {
            return _.from(this.#x.getWidth(), this.#x.getHeight(), this.#x.getDataHeads(), this.#x.getDataTails())
        }
    }
    class tn {
        static loadImageData(e, t, n) {
            return u.asImageData(e, t, n)
        }
        static asObjectUrl(e, t = "image/png") {
            const n = new Uint8Array(e),
                r = new Blob([n], {
                    type: t
                });
            return (window.URL || window.webkitURL).createObjectURL(r)
        }
        static createSceneFromImageTemplate(e, t, n, r) {
            const a = e.width,
                i = e.height,
                o = _.create(a, i, n),
                l = new s(0);
            for (let n = 0; n < i; n++)
                for (let s = 0; s < a; s++) {
                    const i = 4 * (n * a + s);
                    let c = e.data[i],
                        d = e.data[i + 1],
                        u = e.data[i + 2];
                    const m = e.data[i + 3];
                    if (255 !== m && (c = Math.trunc(c * m / 255) + 255 - m, d = Math.trunc(d * m / 255) + 255 - m, u = Math.trunc(u * m / 255) + 255 - m), c > 255 - r && d > 255 - r && u > 255 - r) continue;
                    const E = t.apply(s, n, l),
                        A = E.elementHead,
                        g = h.setColor(E.elementTail, c, d, u);
                    o.setElementHeadAndTail(s, n, A, g)
                }
            return new en(o)
        }
        static getImageTypeOrNull(e) {
            return (e = e.toLowerCase()).endsWith(".png") ? "image/png" : e.endsWith(".jpg") || e.endsWith(".jpeg") ? "image/jpg" : e.endsWith(".bmp") ? "image/bmp" : e.endsWith(".gif") ? "image/gif" : null
        }
    }
    class nn {
        static METADATA_JSON_NAME = "tool.json";
        static async parse(e, t) {
            const n = e.info,
                r = e.action;
            if (void 0 === n) throw "Tool definition: info not set";
            const s = new b(n);
            if (void 0 === r) throw "Tool definition: action not set";
            return nn.#sr(s, r, t)
        }
        static async #sr(e, t, n) {
            const r = t.type;
            if ("image-template" === r) {
                const r = await this.parseImageTemplate(t, n);
                return K.insertScenesTool(r, void 0, e)
            }
            if ("random-template" === r) {
                const r = await this.parseRandomTemplate(t, n);
                return K.insertScenesTool(r, void 0, e)
            }
            throw "Tool action not supported: " + r
        }
        static async parseRandomTemplate(e, t) {
            const n = e.actions;
            if (void 0 === n || void 0 === n.length || 0 === n.length) throw "Image template: actions not set";
            let r = [];
            for (let e = 0; e < n.length; e++) {
                const s = n[e],
                    a = s.type;
                if ("image-template" !== a) throw "Tool action not supported: " + a;
                {
                    const e = await this.parseImageTemplate(s, t);
                    r.push(...e)
                }
            }
            return r
        }
        static async parseImageTemplate(e, t) {
            let n = await this.#ar(e, t);
            const r = e.threshold;
            if (void 0 === r) throw "Image template: threshold not set";
            const s = parseInt(r),
                a = e.brush;
            if (void 0 === a) throw "Image template: brush not set";
            const i = F.byCodeName(e.brush);
            if (null === i) throw "Image template: brush not found: " + a;
            const o = _.TRANSPARENT_ELEMENT,
                l = tn.createSceneFromImageTemplate(n, i, o, s),
                h = [l];
            e.randomFlipHorizontally && h.push(new $t(l, !0, !1));
            if (e.randomFlipVertically)
                for (const e of [...h]) h.push(new $t(e, !1, !0));
            return h
        }
        static async #ar(e, t) {
            const n = e.imageData;
            if (void 0 !== n) return await tn.loadImageData(n, void 0, void 0);
            const r = e.imageFile;
            if (void 0 !== r && null !== t && t[r]) {
                if (null !== tn.getImageTypeOrNull(r)) {
                    const e = tn.asObjectUrl(t[r].buffer);
                    return tn.loadImageData(e, void 0, void 0)
                }
            }
            throw "Image template: imageData/imageFile not set"
        }
    }
    class rn {
        static JSON_RESOURCE_TYPE_FIELD = "resourceType";
        static createResourceFromSnapshot(e) {
            return Qt.createZip(e)
        }
        static async parseZipResource(e) {
            const t = function(e, t) {
                for (var n = {}, r = e.length - 22; 101010256 != Pt(e, r); --r)(!r || e.length - r > 65558) && ft(13);
                var s = Bt(e, r + 8);
                if (!s) return {};
                var a = Pt(e, r + 16),
                    i = 4294967295 == a || 65535 == s;
                if (i) {
                    var o = Pt(e, r - 12);
                    (i = 101075792 == Pt(e, o)) && (s = Pt(e, o + 32), a = Pt(e, o + 48))
                }
                for (var l = t && t.filter, h = 0; h < s; ++h) {
                    var c = Xt(e, a, i),
                        d = c[0],
                        u = c[1],
                        m = c[2],
                        E = c[3],
                        A = c[4],
                        g = c[5],
                        p = Kt(e, g);
                    a = A, l && !l({
                        name: E,
                        size: u,
                        originalSize: m,
                        compression: d
                    }) || (d ? 8 == d ? n[E] = kt(e.subarray(p, p + u), new Ye(m)) : ft(14, "unknown compression type " + d) : n[E] = pt(e, p, p + u))
                }
                return n
            }(new Uint8Array(e));

            function n(e) {
                return JSON.parse(zt(t[e]))
            }
            if (t[Qt.METADATA_JSON_NAME]) {
                const e = n(Qt.METADATA_JSON_NAME),
                    r = Qt.parse(e, t);
                return new Ge(r)
            }
            if (t[Qt.LEGACY_METADATA_JSON_NAME]) {
                const e = n(Qt.LEGACY_METADATA_JSON_NAME),
                    r = Qt.parse(e, t);
                return new Ge(r)
            }
            if (t[nn.METADATA_JSON_NAME]) {
                const e = n(nn.METADATA_JSON_NAME);
                return await nn.parse(e, t)
            }
            throw "Wrong format"
        }
        static async parseJsonResource(e) {
            const t = zt(new Uint8Array(e)),
                n = JSON.parse(t);
            if ("tool" === n[rn.JSON_RESOURCE_TYPE_FIELD]) return await nn.parse(n, null);
            throw "Wrong json format"
        }
        static async parseToolDefinition(e) {
            return nn.parse(e, null)
        }
    }
    class sn {
        createNode(e) {
            throw "Not implemented"
        }
    }
    class an extends sn {
        #ir = 50;
        #or = 300;
        #yn = 200;
        #lr = "sand";
        #hr = F.SAND;
        createNode() {
            return Z.element("form", null, [Z.element("fieldset", {
                class: "mb-3 row"
            }, [Z.element("legend", {
                class: "col-form-label col-sm-3 float-sm-left pt-0"
            }, "Material"), Z.div({
                class: "col-sm-9",
                style: "column-count: 2;"
            }, [this.#cr(F.SAND, q.SAND.getInfo()), this.#cr(F.SOIL, q.SOIL.getInfo()), this.#cr(F.THERMITE, q.THERMITE.getInfo()), this.#cr(F.WALL, q.WALL.getInfo()), this.#cr(F.METAL, q.METAL.getInfo()), this.#cr(F.TREE_WOOD, q.WOOD.getInfo())])]), Z.element("fieldset", {
                class: "mb-3 row"
            }, [Z.element("legend", {
                class: "col-form-label col-sm-3 float-sm-left pt-0"
            }, "Background threshold"), Z.div({
                class: "col-sm-9"
            }, [this.#dr()])]), Z.element("fieldset", {
                class: "mb-3 row"
            }, [Z.element("legend", {
                class: "col-form-label col-sm-3 float-sm-left pt-0"
            }, "Max size"), Z.div({
                class: "col-sm-9"
            }, [this.#ur(), this.#mr()])])])
        }
        #dr() {
            const e = "image-template_threshold-slider",
                t = Z.element("label", {
                    for: e
                }, "Value: " + this.#ir),
                n = Z.element("input", {
                    id: e,
                    class: "form-range",
                    type: "range",
                    min: 0,
                    max: 255,
                    value: this.#ir
                });
            return n.addEventListener("input", (e => {
                this.#ir = e.target.value, t.textContent = "Value: " + this.#ir
            })), Z.div({
                class: "mb-3"
            }, [n, Z.element("small", null, t)])
        }
        #ur() {
            const e = "image-template_max-width",
                t = Z.element("label", {
                    for: e
                }, "Width: " + this.#or),
                n = Z.element("input", {
                    id: e,
                    class: "form-range",
                    type: "range",
                    min: 25,
                    max: 800,
                    value: this.#or
                });
            return n.addEventListener("input", (e => {
                this.#or = e.target.value, t.textContent = "Width: " + this.#or
            })), Z.div({
                class: "mb-3"
            }, [n, Z.element("small", null, t)])
        }
        #mr() {
            const e = "image-template_max-height",
                t = Z.element("label", {
                    for: e
                }, "Height: " + this.#yn),
                n = Z.element("input", {
                    id: e,
                    class: "form-range",
                    type: "range",
                    min: 25,
                    max: 800,
                    value: this.#yn
                });
            return n.addEventListener("input", (e => {
                this.#yn = e.target.value, t.textContent = "Height: " + this.#yn
            })), Z.div({
                class: "mb-3"
            }, [n, Z.element("small", null, t)])
        }
        #cr(e, t) {
            const n = t.getCodeName(),
                r = this.#lr === n,
                s = "image-template_checkbox-material-" + n,
                a = Z.element("input", {
                    class: "form-check-input",
                    type: "radio",
                    name: "template-material",
                    id: s,
                    value: n,
                    checked: r || null
                });
            a.addEventListener("click", (() => {
                this.#hr = e, this.#lr = n
            }));
            const i = {
                class: "form-check-label btn btn-secondary btn-sand-game-tool " + n,
                for: s,
                style: t.getBadgeStyle()
            };
            return Z.div({
                class: "form-check"
            }, [a, Z.element("label", i, t.getDisplayName())])
        }
        getThresholdValue() {
            return this.#ir
        }
        getMaterialBrush() {
            return this.#hr
        }
        getMaxWidth() {
            return this.#or
        }
        getMaxHeight() {
            return this.#yn
        }
    }
    class on {
        #Er;
        #Ar;
        constructor(e) {
            this.#Er = e, this.#Ar = new an
        }
        initFileDragAndDrop(e) {
            ["dragenter", "dragover"].forEach((t => {
                e.addEventListener(t, (t => {
                    t.preventDefault(), t.stopPropagation(), e.classList.add("drag-and-drop-highlight")
                }))
            })), e.addEventListener("dragleave", (t => {
                t.preventDefault(), t.stopPropagation(), e.classList.remove("drag-and-drop-highlight")
            })), e.addEventListener("drop", (t => {
                t.preventDefault(), t.stopPropagation(), e.classList.remove("drag-and-drop-highlight"), this.loadFromFiles(t.dataTransfer.files)
            }))
        }
        loadFromFiles(e) {
            if (!e) return;
            let t = e[0],
                n = new FileReader;
            n.onload = e => {
                let n = e.target.result;
                this.loadFromArrayBuffer(n, t.name)
            }, n.readAsArrayBuffer(t)
        }
        loadFromArrayBuffer(e, t) {
            try {
                let n = tn.getImageTypeOrNull(t);
                null !== n ? this.#gr(e, n) : t.endsWith(".json") ? rn.parseJsonResource(e).then((e => this.#pr(e))).catch((e => this.#Tr(e))) : rn.parseZipResource(e).then((e => this.#pr(e))).catch((e => this.#Tr(e)))
            } catch (e) {
                this.#Tr(e)
            }
        }
        #gr(e, t) {
            const n = (n, r, s, a) => {
                const i = tn.asObjectUrl(e, t),
                    o = _.TRANSPARENT_ELEMENT;
                tn.loadImageData(i, s, a).then((e => {
                    try {
                        const t = tn.createSceneFromImageTemplate(e, n, o, r);
                        this.#fr(t)
                    } catch (e) {
                        this.#Tr(e)
                    }
                })).catch((e => this.#Tr(e)))
            };
            let r = Z.bootstrapDialogBuilder();
            r.setHeaderContent("Image template"), r.setBodyContent(this.#Ar.createNode()), r.addSubmitButton("Place", (() => {
                let e = this.#Ar.getMaterialBrush(),
                    t = this.#Ar.getThresholdValue(),
                    r = this.#Ar.getMaxWidth(),
                    s = this.#Ar.getMaxHeight();
                n(e, t, r, s)
            })), r.addCloseButton("Close"), r.show(this.#Er.getDialogAnchor())
        }
        #fr(e) {
            this.#Er.pasteScene(e), J.triggerFeatureUsed(J.FEATURE_IO_IMAGE_TEMPLATE)
        }
        #pr(e) {
            if (e instanceof ke) this.#Cr(e);
            else if (e instanceof M) {
                const t = e,
                    n = this.#Er.getToolManager();
                if (t instanceof W || t instanceof V) {
                    const e = n.createRevertAction();
                    n.setPrimaryTool(t), n.setSecondaryTool(K.actionTool(e))
                } else n.setPrimaryTool(t)
            } else this.#Tr("Unknown resource type")
        }
        #Cr(e) {
            try {
                let t = Z.bootstrapDialogBuilder();
                t.setHeaderContent("Import scene"), t.setBodyContent([Z.par(null, "The imported scene can be opened or placed on the current scene.")]), t.addSubmitButton("Open", (() => (J.triggerFeatureUsed(J.FEATURE_IO_IMPORT), this.#Er.openScene(e)))), t.addSubmitButton("Place", (() => (J.triggerFeatureUsed(J.FEATURE_IO_IMPORT), this.#Er.pasteScene(e)))), t.addCloseButton("Close"), t.show(this.#Er.getDialogAnchor())
            } catch (e) {
                this.#Tr(e)
            }
        }
        #Tr(e) {
            let t = Z.bootstrapDialogBuilder();
            t.setHeaderContent("Error"), t.setBodyContent([Z.par(null, "Error while loading resource:"), Z.element("code", null, "" + e)]), t.addCloseButton("Close"), t.show(this.#Er.getDialogAnchor())
        }
    }
    class ln extends re {
        static #Rr = F.AIR.apply(0, 0, void 0);
        getDefaultElement() {
            return ln.#Rr
        }
        getBrushWater() {
            return F.WATER
        }
        getBrushSteam() {
            return F.STEAM
        }
        getBrushGrass() {
            return F.GRASS
        }
        getBrushTree() {
            return F.TREE
        }
        getBrushFishHead() {
            return F.FISH_HEAD
        }
        getBrushFishBody() {
            return F.FISH_BODY
        }
        getBrushFishCorpse() {
            return F.FISH_CORPSE
        }
        getBrushFire() {
            return F.FIRE
        }
        getBrushAsh() {
            return F.ASH
        }
        getTreeTrunkTemplates() {
            return B.TREE_TRUNK_TEMPLATES
        }
        getTreeLeafClusterTemplates() {
            return B.TREE_CLUSTER_TEMPLATES
        }
    }
    class hn {
        #Sr = {
            scale: .5,
            canvasWidthPx: 700,
            canvasHeightPx: 400,
            scene: "empty"
        };
        #vr;
        #wr;
        #Or;
        #Gn = null;
        #Ir = "pixelated";
        #yr = [];
        #br = !1;
        #Mr = !1;
        #Hr = Se.canvasWebGL();
        #Nr = null;
        #Dr;
        #Ur = new on(this);
        #xr;
        #Br = null;
        constructor(e, t, n) {
            e && (this.#Sr = e), this.#xr = t, this.#Dr = n, this.#vr = Math.trunc(this.#Sr.canvasWidthPx * this.#Sr.scale), this.#wr = Math.trunc(this.#Sr.canvasHeightPx * this.#Sr.scale), this.#Or = this.#Sr.scale
        }
        registerCanvasProvider(e) {
            this.#Br = e
        }
        getInitialScene() {
            return this.#Nr
        }
        setInitialScene(e) {
            this.#Nr = e
        }
        setup(e) {
            this.setInitialScene(e), this.#Pr(e)
        }
        #Pr(e) {
            if (null == this.#Br) throw "Illegal state: canvas provider not registered!";
            if (null == this.#xr) throw "Illegal state: dialog anchor not registered!";
            const [t, n] = e.countSize(this.#vr, this.#wr);
            t === this.#vr && n === this.#wr || (this.#vr = t, this.#wr = n, this.#Or = +(t / this.#Sr.canvasWidthPx).toFixed(3));
            const r = new ln,
                s = this.#Fr();
            let a;
            this.#Gn = null;
            try {
                a = e.createSandGame(t, n, r, s, this.#Hr)
            } catch (e) {
                return void this.#Lr("Initialization failed: " + e)
            }
            a.then((e => {
                this.#Gn = e, this.#Gn.graphics().replace(_.TRANSPARENT_ELEMENT, r.getDefaultElement()), this.#_r.forEach((e => e(this.#Gn))), this.#Gn.addOnRenderingFailed((e => {
                    this.#Lr("Rendering failure: " + e)
                })), this.#Gn.startRendering(), this.#br && (this.#Gn.startProcessing(), this.#kr.forEach((e => e())))
            })).catch((e => {
                this.#Lr("Initialization failed: " + e)
            }))
        }
        #Fr() {
            const e = this.#Br.initialize();
            let t = this.#Hr.getContextType(),
                n = this.#Wr(e, t);
            return "webgl2" === t && null == n && (this.#Vr("Unable to get WebGL context. Using fallback renderer; game performance may be affected"), this.#Hr = Se.canvas2d(), t = this.#Hr.getContextType(), n = this.#Wr(e, t), J.triggerFeatureUsed(J.FEATURE_RENDERER_FALLBACK)), n
        }
        #Wr(e, t) {
            return "webgl2" === t && e.addEventListener("webglcontextlost", (e => {
                e.preventDefault(), setTimeout((() => {
                    this.restartAfterRenderingFailure("WebGL context loss detected. Using fallback renderer; game performance may be affected")
                }), 2e3)
            }), !1), e.getContext(t)
        }
        #Gr() {
            null !== this.#Gn && (this.#Gn.stopProcessing(), this.#Gn.stopRendering());
            for (let e of this.#Yr) e()
        }
        enableGlobalShortcuts() {
            document.onkeydown = e => {
                if (!e.ctrlKey || e.altKey || e.shiftKey || "Enter" !== e.key || (e.preventDefault(), this.switchStartStop()), !e.ctrlKey || e.altKey || e.shiftKey || " " !== e.key || (e.preventDefault(), null !== this.#Gn && this.#Gn.doProcessing()), e.ctrlKey && !e.altKey && e.shiftKey && " " === e.key && (e.preventDefault(), null !== this.#Gn)) {
                    const e = prompt("Enter the number of iterations to run", "10000"),
                        t = Math.abs(parseInt(e)),
                        n = new Date;
                    for (let e = 0; e < t; e++) this.#Gn.doProcessing(), e % 2500 == 0 && console.log(`Performed ${e} of ${t} iterations`);
                    const r = (new Date).getTime() - n.getTime();
                    console.log(`Performed ${t} iterations in ${r} ms`)
                }
            }
        }
        getSandGame() {
            return this.#Gn
        }
        getCanvas() {
            return null !== this.#Br ? this.#Br.getCanvasNode() : null
        }
        #_r = [];
        #Yr = [];
        #zr = [];
        #kr = [];
        #Kr = [];
        #Xr = [];
        addOnInitialized(e) {
            this.#_r.push(e)
        }
        addOnBeforeNewSceneLoaded(e) {
            this.#zr.push(e)
        }
        addOnBeforeClosed(e) {
            this.#Yr.push(e)
        }
        addOnStarted(e) {
            this.#kr.push(e)
        }
        addOnStopped(e) {
            this.#Kr.push(e)
        }
        addOnFailure(e) {
            this.#Xr.push(e)
        }
        restartAfterRenderingFailure(e) {
            this.#Vr(e);
            const t = this.createSnapshot();
            this.#Hr = Se.canvas2d(), this.openScene(new Ge(t)), J.triggerFeatureUsed(J.FEATURE_RENDERER_FALLBACK)
        }
        #Vr(e) {
            console.warn(e);
            for (let t of this.#Xr) t("rendering-warning", e);
            let t = Z.bootstrapToastBuilder();
            t.setHeaderContent(Z.element("strong", {
                style: "color: orange;"
            }, "Warning")), t.setBodyContent(Z.par(null, e)), t.setDelay(2e4), t.show(this.#xr)
        }
        #Lr(e) {
            console.error(e);
            for (let t of this.#Xr) t("serious", e);
            let t = Z.bootstrapToastBuilder();
            t.setHeaderContent(Z.element("strong", {
                style: "color: red;"
            }, "Error")), t.setBodyContent(Z.par(null, e)), t.show(this.#xr)
        }
        start() {
            null !== this.#Gn && (this.#br || (this.#Gn.startProcessing(), this.#kr.forEach((e => e())))), this.#br = !0
        }
        switchStartStop() {
            this.#br = !this.#br, null !== this.#Gn && (this.#br ? (this.#br = !0, this.#Gn.startProcessing(), this.#kr.forEach((e => e()))) : (this.#Gn.stopProcessing(), this.#Kr.forEach((e => e()))))
        }
        createSnapshot() {
            let e = this.#Gn.createSnapshot();
            return e.metadata.scale = this.getCurrentScale(), void 0 !== this.#Sr.version && (e.metadata.appVersion = this.#Sr.version), e
        }
        openScene(e) {
            for (let t of this.#zr) t(e);
            this.#Gr(), this.#Pr(e)
        }
        pasteScene(e) {
            const t = this.getToolManager(),
                n = t.createRevertAction();
            t.setPrimaryTool(K.insertScenesTool([e], n)), t.setSecondaryTool(K.actionTool(n))
        }
        getCurrentWidthPoints() {
            return this.#vr
        }
        getCurrentHeightPoints() {
            return this.#wr
        }
        getCurrentScale() {
            return this.#Or
        }
        changeCanvasSize(e, t, n) {
            if ("number" != typeof e || !(e > 0 && e < 2048)) throw "Incorrect width";
            if ("number" != typeof t || !(t > 0 && t < 2048)) throw "Incorrect height";
            if ("number" != typeof n || !(n > 0 && n <= 1)) throw "Incorrect scale";
            this.#Gr(), this.#vr = e, this.#wr = t, this.#Or = n, this.#Pr(new We(this.#Gn))
        }
        setShowActiveChunks(e) {
            this.#Mr = e
        }
        isShowActiveChunks() {
            return this.#Mr
        }
        setRendererInitializer(e) {
            this.#Hr = e, this.#Gn && (this.#Gr(), this.#Pr(new We(this.#Gn)))
        }
        getRendererInitializer() {
            return this.#Hr
        }
        setCanvasImageRenderingStyle(e) {
            this.#Ir = e;
            for (let t of this.#yr) t(e)
        }
        getCanvasImageRenderingStyle() {
            return this.#Ir
        }
        addOnImageRenderingStyleChanged(e) {
            this.#yr.push(e)
        }
        getToolManager() {
            return this.#Dr
        }
        getIOManager() {
            return this.#Ur
        }
        getDialogAnchor() {
            return this.#xr
        }
    }
    class cn extends ke {
        name;
        description;
        #qr;
        constructor({
            name: e,
            description: t,
            apply: n
        }) {
            super(), this.#qr = n, this.name = e, this.description = t
        }
        countSize(e, t) {
            return [e, t]
        }
        async createSandGame(e, t, n, r, s) {
            let a = this.createElementArea(e, t, n.getDefaultElement()),
                i = new _e(a, null, n, r, s);
            return await this.#qr(i), i
        }
        createElementArea(e, t, n) {
            return _.create(e, t, n)
        }
    }
    class dn {
        static SCENE_EMPTY = new cn({
            name: "Empty",
            description: "Boxed mode",
            apply: function(e) {
                e.setBoxedMode()
            }
        });
        static SCENE_LANDSCAPE_1 = new cn({
            name: "Landscape 1",
            description: "Boxed mode",
            apply: async function(e) {
                e.setBoxedMode();
                let t = e.layeredTemplate().layerSpline([
                    [0, 35],
                    [60, 35],
                    [80, 40],
                    [100, 50],
                    [120, 40],
                    [240, 20],
                    [440, 20],
                    [1040, 20]
                ], !0, I.concat(F.SOIL, F.EFFECT_NOISE_LG)).layerSpline([
                    [0, 0],
                    [130, 0],
                    [150, 10],
                    [190, 10],
                    [290, 0]
                ], !0, F.SAND, 2).tool(30, 17, await rn.parseToolDefinition(X.CABIN)).tool(160, 5, await rn.parseToolDefinition(X.SAND_CASTLE)).tree(100, 1, 200).tree(70, 5).grass(60, 80).grass(90, 110);
                e.getWidth() / e.getHeight() > 1.5 ? e.blockTemplate().withMaxHeight(120).withBlueprint(["          ", "        ww", "          ", "       1  ", "     111111", "          ", "          ", "          ", "          "]).withBrushes({
                    w: I.withIntensity(.5, F.WATER),
                    1: F.SAND
                }).paint() : t.layer(26, !1, F.WATER).layer(27, !1, I.withIntensity(.33, F.WATER))
            }
        });
        static SCENE_LANDSCAPE_2 = new cn({
            name: "Landscape 2",
            description: "Boxed mode",
            apply: function(e) {
                e.setBoxedMode(), e.layeredTemplate().layerSpline([
                    [0, 20],
                    [50, 15],
                    [100, 10],
                    [150, 10],
                    [200, 10],
                    [250, 10],
                    [1250, 10]
                ], !0, I.concat(F.GRAVEL, F.EFFECT_NOISE_LG)).layerSpline([
                    [0, 30],
                    [25, 31],
                    [50, 27],
                    [100, 15],
                    [150, 0],
                    [200, 5],
                    [220, 15],
                    [300, 35],
                    [330, 37],
                    [370, 50],
                    [400, 45],
                    [500, 40],
                    [1250, 40]
                ], !0, I.concat(F.SOIL, F.EFFECT_NOISE_LG), 30).layerSpline([
                    [0, 0],
                    [50, 0],
                    [100, 10],
                    [150, 10],
                    [200, 9],
                    [275, 0],
                    [1250, 0]
                ], !0, F.SAND, 5).layer(35, !1, F.WATER).layer(36, !1, I.withIntensity(.33, F.WATER)).fish(150, -8).grass().tree(16, 6).tree(28, 3, 70).tree(45, 5).tree(309, 1).tree(336, 4).tree(361, 0)
            }
        });
        static SCENE_FALLTHROUGH = new cn({
            name: "Fall-through",
            description: "Fall-through mode",
            apply: function(e) {
                e.setFallThroughMode();
                const t = e.graphics(),
                    n = Math.trunc((e.getWidth() - 150) / 2 - 15),
                    r = Math.trunc((e.getHeight() - 150) / 2);
                t.drawRectangle(40 + n, 20 + r, 60 + n, 40 + r, F.WATER), t.drawLine(30 + n, 30 + r, 30 + n, 50 + r, 5, F.WALL, !0), t.drawLine(30 + n, 50 + r, 70 + n, 80 + r, 5, F.WALL, !0), t.drawLine(65 + n, 90 + r, 100 + n, 100 + r, 5, F.WALL, !0), t.drawLine(55 + n, 140 + r, 125 + n, 140 + r, 10, F.WALL, !1), t.drawLine(55 + n, 130 + r, 55 + n, 140 + r, 10, F.WALL, !1), t.drawLine(70 + n, 125 + r, 90 + n, 125 + r, 10, F.SAND, !1), t.draw(120 + n, 130 + r, F.SAND), t.drawLine(150 + n, 10 + r, 80 + n, 35 + r, 5, F.WALL, !0), t.drawLine(80 + n, 35 + r, 80 + n, 15 + r, 5, F.WALL, !0)
            }
        });
        static SCENE_PLATFORM = new cn({
            name: "Platform",
            description: "Erasing mode",
            apply: function(e) {
                e.setErasingMode(), e.blockTemplate().withBlueprint(["          ", "          ", "        w ", "        w ", "          ", "          ", " ssssssss ", "          ", "          "]).withBrushes({
                    w: F.SAND,
                    s: F.WALL
                }).paint()
            }
        });
        static SCENES = {
            empty: dn.SCENE_EMPTY,
            landscape_1: dn.SCENE_LANDSCAPE_1,
            landscape_2: dn.SCENE_LANDSCAPE_2,
            fallthrough: dn.SCENE_FALLTHROUGH,
            platform: dn.SCENE_PLATFORM
        }
    }
    class un {
        performAction(e) {
            throw "Not implemented"
        }
        static create(e) {
            return new mn(e)
        }
        static createToggle(e, t) {
            let n = e;
            return new mn((function(e) {
                n = !n, t(e, n)
            }))
        }
    }
    class mn extends un {
        #T;
        constructor(e) {
            super(), this.#T = e
        }
        performAction(e) {
            this.#T(e)
        }
    }
    class En extends sn {
        #K;
        constructor(e) {
            super(), this.#K = e
        }
        createNode(e) {
            let t = [];
            for (const n of this.#K) {
                const r = n.info.displayName;
                let s = null,
                    a = Z.button(r, {
                        class: "btn btn-light template-button",
                        "data-bs-dismiss": "modal"
                    }, (() => {
                        if (null !== s) {
                            const t = e.getToolManager(),
                                n = t.createRevertAction();
                            t.setPrimaryTool(s), t.setSecondaryTool(K.actionTool(n))
                        }
                    }));
                void 0 !== n.info.icon && (a.style.backgroundImage = `url(${n.info.icon.imageData})`), t.push(a), rn.parseToolDefinition(n).then((e => {
                    s = e
                })).catch((e => {
                    console.warn("Template loading failed: " + e)
                }))
            }
            return Z.div({
                class: "sand-game-templates"
            }, t)
        }
    }
    class An extends un {
        #K;
        #Jr;
        constructor(e, t = null) {
            super(), this.#K = e, this.#Jr = t
        }
        performAction(e) {
            let t = new En(this.#K),
                n = Z.bootstrapDialogBuilder();
            n.setHeaderContent("Templates"), n.setBodyContent(Z.div({
                class: "sand-game-component"
            }, [Z.par(null, "Select a template"), t.createNode(e), this.#Jr])), n.addCloseButton("Close"), n.show(e.getDialogAnchor())
        }
    }
    class gn extends sn {
        #Zr;
        #jr;
        constructor(e, t = !1) {
            super(), this.#Zr = e, this.#jr = t
        }
        createAdditionalInfoAboutTemplates() {
            return Z.div(null, [Z.par(null, ""), Z.par(null, "You can also create your own template using an image. See the Import button.")])
        }
        createNode(e) {
            let t = [];
            for (let n of this.#Zr) {
                let r = n.getInfo().getCodeName(),
                    s = n.getInfo().getDisplayName(),
                    a = {
                        class: "btn btn-secondary btn-sand-game-tool " + r,
                        style: n.getInfo().getBadgeStyle()
                    },
                    i = Z.button(s, a, (() => {
                        if (n instanceof z) {
                            let t = null;
                            this.#jr && (t = this.createAdditionalInfoAboutTemplates());
                            new An(n.getTemplateDefinitions(), t).performAction(e)
                        } else e.getToolManager().setPrimaryTool(n), e.getToolManager().setSecondaryTool(q.ERASE)
                    }));
                e.getToolManager().addOnPrimaryToolChanged((e => {
                    e === n ? i.classList.add("selected") : i.classList.remove("selected")
                })), n === e.getToolManager().getPrimaryTool() && i.classList.add("selected"), e.getToolManager().addOnInputDisabledChanged((e => {
                    i.disabled = e
                })), t.push(i)
            }
            return Z.div({
                class: "sand-game-tools"
            }, t)
        }
    }
    class pn extends sn {
        #Er;
        #Qr;
        #$r = null;
        #es = null;
        #ts;
        #ns;
        #rs;
        constructor(e, t, n, r) {
            super(), this.#ts = e, this.#ns = t, this.#rs = n;
            const s = e / n,
                a = t / n;
            this.#Qr = Z.div({
                style: {
                    display: "none",
                    position: "absolute",
                    left: "0",
                    top: "0",
                    width: `${s}px`,
                    height: `${a}px`
                },
                class: "sand-game-canvas-overlay",
                width: e + "px",
                height: t + "px"
            }), this.#Er = r
        }
        highlightChunks(e) {
            null !== e ? (null === this.#es && this.#Sr(), this.#Qr.style.display = "unset", this.#ss(e)) : null !== this.#es && (this.#Qr.style.display = "none")
        }
        #ss(e) {
            const t = this.#Er.getSandGame(),
                n = t.getChunkSize(),
                r = Math.ceil(t.getWidth() / n),
                s = Math.ceil(t.getHeight() / n);
            let a = 0;
            for (let t = 0; t < s; t++)
                for (let n = 0; n < r; n++) {
                    const s = t * r + n,
                        i = this.#es[s];
                    e[s] ? (a++, i.style.display = "initial") : i.style.display = "none"
                }
            const i = r * s,
                o = Math.trunc(a / i * 100);
            this.#$r.textContent = `${a}/${i} (${o}%)`
        }
        #Sr() {
            const e = this.#Er.getSandGame(),
                t = e.getChunkSize(),
                n = Math.ceil(e.getWidth() / t),
                r = Math.ceil(e.getHeight() / t),
                s = Array(r * n);
            for (let e = 0; e < r; e++)
                for (let r = 0; r < n; r++) {
                    s[e * n + r] = this.#as(r, e, t)
                }
            this.#es = s, this.#Qr.append(...s), this.#$r = this.#is(0, 0), this.#Qr.append(this.#$r)
        }
        #is(e, t) {
            const n = e / this.#rs,
                r = t / this.#rs;
            return Z.span("", {
                style: {
                    left: n + "px",
                    top: r + "px",
                    position: "absolute",
                    color: "rgb(0, 255, 0)"
                }
            })
        }
        #as(e, t, n) {
            const r = this.#ts / this.#rs,
                s = this.#ns / this.#rs,
                a = e * n / this.#rs,
                i = t * n / this.#rs,
                o = n / this.#rs,
                l = n / this.#rs,
                h = Z.div({
                    style: {
                        left: a + "px",
                        top: i + "px",
                        width: o + "px",
                        height: l + "px",
                        position: "absolute",
                        outline: "rgb(0, 255, 0) 1px solid"
                    }
                });
            if (a + o >= r || i + l >= s) {
                const e = -1,
                    t = e,
                    c = a + o >= r ? a + o - r : e,
                    d = i + n >= s ? i + l - s : e,
                    u = e;
                h.style.clipPath = `inset(${t}px ${c}px ${d}px ${u}px)`
            }
            return h
        }
        createNode(e) {
            return this.#Qr
        }
    }
    class Tn extends sn {
        #Er;
        #Qr;
        #ts;
        #ns;
        #rs;
        constructor(e, t, n, r) {
            super(), this.#ts = e, this.#ns = t, this.#rs = n;
            const s = e / n,
                a = t / n;
            this.#Qr = Z.div({
                style: {
                    display: "none",
                    position: "absolute",
                    left: "0",
                    top: "0",
                    width: `${s}px`,
                    height: `${a}px`
                },
                class: "sand-game-canvas-overlay",
                width: e + "px",
                height: t + "px"
            }), this.#Er = r
        }
        register(e) {
            const t = e.getMarkers();
            if (t.length > 0) {
                for (const e of t) this.#Qr.append(this.#os(e));
                this.#Qr.style.display = "initial"
            }
            e.addOnMarkerAdded((e => {
                this.#Qr.append(this.#os(e)), this.#Qr.style.display = "initial"
            }))
        }
        #os(e) {
            const t = e.getConfig(),
                [n, r, s, a] = e.getPosition(),
                i = this.#as(n, r, s, a, t.label);
            if ("object" == typeof t.style)
                for (const [e, n] of Object.entries(t.style)) i.style[e] = n;
            return e.isVisible() || (i.style.display = "none"), e.addOnVisibleChanged((e => {
                i.style.display = e ? "initial" : "none"
            })), i
        }
        #as(e, t, n, r, s = null) {
            const a = {
                class: "sand-game-marker",
                style: {
                    left: e / this.#rs + "px",
                    top: t / this.#rs + "px",
                    width: (n - e) / this.#rs + "px",
                    height: (r - t) / this.#rs + "px",
                    position: "absolute"
                }
            };
            return Z.div(a, s)
        }
        createNode(e) {
            return this.#Qr
        }
    }
    class fn extends sn {
        #Er;
        #Qr;
        #ls = null;
        constructor(e, t, n, r) {
            super();
            const s = e / n,
                a = t / n;
            this.#Qr = Z.div({
                style: {
                    position: "absolute",
                    left: "0",
                    top: "0",
                    width: `${s}px`,
                    height: `${a}px`
                },
                class: "sand-game-canvas-overlay",
                width: e + "px",
                height: t + "px"
            }), this.#Er = r
        }
        createNode(e) {
            return this.#Qr
        }
        hideCursors() {
            this.#Qr.innerHTML = "", this.#ls = null
        }
        repaintRectangleSelection(e, t, n, r, s) {
            this.#Qr.innerHTML = "";
            let a = Math.min(e, n) / s,
                i = Math.min(t, r) / s,
                o = Math.abs(n - e) / s,
                l = Math.abs(r - t) / s;
            const h = Z.div({
                style: {
                    left: a + "px",
                    top: i + "px",
                    width: o + "px",
                    height: l + "px",
                    position: "absolute",
                    outline: "black 1px solid",
                    pointerEvents: "none"
                }
            });
            this.#Qr.append(h)
        }
        repaintLineSelection(e, t, n, r, s) {
            this.#Qr.innerHTML = "";
            const a = this.#Er.getCurrentWidthPoints(),
                i = this.#Er.getCurrentHeightPoints(),
                o = Z.create(`\n            <svg viewBox="0 0 ${a} ${i}" xmlns="http://www.w3.org/2000/svg">\n              <line x1="${e}" y1="${t}" x2="${n}" y2="${r}" stroke="black" />\n            </svg>\n        `);
            o.style.pointerEvents = "none", this.#Qr.append(o)
        }
        showCursor(e, t, n, r) {
            if (r instanceof k) {
                {
                    const e = Math.trunc(r.getWidth() / n),
                        t = Math.trunc(r.getHeight() / n),
                        s = Z.element("canvas", {
                            width: r.getWidth() + "px",
                            height: r.getHeight() + "px",
                            style: {
                                width: `${e}px`,
                                height: `${t}px`,
                                outline: "black 1px solid"
                            }
                        });
                    s.style.imageRendering = "pixelated", pe.renderPreview(r.getElementArea(), s.getContext("2d"), 187), this.#ls = {
                        width: e,
                        height: t,
                        node: s
                    }
                }
                this.#ls.node.style.position = "absolute", this.#ls.node.style.pointerEvents = "none", this.moveCursor(e, t, n)
            }
        }
        hasCursor() {
            return null !== this.#ls
        }
        moveCursor(e, t, n) {
            const r = this.#ls,
                s = this.#Er.getCurrentWidthPoints() / n,
                a = this.#Er.getCurrentHeightPoints() / n,
                i = t / n - Math.trunc(r.height / 2),
                o = e / n - Math.trunc(r.width / 2),
                l = i < 0 ? -i : -1,
                h = o + r.width >= s ? o + r.width - s : -1,
                c = i + r.height >= a ? i + r.height - a : -1,
                d = o < 0 ? -o : -1;
            r.node.style.top = i + "px", r.node.style.left = o + "px", r.node.style.clipPath = `inset(${l}px ${h}px ${c}px ${d}px)`, this.#Qr.innerHTML = "", this.#Qr.append(r.node)
        }
    }
    class Cn extends sn {
        #Er;
        #Qr;
        #ts;
        #ns;
        #rs;
        constructor(e, t, n, r) {
            super(), this.#ts = e, this.#ns = t, this.#rs = n;
            const s = e / n,
                a = t / n;
            this.#Qr = Z.div({
                style: {
                    display: "none",
                    position: "absolute",
                    left: "0",
                    top: "0",
                    width: `${s}px`,
                    height: `${a}px`,
                    pointerEvents: "none"
                },
                class: "sand-game-canvas-overlay",
                width: e + "px",
                height: t + "px"
            }), this.#Er = r
        }
        register(e) {
            let t = !1;
            const n = e => {
                this.#Qr.append(e), t || (t = !0, this.#Qr.style.display = null)
            };
            for (const t of e.getSplashes()) n(this.#hs(t));
            e.addOnSplashAdded((e => {
                n(this.#hs(e))
            }));
            let r = null,
                s = 0;
            const a = e => {
                const t = this.#cs(e);
                null === r && (e.isVisible() && s++, r = this.#ds(), r.style.display = s > 0 ? null : "none", n(r)), r.append(t), e.addOnVisibleChanged((e => {
                    s += e ? 1 : -1, r.style.display = s > 0 ? null : "none"
                }))
            };
            for (const t of e.getObjectives()) a(t);
            e.addOnObjectiveAdded((e => {
                a(e)
            }))
        }
        #hs(e) {
            let t = e.getConfig(),
                n = {
                    class: "sand-game-splash",
                    style: {
                        display: e.isVisible() ? null : "none"
                    }
                };
            Object.assign(n.style, t.style);
            let r = Z.div(n, [Z.div({
                class: "sand-game-splash-content"
            }, t.content), Z.div({
                class: "sand-game-splash-footer"
            }, t.buttons.filter((e => null !== e)).map((t => {
                let n;
                if ("string" == typeof t.action) n = Z.element("a", {
                    href: t.action,
                    class: t.class
                }, t.title);
                else {
                    if ("function" != typeof t.action) throw "Button action type not supported: " + typeof t.action;
                    n = Z.button(t.title, {
                        class: t.class
                    }, (() => t.action(e)))
                }
                return t.focus && setTimeout((() => {
                    n.focus({
                        preventScroll: !0
                    })
                }), 0), n
            })))]);
            return e.addOnVisibleChanged((e => {
                r.style.display = e ? null : "none"
            })), r
        }
        #ds() {
            return Z.div({
                class: "sand-game-objectives-list"
            }, null)
        }
        #cs(e) {
            const t = Z.span(null, {
                class: "sand-game-objective-icon"
            });
            e.isVisible() && Z.setContent(t, this.#us(e));
            const n = {
                    style: {
                        display: e.isVisible() ? null : "none"
                    }
                },
                r = Z.div(n, [t, e.getConfig().name]);
            return e.addOnVisibleChanged((n => {
                r.style.display = n ? null : "none", n && Z.setContent(t, this.#us(e))
            })), e.addOnActiveChanged((n => {
                e.isVisible() && Z.setContent(t, this.#us(e))
            })), e.addOnCompleted((() => {
                e.isVisible() && Z.setContent(t, this.#us(e))
            })), r
        }
        #us(e) {
            return e.isCompleted() ? Z.create('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">\n    <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>\n</svg>') : e.isActive() ? Z.create('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>\n</svg>') : Z.create('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square-dotted" viewBox="0 0 16 16">\n    <path d="m2.5 0q-.25 0-.487.048l.194.98a1.5 1.5 0 01.293-.028h.458v-1zm2.292 0h-.917v1h.917zm1.833 0h-.917v1h.917zm1.833 0h-.916v1h.916zm1.834 0h-.917v1h.917zm1.833 0h-.917v1h.917zm1.375 0h-.458v1h.458q.151 0 .293.029l.194-.981a2.5 2.5 0 00-.487-.048m2.079 1.11a2.5 2.5 0 00-.69-.689l-.556.831q.248.167.415.415l.83-.556zm-14.469-.689a2.5 2.5 0 00-.689.69l.831.556c.11-.164.251-.305.415-.415zm14.89 2.079q0-.25-.048-.487l-.98.194q.027.141.028.293v.458h1zm-15.952-.487a2.5 2.5 0 00-.048.487v.458h1v-.458q0-.151.029-.293zm-.048 1.862v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .916v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .917v.916h1v-.916zm15 .916h1v-.916h-1zm-15 .917v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .916v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .917v.458q0 .25.048.487l.98-.194a1.5 1.5 0 01-.028-.293v-.458zm16 .458v-.458h-1v.458q0 .151-.029.293l.981.194q.048-.237.048-.487m-15.579 1.39c.183.272.417.506.69.689l.556-.831a1.5 1.5 0 01-.415-.415zm14.469.689c.272-.183.506-.417.689-.69l-.831-.556c-.11.164-.251.305-.415.415l.556.83zm-12.877.373q.237.048.487.048h.458v-1h-.458q-.151 0-.293-.029zm11.487.048q.25 0 .487-.048l-.194-.98a1.5 1.5 0 01-.293.028h-.458v1zm-9.625 0h.917v-1h-.917zm1.833 0h.917v-1h-.917zm1.834 0h.916v-1h-.916zm1.833 0h.917v-1h-.917zm1.833 0h.917v-1h-.917z"/>\n</svg>')
        }
        createNode(e) {
            return this.#Qr
        }
    }
    class Rn extends sn {
        #Er;
        #ms;
        #Es;
        #As;
        #gs;
        #ps;
        #Ts;
        #fs;
        #Cs;
        #Rs;
        constructor(e) {
            super(), this.#Er = e;
            const t = this.#Er.getCurrentWidthPoints(),
                n = this.#Er.getCurrentHeightPoints(),
                r = this.#Er.getCurrentScale();
            this.#ms = this.#Ss(t, n, r), this.#Es = new pn(t, n, r, e), this.#As = this.#Es.createNode(), this.#gs = new Tn(t, n, r, e), this.#ps = this.#gs.createNode(), this.#Ts = new fn(t, n, r, e), this.#fs = this.#Ts.createNode(), this.#Cs = new Cn(t, n, r, e), this.#Rs = this.#Cs.createNode()
        }
        #Ss(e, t, n) {
            const r = e / n,
                s = t / n,
                a = Z.element("canvas", {
                    style: `position: relative; width: ${r}px; height: ${s}px;`,
                    class: "sand-game-canvas",
                    width: e + "px",
                    height: t + "px"
                });
            return a.style.imageRendering = this.#Er.getCanvasImageRenderingStyle(), a
        }
        createNode(e) {
            return Z.div({
                style: "position: relative;",
                class: "sand-game-canvas-component"
            }, [this.#ms, this.#As, this.#ps, this.#fs, this.#Rs])
        }
        register(e) {
            this.#gs.register(e.overlay()), this.#Cs.register(e.scenario()), e.addOnRendered((e => {
                this.#Er.isShowActiveChunks() ? this.#Es.highlightChunks(e) : this.#Es.highlightChunks(null)
            })), this.#vs(e)
        }
        #vs(e) {
            const t = this.#fs,
                n = this.#Er.getCurrentScale(),
                r = this.#Er.getToolManager();
            let s, a, i = e => {
                    const r = t.getBoundingClientRect();
                    return [Math.max(0, Math.trunc((e.clientX - r.left) * n)), Math.max(0, Math.trunc((e.clientY - r.top) * n))]
                },
                o = null,
                l = !1,
                h = !1,
                c = !1,
                d = null;
            const u = (t, n, r) => {
                    o.isRepeatingEnabled() && (d = setInterval((() => {
                        o.applyPoint(t, n, e.graphics(), r)
                    }), 80))
                },
                m = () => {
                    null !== d && (clearInterval(d), d = null)
                };
            this.#fs.addEventListener("contextmenu", (e => (e.preventDefault(), !1))), t.addEventListener("mousedown", (t => {
                if (r.isInputDisabled()) return;
                const [d, E] = i(t);
                if (s = d, a = E, o = null, l = !1, h = !1, c = !1, 1 === t.buttons) o = r.getPrimaryTool(), J.triggerFeatureUsed(J.FEATURE_DRAW_PRIMARY);
                else {
                    if (2 !== t.buttons) {
                        if (4 === t.buttons) {
                            if (t.preventDefault(), t.altKey || t.ctrlKey || t.shiftKey) t.altKey && t.ctrlKey && t.shiftKey && console.log(d + "x" + E + ": " + e.debugElementAt(d, E));
                            else {
                                const t = r.getTertiaryTool();
                                t.applyPoint(d, E, e.graphics(), !1), J.triggerFeatureUsed(J.FEATURE_DRAW_TERTIARY), J.triggerToolUsed(t)
                            }
                            return
                        }
                        return
                    } {
                        let n = r.getPrimaryTool();
                        if (n.isSecondaryActionEnabled()) return n.applySecondaryAction(d, E, e.graphics(), t.altKey), this.#Ts.hideCursors(), void m();
                        o = r.getSecondaryTool(), J.triggerFeatureUsed(J.FEATURE_DRAW_SECONDARY)
                    }
                }
                if (t.ctrlKey || t.shiftKey) t.ctrlKey && t.shiftKey ? (o.applySpecial(d, E, e.graphics(), t.altKey), J.triggerFeatureUsed(J.FEATURE_DRAW_FLOOD), J.triggerToolUsed(o), o = null) : (t.ctrlKey && o.isAreaModeEnabled() && (h = t.ctrlKey), t.shiftKey && o.isLineModeEnabled() && (c = t.shiftKey));
                else {
                    o.applyPoint(d, E, e.graphics(), t.altKey), J.triggerToolUsed(o), u(d, E, t.altKey), this.#Ts.hideCursors();
                    const s = r.getPrimaryTool().createCursor();
                    null !== s && this.#Ts.showCursor(d, E, n, s)
                }
            })), t.addEventListener("mousemove", (t => {
                if (m(), r.isInputDisabled()) return o = null, void this.#Ts.hideCursors();
                if (!h && !c) {
                    if (this.#Ts.hasCursor()) {
                        const [e, r] = i(t);
                        this.#Ts.moveCursor(e, r, n)
                    } else {
                        const e = r.getPrimaryTool().createCursor();
                        if (null !== e) {
                            const [r, s] = i(t);
                            this.#Ts.showCursor(r, s, n, e)
                        }
                    }
                    if (null === o) return;
                    const [h, c] = i(t);
                    return l || (o.onDragStart(s, a, e.graphics(), t.altKey), l = !0), o.applyStroke(s, a, h, c, e.graphics(), t.altKey), J.triggerToolUsed(o), u(h, c, t.altKey), s = h, void(a = c)
                }
                if (!(null === o || h && c))
                    if (h) {
                        const [e, r] = i(t);
                        this.#Ts.repaintRectangleSelection(s, a, e, r, n)
                    } else if (c) {
                    const [e, r] = i(t);
                    this.#Ts.repaintLineSelection(s, a, e, r, n)
                } else;
            })), t.addEventListener("mouseup", (t => {
                if (m(), !r.isInputDisabled() && null !== o) {
                    if (l) o.onDragEnd(s, a, e.graphics(), t.altKey), l = !1, o.hasCursor() || this.#Ts.hideCursors();
                    else if (h) {
                        const [n, r] = i(t);
                        let l = Math.min(s, n),
                            h = Math.min(a, r),
                            c = Math.max(s, n),
                            d = Math.max(a, r);
                        o.applyArea(l, h, c, d, e.graphics(), t.altKey), this.#Ts.hideCursors(), J.triggerFeatureUsed(J.FEATURE_DRAW_RECT), J.triggerToolUsed(o)
                    } else if (c) {
                        const [n, r] = i(t);
                        o.applyStroke(s, a, n, r, e.graphics(), t.altKey), this.#Ts.hideCursors(), J.triggerFeatureUsed(J.FEATURE_DRAW_LINE), J.triggerToolUsed(o)
                    }
                    o = null, h = !1, c = !1
                }
            })), t.addEventListener("mouseout", (e => {
                m(), this.#Ts.hideCursors()
            })), t.addEventListener("mouseenter", (e => {
                null !== o && 0 === e.buttons && (o = null, this.#Ts.hideCursors(), e.preventDefault())
            }));
            let E = e => {
                let t = e.touches[0];
                return i(t)
            };
            t.addEventListener("touchstart", (t => {
                if (r.isInputDisabled()) return;
                const [n, i] = E(t);
                s = n, a = i, o = r.getPrimaryTool(), o.applyPoint(n, i, e.graphics(), !1), J.triggerFeatureUsed(J.FEATURE_DRAW_PRIMARY), J.triggerToolUsed(o), t.preventDefault()
            })), t.addEventListener("touchmove", (t => {
                if (r.isInputDisabled()) return void(o = null);
                if (null === o) return;
                const [n, i] = E(t);
                o.applyStroke(s, a, n, i, e.graphics(), !1), J.triggerToolUsed(o), s = n, a = i, t.preventDefault()
            })), t.addEventListener("touchend", (e => {
                o = null, e.preventDefault()
            }))
        }
        getCanvasNode() {
            return this.#ms
        }
        setImageRenderingStyle(e) {
            this.#ms.style.imageRendering = e
        }
        onInputDisabledChanged(e) {
            this.#fs.style.cursor = e ? "not-allowed" : null
        }
    }
    class Sn extends sn {
        #ws = Z.div({
            class: "sand-game-canvas-holder"
        });
        #Os = null;
        createNode(e) {
            return e.registerCanvasProvider({
                initialize: () => (this.#ws.innerHTML = "", this.#Os = new Rn(e), this.#ws.append(this.#Os.createNode(e)), this.#Os.getCanvasNode()),
                getCanvasNode: () => null !== this.#Os ? this.#Os.getCanvasNode() : null
            }), e.addOnImageRenderingStyleChanged((e => {
                null !== this.#Os && this.#Os.setImageRenderingStyle(e)
            })), e.addOnInitialized((e => {
                if (null === this.#Os) throw "Illegal state: canvas is not initialized";
                this.#Os.register(e)
            })), e.addOnBeforeClosed((() => {
                this.#Os = null, this.#ws.innerHTML = ""
            })), e.getToolManager().addOnInputDisabledChanged((e => {
                null !== this.#Os && this.#Os.onInputDisabledChanged(e)
            })), this.#ws
        }
    }
    class vn extends un {
        performAction(e) {
            let t = Z.bootstrapSimpleFormBuilder();
            t.addInput("Width", "width", "" + e.getCurrentWidthPoints()), t.addInput("Height", "height", "" + e.getCurrentHeightPoints()), t.addInput("Scale", "scale", "" + e.getCurrentScale());
            let n = Z.bootstrapDialogBuilder();
            n.setHeaderContent("Change canvas size manually"), n.setBodyContent(t.createNode()), n.addSubmitButton("Submit", (() => {
                let n = t.getData(),
                    r = Number.parseInt(n.width),
                    s = Number.parseInt(n.height),
                    a = Number.parseFloat(n.scale);
                e.changeCanvasSize(r, s, a), J.triggerFeatureUsed(J.FEATURE_CANVAS_SIZE_CHANGE)
            })), n.addCloseButton("Close"), n.show(e.getDialogAnchor())
        }
    }
    class wn extends sn {
        static CLASS_SELECTED = "selected-size";
        static SIZES = [{
            scale: 1,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHUlEQVR4Xu3WQW6EMBBEUSJx3jkMF55s4ogQG2zTxeDi/10ijdxTb5HME1k3b39BXgFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsCrlmV5r39+vV5f659HDOCftrjpd6MjAzzlcVOjIz8eeA83NTLyo4FrcFOjIj8WuAU3NSLyI4F7cFOjIT8O+AxuaiTkRwFH4KZGQX4McCRuagTkjwGvB1ePpMBN3R35I8DbwZUjbd9SpLz/bJcDlwZXjFR6S5Hi/oguBT4aPHKko7cURd4f1WXAtYNHjFT7lqKI+yO7BLh18DMjtb6l6Mz90cmBewfvGan3LUU99yuSAp8dvGWks28parlflQw4avCakaLeUlRzvzIJcPTgeyNFv6Vo73514cCqwXMjqd5SlLu/1Pp71X6mVCiwevD1SOq3FNUgb79XzWf2CgPeHqbqqndU7YGVvtveZ44KAS4dRvlyYEcb5j5T02ngo8MoX8+fmx7kU8C1h1G+nv1akbuBe46jmFqQu4DB/Xy1yM3A4N6nGuQmYHDv1xFyNTC4920PuQoY3PtXQj4EBneccsi7wOCO1xa5CAzuuK2Rs8Dgjl9C/gcMrk/Lsrz/AIPr1y8wuJ7N0wSuczO43v37J4u8Atg8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYvG9K/XJS29iPWwAAAABJRU5ErkJggg==",
            description: "Very small elements"
        },{
            scale: .75,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHUlEQVR4Xu3WQW6EMBBEUSJx3jkMF55s4ogQG2zTxeDi/10ijdxTb5HME1k3b39BXgFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsDmAWwewOYBbB7A5gFsHsCrlmV5r39+vV5f659HDOCftrjpd6MjAzzlcVOjIz8eeA83NTLyo4FrcFOjIj8WuAU3NSLyI4F7cFOjIT8O+AxuaiTkRwFH4KZGQX4McCRuagTkjwGvB1ePpMBN3R35I8DbwZUjbd9SpLz/bJcDlwZXjFR6S5Hi/oguBT4aPHKko7cURd4f1WXAtYNHjFT7lqKI+yO7BLh18DMjtb6l6Mz90cmBewfvGan3LUU99yuSAp8dvGWks28parlflQw4avCakaLeUlRzvzIJcPTgeyNFv6Vo73514cCqwXMjqd5SlLu/1Pp71X6mVCiwevD1SOq3FNUgb79XzWf2CgPeHqbqqndU7YGVvtveZ44KAS4dRvlyYEcb5j5T02ngo8MoX8+fmx7kU8C1h1G+nv1akbuBe46jmFqQu4DB/Xy1yM3A4N6nGuQmYHDv1xFyNTC4920PuQoY3PtXQj4EBneccsi7wOCO1xa5CAzuuK2Rs8Dgjl9C/gcMrk/Lsrz/AIPr1y8wuJ7N0wSuczO43v37J4u8Atg8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYPIDNA9g8gM0D2DyAzQPYvG9K/XJS29iPWwAAAABJRU5ErkJggg==",
            description: "Very small elements"
        }, {
            scale: .5,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABSElEQVR4Xu3WQQ6EIBAFUUw8L4fxwjN78xedQBDLeksiYbAysc8mtPO+IBYDwxkYzsBwBoYzMJyB4QwMZ2A4A8MZGM7AcAaGMzCcgeEMDGdgOAPDGRjOwK2167p+97Wk937c13ZnYDgDwxkYzsBwnwtcHaiStHf3wetzgb/GwHAGhjMw3JLAaThJZg8s1XNHpDNm32PEksB6joHhDAxnYLjpgdPQUZX2VgeWtPcp6bdU7zHb9MDai4HhDAxnYLihwGmYmG3FGSuke6TBq/pc1VBg7c/AcAaGMzBcOXD6+GtM9Z2m56qDVzmw3snAcAaGMzBcDJw+6tpLapQGrxhYHAaGMzCcgeHO9LHWO6WW/oPhDAxnYDgDwxkYzsBwBoYzMJyB4QwMZ2A4A8MZGM7AcAaGMzCcgeEMDGdgOAPDGRjOwHAGhjMw3B/1T0cI5HMokgAAAABJRU5ErkJggg==",
            description: "Small elements"
        }, {
            scale: .375,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGklEQVR4Xu3YMU7EMBQAUZBy3hwmF4Y+BforGcNO3itdOFZGLvyPD9KO+wItAscJHCdwnMBxAscJHCdwnMBxAscJHCdwnMBxAscJHCdwnMBxjw58XdfXfe3uPM/P+9o7eXTgJxA4TuA4geMEjhM4TuA4geO2Bt45WJh8a2Kyz6oz/4atgdlP4DiB4wSOEzhO4DiB4wSOWxZ4MhCYWLXPTpMz/9UwZFlg/ieB4wSOEzhO4DiB4wSOEzhuFHjykOdnq/7hqwOTUWDel8BxAscJHCdwnMBxAscJHHeseoCzx6u93OA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuC4b6YQJX8pLssnAAAAAElFTkSuQmCC",
            description: "Medium elements"
        }, {
            scale: .25,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+ElEQVR4Xu3ZsQ3DMAwAwRjwvBpGCye9KgMq7LzvSnbiQxXPD2nnOqBF4DiB4wSOEzhO4DiB4wSOEzhO4DiB4wSOEzhO4LjXBZ5zftfZVWOMY5093esCv43AcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcVuBd05v/2jnvXedGrcC83wCxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECx507JzCuu2vPfnCcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHE/D68RYAgtpF0AAAAASUVORK5CYII=",
            description: "Big elements"
        }, {
            scale: .1,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+ElEQVR4Xu3ZsQ3DMAwAwRjwvBpGCye9KgMq7LzvSnbiQxXPD2nnOqBF4DiB4wSOEzhO4DiB4wSOEzhO4DiB4wSOEzhO4LjXBZ5zftfZVWOMY5093esCv43AcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcVuBd05v/2jnvXedGrcC83wCxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECx507JzCuu2vPfnCcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHE/D68RYAgtpF0AAAAASUVORK5CYII=",
            description: "THICC elements"
        }, {
            scale: .05,
            image: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+ElEQVR4Xu3ZsQ3DMAwAwRjwvBpGCye9KgMq7LzvSnbiQxXPD2nnOqBF4DiB4wSOEzhO4DiB4wSOEzhO4DiB4wSOEzhO4LjXBZ5zftfZVWOMY5093esCv43AcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcVuBd05v/2jnvXedGrcC83wCxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECx507JzCuu2vPfnCcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHE/D68RYAgtpF0AAAAASUVORK5CYII=",
            description: "CHUNGUS elements"
        }];
        #Is = [];
        #ys = null;
        #bs = null;
        createNode(e) {
            for (let t of wn.SIZES) {
                let n = this.#Ms(t.scale, t.image, t.description);
                t.scale === e.getCurrentScale() && this.#Hs(n, t.scale), n.addEventListener("click", (r => {
                    this.#Ns(n, t.scale, e)
                })), this.#Is.push(n)
            }
            return Z.div(null, [Z.par(null, "Increasing the size of the elements will result in the top and right parts of the canvas being clipped."), Z.par(null, "Reducing the size of the elements will result in an expansion of the canvas in the upper and right parts."), Z.par(null, "Only the scale of the current scene and the initial setting for new scenes will be changed. Scene can be regenerated by clicking on the scene card."), Z.div({
                class: "element-size-options"
            }, this.#Is)])
        }
        #Ns(e, t, n) {
            if (this.#bs === t) return;
            this.#ys && this.#ys.classList.remove(wn.CLASS_SELECTED), this.#Hs(e, t);
            let r = Math.trunc(n.getCurrentWidthPoints() / n.getCurrentScale() * t),
                s = Math.trunc(n.getCurrentHeightPoints() / n.getCurrentScale() * t);
            n.changeCanvasSize(r, s, t), J.triggerFeatureUsed(J.FEATURE_SWITCH_SCALE)
        }
        #Hs(e, t) {
            e.classList.add(wn.CLASS_SELECTED), this.#ys = e, this.#bs = t
        }
        #Ms(e, t, n) {
            return Z.div({
                class: "card"
            }, [Z.element("img", {
                src: t,
                alt: n
            })])
        }
    }
    class On extends un {
        performAction(e) {
            let t = new wn,
                n = Z.bootstrapDialogBuilder();
            n.setHeaderContent("Adjust Scale"), n.setBodyContent(Z.div({
                class: "sand-game-component"
            }, [t.createNode(e)])), n.addSubmitButton("Set size manually", (() => {
                (new vn).performAction(e)
            })), n.addCloseButton("Close"), n.show(e.getDialogAnchor())
        }
    }
    class In extends sn {
        createNode(e) {
            return Z.button(Z.create('\x3c!-- @author Patrik Harag --\x3e\n<svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n <g>\n  <rect stroke="#505050" stroke-width="4" id="svg_1" height="24" width="24" y="35.5" x="4.5" fill="none"/>\n  <rect stroke="#505050" stroke-width="2" stroke-dasharray="3,5" id="svg_2" height="54" width="54" y="4.5" x="4.5" fill="none"/>\n  <line stroke="#505050" id="svg_3" y2="10.65089" x2="51.9999" y1="27.9524" x1="34.38094" stroke-width="4" fill="none"/>\n  <line stroke="#505050" id="svg_4" y2="11.28581" x2="50.73007" y1="13.98421" x1="37.87298" stroke-width="4" fill="none"/>\n  <line stroke="#505050" id="svg_5" y2="11.762" x2="51.36499" y1="23.82543" x1="48.82531" stroke-width="4" fill="none"/>\n </g>\n</svg>'), {
                class: "btn btn-outline-secondary adjust-scale",
                "aria-label": "Adjust scale"
            }, (() => {
                (new On).performAction(e)
            }))
        }
    }
    class yn extends sn {
        static CLASS_SELECTED = "selected-scene";
        static CLASS_VISITED = "visited-scene";
        #Er;
        #Ds = !1;
        #P;
        #Us;
        #ys = null;
        #xs = null;
        #Bs = new Map;
        constructor(e, t, n) {
            super(), this.#Er = e, this.#P = t, this.#Us = n, this.#Er.addOnBeforeNewSceneLoaded((() => {
                this.#Ds || (this.#Ps(), this.#Fs())
            }))
        }
        createNode(e) {
            let t = Z.div({
                class: "scenes"
            }, []);
            for (const [e, n] of Object.entries(this.#P)) {
                let r = Z.element("span", {
                        class: "scene-title"
                    }, n.name),
                    s = Z.button(r, {
                        class: "btn btn-outline-secondary scene"
                    }, (() => {
                        this.#Ls(e, s, n)
                    }));
                e === this.#Us && (this.#ys = s, this.#xs = e, s.classList.add(yn.CLASS_SELECTED), s.classList.add(yn.CLASS_VISITED)), t.append(s)
            }
            return t
        }
        #Ls(e, t, n) {
            this.#ys ? this.#xs === e ? this.#_s((() => {
                this.#Ns(t, e, n), J.triggerFeatureUsed(J.FEATURE_RESTART_SCENE)
            })) : (this.#Ps(), this.#Ns(t, e, n), J.triggerFeatureUsed(J.FEATURE_SWITCH_SCENE)) : (this.#Ns(t, e, n), J.triggerFeatureUsed(J.FEATURE_SWITCH_SCENE))
        }
        #_s(e) {
            let t = Z.bootstrapDialogBuilder();
            t.setHeaderContent("Restart scene"), t.setBodyContent([Z.par(null, "Do you want to restart the scene?")]), t.addSubmitButton("Confirm", e), t.addCloseButton("Close"), t.show(this.#Er.getDialogAnchor())
        }
        #Ns(e, t, n) {
            this.#Fs(), this.#ys = e, this.#xs = t, e.classList.add(yn.CLASS_SELECTED), e.classList.add(yn.CLASS_VISITED);
            let r = this.#Bs.get(t);
            r ? (this.#Bs.delete(t), this.#Ds = !0, this.#Er.openScene(new Ge(r)), this.#Ds = !1) : (this.#Ds = !0, this.#Er.openScene(n), this.#Ds = !1)
        }
        #Fs() {
            this.#ys && this.#ys.classList.remove(yn.CLASS_SELECTED), this.#ys = null, this.#xs = null
        }
        #Ps() {
            this.#ys && this.#Bs.set(this.#xs, this.#Er.createSnapshot())
        }
    }
    class bn {
        static ALL_MATERIALS = function(e) {
            let t = e.getSandGame();
            if (null === t) return;
            const n = ["ash", "sand", "soil", "gravel", "wall", "rock", "metal", "wood", "water"];
            let r = Math.ceil(t.getWidth() / n.length);
            for (let e = 0; e < n.length; e++) {
                const s = F.byCodeName(n[e]);
                t.graphics().drawRectangle(e * r, 0, (e + 1) * r, -1, s, !0)
            }
        };
        static TREE_SPAWN_TEST = function(e) {
            let t = e.getSandGame();
            null !== t && (t.graphics().fill(F.AIR), t.layeredTemplate().layer(Math.trunc(t.getHeight() / 2), !1, F.AIR).layer(1, !0, F.WALL).layer(10, !0, F.SOIL).grass(), t.layeredTemplate().layer(1, !0, F.WALL).layer(10, !0, F.SOIL).grass())
        };
        static treeGrowTest(e = -1) {
            return function(t) {
                let n = t.getSandGame();
                if (null === n) return;
                n.graphics().fill(F.AIR);
                let r = B.TREE_TRUNK_TEMPLATES.length,
                    s = Math.trunc(n.getWidth() / 8);
                const a = n.layeredTemplate();
                a.layer(Math.trunc(n.getHeight() / 2), !1, F.AIR), a.layer(1, !0, F.WALL), a.layer(10, !0, F.SOIL);
                for (let t = 0; t < 8; t++) a.tree(Math.trunc((t + .5) * s), t % r, e);
                a.grass();
                const i = n.layeredTemplate();
                i.layer(1, !0, F.WALL), i.layer(10, !0, F.SOIL);
                for (let t = 0; t < 8; t++) i.tree(Math.trunc((t + .5) * s), (t + 8) % r, e);
                i.grass()
            }
        }
    }
    var Mn = {};
    ! function(e, t) {
        ! function() {
            function t(e, t) {
                return void 0 === t ? t = {
                    autoBom: !1
                } : "object" != typeof t && (console.warn("Deprecated: Expected third argument to be a object"), t = {
                    autoBom: !t
                }), t.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob(["\ufeff", e], {
                    type: e.type
                }) : e
            }

            function n(e, t, n) {
                var r = new XMLHttpRequest;
                r.open("GET", e), r.responseType = "blob", r.onload = function() {
                    o(r.response, t, n)
                }, r.onerror = function() {
                    console.error("could not download file")
                }, r.send()
            }

            function r(e) {
                var t = new XMLHttpRequest;
                t.open("HEAD", e, !1);
                try {
                    t.send()
                } catch (e) {}
                return 200 <= t.status && 299 >= t.status
            }

            function s(e) {
                try {
                    e.dispatchEvent(new MouseEvent("click"))
                } catch (n) {
                    var t = document.createEvent("MouseEvents");
                    t.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), e.dispatchEvent(t)
                }
            }
            var a = "object" == typeof window && window.window === window ? window : "object" == typeof self && self.self === self ? self : "object" == typeof Pe && Pe.global === Pe ? Pe : void 0,
                i = a.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent),
                o = a.saveAs || ("object" != typeof window || window !== a ? function() {} : "download" in HTMLAnchorElement.prototype && !i ? function(e, t, i) {
                    var o = a.URL || a.webkitURL,
                        l = document.createElement("a");
                    t = t || e.name || "download", l.download = t, l.rel = "noopener", "string" == typeof e ? (l.href = e, l.origin === location.origin ? s(l) : r(l.href) ? n(e, t, i) : s(l, l.target = "_blank")) : (l.href = o.createObjectURL(e), setTimeout((function() {
                        o.revokeObjectURL(l.href)
                    }), 4e4), setTimeout((function() {
                        s(l)
                    }), 0))
                } : "msSaveOrOpenBlob" in navigator ? function(e, a, i) {
                    if (a = a || e.name || "download", "string" != typeof e) navigator.msSaveOrOpenBlob(t(e, i), a);
                    else if (r(e)) n(e, a, i);
                    else {
                        var o = document.createElement("a");
                        o.href = e, o.target = "_blank", setTimeout((function() {
                            s(o)
                        }))
                    }
                } : function(e, t, r, s) {
                    if ((s = s || open("", "_blank")) && (s.document.title = s.document.body.innerText = "downloading..."), "string" == typeof e) return n(e, t, r);
                    var o = "application/octet-stream" === e.type,
                        l = /constructor/i.test(a.HTMLElement) || a.safari,
                        h = /CriOS\/[\d]+/.test(navigator.userAgent);
                    if ((h || o && l || i) && "undefined" != typeof FileReader) {
                        var c = new FileReader;
                        c.onloadend = function() {
                            var e = c.result;
                            e = h ? e : e.replace(/^data:[^;]*;/, "data:attachment/file;"), s ? s.location.href = e : location = e, s = null
                        }, c.readAsDataURL(e)
                    } else {
                        var d = a.URL || a.webkitURL,
                            u = d.createObjectURL(e);
                        s ? s.location = u : location.href = u, s = null, setTimeout((function() {
                            d.revokeObjectURL(u)
                        }), 4e4)
                    }
                });
            a.saveAs = o.saveAs = o, e.exports = o
        }()
    }({
        get exports() {
            return Mn
        },
        set exports(e) {
            Mn = e
        }
    });
    var Hn = Mn;
    class Nn extends un {
        performAction(e) {
            new Dn(e, (t => {
                let n = Z.bootstrapDialogBuilder();
                n.setHeaderContent("Benchmark results"), n.setBodyContent([Z.par(null, "IPS AVG: " + t.ipsAvg.toFixed(2)), Z.par(null, "IPS MIN: " + t.ipsMin)]), n.addCloseButton("Close"), n.addButton(Z.button("Download results", {
                    type: "button",
                    class: "btn btn-primary"
                }, (e => {
                    const n = JSON.stringify(t, null, "  "),
                        r = new Blob([n], {
                            type: "application/json;charset=utf-8"
                        }),
                        s = this.#ks(new Date);
                    Hn.saveAs(r, `${s}.benchmark.json`)
                }))), n.show(e.getDialogAnchor())
            })).start()
        }
        #ks(e) {
            let t = String(e.getDate()).padStart(2, "0"),
                n = String(e.getMonth() + 1).padStart(2, "0");
            return `${e.getFullYear()}-${n}-${t}_${String(e.getHours()).padStart(2,"0")}-${String(e.getMinutes()).padStart(2,"0")}`
        }
    }
    class Dn {
        static WAITING_GAP = 300;
        #Er;
        #Ws;
        constructor(e, t) {
            this.#Er = e, this.#Ws = t
        }
        start() {
            let e = new cn({
                apply: e => this.#Vs(e)
            });
            this.#Er.openScene(e), this.#Er.start()
        }
        #Vs(e) {
            const t = [],
                n = [...Dn.BENCHMARKS];
            let r = 0,
                s = Dn.WAITING_GAP,
                a = 0,
                i = Number.MAX_SAFE_INTEGER;
            e.addOnProcessed((() => {
                if (s > 0) return void s--;
                if (0 === n.length) return;
                const o = n[0];
                0 === r && console.log("Running benchmark: " + o.name), o.nextIteration(e, r), r++;
                const l = e.getIterationsPerSecond();
                if (a += l, i = Math.min(i, l), o.iterations === r) {
                    const l = a / o.iterations;
                    t.push({
                        name: o.name,
                        ipsAvg: l,
                        ipsMin: i
                    }), n.shift(), r = 0, a = 0, i = Number.MAX_SAFE_INTEGER, s = Dn.WAITING_GAP, e.graphics().fill(F.AIR), 0 === n.length && this.#Ws(this.#Gs(e, t))
                }
            }))
        }
        #Gs(e, t) {
            const n = t.map((e => e.ipsAvg)).reduce(((e, t) => e + t), 0) / t.length,
                r = t.map((e => e.ipsMin)).reduce(((e, t) => Math.min(e, t)), Number.MAX_SAFE_INTEGER);
            return {
                version: 1,
                date: (new Date).toString(),
                ipsAvg: n,
                ipsMin: r,
                benchmarks: t,
                scene: {
                    width: e.getWidth(),
                    height: e.getHeight()
                }
            }
        }
        static #Ys(e, t, n) {
            if (t <= 0) throw "Number of iterations must be a positive number";
            return {
                name: e,
                iterations: t,
                nextIteration: n
            }
        }
        static BENCHMARKS = [Dn.#Ys("sand-fall-q", 500, (function(e, t) {
            e.graphics().drawRectangle(0, 0, -1, 1, F.SAND, !0)
        })), Dn.#Ys("sand-fall-s", 2e3, (function(e, t) {
            t % 10 == 0 && e.graphics().drawRectangle(0, 0, -1, 1, F.SAND, !0)
        })), Dn.#Ys("sand-fill", 1e3, (function(e, t) {
            0 === t && e.graphics().drawRectangle(0, 0, -1, -1, F.SAND, !0)
        })), Dn.#Ys("soil-fall-q", 500, (function(e, t) {
            e.graphics().drawRectangle(0, 0, -1, 1, F.SOIL, !0)
        })), Dn.#Ys("soil-fall-s", 2e3, (function(e, t) {
            t % 10 == 0 && e.graphics().drawRectangle(0, 0, -1, 1, F.SOIL, !0)
        })), Dn.#Ys("soil-fill", 1e3, (function(e, t) {
            0 === t && e.graphics().drawRectangle(0, 0, -1, -1, F.SOIL, !0)
        })), Dn.#Ys("water-fall-q", 500, (function(e, t) {
            e.graphics().drawRectangle(0, 0, -1, 1, F.WATER, !0)
        })), Dn.#Ys("water-fall-s", 2e3, (function(e, t) {
            t % 10 == 0 && e.graphics().drawRectangle(0, 0, -1, 1, F.WATER, !0)
        })), Dn.#Ys("water-fill", 1e3, (function(e, t) {
            0 === t && e.graphics().drawRectangle(0, 0, -1, -1, F.WATER, !0)
        })), Dn.#Ys("sand-into-water", 1e3, (function(e, t) {
            0 === t && (e.graphics().drawRectangle(0, 0, -1, 31, F.SAND, !0), e.graphics().drawRectangle(0, 60, -1, -1, F.WATER, !0))
        })), Dn.#Ys("soil-into-water", 1e3, (function(e, t) {
            0 === t && (e.graphics().drawRectangle(0, 0, -1, 31, F.SOIL, !0), e.graphics().drawRectangle(0, 60, -1, -1, F.WATER, !0))
        }))]
    }
    class Un extends sn {
        static CLASS_PRIMARY = "btn-primary";
        static CLASS_SECONDARY = "btn-secondary";
        static CLASS_INFO = "btn-info";
        static CLASS_SUCCESS = "btn-success";
        static CLASS_WARNING = "btn-warning";
        static CLASS_LIGHT = "btn-light";
        static CLASS_OUTLINE_PRIMARY = "btn-outline-primary";
        static CLASS_OUTLINE_SECONDARY = "btn-outline-secondary";
        static CLASS_OUTLINE_INFO = "btn-outline-info";
        static CLASS_OUTLINE_SUCCESS = "btn-outline-success";
        static CLASS_OUTLINE_WARNING = "btn-outline-warning";
        static CLASS_OUTLINE_LIGHT = "btn-outline-light";
        #zs;
        #Ks;
        #Xs;
        constructor(e, t, n) {
            super(), this.#zs = e, this.#Ks = "function" == typeof n ? un.create(n) : n, this.#Xs = null == t ? Un.CLASS_PRIMARY : t
        }
        createNode(e) {
            return Z.button(this.#zs, {
                class: "btn " + this.#Xs
            }, (t => {
                this.#Ks.performAction(e)
            }))
        }
    }
    class xn extends un {
        performAction(e) {
            const t = e.getCanvas();
            null !== t && t.toBlob((e => {
                Hn.saveAs(e, this.#ks(new Date) + ".png")
            }))
        }
        #ks(e) {
            let t = String(e.getDate()).padStart(2, "0"),
                n = String(e.getMonth() + 1).padStart(2, "0");
            return `${e.getFullYear()}-${n}-${t}_${String(e.getHours()).padStart(2,"0")}-${String(e.getMinutes()).padStart(2,"0")}`
        }
    }
    class Bn extends un {
        #qs = !1;
        #Js = !1;
        #Zs = null;
        performAction(e) {
            if (this.#qs || (e.addOnBeforeClosed((() => {
                    null !== this.#Zs && this.#js()
                })), e.addOnInitialized((e => {
                    this.#Js = !1
                })), this.#qs = !0), null === this.#Zs) {
                if (this.#Zs = {}, !this.#Js) {
                    let t = !1,
                        n = 0,
                        r = !1;
                    e.getSandGame().addOnProcessed((e => {
                        t = !0, n = e
                    })), e.getSandGame().addOnRendered((() => {
                        null !== this.#Zs && t && !r && (r = !0, this.#Qs(e, n, (() => r = !1)), t = !1)
                    })), this.#Js = !0
                }
            } else this.#js()
        }
        #Qs(e, t, n) {
            const r = e.getCanvas();
            null !== r && r.toBlob((e => {
                e.arrayBuffer().then((e => {
                    const n = new Uint8Array(e);
                    null !== this.#Zs && (this.#Zs[`iteration_${String(t).padStart(6,"0")}.png`] = n)
                })).finally((() => {
                    n()
                }))
            }))
        }
        #js() {
            this.#$s(this.#Zs, "frames.zip"), this.#Zs = null
        }
        #$s(e, t) {
            const n = jt(e, {
                level: 0
            });
            Hn.saveAs(new Blob([n]), t)
        }
    }
    class Pn extends un {
        performAction(e) {
            const t = e.getSandGame();
            if (null === t) return;
            const n = e.getToolManager().getPrimaryTool();
            n.isAreaModeEnabled() && n.applyArea(0, 0, t.getWidth(), t.getHeight(), t.graphics(), !1)
        }
    }
    class Fn extends sn {
        static #ea = Un.CLASS_OUTLINE_SECONDARY;
        static #ta = Un.CLASS_OUTLINE_INFO;
        static #na = Un.CLASS_OUTLINE_PRIMARY;
        static #ra = Un.CLASS_OUTLINE_SUCCESS;
        static COMPONENTS = [new Un("All materials", Fn.#ea, bn.ALL_MATERIALS), new Un("Tree spawn", Fn.#ea, bn.TREE_SPAWN_TEST), new Un("Tree grow", Fn.#ea, bn.treeGrowTest(0)), new Un("Tree grown", Fn.#ea, bn.treeGrowTest(-1)), new Un("Fill", Fn.#ea, new Pn), new Un("Benchmark", Fn.#na, new Nn), new Un("Screenshot", Fn.#na, new xn), new Un("Record (start/stop)", Fn.#na, new Bn), new Un("Chunks", Fn.#ta, un.createToggle(!1, ((e, t) => e.setShowActiveChunks(t)))), new Un("M/webgl", Fn.#ta, un.create((e => e.setRendererInitializer(Se.canvasWebGL())))), new Un("M/classic", Fn.#ta, un.create((e => e.setRendererInitializer(Se.canvas2d())))), new Un("M/heatmap", Fn.#ta, un.create((e => e.setRendererInitializer(Se.canvas2dHeatmap())))), new Un("M/type", Fn.#ta, un.create((e => e.setRendererInitializer(Se.canvas2dElementType())))), new Un("M/null", Fn.#ta, un.create((e => e.setRendererInitializer(Se.nullRenderer())))), new Un("Pixelated", Fn.#ta, un.createToggle(!0, ((e, t) => e.setCanvasImageRenderingStyle(t ? "pixelated" : "auto"))))];
        createNode(e) {
            let t = Z.div({
                    class: "test-tools"
                }, []),
                n = [...Fn.COMPONENTS];
            for (let e of q.TEST_TOOLS) {
                let t = un.create((t => t.getToolManager().setPrimaryTool(e)));
                n.push(new Un(e.getInfo().getDisplayName(), Fn.#ra, t))
            }
            for (let r of n) t.append(r.createNode(e));
            return t
        }
    }
    class Ln extends sn {
        #Xs;
        #sa;
        constructor(e, t) {
            super(), this.#Xs = e, this.#sa = t
        }
        createNode(e) {
            const t = Z.div({
                class: this.#Xs
            }, []);
            for (let n of this.#sa) null !== n && t.append(n.createNode(e));
            return t
        }
    }
    class _n extends sn {
        #aa;
        constructor(e) {
            super(), this.#aa = e
        }
        createNode(e) {
            return this.#aa
        }
    }
    var kn = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>';
    class Wn extends Un {
        constructor(e) {
            super("", e, un.create((e => {
                e.switchStartStop(), J.triggerFeatureUsed(J.FEATURE_PAUSE)
            })))
        }
        createNode(e) {
            const t = super.createNode(e);
            return Z.setContent(t, [Z.create(kn), "Start"]), e.addOnStarted((() => {
                Z.setContent(t, [Z.create('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n    <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>\n</svg>'), "Pause"])
            })), e.addOnStopped((() => {
                Z.setContent(t, [Z.create(kn), "Start"])
            })), t
        }
    }
    class Vn extends sn {
        #Jr;
        constructor(e = null) {
            super(), this.#Jr = e
        }
        createNode(e) {
            let t = "";
            const n = Z.span(""),
                r = [Z.span("Performance: ", {
                    class: "status-label"
                }), n],
                s = Z.div({
                    class: "btn-group"
                }, [Z.element("button", {
                    type: "button",
                    class: "btn btn-link dropdown-toggle",
                    "data-bs-toggle": "dropdown",
                    "aria-expanded": "false"
                }, r), Z.element("form", {
                    class: "dropdown-menu p-2"
                }, this.#ia(e))]);
            s.addEventListener("show.bs.dropdown", (function() {
                J.triggerFeatureUsed(J.FEATURE_STATUS_DISPLAYED)
            }));
            let a = (e, r) => {
                r !== t && (n.textContent = r.toUpperCase(), n.classList.remove("status-" + t), n.classList.add("status-" + r), t = r)
            };
            return e.addOnStopped((() => a(0, "stopped"))), e.addOnStarted((() => a(0, "started"))), e.addOnInitialized((t => {
                t.addOnRendered((() => {
                    const t = e.getSandGame().getIterationsPerSecond();
                    a(0, 0 !== t ? t > 105 ? "best" : t > 80 ? "good" : t > 50 ? "medium" : t > 40 ? "low" : "poor" : "stopped")
                }))
            })), s
        }
        #ia(e) {
            const t = Z.span(),
                n = Z.span();
            e.addOnInitialized((r => {
                r.addOnRendered((() => {
                    const r = e.getSandGame().getFramesPerSecond(),
                        s = e.getSandGame().getIterationsPerSecond();
                    n.textContent = "= " + r, t.textContent = "= " + s
                }))
            }));
            const r = Z.span(),
                s = () => {
                    const t = e.getCurrentWidthPoints(),
                        n = e.getCurrentHeightPoints();
                    r.textContent = `= ${t.toLocaleString()}${n.toLocaleString()} = ${(t*n).toLocaleString()}`
                };
            return e.addOnInitialized((() => {
                s()
            })), s(), [Z.span("Simulated elements"), Z.element("br"), r, Z.element("br"), Z.span("Simulation iterations /s"), Z.element("br"), t, Z.span(" (target: " + de.OPT_CYCLES_PER_SECOND + ")", {
                style: "color: lightgray;"
            }), Z.element("br"), Z.span("Rendered frames /s"), Z.element("br"), n, Z.span(" (target: " + de.OPT_FRAMES_PER_SECOND + ")", {
                style: "color: lightgray;"
            }), Z.element("br"), this.#Jr]
        }
    }
    class Gn extends un {
        performAction(e) {
            let t = Z.bootstrapDialogBuilder();
            t.setHeaderContent("Restart"), t.setBodyContent([Z.par(null, "Are you sure?")]), t.addSubmitButton("Restart", (() => {
                const t = e.getInitialScene();
                e.openScene(t), J.triggerFeatureUsed(J.FEATURE_RESTART_SCENE)
            })), t.addCloseButton("Close"), t.show(e.getDialogAnchor())
        }
    }
    class Yn extends Un {
        constructor(e) {
            super("", e, new Gn)
        }
        createNode(e) {
            const t = super.createNode(e);
            return Z.setContent(t, [Z.create('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">\r\n    <path fill-rule="evenodd" d="M8 3.5a4.5 4.5 0 104.546 2.914.5.5 0 011.454-.414A6 6 0 118 2z"/>\r\n    <path d="M8 6V0l5 3L8 6"/>\r\n</svg>'), "Restart"]), t
        }
    }
    class zn extends un {
        performAction(e) {
            let t = document.createElement("input");
            t.type = "file", t.onchange = t => {
                e.getIOManager().loadFromFiles(t.target.files)
            }, t.click()
        }
    }
    class Kn extends un {
        performAction(e) {
            const t = e.createSnapshot(),
                n = rn.createResourceFromSnapshot(t);
            Hn.saveAs(new Blob([n]), this.#oa()), J.triggerFeatureUsed(J.FEATURE_IO_EXPORT)
        }
        #oa() {
            return `sand-game-js_${(new Date).toISOString().slice(0,10)}.sgjs`
        }
    }
    class Xn extends un {
        #_;
        constructor(e) {
            super(), this.#_ = e
        }
        performAction(e) {
            let t = Z.bootstrapSimpleFormBuilder();
            t.addTextArea("Message", "message");
            let n = Z.bootstrapDialogBuilder();
            n.setHeaderContent("Report a problem"), n.setBodyContent(t.createNode()), n.addSubmitButton("Submit", (() => {
                let n = t.getData().message;
                "" !== n.trim() && this.#_("user", n, e)
            })), n.addCloseButton("Close"), n.show(e.getDialogAnchor())
        }
    }
    const qn = F._LIST,
        Jn = q._LIST;
    e.BrushDefs = F, e.Brushes = I, e.PredicateDefs = w, e.ToolDefs = q, e.Tools = K, e.brushes = qn, e.init = function(e, n) {
        let r;
        void 0 === n && (n = {});
        const {
            width: s,
            height: a,
            scale: i
        } = t.determineOptimalSizes(e), o = {
            scale: i,
            canvasWidthPx: s,
            canvasHeightPx: a,
            version: n.version
        }, l = !0 === n.debug, h = void 0 === n.autoStart || !0 === n.autoStart, c = !(!0 === n.disableRestart), d = !(!0 === n.disableStartStop), u = !(!0 === n.disableImport), m = !(!0 === n.disableExport), E = !(!0 === n.disableSizeChange), A = !(!0 === n.disableSceneSelection), g = void 0 !== n.errorReporter, p = n.errorReporter;
        let T, f, C, R, S, v;

        function w(e, t = null) {
            if ("string" == typeof e) {
                let n = q.byCodeName(e);
                if (null !== n) return n;
                if (l) throw "Tool not found: " + e;
                return t
            }
            if ("object" == typeof e && e instanceof M) return e;
            if (l) throw "Unexpected tool type";
            return t
        }
        if ("string" == typeof n.scene ? (f = n.scene, T = dn.SCENES[f]) : "object" == typeof n.scene ? (f = "n/a", T = new cn({
                name: "n/a",
                description: "n/a",
                apply: "function" == typeof n.scene.init ? e => n.scene.init(e, r) : () => {}
            })) : (f = l || Math.random() > .1 ? "landscape_1" : "landscape_2", T = dn.SCENES[f]), Array.isArray(n.tools)) {
            C = [];
            for (let e of n.tools) {
                let t = w(e, null);
                null !== t && C.push(t)
            }
        } else C = q.DEFAULT_TOOLS;
        void 0 !== n.primaryTool && null !== (R = w(n.primaryTool)) || (R = q.SAND), void 0 !== n.secondaryTool && null !== (S = w(n.secondaryTool)) || (S = q.ERASE), void 0 !== n.tertiaryTool && null !== (v = w(n.tertiaryTool)) || (v = q.METEOR);
        const O = Z.div({
            class: "sand-game-dialog-anchor sand-game-component"
        });
        document.body.prepend(O);
        const I = new Ve(R, S, v);
        r = new hn(o, O, I), void 0 !== p && r.addOnFailure(((e, t) => p(e, t, r)));
        const y = new Ln("sand-game-component", [new gn(C, u), new Sn, new Ln("sand-game-options", [new Ln("sand-game-options-left", [u ? new Un("Import", Un.CLASS_LIGHT, new zn) : null, m ? new Un("Export", Un.CLASS_LIGHT, new Kn) : null, c && !A ? new Yn(Un.CLASS_LIGHT) : null, d ? new Wn(Un.CLASS_LIGHT) : null, new Vn(E ? Z.element("span", null, [Z.element("br"), "Tip: adjust scale if needed"]) : null)]), new Ln("sand-game-options-right", [g ? new Un("Report a problem", Un.CLASS_LIGHT, new Xn(p)) : null])]), new Ln("sand-game-views", [E || A ? new Ln(null, [E ? new In : null, A ? new _n(Z.span("Scenes", {
            class: "scenes-label"
        })) : null, A ? new yn(r, dn.SCENES, f) : null]) : null, l ? new Fn : null])]).createNode(r);
        return e.innerHTML = "", e.append(y), r.setup(T), u && r.getIOManager().initFileDragAndDrop(y), r.enableGlobalShortcuts(), h && r.start(), J.triggerFeatureUsed(J.FEATURE_APP_INITIALIZED), r
    }, e.tools = Jn, Object.defineProperty(e, "__esModule", {
        value: !0
    })
}));
//# sourceMappingURL=sand-game-js.umd.min.js.map</script>